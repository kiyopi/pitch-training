import{S as he,i as me,s as de,d as Q,n as x,a as fe,D as le,b as p,K as h,z as v,f as ne,g as i,h as b,j as g,k as V,m as M,o as w,p as A,V as ve,e as U,O as ue,A as Z,l as O,t as G}from"./EvMzC0aQ.js";import{g as be}from"./D0QH3NT1.js";import"./DrEUfQCr.js";const{console:ge}=be,Y="src/lib/components/VolumeBar.svelte";function $(o){let e,s,l,C,c,a;const m={c:function(){e=w("div"),s=w("div"),l=w("div"),C=A(),c=w("div"),this.h()},l:function(n){e=g(n,"DIV",{class:!0});var r=V(e);s=g(r,"DIV",{class:!0,style:!0});var d=V(s);l=g(d,"DIV",{class:!0,style:!0}),V(l).forEach(p),d.forEach(p),C=M(r),c=g(r,"DIV",{class:!0,style:!0}),V(c).forEach(p),r.forEach(p),this.h()},h:function(){v(l,"class","volume-bar-fill"),h(l,"position","absolute"),h(l,"top","0"),h(l,"left","0"),h(l,"height","100%"),b(l,Y,52,4,1646),v(s,"class","volume-bar-bg"),h(s,"height",o[1]),h(s,"border-radius","9999px"),h(s,"background-color","#e2e8f0"),h(s,"position","relative"),h(s,"overflow","hidden"),b(s,Y,51,2,1500),v(c,"class","threshold-indicator svelte-13z7ppf"),h(c,"position","absolute"),h(c,"top","0"),h(c,"left",o[0]+"%"),h(c,"width","2px"),h(c,"height",o[1]),h(c,"background-color","#64748b"),h(c,"border-radius","1px"),b(c,Y,60,2,1825),v(e,"class",a="volume-bar-container "+o[2]+" svelte-13z7ppf"),b(e,Y,50,0,1451)},m:function(n,r){ne(n,e,r),i(e,s),i(s,l),o[5](l),i(e,C),i(e,c)},p:function(n,[r]){r&2&&h(s,"height",n[1]),r&1&&h(c,"left",n[0]+"%"),r&2&&h(c,"height",n[1]),r&4&&a!==(a="volume-bar-container "+n[2]+" svelte-13z7ppf")&&v(e,"class",a)},i:x,o:x,d:function(n){n&&p(e),o[5](null)}};return Q("SvelteRegisterBlock",{block:m,id:$.name,type:"component",source:"",ctx:o}),m}function we(o,e,s){let{$$slots:l={},$$scope:C}=e;fe("VolumeBar",l,[]);let{volume:c=0}=e,{threshold:a=30}=e,{height:m="12px"}=e,{className:u=""}=e,n;function r(t){return t<a?"#94a3b8":t<60?"#10b981":t<80?"#f59e0b":"#ef4444"}function d(t){if(n){const D=Math.max(0,Math.min(100,t)),k=r(D);(!window.volumeBarLastUpdate||Math.abs(window.volumeBarLastUpdate-D)>10)&&(console.log("VolumeBar更新:",D.toFixed(1),"%","color:",k),window.volumeBarLastUpdate=D),s(3,n.style.width=`${D}%`,n),s(3,n.style.backgroundColor=k,n)}}le(()=>{n&&(s(3,n.style.width="0%",n),s(3,n.style.backgroundColor="#94a3b8",n),s(3,n.style.height=m,n),s(3,n.style.borderRadius="9999px",n),s(3,n.style.transition="all 0.1s ease-out",n))});const I=["volume","threshold","height","className"];Object.keys(e).forEach(t=>{!~I.indexOf(t)&&t.slice(0,2)!=="$$"&&t!=="slot"&&ge.warn(`<VolumeBar> was created with unknown prop '${t}'`)});function j(t){ve[t?"unshift":"push"](()=>{n=t,s(3,n)})}return o.$$set=t=>{"volume"in t&&s(4,c=t.volume),"threshold"in t&&s(0,a=t.threshold),"height"in t&&s(1,m=t.height),"className"in t&&s(2,u=t.className)},o.$capture_state=()=>({onMount:le,volume:c,threshold:a,height:m,className:u,barElement:n,getVolumeColor:r,updateVolumeBar:d}),o.$inject_state=t=>{"volume"in t&&s(4,c=t.volume),"threshold"in t&&s(0,a=t.threshold),"height"in t&&s(1,m=t.height),"className"in t&&s(2,u=t.className),"barElement"in t&&s(3,n=t.barElement)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),o.$$.update=()=>{o.$$.dirty&16&&d(c)},[a,m,u,n,c,j]}class Ee extends he{constructor(e){super(e),me(this,e,we,$,de,{volume:4,threshold:0,height:1,className:2}),Q("SvelteRegisterComponent",{component:this,tagName:"VolumeBar",options:e,id:$.name})}get volume(){throw new Error("<VolumeBar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set volume(e){throw new Error("<VolumeBar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get threshold(){throw new Error("<VolumeBar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set threshold(e){throw new Error("<VolumeBar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get height(){throw new Error("<VolumeBar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set height(e){throw new Error("<VolumeBar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get className(){throw new Error("<VolumeBar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set className(e){throw new Error("<VolumeBar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const N="src/lib/components/PitchDisplay.svelte";function ee(o){let e,s,l="精度",C,c,a,m,u,n,r,d=se(o[3])+"",I,j,t,D=o[3]>0?"+":"",k,F=o[3].toFixed(1)+"",B,q;const H={c:function(){e=w("div"),s=w("div"),s.textContent=l,C=A(),c=w("div"),a=w("div"),m=A(),u=w("div"),n=A(),r=w("div"),I=G(d),j=A(),t=w("div"),k=G(D),B=G(F),q=G("%"),this.h()},l:function(y){e=g(y,"DIV",{class:!0});var f=V(e);s=g(f,"DIV",{class:!0,"data-svelte-h":!0}),Z(s)!=="svelte-4oi8f7"&&(s.textContent=l),C=M(f),c=g(f,"DIV",{class:!0});var z=V(c);a=g(z,"DIV",{class:!0,style:!0}),V(a).forEach(p),m=M(z),u=g(z,"DIV",{class:!0}),V(u).forEach(p),z.forEach(p),n=M(f),r=g(f,"DIV",{class:!0,style:!0});var L=V(r);I=O(L,d),L.forEach(p),j=M(f),t=g(f,"DIV",{class:!0});var R=V(t);k=O(R,D),B=O(R,F),q=O(R,"%"),R.forEach(p),f.forEach(p),this.h()},h:function(){v(s,"class","label svelte-17lpbmi"),b(s,N,70,6,1917),v(a,"class","accuracy-bar svelte-17lpbmi"),h(a,"background-color",J(o[3])),h(a,"width",Math.abs(o[3])+"%"),b(a,N,72,8,1996),v(u,"class","accuracy-center svelte-17lpbmi"),b(u,N,73,8,2122),v(c,"class","accuracy-bar-container svelte-17lpbmi"),b(c,N,71,6,1951),v(r,"class","accuracy-text svelte-17lpbmi"),h(r,"color",J(o[3])),b(r,N,75,6,2177),v(t,"class","accuracy-value svelte-17lpbmi"),b(t,N,78,6,2307),v(e,"class","accuracy-display svelte-17lpbmi"),b(e,N,69,4,1880)},m:function(y,f){ne(y,e,f),i(e,s),i(e,C),i(e,c),i(c,a),i(c,m),i(c,u),i(e,n),i(e,r),i(r,I),i(e,j),i(e,t),i(t,k),i(t,B),i(t,q)},p:function(y,f){f&8&&h(a,"background-color",J(y[3])),f&8&&h(a,"width",Math.abs(y[3])+"%"),f&8&&d!==(d=se(y[3])+"")&&U(I,d),f&8&&h(r,"color",J(y[3])),f&8&&D!==(D=y[3]>0?"+":"")&&U(k,D),f&8&&F!==(F=y[3].toFixed(1)+"")&&U(B,F)},d:function(y){y&&p(e)}};return Q("SvelteRegisterBlock",{block:H,id:ee.name,type:"if",source:"(69:2) {#if isDetecting && currentNote}",ctx:o}),H}function te(o){let e,s,l,C="目標音程",c,a,m=o[6](o[1])+"",u,n,r,d,I="現在の音程",j,t,D=(o[4]&&o[6](o[2])||"---")+"",k,F,B,q,H="周波数",S,y,f=oe(o[0])+"",z,L,R,P=o[4]&&o[2]&&ee(o);const ce={c:function(){e=w("div"),s=w("div"),l=w("div"),l.textContent=C,c=A(),a=w("div"),u=G(m),n=A(),r=w("div"),d=w("div"),d.textContent=I,j=A(),t=w("div"),k=G(D),F=A(),B=w("div"),q=w("div"),q.textContent=H,S=A(),y=w("div"),z=G(f),L=A(),P&&P.c(),this.h()},l:function(_){e=g(_,"DIV",{class:!0});var E=V(e);s=g(E,"DIV",{class:!0});var T=V(s);l=g(T,"DIV",{class:!0,"data-svelte-h":!0}),Z(l)!=="svelte-101q5wq"&&(l.textContent=C),c=M(T),a=g(T,"DIV",{class:!0});var re=V(a);u=O(re,m),re.forEach(p),T.forEach(p),n=M(E),r=g(E,"DIV",{class:!0});var W=V(r);d=g(W,"DIV",{class:!0,"data-svelte-h":!0}),Z(d)!=="svelte-1p184h3"&&(d.textContent=I),j=M(W),t=g(W,"DIV",{class:!0});var ie=V(t);k=O(ie,D),ie.forEach(p),W.forEach(p),F=M(E),B=g(E,"DIV",{class:!0});var X=V(B);q=g(X,"DIV",{class:!0,"data-svelte-h":!0}),Z(q)!=="svelte-1iigar3"&&(q.textContent=H),S=M(X),y=g(X,"DIV",{class:!0});var ae=V(y);z=O(ae,f),ae.forEach(p),X.forEach(p),L=M(E),P&&P.l(E),E.forEach(p),this.h()},h:function(){v(l,"class","label svelte-17lpbmi"),b(l,N,49,4,1306),v(a,"class","note-name target svelte-17lpbmi"),b(a,N,50,4,1340),v(s,"class","target-note svelte-17lpbmi"),b(s,N,48,2,1276),v(d,"class","label svelte-17lpbmi"),b(d,N,55,4,1469),v(t,"class","note-name current svelte-17lpbmi"),ue(t,"detecting",o[4]),b(t,N,56,4,1504),v(r,"class","current-note svelte-17lpbmi"),b(r,N,54,2,1438),v(q,"class","label svelte-17lpbmi"),b(q,N,63,4,1711),v(y,"class","frequency-value svelte-17lpbmi"),b(y,N,64,4,1744),v(B,"class","frequency-display svelte-17lpbmi"),b(B,N,62,2,1675),v(e,"class",R="pitch-display "+o[5]+" svelte-17lpbmi"),b(e,N,46,0,1216)},m:function(_,E){ne(_,e,E),i(e,s),i(s,l),i(s,c),i(s,a),i(a,u),i(e,n),i(e,r),i(r,d),i(r,j),i(r,t),i(t,k),i(e,F),i(e,B),i(B,q),i(B,S),i(B,y),i(y,z),i(e,L),P&&P.m(e,null)},p:function(_,[E]){E&2&&m!==(m=_[6](_[1])+"")&&U(u,m),E&20&&D!==(D=(_[4]&&_[6](_[2])||"---")+"")&&U(k,D),E&16&&ue(t,"detecting",_[4]),E&1&&f!==(f=oe(_[0])+"")&&U(z,f),_[4]&&_[2]?P?P.p(_,E):(P=ee(_),P.c(),P.m(e,null)):P&&(P.d(1),P=null),E&32&&R!==(R="pitch-display "+_[5]+" svelte-17lpbmi")&&v(e,"class",R)},i:x,o:x,d:function(_){_&&p(e),P&&P.d()}};return Q("SvelteRegisterBlock",{block:ce,id:te.name,type:"component",source:"",ctx:o}),ce}function J(o){const e=Math.abs(o);return e<=10?"#10b981":e<=25?"#f59e0b":"#ef4444"}function se(o){const e=Math.abs(o);return e<=10?"素晴らしい！":e<=25?"もう少し！":"調整が必要"}function oe(o){return o>0?`${o.toFixed(1)} Hz`:"--.- Hz"}function ye(o,e,s){let{$$slots:l={},$$scope:C}=e;fe("PitchDisplay",l,[]);let{frequency:c=0}=e,{targetNote:a="C"}=e,{currentNote:m=""}=e,{accuracy:u=0}=e,{isDetecting:n=!1}=e,{className:r=""}=e;const d={C:"ド","C#":"ド#",Db:"レ♭",D:"レ","D#":"レ#",Eb:"ミ♭",E:"ミ",F:"ファ","F#":"ファ#",Gb:"ソ♭",G:"ソ","G#":"ソ#",Ab:"ラ♭",A:"ラ","A#":"ラ#",Bb:"シ♭",B:"シ"};function I(t){return d[t]||t}const j=["frequency","targetNote","currentNote","accuracy","isDetecting","className"];return Object.keys(e).forEach(t=>{!~j.indexOf(t)&&t.slice(0,2)!=="$$"&&t!=="slot"&&console.warn(`<PitchDisplay> was created with unknown prop '${t}'`)}),o.$$set=t=>{"frequency"in t&&s(0,c=t.frequency),"targetNote"in t&&s(1,a=t.targetNote),"currentNote"in t&&s(2,m=t.currentNote),"accuracy"in t&&s(3,u=t.accuracy),"isDetecting"in t&&s(4,n=t.isDetecting),"className"in t&&s(5,r=t.className)},o.$capture_state=()=>({frequency:c,targetNote:a,currentNote:m,accuracy:u,isDetecting:n,className:r,noteNames:d,getAccuracyColor:J,getAccuracyMessage:se,formatFrequency:oe,formatNoteName:I}),o.$inject_state=t=>{"frequency"in t&&s(0,c=t.frequency),"targetNote"in t&&s(1,a=t.targetNote),"currentNote"in t&&s(2,m=t.currentNote),"accuracy"in t&&s(3,u=t.accuracy),"isDetecting"in t&&s(4,n=t.isDetecting),"className"in t&&s(5,r=t.className)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),[c,a,m,u,n,r,I]}class Ne extends he{constructor(e){super(e),me(this,e,ye,te,de,{frequency:0,targetNote:1,currentNote:2,accuracy:3,isDetecting:4,className:5}),Q("SvelteRegisterComponent",{component:this,tagName:"PitchDisplay",options:e,id:te.name})}get frequency(){throw new Error("<PitchDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set frequency(e){throw new Error("<PitchDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get targetNote(){throw new Error("<PitchDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set targetNote(e){throw new Error("<PitchDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get currentNote(){throw new Error("<PitchDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set currentNote(e){throw new Error("<PitchDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get accuracy(){throw new Error("<PitchDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set accuracy(e){throw new Error("<PitchDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get isDetecting(){throw new Error("<PitchDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set isDetecting(e){throw new Error("<PitchDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get className(){throw new Error("<PitchDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set className(e){throw new Error("<PitchDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{Ne as P,Ee as V};
