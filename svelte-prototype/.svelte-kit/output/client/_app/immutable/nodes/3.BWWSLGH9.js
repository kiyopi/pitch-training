import{S as He,i as je,d as x,s as Le,v as Ge,c as We,a as Te,D as me,b as c,q as ie,r as Y,u as ee,f as j,w as re,E as Je,m as R,x as ae,p as N,y as ce,g as r,z as a,h as v,j as g,k,B as oe,A as U,o as y,C as le,F as Oe,G as Ze,l as K,t as Q,H as Ve,e as he,I as $e}from"../chunks/p0IT90XR.js";import"../chunks/B0HqwU-P.js";import{p as _e}from"../chunks/VN_zYU52.js";import{P as Se,B as qe,C as pe}from"../chunks/cNaTqdNa.js";const m="src/routes/microphone-test/+page.svelte";function ge(i){let e,t,l,o="音量レベル",n,s,f,_,b,h,d=Math.round(i[3])+"",w,F,I,D,H,q,p,E="音程検出",u,C,M,J=i[4].toFixed(1)+"",X,L,$,V,O,G,W,Z,T,P=!i[1]&&ye(i),S=!i[2]&&we(i),A=i[1]&&!i[2]&&ke(i);const Ee={c:function(){e=y("div"),t=y("div"),l=y("h3"),l.textContent=o,n=N(),s=y("div"),f=y("div"),_=y("div"),b=N(),h=y("span"),w=Q(d),F=Q("%"),I=N(),D=y("div"),P&&P.c(),H=N(),q=y("div"),p=y("h3"),p.textContent=E,u=N(),C=y("div"),M=y("div"),X=Q(J),L=Q(" Hz"),$=N(),V=y("div"),O=Q(i[5]),G=N(),W=y("div"),S&&S.c(),Z=N(),A&&A.c(),T=$e(),this.h()},l:function(B){e=g(B,"DIV",{class:!0});var z=k(e);t=g(z,"DIV",{class:!0});var te=k(t);l=g(te,"H3",{class:!0,"data-svelte-h":!0}),U(l)!=="svelte-1nc8gri"&&(l.textContent=o),n=R(te),s=g(te,"DIV",{class:!0});var ue=k(s);f=g(ue,"DIV",{class:!0});var De=k(f);_=g(De,"DIV",{class:!0,style:!0}),k(_).forEach(c),De.forEach(c),b=R(ue),h=g(ue,"SPAN",{class:!0});var de=k(h);w=K(de,d),F=K(de,"%"),de.forEach(c),ue.forEach(c),I=R(te),D=g(te,"DIV",{class:!0});var Ce=k(D);P&&P.l(Ce),Ce.forEach(c),te.forEach(c),H=R(z),q=g(z,"DIV",{class:!0});var ne=k(q);p=g(ne,"H3",{class:!0,"data-svelte-h":!0}),U(p)!=="svelte-1ofzoy2"&&(p.textContent=E),u=R(ne),C=g(ne,"DIV",{class:!0});var fe=k(C);M=g(fe,"DIV",{class:!0});var ve=k(M);X=K(ve,J),L=K(ve," Hz"),ve.forEach(c),$=R(fe),V=g(fe,"DIV",{class:!0});var Be=k(V);O=K(Be,i[5]),Be.forEach(c),fe.forEach(c),G=R(ne),W=g(ne,"DIV",{class:!0});var Ie=k(W);S&&S.l(Ie),Ie.forEach(c),ne.forEach(c),z.forEach(c),Z=R(B),A&&A.l(B),T=$e(),this.h()},h:function(){a(l,"class","display-title svelte-14qwe2r"),v(l,m,151,16,4342),a(_,"class","volume-fill svelte-14qwe2r"),Ve(_,"width",i[3]+"%"),v(_,m,154,20,4493),a(f,"class","volume-bar svelte-14qwe2r"),v(f,m,153,18,4448),a(h,"class","volume-text svelte-14qwe2r"),v(h,m,156,18,4600),a(s,"class","volume-bar-container svelte-14qwe2r"),v(s,m,152,16,4395),a(D,"class","volume-status svelte-14qwe2r"),v(D,m,158,16,4701),a(t,"class","volume-section svelte-14qwe2r"),v(t,m,150,14,4297),a(p,"class","display-title svelte-14qwe2r"),v(p,m,167,16,5007),a(M,"class","frequency-value svelte-14qwe2r"),v(M,m,169,18,5109),a(V,"class","note-value svelte-14qwe2r"),v(V,m,170,18,5195),a(C,"class","frequency-display svelte-14qwe2r"),v(C,m,168,16,5059),a(W,"class","frequency-status svelte-14qwe2r"),v(W,m,172,16,5278),a(q,"class","frequency-section"),v(q,m,166,14,4959),a(e,"class","realtime-display svelte-14qwe2r"),v(e,m,148,12,4223)},m:function(B,z){j(B,e,z),r(e,t),r(t,l),r(t,n),r(t,s),r(s,f),r(f,_),r(s,b),r(s,h),r(h,w),r(h,F),r(t,I),r(t,D),P&&P.m(D,null),r(e,H),r(e,q),r(q,p),r(q,u),r(q,C),r(C,M),r(M,X),r(M,L),r(C,$),r(C,V),r(V,O),r(q,G),r(q,W),S&&S.m(W,null),j(B,Z,z),A&&A.m(B,z),j(B,T,z)},p:function(B,z){z&8&&Ve(_,"width",B[3]+"%"),z&8&&d!==(d=Math.round(B[3])+"")&&he(w,d),B[1]?P&&(P.d(1),P=null):P||(P=ye(B),P.c(),P.m(D,null)),z&16&&J!==(J=B[4].toFixed(1)+"")&&he(X,J),z&32&&he(O,B[5]),B[2]?S&&(S.d(1),S=null):S||(S=we(B),S.c(),S.m(W,null)),B[1]&&!B[2]?A||(A=ke(B),A.c(),A.m(T.parentNode,T)):A&&(A.d(1),A=null)},d:function(B){B&&(c(e),c(Z),c(T)),P&&P.d(),S&&S.d(),A&&A.d(B)}};return x("SvelteRegisterBlock",{block:Ee,id:ge.name,type:"if",source:"(148:10) {#if micPermission === 'granted'}",ctx:i}),Ee}function ye(i){let e,t="⏳ 声を出して音量を確認してください";const l={c:function(){e=y("span"),e.textContent=t,this.h()},l:function(n){e=g(n,"SPAN",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-7eexnn"&&(e.textContent=t),this.h()},h:function(){a(e,"class","status-pending svelte-14qwe2r"),v(e,m,160,20,4789)},m:function(n,s){j(n,e,s)},d:function(n){n&&c(e)}};return x("SvelteRegisterBlock",{block:l,id:ye.name,type:"if",source:"(160:18) {#if !volumeDetected}",ctx:i}),l}function we(i){let e,t="⏳ 「ド」を発声して音程を確認してください";const l={c:function(){e=y("span"),e.textContent=t,this.h()},l:function(n){e=g(n,"SPAN",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-lvftl7"&&(e.textContent=t),this.h()},h:function(){a(e,"class","status-pending svelte-14qwe2r"),v(e,m,174,20,5372)},m:function(n,s){j(n,e,s)},d:function(n){n&&c(e)}};return x("SvelteRegisterBlock",{block:l,id:we.name,type:"if",source:"(174:18) {#if !frequencyDetected}",ctx:i}),l}function ke(i){let e,t,l,o="「ド」を発声してください",n,s,f="任意の高さで「ドー」と歌うように発声してください";const _={c:function(){e=y("div"),t=y("div"),l=y("h3"),l.textContent=o,n=N(),s=y("p"),s.textContent=f,this.h()},l:function(h){e=g(h,"DIV",{class:!0});var d=k(e);t=g(d,"DIV",{class:!0});var w=k(t);l=g(w,"H3",{class:!0,"data-svelte-h":!0}),U(l)!=="svelte-xe90gt"&&(l.textContent=o),n=R(w),s=g(w,"P",{class:!0,"data-svelte-h":!0}),U(s)!=="svelte-1rtajtc"&&(s.textContent=f),w.forEach(c),d.forEach(c),this.h()},h:function(){a(l,"class","svelte-14qwe2r"),v(l,m,184,18,5702),a(s,"class","svelte-14qwe2r"),v(s,m,185,18,5742),a(t,"class","guidance-content svelte-14qwe2r"),v(t,m,183,16,5653),a(e,"class","guidance svelte-14qwe2r"),v(e,m,182,14,5614)},m:function(h,d){j(h,e,d),r(e,t),r(t,l),r(t,n),r(t,s)},d:function(h){h&&c(e)}};return x("SvelteRegisterBlock",{block:_,id:ke.name,type:"if",source:"(182:12) {#if volumeDetected && !frequencyDetected}",ctx:i}),_}function Me(i){let e,t=i[0]==="granted"&&ge(i);const l={c:function(){e=y("div"),t&&t.c(),this.h()},l:function(n){e=g(n,"DIV",{class:!0});var s=k(e);t&&t.l(s),s.forEach(c),this.h()},h:function(){a(e,"class","mic-test-content svelte-14qwe2r"),v(e,m,144,8,4107)},m:function(n,s){j(n,e,s),t&&t.m(e,null)},p:function(n,s){n[0]==="granted"?t?t.p(n,s):(t=ge(n),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},d:function(n){n&&c(e),t&&t.d()}};return x("SvelteRegisterBlock",{block:l,id:Me.name,type:"slot",source:'(144:6) <Card variant=\\"default\\" padding=\\"lg\\">',ctx:i}),l}function Re(i){let e,t;e=new qe({props:{variant:"disabled",size:"lg",fullWidth:!0,disabled:!0,$$slots:{default:[Ae]},$$scope:{ctx:i}},$$inline:!0});const l={c:function(){ce(e.$$.fragment)},l:function(n){ae(e.$$.fragment,n)},m:function(n,s){re(e,n,s),t=!0},p:function(n,s){const f={};s&16384&&(f.$$scope={dirty:s,ctx:n}),e.$set(f)},i:function(n){t||(ee(e.$$.fragment,n),t=!0)},o:function(n){Y(e.$$.fragment,n),t=!1},d:function(n){ie(e,n)}};return x("SvelteRegisterBlock",{block:l,id:Re.name,type:"else",source:"(213:10) {:else}",ctx:i}),l}function Ne(i){let e,t;e=new qe({props:{href:i[7].path,variant:"primary",size:"lg",fullWidth:!0,$$slots:{default:[Fe]},$$scope:{ctx:i}},$$inline:!0});const l={c:function(){ce(e.$$.fragment)},l:function(n){ae(e.$$.fragment,n)},m:function(n,s){re(e,n,s),t=!0},p:function(n,s){const f={};s&16384&&(f.$$scope={dirty:s,ctx:n}),e.$set(f)},i:function(n){t||(ee(e.$$.fragment,n),t=!0)},o:function(n){Y(e.$$.fragment,n),t=!1},d:function(n){ie(e,n)}};return x("SvelteRegisterBlock",{block:l,id:Ne.name,type:"if",source:"(204:10) {#if startButtonEnabled}",ctx:i}),l}function Ae(i){let e;const t={c:function(){e=Q("マイクテスト完了後に開始")},l:function(o){e=K(o,"マイクテスト完了後に開始")},m:function(o,n){j(o,e,n)},d:function(o){o&&c(e)}};return x("SvelteRegisterBlock",{block:t,id:Ae.name,type:"slot",source:'(214:12) <Button                variant=\\"disabled\\"                size=\\"lg\\"                fullWidth                disabled             >',ctx:i}),t}function Fe(i){let e;const t={c:function(){e=Q("トレーニング開始")},l:function(o){e=K(o,"トレーニング開始")},m:function(o,n){j(o,e,n)},d:function(o){o&&c(e)}};return x("SvelteRegisterBlock",{block:t,id:Fe.name,type:"slot",source:'(205:12) <Button                href={selectedMode.path}                variant=\\"primary\\"                size=\\"lg\\"                fullWidth             >',ctx:i}),t}function ze(i){let e,t,l=i[7].name+"",o,n,s,f=i[7].description+"",_,b,h,d,w;const F=[Ne,Re],I=[];function D(q,p){return q[6]?0:1}h=D(i),d=I[h]=F[h](i);const H={c:function(){e=y("div"),t=y("h3"),o=Q(l),n=N(),s=y("p"),_=Q(f),b=N(),d.c(),this.h()},l:function(p){e=g(p,"DIV",{class:!0});var E=k(e);t=g(E,"H3",{class:!0});var u=k(t);o=K(u,l),u.forEach(c),n=R(E),s=g(E,"P",{class:!0});var C=k(s);_=K(C,f),C.forEach(c),b=R(E),d.l(E),E.forEach(c),this.h()},h:function(){a(t,"class","start-title svelte-14qwe2r"),v(t,m,198,10,6036),a(s,"class","start-description svelte-14qwe2r"),v(s,m,199,10,6095),a(e,"class","start-content svelte-14qwe2r"),v(e,m,197,8,5998)},m:function(p,E){j(p,e,E),r(e,t),r(t,o),r(e,n),r(e,s),r(s,_),r(e,b),I[h].m(e,null),w=!0},p:function(p,E){let u=h;h=D(p),h===u?I[h].p(p,E):(Oe(),Y(I[u],1,1,()=>{I[u]=null}),Ze(),d=I[h],d?d.p(p,E):(d=I[h]=F[h](p),d.c()),ee(d,1),d.m(e,null))},i:function(p){w||(ee(d),w=!0)},o:function(p){Y(d),w=!1},d:function(p){p&&c(e),I[h].d()}};return x("SvelteRegisterBlock",{block:H,id:ze.name,type:"slot",source:'(197:6) <Card variant=\\"default\\" padding=\\"lg\\">',ctx:i}),H}function xe(i){let e,t,l,o,n,s,f,_,b,h,d,w,F="マイクテスト",I,D,H="音感トレーニングを始める前に、マイクの動作を確認します",q,p,E,u,C,M,J;E=new pe({props:{variant:"default",padding:"lg",$$slots:{default:[Me]},$$scope:{ctx:i}},$$inline:!0}),M=new pe({props:{variant:"default",padding:"lg",$$slots:{default:[ze]},$$scope:{ctx:i}},$$inline:!0});const X={c:function(){e=y("div"),t=y("div"),l=y("div"),o=y("div"),n=le("svg"),s=le("path"),f=le("path"),_=le("line"),b=le("line"),h=N(),d=y("div"),w=y("h1"),w.textContent=F,I=N(),D=y("p"),D.textContent=H,q=N(),p=y("div"),ce(E.$$.fragment),u=N(),C=y("div"),ce(M.$$.fragment),this.h()},l:function($){e=g($,"DIV",{class:!0});var V=k(e);t=g(V,"DIV",{class:!0});var O=k(t);l=g(O,"DIV",{class:!0});var G=k(l);o=g(G,"DIV",{class:!0});var W=k(o);n=oe(W,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var Z=k(n);s=oe(Z,"path",{d:!0}),k(s).forEach(c),f=oe(Z,"path",{d:!0}),k(f).forEach(c),_=oe(Z,"line",{x1:!0,x2:!0,y1:!0,y2:!0}),k(_).forEach(c),b=oe(Z,"line",{x1:!0,x2:!0,y1:!0,y2:!0}),k(b).forEach(c),Z.forEach(c),W.forEach(c),h=R(G),d=g(G,"DIV",{});var T=k(d);w=g(T,"H1",{class:!0,"data-svelte-h":!0}),U(w)!=="svelte-z7m4lk"&&(w.textContent=F),I=R(T),D=g(T,"P",{class:!0,"data-svelte-h":!0}),U(D)!=="svelte-1vtv92f"&&(D.textContent=H),T.forEach(c),G.forEach(c),O.forEach(c),q=R(V),p=g(V,"DIV",{class:!0});var P=k(p);ae(E.$$.fragment,P),P.forEach(c),u=R(V),C=g(V,"DIV",{class:!0});var S=k(C);ae(M.$$.fragment,S),S.forEach(c),V.forEach(c),this.h()},h:function(){a(s,"d","M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"),v(s,m,128,12,3571),a(f,"d","M19 10v2a7 7 0 0 1-14 0v-2"),v(f,m,129,12,3648),a(_,"x1","12"),a(_,"x2","12"),a(_,"y1","19"),a(_,"y2","22"),v(_,m,130,12,3699),a(b,"x1","8"),a(b,"x2","16"),a(b,"y1","22"),a(b,"y2","22"),v(b,m,131,12,3751),a(n,"width","48"),a(n,"height","48"),a(n,"viewBox","0 0 24 24"),a(n,"fill","none"),a(n,"stroke","currentColor"),a(n,"stroke-width","2"),v(n,m,127,10,3459),a(o,"class","mic-icon svelte-14qwe2r"),v(o,m,126,8,3426),a(w,"class","mic-test-title svelte-14qwe2r"),v(w,m,135,10,3846),a(D,"class","mic-test-description svelte-14qwe2r"),v(D,m,136,10,3895),v(d,m,134,8,3830),a(l,"class","mic-test-header svelte-14qwe2r"),v(l,m,125,6,3388),a(t,"class","header svelte-14qwe2r"),v(t,m,124,4,3361),a(p,"class","test-section"),v(p,m,142,4,4028),a(C,"class","start-section"),v(C,m,195,4,5918),a(e,"class","microphone-test svelte-14qwe2r"),v(e,m,122,2,3309)},m:function($,V){j($,e,V),r(e,t),r(t,l),r(l,o),r(o,n),r(n,s),r(n,f),r(n,_),r(n,b),r(l,h),r(l,d),r(d,w),r(d,I),r(d,D),r(e,q),r(e,p),re(E,p,null),r(e,u),r(e,C),re(M,C,null),J=!0},p:function($,V){const O={};V&16447&&(O.$$scope={dirty:V,ctx:$}),E.$set(O);const G={};V&16448&&(G.$$scope={dirty:V,ctx:$}),M.$set(G)},i:function($){J||(ee(E.$$.fragment,$),ee(M.$$.fragment,$),J=!0)},o:function($){Y(E.$$.fragment,$),Y(M.$$.fragment,$),J=!1},d:function($){$&&c(e),ie(E),ie(M)}};return x("SvelteRegisterBlock",{block:X,id:xe.name,type:"slot",source:"(122:0) <PageLayout showBackButton={true}>",ctx:i}),X}function be(i){let e,t,l;t=new Se({props:{showBackButton:!0,$$slots:{default:[xe]},$$scope:{ctx:i}},$$inline:!0});const o={c:function(){e=N(),ce(t.$$.fragment),this.h()},l:function(s){Je("svelte-8st1fo",document.head).forEach(c),e=R(s),ae(t.$$.fragment,s),this.h()},h:function(){document.title="マイクテスト - 相対音感トレーニング"},m:function(s,f){j(s,e,f),re(t,s,f),l=!0},p:function(s,[f]){const _={};f&16511&&(_.$$scope={dirty:f,ctx:s}),t.$set(_)},i:function(s){l||(ee(t.$$.fragment,s),l=!0)},o:function(s){Y(t.$$.fragment,s),l=!1},d:function(s){s&&c(e),ie(t,s)}};return x("SvelteRegisterBlock",{block:o,id:be.name,type:"component",source:"",ctx:i}),o}function Pe(i){if(i<=0)return"C4（ド4）";const t=Math.round(12*Math.log2(i/440)),l=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],o=((t+9)%12+12)%12,n=Math.floor((t+9)/12)+4,s=l[o];return`${s}${n}（${{C:"ド","C#":"ド#",D:"レ","D#":"レ#",E:"ミ",F:"ファ","F#":"ファ#",G:"ソ","G#":"ソ#",A:"ラ","A#":"ラ#",B:"シ"}[s]}${n}）`}function Ke(i,e,t){let l,o;Ge(_e,"page"),We(i,_e,u=>t(10,o=u));let{$$slots:n={},$$scope:s}=e;Te("Page",n,[]);let f="random";me(()=>{o.url.searchParams.has("mode")&&(f=o.url.searchParams.get("mode")||"random")});let _="pending",b=!1,h=!1,d=0,w=0,F="",I=!1;const D={random:{name:"ランダム基音モード",description:"10種類の基音からランダムに選択してトレーニング",color:"green",path:"./training/random"},continuous:{name:"連続チャレンジモード",description:"選択した回数だけ連続で実行し、総合評価を確認",color:"orange",path:"./training/continuous"},chromatic:{name:"12音階モード",description:"クロマチックスケールの上行・下行で完全制覇",color:"purple",path:"./training/chromatic"}},H=D[f]||D.random;function q(){t(0,_="pending"),setTimeout(()=>{t(0,_="granted"),p()},1e3)}function p(){if(_!=="granted")return;I=!0;const u=setInterval(()=>{if(!I){clearInterval(u);return}t(3,d=Math.random()*100),d>20&&t(1,b=!0);const C=[130.81,146.83,164.81,174.61,196,220,246.94,261.63,293.66,329.63];t(4,w=C[Math.floor(Math.random()*C.length)]),t(5,F=Pe(w)),w>0&&t(2,h=!0)},200)}me(()=>{setTimeout(()=>{q()},500)});const E=[];return Object.keys(e).forEach(u=>{!~E.indexOf(u)&&u.slice(0,2)!=="$$"&&u!=="slot"&&console.warn(`<Page> was created with unknown prop '${u}'`)}),i.$capture_state=()=>({onMount:me,page:_e,Card:pe,Button:qe,PageLayout:Se,mode:f,micPermission:_,volumeDetected:b,frequencyDetected:h,currentVolume:d,currentFrequency:w,currentNote:F,isListening:I,trainingModes:D,selectedMode:H,frequencyToNote:Pe,requestMicrophone:q,startListening:p,startButtonEnabled:l,$page:o}),i.$inject_state=u=>{"mode"in u&&(f=u.mode),"micPermission"in u&&t(0,_=u.micPermission),"volumeDetected"in u&&t(1,b=u.volumeDetected),"frequencyDetected"in u&&t(2,h=u.frequencyDetected),"currentVolume"in u&&t(3,d=u.currentVolume),"currentFrequency"in u&&t(4,w=u.currentFrequency),"currentNote"in u&&t(5,F=u.currentNote),"isListening"in u&&(I=u.isListening),"startButtonEnabled"in u&&t(6,l=u.startButtonEnabled)},e&&"$$inject"in e&&i.$inject_state(e.$$inject),i.$$.update=()=>{i.$$.dirty&7&&t(6,l=_==="granted"&&b&&h)},[_,b,h,d,w,F,l,H]}class et extends He{constructor(e){super(e),je(this,e,Ke,be,Le,{}),x("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:be.name})}}export{et as component};
