import{S as A,i as B,s as O,d as _,C as P,m as D,o as I,b as M,D as R,H as F,h as T,E as q,k as y,F as z,L as G,p as K,q as N,c as f,y as p,e as m,f as E,G as $,j as h,n as g,A as U}from"../chunks/CJUHymq1.js";import"../chunks/IHki7fMi.js";import{g as j,b as H}from"../chunks/Cn0DBND1.js";import{P as J}from"../chunks/DqnuPPYK.js";import{T as Q}from"../chunks/C-zpCPee.js";const W=!1,de=Object.freeze(Object.defineProperty({__proto__:null,ssr:W},Symbol.toStringTag,{value:"Module"}));function X(c){let e,t='<div class="loading-spinner svelte-vlc3kv">🎲</div> <p>読み込み中...</p>';return{c(){e=h("div"),e.innerHTML=t,this.h()},l(n){e=m(n,"DIV",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-nbzky0"&&(e.innerHTML=t),this.h()},h(){p(e,"class","loading-placeholder svelte-vlc3kv")},m(n,l){M(n,e,l)},p:g,i:g,o:g,d(n){n&&_(e)}}}function Y(c){let e,t;return e=new Q({props:{mode:"random",autoPlay:!1,sessionCount:8,useLocalStorage:!0,sessionKey:"random-training-progress",onMicrophoneError:c[2],onStorageError:ne,onSessionComplete:oe,onAllComplete:se}}),{c(){z(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,l){R(e,n,l),t=!0},p:g,i(n){t||(I(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){P(e,n)}}}function Z(c){let e,t,n,l="⚠️",s,o,r,C="マイクテストが必要です",u,v,a="トレーニングを開始する前に、マイクの動作確認を行ってください。",i,d,L="マイクテストを開始",w,V;return{c(){e=h("div"),t=h("div"),n=h("div"),n.textContent=l,s=y(),o=h("div"),r=h("h3"),r.textContent=C,u=y(),v=h("p"),v.textContent=a,i=y(),d=h("button"),d.textContent=L,this.h()},l(b){e=m(b,"DIV",{class:!0});var x=E(e);t=m(x,"DIV",{class:!0});var S=E(t);n=m(S,"DIV",{class:!0,"data-svelte-h":!0}),$(n)!=="svelte-dwi5dc"&&(n.textContent=l),s=T(S),o=m(S,"DIV",{class:!0});var k=E(o);r=m(k,"H3",{class:!0,"data-svelte-h":!0}),$(r)!=="svelte-17kvze2"&&(r.textContent=C),u=T(k),v=m(k,"P",{class:!0,"data-svelte-h":!0}),$(v)!=="svelte-1fktfmj"&&(v.textContent=a),i=T(k),d=m(k,"BUTTON",{class:!0,"data-svelte-h":!0}),$(d)!=="svelte-o2l4j9"&&(d.textContent=L),k.forEach(_),S.forEach(_),x.forEach(_),this.h()},h(){p(n,"class","warning-icon svelte-vlc3kv"),p(r,"class","svelte-vlc3kv"),p(v,"class","svelte-vlc3kv"),p(d,"class","mic-test-button svelte-vlc3kv"),p(o,"class","warning-content svelte-vlc3kv"),p(t,"class","warning-card svelte-vlc3kv"),p(e,"class","mic-test-required svelte-vlc3kv")},m(b,x){M(b,e,x),f(e,t),f(t,n),f(t,s),f(t,o),f(o,r),f(o,u),f(o,v),f(o,i),f(o,d),w||(V=U(d,"click",c[3]),w=!0)},p:g,i:g,o:g,d(b){b&&_(e),w=!1,V()}}}function ee(c){let e,t,n='<h1 class="page-title svelte-vlc3kv">🎲 ランダム基音トレーニング</h1> <p class="page-description svelte-vlc3kv">10種類の基音からランダムに選択して、8音階の相対音感を鍛えます</p>',l,s,o,r;const C=[Z,Y,X],u=[];function v(a,i){return a[1]&&!a[0]?0:a[1]&&a[0]?1:a[1]?-1:2}return~(s=v(c))&&(o=u[s]=C[s](c)),{c(){e=h("div"),t=h("div"),t.innerHTML=n,l=y(),o&&o.c(),this.h()},l(a){e=m(a,"DIV",{class:!0});var i=E(e);t=m(i,"DIV",{class:!0,"data-svelte-h":!0}),$(t)!=="svelte-1341h83"&&(t.innerHTML=n),l=T(i),o&&o.l(i),i.forEach(_),this.h()},h(){p(t,"class","page-header svelte-vlc3kv"),p(e,"class","random-training-page svelte-vlc3kv")},m(a,i){M(a,e,i),f(e,t),f(e,l),~s&&u[s].m(e,null),r=!0},p(a,i){let d=s;s=v(a),s===d?~s&&u[s].p(a,i):(o&&(K(),D(u[d],1,1,()=>{u[d]=null}),N()),~s?(o=u[s],o?o.p(a,i):(o=u[s]=C[s](a),o.c()),I(o,1),o.m(e,null)):o=null)},i(a){r||(I(o),r=!0)},o(a){D(o),r=!1},d(a){a&&_(e),~s&&u[s].d()}}}function te(c){let e,t,n;return t=new J({props:{showBackButton:!0,$$slots:{default:[ee]},$$scope:{ctx:c}}}),{c(){e=y(),z(t.$$.fragment),this.h()},l(l){F("svelte-1vq2j1p",document.head).forEach(_),e=T(l),q(t.$$.fragment,l),this.h()},h(){document.title="ランダム基音トレーニング - 相対音感トレーニング"},m(l,s){M(l,e,s),R(t,l,s),n=!0},p(l,[s]){const o={};s&19&&(o.$$scope={dirty:s,ctx:l}),t.$set(o)},i(l){n||(I(t.$$.fragment,l),n=!0)},o(l){D(t.$$.fragment,l),n=!1},d(l){l&&_(e),P(t,l)}}}function ne(c){console.error("🚨 [RandomTraining] ストレージエラー:",c)}function oe(){console.log("✅ [RandomTraining] セッション完了")}function se(){console.log("🎉 [RandomTraining] 8セッション完了！")}function le(c,e,t){let n=!1,l=!1;G(()=>{t(1,l=!0),typeof localStorage<"u"&&(t(0,n=localStorage.getItem("mic-test-completed")==="true"),console.log("🎤 [RandomTraining] マイクテスト完了フラグ:",n))});function s(r){console.error("🚨 [RandomTraining] マイクロフォンエラー:",r),j(`${H}/microphone-test?mode=random`)}return[n,l,s,()=>j(`${H}/microphone-test?mode=random`)]}class fe extends A{constructor(e){super(),B(this,e,le,te,O,{})}}export{fe as component,de as universal};
