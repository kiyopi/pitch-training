import{S as Ft,i as At,d as R,s as Mt,v as Rt,c as Nt,a as Lt,D as dt,E as mt,b as r,q as $,r as tt,u as et,f as V,w as nt,F as Tt,m as L,x as lt,p as T,y as it,g as v,z as f,h as y,j as k,k as E,B as Q,A as H,o as C,C as W,G as ht,e as at,l as J,t as Z,n as st,H as vt,I as ut}from"../chunks/Dujr-1LT.js";import"../chunks/B_rl9Jj9.js";import{p as ct}from"../chunks/Ck3cQuT5.js";import{P as gt,B as zt,C as ot}from"../chunks/BlOhcc-l.js";const g="src/routes/microphone-test/+page.svelte";function pt(a){let t,e="マイク準備完了",o,n,s="トレーニング開始ボタンを押してランダム基音モードへ進んでください",c,l,i,u="トレーニング開始",_,d;const j={c:function(){t=C("h3"),t.textContent=e,o=T(),n=C("p"),n.textContent=s,c=T(),l=C("div"),i=C("button"),i.textContent=u,this.h()},l:function(p){t=k(p,"H3",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-11dam81"&&(t.textContent=e),o=L(p),n=k(p,"P",{class:!0,"data-svelte-h":!0}),H(n)!=="svelte-5idwhi"&&(n.textContent=s),c=L(p),l=k(p,"DIV",{class:!0});var m=E(l);i=k(m,"BUTTON",{class:!0,"data-svelte-h":!0}),H(i)!=="svelte-1oiqs6i"&&(i.textContent=u),m.forEach(r),this.h()},h:function(){f(t,"class","ready-title svelte-1hlt4lj"),y(t,g,276,12,8117),f(n,"class","ready-description svelte-1hlt4lj"),y(n,g,277,12,8166),f(i,"class","training-start-button enabled svelte-1hlt4lj"),y(i,g,280,14,8312),f(l,"class","training-start-button-area svelte-1hlt4lj"),y(l,g,279,12,8257)},m:function(p,m){V(p,t,m),V(p,o,m),V(p,n,m),V(p,c,m),V(p,l,m),v(l,i),_||(d=ut(i,"click",a[10],!1),_=!0)},p:st,d:function(p){p&&(r(t),r(o),r(n),r(c),r(l)),_=!1,d()}};return R("SvelteRegisterBlock",{block:j,id:pt.name,type:"else",source:"(275:10) {:else}",ctx:a}),j}function kt(a){let t,e;function o(_,d){return _[3]==="granted"&&_[4]&&(!_[0]||!_[1])?bt:Ct}let n=o(a),s=n(a);function c(_,d){if(_[3]==="pending")return Et;if(_[3]==="denied")return jt;if(_[3]==="initial")return Dt}let l=c(a),i=l&&l(a);const u={c:function(){s.c(),t=T(),i&&i.c(),e=vt()},l:function(d){s.l(d),t=L(d),i&&i.l(d),e=vt()},m:function(d,j){s.m(d,j),V(d,t,j),i&&i.m(d,j),V(d,e,j)},p:function(d,j){n!==(n=o(d))&&(s.d(1),s=n(d),s&&(s.c(),s.m(t.parentNode,t))),l===(l=c(d))&&i?i.p(d,j):(i&&i.d(1),i=l&&l(d),i&&(i.c(),i.m(e.parentNode,e)))},d:function(d){d&&(r(t),r(e)),s.d(d),i&&i.d(d)}};return R("SvelteRegisterBlock",{block:u,id:kt.name,type:"if",source:"(249:10) {#if !audioConfirmationComplete}",ctx:a}),u}function Ct(a){let t,e="マイクのテストを開始します",o,n,s="マイクテスト開始ボタンを押してマイクの使用を許可してください";const c={c:function(){t=C("h3"),t.textContent=e,o=T(),n=C("p"),n.textContent=s,this.h()},l:function(i){t=k(i,"H3",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-gfi16f"&&(t.textContent=e),o=L(i),n=k(i,"P",{class:!0,"data-svelte-h":!0}),H(n)!=="svelte-1w19y1h"&&(n.textContent=s),this.h()},h:function(){f(t,"class","instructions-title svelte-1hlt4lj"),y(t,g,255,14,7254),f(n,"class","instructions-description svelte-1hlt4lj"),y(n,g,256,14,7318)},m:function(i,u){V(i,t,u),V(i,o,u),V(i,n,u)},d:function(i){i&&(r(t),r(o),r(n))}};return R("SvelteRegisterBlock",{block:c,id:Ct.name,type:"else",source:"(254:12) {:else}",ctx:a}),c}function bt(a){let t,e="「ドー」と発声してください";const o={c:function(){t=C("p"),t.textContent=e,this.h()},l:function(s){t=k(s,"P",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-15d2sx7"&&(t.textContent=e),this.h()},h:function(){f(t,"class","status-text voice-instruction svelte-1hlt4lj"),y(t,g,252,14,7126)},m:function(s,c){V(s,t,c)},d:function(s){s&&r(t)}};return R("SvelteRegisterBlock",{block:o,id:bt.name,type:"if",source:"(251:12) {#if micPermission === 'granted' && isListening && (!volumeDetected || !frequencyDetected)}",ctx:a}),o}function Dt(a){let t,e,o="マイクテストを開始",n,s;const c={c:function(){t=C("div"),e=C("button"),e.textContent=o,this.h()},l:function(i){t=k(i,"DIV",{class:!0});var u=E(t);e=k(u,"BUTTON",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-caex95"&&(e.textContent=o),u.forEach(r),this.h()},h:function(){f(e,"class","mic-test-button start svelte-1hlt4lj"),y(e,g,269,16,7891),f(t,"class","mic-test-button-area svelte-1hlt4lj"),y(t,g,268,14,7840)},m:function(i,u){V(i,t,u),v(t,e),n||(s=ut(e,"click",a[9],!1),n=!0)},p:st,d:function(i){i&&r(t),n=!1,s()}};return R("SvelteRegisterBlock",{block:c,id:Dt.name,type:"if",source:"(268:50) ",ctx:a}),c}function jt(a){let t,e,o="マイク許可を再試行",n,s;const c={c:function(){t=C("div"),e=C("button"),e.textContent=o,this.h()},l:function(i){t=k(i,"DIV",{class:!0});var u=E(t);e=k(u,"BUTTON",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-1p3n8nt"&&(e.textContent=o),u.forEach(r),this.h()},h:function(){f(e,"class","mic-test-button retry svelte-1hlt4lj"),y(e,g,263,16,7632),f(t,"class","mic-test-button-area svelte-1hlt4lj"),y(t,g,262,14,7581)},m:function(i,u){V(i,t,u),v(t,e),n||(s=ut(e,"click",a[9],!1),n=!0)},p:st,d:function(i){i&&r(t),n=!1,s()}};return R("SvelteRegisterBlock",{block:c,id:jt.name,type:"if",source:"(262:49) ",ctx:a}),c}function Et(a){let t,e="マイク準備中...";const o={c:function(){t=C("p"),t.textContent=e,this.h()},l:function(s){t=k(s,"P",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-1vb5g92"&&(t.textContent=e),this.h()},h:function(){f(t,"class","status-text svelte-1hlt4lj"),y(t,g,260,14,7480)},m:function(s,c){V(s,t,c)},p:st,d:function(s){s&&r(t)}};return R("SvelteRegisterBlock",{block:o,id:Et.name,type:"if",source:"(260:12) {#if micPermission === 'pending'}",ctx:a}),o}function wt(a){let t;function e(c,l){return c[2]?pt:kt}let o=e(a),n=o(a);const s={c:function(){t=C("div"),n.c(),this.h()},l:function(l){t=k(l,"DIV",{class:!0});var i=E(t);n.l(i),i.forEach(r),this.h()},h:function(){f(t,"class","training-mode-content svelte-1hlt4lj"),y(t,g,247,8,6861)},m:function(l,i){V(l,t,i),n.m(t,null)},p:function(l,i){o===(o=e(l))&&n?n.p(l,i):(n.d(1),n=o(l),n&&(n.c(),n.m(t,null)))},d:function(l){l&&r(t),n.d()}};return R("SvelteRegisterBlock",{block:s,id:wt.name,type:"slot",source:'(247:6) <Card variant=\\"default\\" padding=\\"lg\\">',ctx:a}),s}function Bt(a){let t;const e={c:function(){t=Z(" ")},l:function(n){t=J(n," ")},m:function(n,s){V(n,t,s)},d:function(n){n&&r(t)}};return R("SvelteRegisterBlock",{block:e,id:Bt.name,type:"else",source:"(305:16) {:else}",ctx:a}),e}function St(a){let t;const e={c:function(){t=Z("⏳ 声を出して音量を確認してください")},l:function(n){t=J(n,"⏳ 声を出して音量を確認してください")},m:function(n,s){V(n,t,s)},d:function(n){n&&r(t)}};return R("SvelteRegisterBlock",{block:e,id:St.name,type:"if",source:"(303:16) {#if !volumeDetected && isListening}",ctx:a}),e}function xt(a){let t,e,o,n="音量レベル",s,c,l,i,u,_=a[5].toFixed(1)+"",d,j,P,p,m;function N(S,b){return!S[0]&&S[4]?St:Bt}let w=N(a),D=w(a);const F={c:function(){t=C("div"),e=C("div"),o=C("h3"),o.textContent=n,s=T(),c=C("div"),l=C("div"),i=T(),u=C("div"),d=Z(_),j=Z("%"),P=T(),p=C("div"),m=C("span"),D.c(),this.h()},l:function(b){t=k(b,"DIV",{class:!0});var B=E(t);e=k(B,"DIV",{class:!0});var I=E(e);o=k(I,"H3",{class:!0,"data-svelte-h":!0}),H(o)!=="svelte-1nc8gri"&&(o.textContent=n),s=L(I),c=k(I,"DIV",{class:!0});var A=E(c);l=k(A,"DIV",{class:!0,style:!0}),E(l).forEach(r),A.forEach(r),i=L(I),u=k(I,"DIV",{class:!0});var z=E(u);d=J(z,_),j=J(z,"%"),z.forEach(r),P=L(I),p=k(I,"DIV",{class:!0});var h=E(p);m=k(h,"SPAN",{class:!0});var q=E(m);D.l(q),q.forEach(r),h.forEach(r),I.forEach(r),B.forEach(r),this.h()},h:function(){f(o,"class","display-title svelte-1hlt4lj"),y(o,g,295,12,8750),f(l,"class","volume-bar svelte-1hlt4lj"),ht(l,"width",a[5]+"%"),y(l,g,297,14,8848),f(c,"class","volume-bar-container svelte-1hlt4lj"),y(c,g,296,12,8799),f(u,"class","volume-text svelte-1hlt4lj"),y(u,g,299,12,8942),f(m,"class","status-pending svelte-1hlt4lj"),y(m,g,301,14,9055),f(p,"class","volume-status svelte-1hlt4lj"),y(p,g,300,12,9013),f(e,"class","volume-section svelte-1hlt4lj"),y(e,g,294,10,8709),f(t,"class","card-inner svelte-1hlt4lj"),y(t,g,293,8,8674)},m:function(b,B){V(b,t,B),v(t,e),v(e,o),v(e,s),v(e,c),v(c,l),v(e,i),v(e,u),v(u,d),v(u,j),v(e,P),v(e,p),v(p,m),D.m(m,null)},p:function(b,B){B&32&&ht(l,"width",b[5]+"%"),B&32&&_!==(_=b[5].toFixed(1)+"")&&at(d,_),w!==(w=N(b))&&(D.d(1),D=w(b),D&&(D.c(),D.m(m,null)))},d:function(b){b&&r(t),D.d()}};return R("SvelteRegisterBlock",{block:F,id:xt.name,type:"slot",source:'(293:6) <Card variant=\\"default\\" padding=\\"lg\\">',ctx:a}),F}function Vt(a){let t;const e={c:function(){t=Z(" ")},l:function(n){t=J(n," ")},m:function(n,s){V(n,t,s)},d:function(n){n&&r(t)}};return R("SvelteRegisterBlock",{block:e,id:Vt.name,type:"else",source:"(327:16) {:else}",ctx:a}),e}function It(a){let t;const e={c:function(){t=Z("⏳ 「ド」を発声して音程を確認してください")},l:function(n){t=J(n,"⏳ 「ド」を発声して音程を確認してください")},m:function(n,s){V(n,t,s)},d:function(n){n&&r(t)}};return R("SvelteRegisterBlock",{block:e,id:It.name,type:"if",source:"(325:16) {#if !frequencyDetected && isListening}",ctx:a}),e}function Pt(a){let t,e,o,n="音程検出",s,c,l,i=a[6]>0?a[6].toFixed(1)+" Hz":"ーー",u,_,d,j,P,p,m;function N(S,b){return!S[1]&&S[4]?It:Vt}let w=N(a),D=w(a);const F={c:function(){t=C("div"),e=C("div"),o=C("h3"),o.textContent=n,s=T(),c=C("div"),l=C("div"),u=Z(i),_=T(),d=C("div"),j=Z(a[7]),P=T(),p=C("div"),m=C("span"),D.c(),this.h()},l:function(b){t=k(b,"DIV",{class:!0});var B=E(t);e=k(B,"DIV",{class:!0});var I=E(e);o=k(I,"H3",{class:!0,"data-svelte-h":!0}),H(o)!=="svelte-1ofzoy2"&&(o.textContent=n),s=L(I),c=k(I,"DIV",{class:!0});var A=E(c);l=k(A,"DIV",{class:!0});var z=E(l);u=J(z,i),z.forEach(r),_=L(A),d=k(A,"DIV",{class:!0});var h=E(d);j=J(h,a[7]),h.forEach(r),A.forEach(r),P=L(I),p=k(I,"DIV",{class:!0});var q=E(p);m=k(q,"SPAN",{class:!0});var x=E(m);D.l(x),x.forEach(r),q.forEach(r),I.forEach(r),B.forEach(r),this.h()},h:function(){f(o,"class","display-title svelte-1hlt4lj"),y(o,g,317,12,9488),f(l,"class","frequency-value svelte-1hlt4lj"),y(l,g,319,14,9582),f(d,"class","note-value svelte-1hlt4lj"),y(d,g,320,14,9699),f(c,"class","frequency-display svelte-1hlt4lj"),y(c,g,318,12,9536),f(m,"class","status-pending svelte-1hlt4lj"),y(m,g,323,14,9819),f(p,"class","frequency-status svelte-1hlt4lj"),y(p,g,322,12,9774),f(e,"class","frequency-section svelte-1hlt4lj"),y(e,g,316,10,9444),f(t,"class","card-inner svelte-1hlt4lj"),y(t,g,315,8,9409)},m:function(b,B){V(b,t,B),v(t,e),v(e,o),v(e,s),v(e,c),v(c,l),v(l,u),v(c,_),v(c,d),v(d,j),v(e,P),v(e,p),v(p,m),D.m(m,null)},p:function(b,B){B&64&&i!==(i=b[6]>0?b[6].toFixed(1)+" Hz":"ーー")&&at(u,i),B&128&&at(j,b[7]),w!==(w=N(b))&&(D.d(1),D=w(b),D&&(D.c(),D.m(m,null)))},d:function(b){b&&r(t),D.d()}};return R("SvelteRegisterBlock",{block:F,id:Pt.name,type:"slot",source:'(315:6) <Card variant=\\"default\\" padding=\\"lg\\">',ctx:a}),F}function qt(a){let t,e,o,n,s,c,l,i,u,_,d,j,P="マイクテスト",p,m,N="音感トレーニングを始める前に、マイクの動作を確認します",w,D,F,S,b,B,I,A,z;F=new ot({props:{variant:"default",padding:"lg",$$slots:{default:[wt]},$$scope:{ctx:a}},$$inline:!0}),B=new ot({props:{variant:"default",padding:"lg",$$slots:{default:[xt]},$$scope:{ctx:a}},$$inline:!0}),A=new ot({props:{variant:"default",padding:"lg",$$slots:{default:[Pt]},$$scope:{ctx:a}},$$inline:!0});const h={c:function(){t=C("div"),e=C("div"),o=C("div"),n=C("div"),s=W("svg"),c=W("path"),l=W("path"),i=W("line"),u=W("line"),_=T(),d=C("div"),j=C("h1"),j.textContent=P,p=T(),m=C("p"),m.textContent=N,w=T(),D=C("div"),it(F.$$.fragment),S=T(),b=C("div"),it(B.$$.fragment),I=T(),it(A.$$.fragment),this.h()},l:function(x){t=k(x,"DIV",{class:!0});var M=E(t);e=k(M,"DIV",{class:!0});var U=E(e);o=k(U,"DIV",{class:!0});var G=E(o);n=k(G,"DIV",{class:!0});var O=E(n);s=Q(O,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var K=E(s);c=Q(K,"path",{d:!0}),E(c).forEach(r),l=Q(K,"path",{d:!0}),E(l).forEach(r),i=Q(K,"line",{x1:!0,x2:!0,y1:!0,y2:!0}),E(i).forEach(r),u=Q(K,"line",{x1:!0,x2:!0,y1:!0,y2:!0}),E(u).forEach(r),K.forEach(r),O.forEach(r),_=L(G),d=k(G,"DIV",{});var X=E(d);j=k(X,"H1",{class:!0,"data-svelte-h":!0}),H(j)!=="svelte-z7m4lk"&&(j.textContent=P),p=L(X),m=k(X,"P",{class:!0,"data-svelte-h":!0}),H(m)!=="svelte-1vtv92f"&&(m.textContent=N),X.forEach(r),G.forEach(r),U.forEach(r),w=L(M),D=k(M,"DIV",{class:!0});var ft=E(D);lt(F.$$.fragment,ft),ft.forEach(r),S=L(M),b=k(M,"DIV",{class:!0});var Y=E(b);lt(B.$$.fragment,Y),I=L(Y),lt(A.$$.fragment,Y),Y.forEach(r),M.forEach(r),this.h()},h:function(){f(c,"d","M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"),y(c,g,231,12,6319),f(l,"d","M19 10v2a7 7 0 0 1-14 0v-2"),y(l,g,232,12,6396),f(i,"x1","12"),f(i,"x2","12"),f(i,"y1","19"),f(i,"y2","22"),y(i,g,233,12,6447),f(u,"x1","8"),f(u,"x2","16"),f(u,"y1","22"),f(u,"y2","22"),y(u,g,234,12,6499),f(s,"width","48"),f(s,"height","48"),f(s,"viewBox","0 0 24 24"),f(s,"fill","none"),f(s,"stroke","currentColor"),f(s,"stroke-width","2"),y(s,g,230,10,6207),f(n,"class","mic-icon svelte-1hlt4lj"),y(n,g,229,8,6174),f(j,"class","mic-test-title svelte-1hlt4lj"),y(j,g,238,10,6594),f(m,"class","mic-test-description svelte-1hlt4lj"),y(m,g,239,10,6643),y(d,g,237,8,6578),f(o,"class","mic-test-header svelte-1hlt4lj"),y(o,g,228,6,6136),f(e,"class","header svelte-1hlt4lj"),y(e,g,227,4,6109),f(D,"class","training-mode-info svelte-1hlt4lj"),y(D,g,245,4,6776),f(b,"class","test-section svelte-1hlt4lj"),y(b,g,290,4,8571),f(t,"class","microphone-test svelte-1hlt4lj"),y(t,g,225,2,6057)},m:function(x,M){V(x,t,M),v(t,e),v(e,o),v(o,n),v(n,s),v(s,c),v(s,l),v(s,i),v(s,u),v(o,_),v(o,d),v(d,j),v(d,p),v(d,m),v(t,w),v(t,D),nt(F,D,null),v(t,S),v(t,b),nt(B,b,null),v(b,I),nt(A,b,null),z=!0},p:function(x,M){const U={};M&1048607&&(U.$$scope={dirty:M,ctx:x}),F.$set(U);const G={};M&1048625&&(G.$$scope={dirty:M,ctx:x}),B.$set(G);const O={};M&1048786&&(O.$$scope={dirty:M,ctx:x}),A.$set(O)},i:function(x){z||(et(F.$$.fragment,x),et(B.$$.fragment,x),et(A.$$.fragment,x),z=!0)},o:function(x){tt(F.$$.fragment,x),tt(B.$$.fragment,x),tt(A.$$.fragment,x),z=!1},d:function(x){x&&r(t),$(F),$(B),$(A)}};return R("SvelteRegisterBlock",{block:h,id:qt.name,type:"slot",source:"(225:0) <PageLayout showBackButton={true}>",ctx:a}),h}function rt(a){let t,e,o;e=new gt({props:{showBackButton:!0,$$slots:{default:[qt]},$$scope:{ctx:a}},$$inline:!0});const n={c:function(){t=T(),it(e.$$.fragment),this.h()},l:function(c){Tt("svelte-8st1fo",document.head).forEach(r),t=L(c),lt(e.$$.fragment,c),this.h()},h:function(){document.title="マイクテスト - 相対音感トレーニング"},m:function(c,l){V(c,t,l),nt(e,c,l),o=!0},p:function(c,[l]){const i={};l&1048831&&(i.$$scope={dirty:l,ctx:c}),e.$set(i)},i:function(c){o||(et(e.$$.fragment,c),o=!0)},o:function(c){tt(e.$$.fragment,c),o=!1},d:function(c){c&&r(t),$(e,c)}};return R("SvelteRegisterBlock",{block:n,id:rt.name,type:"component",source:"",ctx:a}),n}function _t(a,t){let e=0;for(let l=0;l<a.length;l++)e+=a[l]*a[l];if(e=Math.sqrt(e/a.length),e<.005)return 0;const o=Math.floor(t/800),n=Math.floor(t/80);let s=0,c=0;for(let l=o;l<=n;l++){let i=0,u=0;for(let _=0;_<a.length-l;_++)i+=a[_]*a[_+l],u+=a[_]*a[_];u>0&&(i=i/Math.sqrt(u),i>s&&(s=i,c=l))}return s>.25?t/c:0}function yt(a){const e=Math.round(12*Math.log2(a/440)),o=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],n=((e+9)%12+12)%12,s=Math.floor((e+9)/12)+4,c=o[n];return`${c}${s}（${{C:"ド","C#":"ド#",D:"レ","D#":"レ#",E:"ミ",F:"ファ","F#":"ファ#",G:"ソ","G#":"ソ#",A:"ラ","A#":"ラ#",B:"シ"}[c]}${s}）`}function Ht(a,t,e){let o;Rt(ct,"page"),Nt(a,ct,h=>e(16,o=h));let{$$slots:n={},$$scope:s}=t;Lt("Page",n,[]);let c="random";dt(()=>{o.url.searchParams.has("mode")&&(c=o.url.searchParams.get("mode")||"random")});let l="initial",i=!1,u=!1,_=!1,d=!1,j=0,P=0,p="ーー",m=null,N=null,w=null,D=null;const F={random:{name:"ランダム基音モード",description:"10種類の基音からランダムに選択してトレーニング",color:"green",path:"./training/random"},continuous:{name:"連続チャレンジモード",description:"選択した回数だけ連続で実行し、総合評価を確認",color:"orange",path:"./training/continuous"},chromatic:{name:"12音階モード",description:"クロマチックスケールの上行・下行で完全制覇",color:"purple",path:"./training/chromatic"}},S=F[c]||F.random;async function b(){e(3,l="pending");try{N=await navigator.mediaDevices.getUserMedia({audio:!0}),e(3,l="granted"),m=new(window.AudioContext||window.webkitAudioContext),m.state==="suspended"&&await m.resume(),w=m.createAnalyser(),w.fftSize=2048,w.smoothingTimeConstant=.8,w.minDecibels=-90,w.maxDecibels=-10,m.createMediaStreamSource(N).connect(w),e(4,i=!0),B()}catch{e(3,l="denied")}}function B(){if(!i||!w)return;const h=w.frequencyBinCount,q=new Uint8Array(h);w.getByteFrequencyData(q);let x=0;for(let O=0;O<q.length;O++)x+=q[O]*q[O];const M=Math.sqrt(x/q.length);e(5,j=Math.min(100,M/64*100)),j>15&&e(0,u=!0);const U=new Float32Array(w.fftSize);w.getFloatTimeDomainData(U);const G=_t(U,m.sampleRate);G>80&&G<800?(e(6,P=G),e(7,p=yt(G)),e(1,_=!0)):(e(6,P=0),e(7,p="ーー")),D=requestAnimationFrame(B)}function I(){e(4,i=!1),D&&(cancelAnimationFrame(D),D=null),N&&(N.getTracks().forEach(h=>h.stop()),N=null),m&&m.state!=="closed"&&(m.close(),m=null),w=null}mt(()=>{I()});const A=[];Object.keys(t).forEach(h=>{!~A.indexOf(h)&&h.slice(0,2)!=="$$"&&h!=="slot"&&console.warn(`<Page> was created with unknown prop '${h}'`)});const z=()=>window.location.href=S.path;return a.$capture_state=()=>({onMount:dt,onDestroy:mt,page:ct,Card:ot,Button:zt,PageLayout:gt,mode:c,micPermission:l,isListening:i,volumeDetected:u,frequencyDetected:_,audioConfirmationComplete:d,currentVolume:j,currentFrequency:P,currentNote:p,audioContext:m,mediaStream:N,analyser:w,animationFrame:D,trainingModes:F,selectedMode:S,requestMicrophone:b,analyzeAudio:B,detectPitch:_t,frequencyToNote:yt,stopListening:I,$page:o}),a.$inject_state=h=>{"mode"in h&&(c=h.mode),"micPermission"in h&&e(3,l=h.micPermission),"isListening"in h&&e(4,i=h.isListening),"volumeDetected"in h&&e(0,u=h.volumeDetected),"frequencyDetected"in h&&e(1,_=h.frequencyDetected),"audioConfirmationComplete"in h&&e(2,d=h.audioConfirmationComplete),"currentVolume"in h&&e(5,j=h.currentVolume),"currentFrequency"in h&&e(6,P=h.currentFrequency),"currentNote"in h&&e(7,p=h.currentNote),"audioContext"in h&&(m=h.audioContext),"mediaStream"in h&&(N=h.mediaStream),"analyser"in h&&(w=h.analyser),"animationFrame"in h&&(D=h.animationFrame)},t&&"$$inject"in t&&a.$inject_state(t.$$inject),a.$$.update=()=>{a.$$.dirty&7&&u&&_&&!d&&e(2,d=!0)},[u,_,d,l,i,j,P,p,S,b,z]}class Zt extends Ft{constructor(t){super(t),At(this,t,Ht,rt,Mt,{}),R("SvelteRegisterComponent",{component:this,tagName:"Page",options:t,id:rt.name})}}export{Zt as component};
