const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/u3zWv8bM.js","../chunks/BbQtw8CC.js","../chunks/D6YF6ztN.js","../chunks/IHki7fMi.js","../chunks/OhsLa1Yz.js","../assets/sessionStorage.2zs4CtXT.css"])))=>i.map(i=>d[i]);
import{_ as st}from"../chunks/C1FmrZbK.js";import{S as sn,i as rn,s as an,d as h,C as ce,m as H,o as F,b as $,D as le,N as cn,h as B,E as ie,k as L,F as ue,l as be,I as ln,Q as un,p as Ce,q as Ae,c as _,y as N,L as Ee,e as M,f as z,G as pe,g as Q,r as we,j as I,t as X,M as fn,a as Ie,O as Mt,n as It}from"../chunks/BbQtw8CC.js";import{e as Ue}from"../chunks/D6YF6ztN.js";import"../chunks/IHki7fMi.js";import{b as Je,g as rt}from"../chunks/OhsLa1Yz.js";import{p as mn}from"../chunks/vl693z6G.js";import{P as dn,C as Be}from"../chunks/DNmPTphr.js";import{B as Ke}from"../chunks/CB02h6m0.js";import{l as ee,a as $e,b as gn,P as pn,h as at}from"../chunks/DjSLRzt-.js";import{l as ct,s as Oe,S as hn,E as vn,n as lt,A as Nt,M as yn,U as Rt,a as Ge,b as _n,u as Sn,i as bn,c as wn,r as Dn,d as kn,e as Cn,f as An,t as Tn,g as Mn}from"../chunks/u3zWv8bM.js";const In=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,Nn=!1,Rn=!1,fo=Object.freeze(Object.defineProperty({__proto__:null,prerender:Rn,ssr:Nn},Symbol.toStringTag,{value:"Module"})),{document:it}=In;function ut(r,t,e){const o=r.slice();return o[96]=t[e],o[98]=e,o}function ft(r,t,e){const o=r.slice();return o[99]=t[e],o}function mt(r){var V,x,O;let t,e,o,n,s=(((V=r[23])==null?void 0:V.length)||0)+"",g,d,u,c,i,p=8-(((x=r[23])==null?void 0:x.length)||0)+"",f,S,b,D,C,q,J,y,m=Math.round((((O=r[23])==null?void 0:O.length)||0)/8*100)+"",A,E,w,te,U,j=r[0]==="results"&&dt(r);return{c(){t=I("div"),e=I("div"),o=I("div"),n=I("span"),g=X(s),d=X("/8"),u=L(),c=I("span"),i=X("æ®‹ã‚Š "),f=X(p),S=X(" ã‚»ãƒƒã‚·ãƒ§ãƒ³"),b=L(),D=I("div"),C=I("div"),q=I("div"),J=L(),y=I("span"),A=X(m),E=X("%"),w=L(),j&&j.c(),te=we(),this.h()},l(P){t=M(P,"DIV",{class:!0});var oe=z(t);e=M(oe,"DIV",{class:!0});var _e=z(e);o=M(_e,"DIV",{class:!0});var se=z(o);n=M(se,"SPAN",{class:!0});var de=z(n);g=Q(de,s),d=Q(de,"/8"),de.forEach(h),u=B(se),c=M(se,"SPAN",{class:!0});var re=z(c);i=Q(re,"æ®‹ã‚Š "),f=Q(re,p),S=Q(re," ã‚»ãƒƒã‚·ãƒ§ãƒ³"),re.forEach(h),se.forEach(h),b=B(_e),D=M(_e,"DIV",{class:!0});var he=z(D);C=M(he,"DIV",{class:!0});var Te=z(C);q=M(Te,"DIV",{class:!0,style:!0}),z(q).forEach(h),Te.forEach(h),J=B(he),y=M(he,"SPAN",{class:!0});var Ne=z(y);A=Q(Ne,m),E=Q(Ne,"%"),Ne.forEach(h),he.forEach(h),_e.forEach(h),oe.forEach(h),w=B(P),j&&j.l(P),te=we(),this.h()},h(){var P;N(n,"class","completed-count svelte-1ktm6f3"),N(c,"class","remaining-text svelte-1ktm6f3"),N(o,"class","session-info svelte-1ktm6f3"),N(q,"class","progress-fill svelte-1ktm6f3"),Ee(q,"width",(((P=r[23])==null?void 0:P.length)||0)/8*100+"%"),N(C,"class","progress-bar svelte-1ktm6f3"),N(y,"class","progress-text svelte-1ktm6f3"),N(D,"class","progress-section svelte-1ktm6f3"),N(e,"class","session-status svelte-1ktm6f3"),N(t,"class","session-progress svelte-1ktm6f3")},m(P,oe){$(P,t,oe),_(t,e),_(e,o),_(o,n),_(n,g),_(n,d),_(o,u),_(o,c),_(c,i),_(c,f),_(c,S),_(e,b),_(e,D),_(D,C),_(C,q),_(D,J),_(D,y),_(y,A),_(y,E),$(P,w,oe),j&&j.m(P,oe),$(P,te,oe),U=!0},p(P,oe){var _e,se,de,re;(!U||oe[0]&8388608)&&s!==(s=(((_e=P[23])==null?void 0:_e.length)||0)+"")&&Ie(g,s),(!U||oe[0]&8388608)&&p!==(p=8-(((se=P[23])==null?void 0:se.length)||0)+"")&&Ie(f,p),(!U||oe[0]&8388608)&&Ee(q,"width",(((de=P[23])==null?void 0:de.length)||0)/8*100+"%"),(!U||oe[0]&8388608)&&m!==(m=Math.round((((re=P[23])==null?void 0:re.length)||0)/8*100)+"")&&Ie(A,m),P[0]==="results"?j?(j.p(P,oe),oe[0]&1&&F(j,1)):(j=dt(P),j.c(),F(j,1),j.m(te.parentNode,te)):j&&(Ce(),H(j,1,1,()=>{j=null}),Ae())},i(P){U||(F(j),U=!0)},o(P){H(j),U=!1},d(P){P&&(h(t),h(w),h(te)),j&&j.d(P)}}}function dt(r){let t,e,o;return e=new Nt({props:{isCompleted:r[5],position:"top"}}),e.$on("action",r[29]),{c(){t=I("div"),ue(e.$$.fragment),this.h()},l(n){t=M(n,"DIV",{class:!0});var s=z(t);ie(e.$$.fragment,s),s.forEach(h),this.h()},h(){N(t,"class","top-action-buttons svelte-1ktm6f3")},m(n,s){$(n,t,s),le(e,t,null),o=!0},p(n,s){const g={};s[0]&32&&(g.isCompleted=n[5]),e.$set(g)},i(n){o||(F(e.$$.fragment,n),o=!0)},o(n){H(e.$$.fragment,n),o=!1},d(n){n&&h(t),ce(e)}}}function Fn(r){let t,e;return t=new Be({props:{class:"error-card",$$slots:{default:[Pn]},$$scope:{ctx:r}}}),{c(){ue(t.$$.fragment)},l(o){ie(t.$$.fragment,o)},m(o,n){le(t,o,n),e=!0},p(o,n){const s={};n[3]&512&&(s.$$scope={dirty:n,ctx:o}),t.$set(s)},i(o){e||(F(t.$$.fragment,o),e=!0)},o(o){H(t.$$.fragment,o),e=!1},d(o){ce(t,o)}}}function $n(r){let t,e,o,n,s,g,d,u={isActive:r[1]==="granted",trainingPhase:r[0],className:"pitch-detector-content",debugMode:!0,disableHarmonicCorrection:!1};e=new gn({props:u}),r[33](e),e.$on("pitchUpdate",r[28]),e.$on("stateChange",Yn),e.$on("error",Zn),e.$on("microphoneHealthChange",r[30]);let c=r[0]!=="results"&&gt(r),i=r[0]!=="results"&&yt(r),p=r[0]==="results"&&bt(r);return{c(){t=I("div"),ue(e.$$.fragment),o=L(),c&&c.c(),n=L(),i&&i.c(),s=L(),p&&p.c(),g=we(),this.h()},l(f){t=M(f,"DIV",{style:!0});var S=z(t);ie(e.$$.fragment,S),S.forEach(h),o=B(f),c&&c.l(f),n=B(f),i&&i.l(f),s=B(f),p&&p.l(f),g=we(),this.h()},h(){Ee(t,"display","none")},m(f,S){$(f,t,S),le(e,t,null),$(f,o,S),c&&c.m(f,S),$(f,n,S),i&&i.m(f,S),$(f,s,S),p&&p.m(f,S),$(f,g,S),d=!0},p(f,S){const b={};S[0]&2&&(b.isActive=f[1]==="granted"),S[0]&1&&(b.trainingPhase=f[0]),e.$set(b),f[0]!=="results"?c?(c.p(f,S),S[0]&1&&F(c,1)):(c=gt(f),c.c(),F(c,1),c.m(n.parentNode,n)):c&&(Ce(),H(c,1,1,()=>{c=null}),Ae()),f[0]!=="results"?i?(i.p(f,S),S[0]&1&&F(i,1)):(i=yt(f),i.c(),F(i,1),i.m(s.parentNode,s)):i&&(Ce(),H(i,1,1,()=>{i=null}),Ae()),f[0]==="results"?p?(p.p(f,S),S[0]&1&&F(p,1)):(p=bt(f),p.c(),F(p,1),p.m(g.parentNode,g)):p&&(Ce(),H(p,1,1,()=>{p=null}),Ae())},i(f){d||(F(e.$$.fragment,f),F(c),F(i),F(p),d=!0)},o(f){H(e.$$.fragment,f),H(c),H(i),H(p),d=!1},d(f){f&&(h(t),h(o),h(n),h(s),h(g)),r[33](null),ce(e),c&&c.d(f),i&&i.d(f),p&&p.d(f)}}}function En(r){let t;return{c(){t=X("ğŸ¤ ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã¸ç§»å‹•")},l(e){t=Q(e,"ğŸ¤ ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã¸ç§»å‹•")},m(e,o){$(e,t,o)},d(e){e&&h(t)}}}function qn(r){let t;return{c(){t=X("ğŸ  ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹")},l(e){t=Q(e,"ğŸ  ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹")},m(e,o){$(e,t,o)},d(e){e&&h(t)}}}function Pn(r){let t,e,o="ğŸ¤",n,s,g="ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãŒå¿…è¦ã§ã™",d,u,c="é€£ç¶šãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ¢ãƒ¼ãƒ‰ã‚’é–‹å§‹ã™ã‚‹å‰ã«ã€ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã§éŸ³å£°å…¥åŠ›ã®ç¢ºèªã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚",i,p,f='<p class="svelte-1ktm6f3">ã“ã®ãƒšãƒ¼ã‚¸ã¯<strong>ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆå®Œäº†å¾Œ</strong>ã«ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™ã€‚</p> <p class="svelte-1ktm6f3">ã¾ãšã¯ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã§éŸ³å£°ç¢ºèªã‚’è¡Œã£ã¦ãã ã•ã„ã€‚</p>',S,b,D,C,q,J;return D=new Ke({props:{variant:"primary",$$slots:{default:[En]},$$scope:{ctx:r}}}),D.$on("click",r[26]),q=new Ke({props:{variant:"secondary",$$slots:{default:[qn]},$$scope:{ctx:r}}}),q.$on("click",r[27]),{c(){t=I("div"),e=I("div"),e.textContent=o,n=L(),s=I("h3"),s.textContent=g,d=L(),u=I("p"),u.textContent=c,i=L(),p=I("div"),p.innerHTML=f,S=L(),b=I("div"),ue(D.$$.fragment),C=L(),ue(q.$$.fragment),this.h()},l(y){t=M(y,"DIV",{class:!0});var m=z(t);e=M(m,"DIV",{class:!0,"data-svelte-h":!0}),pe(e)!=="svelte-15rbx8n"&&(e.textContent=o),n=B(m),s=M(m,"H3",{class:!0,"data-svelte-h":!0}),pe(s)!=="svelte-17kvze2"&&(s.textContent=g),d=B(m),u=M(m,"P",{class:!0,"data-svelte-h":!0}),pe(u)!=="svelte-1t09god"&&(u.textContent=c),i=B(m),p=M(m,"DIV",{class:!0,"data-svelte-h":!0}),pe(p)!=="svelte-13ge0u9"&&(p.innerHTML=f),S=B(m),b=M(m,"DIV",{class:!0});var A=z(b);ie(D.$$.fragment,A),C=B(A),ie(q.$$.fragment,A),A.forEach(h),m.forEach(h),this.h()},h(){N(e,"class","error-icon svelte-1ktm6f3"),N(s,"class","svelte-1ktm6f3"),N(u,"class","svelte-1ktm6f3"),N(p,"class","recommendation svelte-1ktm6f3"),N(b,"class","action-buttons"),N(t,"class","error-content svelte-1ktm6f3")},m(y,m){$(y,t,m),_(t,e),_(t,n),_(t,s),_(t,d),_(t,u),_(t,i),_(t,p),_(t,S),_(t,b),le(D,b,null),_(b,C),le(q,b,null),J=!0},p(y,m){const A={};m[3]&512&&(A.$$scope={dirty:m,ctx:y}),D.$set(A);const E={};m[3]&512&&(E.$$scope={dirty:m,ctx:y}),q.$set(E)},i(y){J||(F(D.$$.fragment,y),F(q.$$.fragment,y),J=!0)},o(y){H(D.$$.fragment,y),H(q.$$.fragment,y),J=!1},d(y){y&&h(t),ce(D),ce(q)}}}function gt(r){let t,e,o,n,s,g,d=!r[2]&&r[6].length>0&&pt(r);return o=new Be({props:{class:"main-card half-width",$$slots:{default:[jn]},$$scope:{ctx:r}}}),s=new pn({props:{frequency:r[14],note:r[15],volume:r[13],isMuted:r[0]!=="guiding",muteMessage:"åŸºéŸ³å†ç”Ÿå¾Œã«é–‹å§‹",className:"half-width",showGuidance:!1}}),{c(){d&&d.c(),t=L(),e=I("div"),ue(o.$$.fragment),n=L(),ue(s.$$.fragment),this.h()},l(u){d&&d.l(u),t=B(u),e=M(u,"DIV",{class:!0});var c=z(e);ie(o.$$.fragment,c),n=B(c),ie(s.$$.fragment,c),c.forEach(h),this.h()},h(){N(e,"class","side-by-side-container svelte-1ktm6f3")},m(u,c){d&&d.m(u,c),$(u,t,c),$(u,e,c),le(o,e,null),_(e,n),le(s,e,null),g=!0},p(u,c){!u[2]&&u[6].length>0?d?(d.p(u,c),c[0]&68&&F(d,1)):(d=pt(u),d.c(),F(d,1),d.m(t.parentNode,t)):d&&(Ce(),H(d,1,1,()=>{d=null}),Ae());const i={};c[0]&7041|c[3]&512&&(i.$$scope={dirty:c,ctx:u}),o.$set(i);const p={};c[0]&16384&&(p.frequency=u[14]),c[0]&32768&&(p.note=u[15]),c[0]&8192&&(p.volume=u[13]),c[0]&1&&(p.isMuted=u[0]!=="guiding"),s.$set(p)},i(u){g||(F(d),F(o.$$.fragment,u),F(s.$$.fragment,u),g=!0)},o(u){H(d),H(o.$$.fragment,u),H(s.$$.fragment,u),g=!1},d(u){u&&(h(t),h(e)),d&&d.d(u),ce(o),ce(s)}}}function pt(r){let t,e;return t=new Be({props:{class:"warning-card",$$slots:{default:[Hn]},$$scope:{ctx:r}}}),{c(){ue(t.$$.fragment)},l(o){ie(t.$$.fragment,o)},m(o,n){le(t,o,n),e=!0},p(o,n){const s={};n[0]&64|n[3]&512&&(s.$$scope={dirty:n,ctx:o}),t.$set(s)},i(o){e||(F(t.$$.fragment,o),e=!0)},o(o){H(t.$$.fragment,o),e=!1},d(o){ce(t,o)}}}function ht(r){let t,e=r[99]+"",o;return{c(){t=I("li"),o=X(e),this.h()},l(n){t=M(n,"LI",{class:!0});var s=z(t);o=Q(s,e),s.forEach(h),this.h()},h(){N(t,"class","svelte-1ktm6f3")},m(n,s){$(n,t,s),_(t,o)},p(n,s){s[0]&64&&e!==(e=n[99]+"")&&Ie(o,e)},d(n){n&&h(t)}}}function Hn(r){let t,e='<h3 class="section-title svelte-1ktm6f3">âš ï¸ ãƒã‚¤ã‚¯æ¥ç¶šã«å•é¡ŒãŒã‚ã‚Šã¾ã™</h3>',o,n,s,g="ãƒã‚¤ã‚¯ãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã›ã‚“ã€‚ä»¥ä¸‹ã®å•é¡ŒãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸï¼š",d,u,c,i,p="<strong>è§£æ±ºæ–¹æ³•:</strong> ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãƒã‚¤ã‚¯è¨±å¯ã‚’å†åº¦å–å¾—ã—ã¦ãã ã•ã„ã€‚",f=Ue(r[6]),S=[];for(let b=0;b<f.length;b+=1)S[b]=ht(ft(r,f,b));return{c(){t=I("div"),t.innerHTML=e,o=L(),n=I("div"),s=I("p"),s.textContent=g,d=L(),u=I("ul");for(let b=0;b<S.length;b+=1)S[b].c();c=L(),i=I("p"),i.innerHTML=p,this.h()},l(b){t=M(b,"DIV",{class:!0,"data-svelte-h":!0}),pe(t)!=="svelte-1mob8td"&&(t.innerHTML=e),o=B(b),n=M(b,"DIV",{class:!0});var D=z(n);s=M(D,"P",{class:!0,"data-svelte-h":!0}),pe(s)!=="svelte-171o2p0"&&(s.textContent=g),d=B(D),u=M(D,"UL",{class:!0});var C=z(u);for(let q=0;q<S.length;q+=1)S[q].l(C);C.forEach(h),c=B(D),i=M(D,"P",{class:!0,"data-svelte-h":!0}),pe(i)!=="svelte-1o4df0k"&&(i.innerHTML=p),D.forEach(h),this.h()},h(){N(t,"class","card-header svelte-1ktm6f3"),N(s,"class","warning-message svelte-1ktm6f3"),N(u,"class","error-list svelte-1ktm6f3"),N(i,"class","fix-instruction svelte-1ktm6f3"),N(n,"class","card-content svelte-1ktm6f3")},m(b,D){$(b,t,D),$(b,o,D),$(b,n,D),_(n,s),_(n,d),_(n,u);for(let C=0;C<S.length;C+=1)S[C]&&S[C].m(u,null);_(n,c),_(n,i)},p(b,D){if(D[0]&64){f=Ue(b[6]);let C;for(C=0;C<f.length;C+=1){const q=ft(b,f,C);S[C]?S[C].p(q,D):(S[C]=ht(q),S[C].c(),S[C].m(u,null))}for(;C<S.length;C+=1)S[C].d(1);S.length=f.length}},d(b){b&&(h(t),h(o),h(n)),Mt(S,b)}}}function Vn(r){let t;return{c(){t=X("ğŸ¹ åŸºéŸ³å†ç”Ÿ")},l(e){t=Q(e,"ğŸ¹ åŸºéŸ³å†ç”Ÿ")},m(e,o){$(e,t,o)},p:It,d(e){e&&h(t)}}}function Bn(r){let t,e,o;return{c(){t=X("ğŸ”„ "),e=X(r[7]),o=X(" å†ç”Ÿ")},l(n){t=Q(n,"ğŸ”„ "),e=Q(n,r[7]),o=Q(n," å†ç”Ÿ")},m(n,s){$(n,t,s),$(n,e,s),$(n,o,s)},p(n,s){s[0]&128&&Ie(e,n[7])},d(n){n&&(h(t),h(e),h(o))}}}function Ln(r){let t;return{c(){t=X("ğŸµ å†ç”Ÿä¸­...")},l(e){t=Q(e,"ğŸµ å†ç”Ÿä¸­...")},m(e,o){$(e,t,o)},p:It,d(e){e&&h(t)}}}function zn(r){let t;function e(s,g){return s[9]?Ln:s[7]&&s[8]>0?Bn:Vn}let o=e(r),n=o(r);return{c(){n.c(),t=we()},l(s){n.l(s),t=we()},m(s,g){n.m(s,g),$(s,t,g)},p(s,g){o===(o=e(s))&&n?n.p(s,g):(n.d(1),n=o(s),n&&(n.c(),n.m(t.parentNode,t)))},d(s){s&&h(t),n.d(s)}}}function vt(r){let t,e,o,n,s,g=r[8].toFixed(1)+"",d,u;return{c(){t=I("div"),e=X("ç¾åœ¨ã®åŸºéŸ³: "),o=I("strong"),n=X(r[7]),s=X(" ("),d=X(g),u=X("Hz)"),this.h()},l(c){t=M(c,"DIV",{class:!0});var i=z(t);e=Q(i,"ç¾åœ¨ã®åŸºéŸ³: "),o=M(i,"STRONG",{});var p=z(o);n=Q(p,r[7]),p.forEach(h),s=Q(i," ("),d=Q(i,g),u=Q(i,"Hz)"),i.forEach(h),this.h()},h(){N(t,"class","base-note-info svelte-1ktm6f3")},m(c,i){$(c,t,i),_(t,e),_(t,o),_(o,n),_(t,s),_(t,d),_(t,u)},p(c,i){i[0]&128&&Ie(n,c[7]),i[0]&256&&g!==(g=c[8].toFixed(1)+"")&&Ie(d,g)},d(c){c&&h(t)}}}function jn(r){let t,e='<h3 class="section-title svelte-1ktm6f3">ğŸ¹ åŸºéŸ³å†ç”Ÿ</h3>',o,n,s,g,d,u,c,i="ã‚¬ã‚¤ãƒ‰é–‹å§‹ã¾ã§",p,f,S,b,D,C,q,J;s=new Ke({props:{variant:"primary",disabled:r[9]||r[0]==="guiding"||r[0]==="waiting",$$slots:{default:[zn]},$$scope:{ctx:r}}}),s.$on("click",r[25]);let y=r[7]&&vt(r);return C=new yn({props:{size:"20"}}),{c(){t=I("div"),t.innerHTML=e,o=L(),n=I("div"),ue(s.$$.fragment),g=L(),y&&y.c(),d=L(),u=I("div"),c=I("div"),c.textContent=i,p=L(),f=I("div"),S=I("div"),b=L(),D=I("div"),ue(C.$$.fragment),this.h()},l(m){t=M(m,"DIV",{class:!0,"data-svelte-h":!0}),pe(t)!=="svelte-o46h1v"&&(t.innerHTML=e),o=B(m),n=M(m,"DIV",{class:!0});var A=z(n);ie(s.$$.fragment,A),g=B(A),y&&y.l(A),d=B(A),u=M(A,"DIV",{class:!0});var E=z(u);c=M(E,"DIV",{class:!0,"data-svelte-h":!0}),pe(c)!=="svelte-1dufnpv"&&(c.textContent=i),p=B(E),f=M(E,"DIV",{class:!0});var w=z(f);S=M(w,"DIV",{class:!0,style:!0}),z(S).forEach(h),b=B(w),D=M(w,"DIV",{class:!0});var te=z(D);ie(C.$$.fragment,te),te.forEach(h),w.forEach(h),E.forEach(h),A.forEach(h),this.h()},h(){N(t,"class","card-header svelte-1ktm6f3"),N(c,"class","guide-start-label svelte-1ktm6f3"),N(S,"class","guide-progress-fill svelte-1ktm6f3"),Ee(S,"width",r[11]+"%"),N(D,"class",q="guide-music-icon "+(r[12]?"glowing":"")+" svelte-1ktm6f3"),N(f,"class","guide-start-bar svelte-1ktm6f3"),N(u,"class","guide-start-bar-container svelte-1ktm6f3"),N(n,"class","card-content svelte-1ktm6f3")},m(m,A){$(m,t,A),$(m,o,A),$(m,n,A),le(s,n,null),_(n,g),y&&y.m(n,null),_(n,d),_(n,u),_(u,c),_(u,p),_(u,f),_(f,S),_(f,b),_(f,D),le(C,D,null),J=!0},p(m,A){const E={};A[0]&513&&(E.disabled=m[9]||m[0]==="guiding"||m[0]==="waiting"),A[0]&896|A[3]&512&&(E.$$scope={dirty:A,ctx:m}),s.$set(E),m[7]?y?y.p(m,A):(y=vt(m),y.c(),y.m(n,d)):y&&(y.d(1),y=null),(!J||A[0]&2048)&&Ee(S,"width",m[11]+"%"),(!J||A[0]&4096&&q!==(q="guide-music-icon "+(m[12]?"glowing":"")+" svelte-1ktm6f3"))&&N(D,"class",q)},i(m){J||(F(s.$$.fragment,m),F(C.$$.fragment,m),J=!0)},o(m){H(s.$$.fragment,m),H(C.$$.fragment,m),J=!1},d(m){m&&(h(t),h(o),h(n)),ce(s),y&&y.d(),ce(C)}}}function yt(r){let t,e;return t=new Be({props:{class:"main-card",$$slots:{default:[On]},$$scope:{ctx:r}}}),{c(){ue(t.$$.fragment)},l(o){ie(t.$$.fragment,o)},m(o,n){le(t,o,n),e=!0},p(o,n){const s={};n[0]&1025|n[3]&512&&(s.$$scope={dirty:n,ctx:o}),t.$set(s)},i(o){e||(F(t.$$.fragment,o),e=!0)},o(o){H(t.$$.fragment,o),e=!1},d(o){ce(t,o)}}}function _t(r){let t,e=r[96].name+"",o,n,s;return{c(){t=I("div"),o=X(e),n=L(),this.h()},l(g){t=M(g,"DIV",{class:!0});var d=z(t);o=Q(d,e),n=B(d),d.forEach(h),this.h()},h(){N(t,"class",s="scale-item "+r[96].state+" svelte-1ktm6f3")},m(g,d){$(g,t,d),_(t,o),_(t,n)},p(g,d){d[0]&1024&&e!==(e=g[96].name+"")&&Ie(o,e),d[0]&1024&&s!==(s="scale-item "+g[96].state+" svelte-1ktm6f3")&&N(t,"class",s)},d(g){g&&h(t)}}}function St(r){let t,e="ã‚¬ã‚¤ãƒ‰ã«åˆã‚ã›ã¦ <strong>ãƒ‰ãƒ¬ãƒŸãƒ•ã‚¡ã‚½ãƒ©ã‚·ãƒ‰</strong> ã‚’æ­Œã£ã¦ãã ã•ã„";return{c(){t=I("div"),t.innerHTML=e,this.h()},l(o){t=M(o,"DIV",{class:!0,"data-svelte-h":!0}),pe(t)!=="svelte-sgc3nk"&&(t.innerHTML=e),this.h()},h(){N(t,"class","guide-instruction svelte-1ktm6f3")},m(o,n){$(o,t,n)},d(o){o&&h(t)}}}function On(r){let t,e='<h3 class="section-title svelte-1ktm6f3">ğŸµ ãƒ‰ãƒ¬ãƒŸéŸ³éšã‚¬ã‚¤ãƒ‰</h3>',o,n,s,g,d=Ue(r[10]),u=[];for(let i=0;i<d.length;i+=1)u[i]=_t(ut(r,d,i));let c=r[0]==="guiding"&&St();return{c(){t=I("div"),t.innerHTML=e,o=L(),n=I("div"),s=I("div");for(let i=0;i<u.length;i+=1)u[i].c();g=L(),c&&c.c(),this.h()},l(i){t=M(i,"DIV",{class:!0,"data-svelte-h":!0}),pe(t)!=="svelte-z1jpw4"&&(t.innerHTML=e),o=B(i),n=M(i,"DIV",{class:!0});var p=z(n);s=M(p,"DIV",{class:!0});var f=z(s);for(let S=0;S<u.length;S+=1)u[S].l(f);f.forEach(h),g=B(p),c&&c.l(p),p.forEach(h),this.h()},h(){N(t,"class","card-header svelte-1ktm6f3"),N(s,"class","scale-guide svelte-1ktm6f3"),N(n,"class","card-content svelte-1ktm6f3")},m(i,p){$(i,t,p),$(i,o,p),$(i,n,p),_(n,s);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(s,null);_(n,g),c&&c.m(n,null)},p(i,p){if(p[0]&1024){d=Ue(i[10]);let f;for(f=0;f<d.length;f+=1){const S=ut(i,d,f);u[f]?u[f].p(S,p):(u[f]=_t(S),u[f].c(),u[f].m(s,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=d.length}i[0]==="guiding"?c||(c=St(),c.c(),c.m(n,null)):c&&(c.d(1),c=null)},d(i){i&&(h(t),h(o),h(n)),Mt(u,i),c&&c.d()}}}function bt(r){let t,e,o,n,s;const g=[xn,Gn],d=[];function u(i,p){return i[4]&&i[5]?0:i[21]?1:-1}~(t=u(r))&&(e=d[t]=g[t](r));let c=r[0]==="results"&&wt(r);return{c(){e&&e.c(),o=L(),c&&c.c(),n=we()},l(i){e&&e.l(i),o=B(i),c&&c.l(i),n=we()},m(i,p){~t&&d[t].m(i,p),$(i,o,p),c&&c.m(i,p),$(i,n,p),s=!0},p(i,p){let f=t;t=u(i),t===f?~t&&d[t].p(i,p):(e&&(Ce(),H(d[f],1,1,()=>{d[f]=null}),Ae()),~t?(e=d[t],e?e.p(i,p):(e=d[t]=g[t](i),e.c()),F(e,1),e.m(o.parentNode,o)):e=null),i[0]==="results"?c?(c.p(i,p),p[0]&1&&F(c,1)):(c=wt(i),c.c(),F(c,1),c.m(n.parentNode,n)):c&&(Ce(),H(c,1,1,()=>{c=null}),Ae())},i(i){s||(F(e),F(c),s=!0)},o(i){H(e),H(c),s=!1},d(i){i&&(h(o),h(n)),~t&&d[t].d(i),c&&c.d(i)}}}function Gn(r){let t,e;return t=new Rt({props:{scoreData:r[21],showDetails:!1,className:"mb-6 iphone-no-margin",currentScoreData:r[16],intervalData:r[3],consistencyData:r[17],feedbackData:r[18],technicalFeedbackData:r[19],sessionStatistics:r[20]}}),{c(){ue(t.$$.fragment)},l(o){ie(t.$$.fragment,o)},m(o,n){le(t,o,n),e=!0},p(o,n){const s={};n[0]&2097152&&(s.scoreData=o[21]),n[0]&65536&&(s.currentScoreData=o[16]),n[0]&8&&(s.intervalData=o[3]),n[0]&131072&&(s.consistencyData=o[17]),n[0]&262144&&(s.feedbackData=o[18]),n[0]&524288&&(s.technicalFeedbackData=o[19]),n[0]&1048576&&(s.sessionStatistics=o[20]),t.$set(s)},i(o){e||(F(t.$$.fragment,o),e=!0)},o(o){H(t.$$.fragment,o),e=!1},d(o){ce(t,o)}}}function xn(r){let t,e;return t=new Rt({props:{scoreData:r[4],showDetails:!1,className:"mb-6 iphone-no-margin",currentScoreData:r[16],intervalData:r[3],consistencyData:r[17],feedbackData:r[18],technicalFeedbackData:r[19],sessionStatistics:r[20]}}),{c(){ue(t.$$.fragment)},l(o){ie(t.$$.fragment,o)},m(o,n){le(t,o,n),e=!0},p(o,n){const s={};n[0]&16&&(s.scoreData=o[4]),n[0]&65536&&(s.currentScoreData=o[16]),n[0]&8&&(s.intervalData=o[3]),n[0]&131072&&(s.consistencyData=o[17]),n[0]&262144&&(s.feedbackData=o[18]),n[0]&524288&&(s.technicalFeedbackData=o[19]),n[0]&1048576&&(s.sessionStatistics=o[20]),t.$set(s)},i(o){e||(F(t.$$.fragment,o),e=!0)},o(o){H(t.$$.fragment,o),e=!1},d(o){ce(t,o)}}}function wt(r){let t,e;return t=new Be({props:{class:"main-card bottom-action-card",$$slots:{default:[Un]},$$scope:{ctx:r}}}),{c(){ue(t.$$.fragment)},l(o){ie(t.$$.fragment,o)},m(o,n){le(t,o,n),e=!0},p(o,n){const s={};n[0]&32|n[3]&512&&(s.$$scope={dirty:n,ctx:o}),t.$set(s)},i(o){e||(F(t.$$.fragment,o),e=!0)},o(o){H(t.$$.fragment,o),e=!1},d(o){ce(t,o)}}}function Un(r){let t,e,o;return e=new Nt({props:{isCompleted:r[5],position:"bottom"}}),e.$on("action",r[29]),{c(){t=I("div"),ue(e.$$.fragment),this.h()},l(n){t=M(n,"DIV",{class:!0});var s=z(t);ie(e.$$.fragment,s),s.forEach(h),this.h()},h(){N(t,"class","card-content svelte-1ktm6f3")},m(n,s){$(n,t,s),le(e,t,null),o=!0},p(n,s){const g={};s[0]&32&&(g.isCompleted=n[5]),e.$set(g)},i(n){o||(F(e.$$.fragment,n),o=!0)},o(n){H(e.$$.fragment,n),o=!1},d(n){n&&h(t),ce(e)}}}function Qn(r){let t,e,o="âš¡ é€£ç¶šãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ¢ãƒ¼ãƒ‰",n,s,g="ä¸­ç´šè€…å‘ã‘ï¼š8ã‚»ãƒƒã‚·ãƒ§ãƒ³é€£ç¶šã§åŸºéŸ³ãŒè‡ªå‹•å†ç”Ÿã•ã‚Œã‚‹é›†ä¸­ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°",d,u,c,i,p,f,S,b,D,C,q,J,y,m,A,E,w=r[1]==="granted"&&!r[24]&&mt(r);const te=[$n,Fn],U=[];function j(V,x){return V[1]==="granted"?0:1}return y=j(r),m=U[y]=te[y](r),{c(){t=I("div"),e=I("h1"),e.textContent=o,n=L(),s=I("p"),s.textContent=g,d=L(),w&&w.c(),u=L(),c=I("div"),i=X("ğŸ“± "),p=X(Dt),f=X(" | "),S=X(kt),b=I("br"),D=L(),C=I("small"),q=X(Ct),J=L(),m.c(),A=we(),this.h()},l(V){t=M(V,"DIV",{class:!0});var x=z(t);e=M(x,"H1",{class:!0,"data-svelte-h":!0}),pe(e)!=="svelte-1nub9gt"&&(e.textContent=o),n=B(x),s=M(x,"P",{class:!0,"data-svelte-h":!0}),pe(s)!=="svelte-gneggn"&&(s.textContent=g),d=B(x),w&&w.l(x),u=B(x),c=M(x,"DIV",{class:!0});var O=z(c);i=Q(O,"ğŸ“± "),p=Q(O,Dt),f=Q(O," | "),S=Q(O,kt),b=M(O,"BR",{}),D=B(O),C=M(O,"SMALL",{style:!0});var P=z(C);q=Q(P,Ct),P.forEach(h),O.forEach(h),x.forEach(h),J=B(V),m.l(V),A=we(),this.h()},h(){N(e,"class","page-title svelte-1ktm6f3"),N(s,"class","page-description svelte-1ktm6f3"),Ee(C,"font-size","0.6rem"),N(c,"class","debug-info svelte-1ktm6f3"),N(t,"class","header-section svelte-1ktm6f3")},m(V,x){$(V,t,x),_(t,e),_(t,n),_(t,s),_(t,d),w&&w.m(t,null),_(t,u),_(t,c),_(c,i),_(c,p),_(c,f),_(c,S),_(c,b),_(c,D),_(c,C),_(C,q),$(V,J,x),U[y].m(V,x),$(V,A,x),E=!0},p(V,x){V[1]==="granted"&&!V[24]?w?(w.p(V,x),x[0]&16777218&&F(w,1)):(w=mt(V),w.c(),F(w,1),w.m(t,u)):w&&(Ce(),H(w,1,1,()=>{w=null}),Ae());let O=y;y=j(V),y===O?U[y].p(V,x):(Ce(),H(U[O],1,1,()=>{U[O]=null}),Ae(),m=U[y],m?m.p(V,x):(m=U[y]=te[y](V),m.c()),F(m,1),m.m(A.parentNode,A))},i(V){E||(F(w),F(m),E=!0)},o(V){H(w),H(m),E=!1},d(V){V&&(h(t),h(J),h(A)),w&&w.d(),U[y].d(V)}}}function Xn(r){let t,e,o;return e=new dn({props:{$$slots:{default:[Qn]},$$scope:{ctx:r}}}),{c(){t=L(),ue(e.$$.fragment),this.h()},l(n){cn("svelte-13kpo59",it.head).forEach(h),t=B(n),ie(e.$$.fragment,n),this.h()},h(){it.title="é€£ç¶šãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ¢ãƒ¼ãƒ‰ - ç›¸å¯¾éŸ³æ„Ÿãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°"},m(n,s){$(n,t,s),le(e,n,s),o=!0},p(n,s){const g={};s[0]&33554431|s[3]&512&&(g.$$scope={dirty:s,ctx:n}),e.$set(g)},i(n){o||(F(e.$$.fragment,n),o=!0)},o(n){H(e.$$.fragment,n),o=!1},d(n){n&&h(t),ce(e,n)}}}const Dt="v2.3.1-ANIMATED",kt="07/29 04:15",Ct="ğŸ¬ è©•ä¾¡åˆ†å¸ƒã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…ãƒ»UXå‘ä¸Š";function Jn(){const r=/iPhone/.test(navigator.userAgent),t=/iPad/.test(navigator.userAgent),e=/Macintosh/.test(navigator.userAgent)&&"ontouchend"in document;return r||t||e?(console.log("ğŸ”Š [RandomTraining] iOS/iPadOSæ¤œå‡º - éŸ³é‡35dBè¨­å®š"),35):(console.log("ğŸ”Š [RandomTraining] PCæ¤œå‡º - éŸ³é‡-6dBè¨­å®š"),-6)}function At(r){return[{scale:"ãƒ‰",interval:"unison",intervalName:"ãƒ¦ãƒ‹ã‚¾ãƒ³"},{scale:"ãƒ¬",interval:"major_second",intervalName:"é•·2åº¦"},{scale:"ãƒŸ",interval:"major_third",intervalName:"é•·3åº¦"},{scale:"ãƒ•ã‚¡",interval:"perfect_fourth",intervalName:"å®Œå…¨4åº¦"},{scale:"ã‚½",interval:"perfect_fifth",intervalName:"å®Œå…¨5åº¦"},{scale:"ãƒ©",interval:"major_sixth",intervalName:"é•·6åº¦"},{scale:"ã‚·",interval:"major_seventh",intervalName:"é•·7åº¦"},{scale:"ãƒ‰ï¼ˆé«˜ï¼‰",interval:"octave",intervalName:"ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–"}].map((e,o)=>{const n=r.find(s=>s.targetNote&&s.targetNote.includes(e.scale))||r[o];if(n&&n.accuracy!=="notMeasured"){const s=parseFloat(n.accuracy)||0,g=Math.round((100-s)*.5);return{type:e.interval,scale:e.scale,intervalName:e.intervalName,attempts:1,averageError:g,accuracy:s}}else return{type:e.interval,scale:e.scale,intervalName:e.intervalName,attempts:0,averageError:null,accuracy:0}})}function Kn(r){if(!r||!Array.isArray(r))return console.warn("âš ï¸ [RandomTraining] sessionHistory ãŒç„¡åŠ¹ã§ã™"),[];const t=[{type:"unison",scale:"ãƒ‰",intervalName:"ãƒ¦ãƒ‹ã‚¾ãƒ³",noteIndex:0},{type:"major_second",scale:"ãƒ¬",intervalName:"é•·2åº¦",noteIndex:1},{type:"major_third",scale:"ãƒŸ",intervalName:"é•·3åº¦",noteIndex:2},{type:"perfect_fourth",scale:"ãƒ•ã‚¡",intervalName:"å®Œå…¨4åº¦",noteIndex:3},{type:"perfect_fifth",scale:"ã‚½",intervalName:"å®Œå…¨5åº¦",noteIndex:4},{type:"major_sixth",scale:"ãƒ©",intervalName:"é•·6åº¦",noteIndex:5},{type:"major_seventh",scale:"ã‚·",intervalName:"é•·7åº¦",noteIndex:6},{type:"octave",scale:"ãƒ‰ï¼ˆé«˜ï¼‰",intervalName:"ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–",noteIndex:7}],e={};return t.forEach(o=>{e[o.type]={type:o.type,scale:o.scale,intervalName:o.intervalName,attempts:0,successCount:0,accuracySum:0,accuracyValues:[],errorValues:[]}}),r.forEach(o=>{!o.noteResults||!Array.isArray(o.noteResults)||o.noteResults.forEach((n,s)=>{if(s>=t.length)return;const g=t[s].type,d=e[g];if(d.attempts++,n.accuracy!=="notMeasured"&&typeof n.accuracy=="number"){d.accuracyValues.push(n.accuracy),d.accuracySum+=n.accuracy;const u=Math.round((100-n.accuracy)*.5);d.errorValues.push(u),n.accuracy>=70&&d.successCount++}})}),t.map(o=>{const n=e[o.type];if(n.attempts===0)return{type:o.type,scale:o.scale,intervalName:o.intervalName,attempts:0,averageError:null,accuracy:0};const s=n.accuracyValues.length>0?Math.round(n.accuracySum/n.accuracyValues.length):0,g=n.errorValues.length>0?Math.round(n.errorValues.reduce((u,c)=>u+c,0)/n.errorValues.length):null,d=n.accuracyValues.length>0?Math.round(n.successCount/n.accuracyValues.length*100):0;return{type:o.type,scale:o.scale,intervalName:o.intervalName,mastery:d,attempts:n.attempts,averageError:g,accuracy:s}})}function Wn(r){const t=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];if(r<=0)return"ãƒ¼ãƒ¼";const o=Math.round(12*Math.log2(r/440)),n=(o+9+120)%12,s=Math.floor((o+9)/12)+4;return t[n]+s}function Tt(r,t){const e=[{factor:4,freq:r*4,description:"2ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸Š"},{factor:3,freq:r*3,description:"1.5ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸Š"},{factor:2.5,freq:r*2.5,description:"1.3ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸Š"},{factor:2,freq:r*2,description:"1ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸Š"},{factor:1.5,freq:r*1.5,description:"0.5ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸Š"},{factor:1,freq:r,description:"è£œæ­£ãªã—"},{factor:.75,freq:r*.75,description:"0.33ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸‹"},{factor:.67,freq:r*.67,description:"0.5ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸‹"},{factor:.5,freq:r*.5,description:"1ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸‹"},{factor:.4,freq:r*.4,description:"1.3ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸‹"},{factor:.33,freq:r*.33,description:"1.5ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸‹"},{factor:.25,freq:r*.25,description:"2ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸‹"}];let o=null,n=1/0;const s=t*.5,g=t*1.5,d=e.filter(u=>u.freq>=s&&u.freq<=g);for(const u of d){const c=Math.abs(u.freq-t);c<n&&(n=c,o=u)}if(!o)for(const u of e){const c=Math.abs(u.freq-t);c<n&&(n=c,o=u)}return o?{correctedFrequency:o.freq,factor:o.factor,description:o.description,error:n}:{correctedFrequency:r,factor:1,description:"è£œæ­£ãªã—ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰",error:Math.abs(r-t)}}function xe(){try{"scrollTo"in window&&"behavior"in document.documentElement.style?window.scrollTo({top:0,behavior:"smooth"}):window.scrollTo(0,0),document.body&&(document.body.scrollTop=0),document.documentElement&&(document.documentElement.scrollTop=0),document.querySelectorAll("[data-scroll-container], .scroll-container, main").forEach(t=>{t.scrollTo?t.scrollTo(0,0):t.scrollTop=0})}catch(r){console.warn("ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¨ãƒ©ãƒ¼:",r);try{window.scroll(0,0)}catch(t){console.error("ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å®Œå…¨å¤±æ•—:",t)}}}function Yn(r){}function Zn(r){console.error("âŒ PitchDetectorã‚¨ãƒ©ãƒ¼:",r.detail)}function eo(r,t,e){let o,n,s,g,d,u,c,i,p,f;be(r,Sn,a=>e(4,o=a)),be(r,bn,a=>e(5,n=a)),be(r,mn,a=>e(52,s=a)),be(r,wn,a=>e(53,g=a)),be(r,Dn,a=>e(54,d=a)),be(r,kn,a=>e(55,u=a)),be(r,Cn,a=>e(56,c=a)),be(r,An,a=>e(23,i=a)),be(r,Tn,a=>e(57,p=a)),be(r,Mn,a=>e(24,f=a));function S(a){return Ge.evaluateOverall(a)}let b="setup",D=typeof window<"u"?new URLSearchParams(window.location.search).get("from")==="microphone-test"?(ee.info("[RandomTraining] ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã‹ã‚‰ã®é·ç§»ã‚’æ¤œå‡º"),"granted"):(ee.info("[RandomTraining] ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹ã‚’æ¤œå‡º"),"checking"):"checking",C=!0,q=[];const J=["ãƒ‰","ãƒ¬","ãƒŸ","ãƒ•ã‚¡","ã‚½","ãƒ©","ã‚·","ãƒ‰ï¼ˆé«˜ï¼‰"];let y="",m=0,A=!1,E=0,w=J.map(a=>({name:a,state:"inactive",completed:!1})),te=null,U=!1,j=0,V=null,x=!1,O=[],P=0,oe=0,_e="ãƒ¼ãƒ¼",se=null,de={totalScore:0,grade:"C",componentScores:{pitchAccuracy:0,recognitionSpeed:0,intervalMastery:0,directionAccuracy:0,consistency:0}},re=[],he=[],Te={},Ne={},Me={totalAttempts:0,successRate:0,averageScore:0,bestScore:0,sessionDuration:0,streakCount:0,fatigueLevel:"fresh",mostDifficultInterval:"-",mostSuccessfulInterval:"-",averageResponseTime:0,sessionStart:Date.now()},K=[],ne=null,De=null,Fe=!0,ae=null,Re=null,We=null,Ye=null,Le=null;const qe=[{note:"C4",name:"ãƒ‰ï¼ˆä¸­ï¼‰",frequency:261.63,semitonesFromC:0},{note:"Db4",name:"ãƒ‰#ï¼ˆä¸­ï¼‰",frequency:277.18,semitonesFromC:1},{note:"D4",name:"ãƒ¬ï¼ˆä¸­ï¼‰",frequency:293.66,semitonesFromC:2},{note:"Eb4",name:"ãƒ¬#ï¼ˆä¸­ï¼‰",frequency:311.13,semitonesFromC:3},{note:"E4",name:"ãƒŸï¼ˆä¸­ï¼‰",frequency:329.63,semitonesFromC:4},{note:"F4",name:"ãƒ•ã‚¡ï¼ˆä¸­ï¼‰",frequency:349.23,semitonesFromC:5},{note:"Gb4",name:"ãƒ•ã‚¡#ï¼ˆä¸­ï¼‰",frequency:369.99,semitonesFromC:6},{note:"Ab4",name:"ãƒ©bï¼ˆä¸­ï¼‰",frequency:415.3,semitonesFromC:8},{note:"Bb3",name:"ã‚·bï¼ˆä½ï¼‰",frequency:233.08,semitonesFromC:-2},{note:"B3",name:"ã‚·ï¼ˆä½ï¼‰",frequency:246.94,semitonesFromC:-1}];async function Pe(){var a;e(1,D="checking");try{if(console.log("ğŸ¤ [RandomTraining] AudioManagerçµŒç”±ã§ãƒã‚¤ã‚¯è¨±å¯ç¢ºèªé–‹å§‹"),!((a=navigator.mediaDevices)!=null&&a.getUserMedia)){e(1,D="error");return}const l=await $e.initialize();We=l.audioContext,Re=l.mediaStream,Ye=l.sourceNode,console.log("âœ… [RandomTraining] AudioManager ãƒªã‚½ãƒ¼ã‚¹å–å¾—å®Œäº†"),e(1,D="granted"),e(0,b="setup"),setTimeout(async()=>{if(ae){ee.audio("[RandomTraining] PitchDetectoråˆæœŸåŒ–é–‹å§‹");const v=/iPhone/.test(navigator.userAgent),k=/iPad/.test(navigator.userAgent),T=/Macintosh/.test(navigator.userAgent)&&"ontouchend"in document;(k||T)&&(console.log("ğŸ”§ [RandomTraining] iPadæ¤œå‡º - ãƒã‚¤ã‚¯æ„Ÿåº¦7.0xè‡ªå‹•è¨­å®šé–‹å§‹"),$e.setSensitivity(7),console.log("âœ… [RandomTraining] iPad ãƒã‚¤ã‚¯æ„Ÿåº¦7.0xè‡ªå‹•è¨­å®šå®Œäº†"));try{console.log("ğŸ¤ [RandomTraining] AudioManagerå†åˆæœŸåŒ–é–‹å§‹ï¼ˆiPadå¯¾å¿œï¼‰"),await $e.initialize(),console.log("âœ… [RandomTraining] AudioManagerå†åˆæœŸåŒ–å®Œäº†")}catch(R){console.warn("âš ï¸ AudioManagerå†åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",R)}await ae.initialize(),ee.audio("[RandomTraining] PitchDetectoråˆæœŸåŒ–å®Œäº†")}},200)}catch(l){ee.error("[RandomTraining] ãƒã‚¤ã‚¯è¨±å¯ã‚¨ãƒ©ãƒ¼:",l),e(1,D=(l==null?void 0:l.name)==="NotAllowedError"?"denied":"error")}}function Ze(){const a=c,l=u,v=qe.find(k=>k.note===a)||qe.find(k=>k.name===l)||qe[0];if(e(7,y=v.name),e(8,m=v.frequency),ee.info(`[BaseNote] åŸºéŸ³è¨­å®šï¼ˆlocalStorageé€£æºï¼‰: ${y} = ${m}Hz`),ee.info(`[BaseNote] localStorageåŸºéŸ³æƒ…å ±: note=${a}, name=${l}`),!m||m<=0)throw ee.error("[BaseNote] åŸºéŸ³å‘¨æ³¢æ•°è¨­å®šã‚¨ãƒ©ãƒ¼:",v),new Error(`Invalid base frequency: ${m}`)}async function Ft(){if(A||!De||Fe)return;if(D!=="granted"){console.log("ğŸ¤ [RandomTraining] ãƒã‚¤ã‚¯è¨±å¯ãŒå¿…è¦ã§ã™ã€‚è¨±å¯å–å¾—ã‚’é–‹å§‹...");try{await Pe(),console.log("ğŸ¤ [RandomTraining] ãƒã‚¤ã‚¯è¨±å¯å–å¾—å®Œäº†")}catch(l){console.error("âŒ ãƒã‚¤ã‚¯è¨±å¯ã‚¨ãƒ©ãƒ¼:",l);return}}if(!Re&&D==="granted"){console.log("ğŸ¤ [RandomTraining] AudioManagerãƒªã‚½ãƒ¼ã‚¹æœªåˆæœŸåŒ–ã®ãŸã‚å–å¾—ã—ã¾ã™");try{await Pe()}catch(l){console.error("âŒ AudioManagerãƒªã‚½ãƒ¼ã‚¹åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",l);return}}else Re&&console.log("ğŸ¤ [RandomTraining] AudioManagerãƒªã‚½ãƒ¼ã‚¹æ—¢å­˜ã®ãŸã‚å†åˆ©ç”¨");e(9,A=!0),e(0,b="listening"),Le=Date.now(),Ze();const a=qe.find(l=>l.name===y).note;De.triggerAttackRelease(a,2,lt(),.7),setTimeout(()=>{e(9,A=!1),e(0,b="waiting"),setTimeout(()=>et(),500)},2e3)}async function $t(){if(A||!De||f||!y)return;if(D!=="granted"){console.log("ğŸ¤ [RandomTraining] ãƒã‚¤ã‚¯è¨±å¯ãŒå¿…è¦ã§ã™ã€‚è¨±å¯å–å¾—ã‚’é–‹å§‹...");try{await Pe(),console.log("ğŸ¤ [RandomTraining] ãƒã‚¤ã‚¯è¨±å¯å–å¾—å®Œäº†")}catch(l){console.error("âŒ ãƒã‚¤ã‚¯è¨±å¯ã‚¨ãƒ©ãƒ¼:",l);return}}if(!Re&&D==="granted"){console.log("ğŸ¤ [RandomTraining] AudioManagerãƒªã‚½ãƒ¼ã‚¹æœªåˆæœŸåŒ–ã®ãŸã‚å–å¾—ã—ã¾ã™");try{await Pe()}catch(l){console.error("âŒ AudioManagerãƒªã‚½ãƒ¼ã‚¹åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",l);return}}else Re&&console.log("ğŸ¤ [RandomTraining] AudioManagerãƒªã‚½ãƒ¼ã‚¹æ—¢å­˜ã®ãŸã‚å†åˆ©ç”¨");if(e(9,A=!0),e(0,b="listening"),Le=Date.now(),typeof window<"u"&&window.Tone){const l=window.Tone.context||window.Tone.getContext();l&&l.state==="suspended"&&(console.log("ğŸ”„ [RandomTraining] AudioContext suspendedæ¤œå‡º - å†é–‹ä¸­..."),await l.resume(),console.log("âœ… [RandomTraining] AudioContextå†é–‹å®Œäº†"))}const a=qe.find(l=>l.name===y).note;De.triggerAttackRelease(a,2,lt(),.7),setTimeout(()=>{e(9,A=!1),e(0,b="waiting"),setTimeout(()=>et(),500)},2e3)}function Et(){y&&m>0?$t():Ft(),qt()}function qt(){V&&clearInterval(V),e(11,j=0),e(12,x=!1),console.log("ğŸµ [GuideStartBar] ã‚¬ã‚¤ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆãƒãƒ¼é–‹å§‹"),V=setInterval(()=>{e(11,j+=2.5),j>=100&&(e(11,j=100),e(12,x=!0),console.log("ğŸµ [GuideStartBar] ã‚¬ã‚¤ãƒ‰é–‹å§‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ï¼"),setTimeout(()=>{e(12,x=!1),e(11,j=0)},800),clearInterval(V),V=null)},50)}function ze(a,l){const k=[0,2,4,5,7,9,11,12][l],T=a*Math.pow(2,k/12);return ee.debug(`[calculateExpectedFrequency] ${w[l].name}: åŸºéŸ³${a.toFixed(1)}Hz + ${k}åŠéŸ³ = ${T.toFixed(1)}Hz`),T}function Pt(a,l){return ze(a,l)}function et(){e(0,b="guiding"),E=0,U=!0,O=[],console.log(`ğŸ¬ ã‚¬ã‚¤ãƒ‰é–‹å§‹: ${y} (${m.toFixed(1)}Hz)`);function a(){if(E<w.length){E>0&&e(10,w[E-1].state="inactive",w),e(10,w[E].state="active",w);const l=Pt(m,E);at.setScaleContext({baseFrequency:m,currentScale:w[E].name,targetFrequency:l}),console.log(`ğŸµ [Scale] åŸºéŸ³:${y}(${m.toFixed(0)}Hz) ç¾åœ¨:${w[E].name} ç›®æ¨™:${l.toFixed(0)}Hz`),E>=4&&console.log(`ğŸ” [ãƒ‡ãƒãƒƒã‚°] Step ${E}: currentBaseFrequency=${m}, currentBaseNote='${y}'`),E++,te=setTimeout(()=>{a()},600)}else Ht()}a()}function Ht(){U=!1,console.log(`ğŸ ã‚¬ã‚¤ãƒ‰å®Œäº†: ${O.length}/${w.length}ã‚¹ãƒ†ãƒƒãƒ—è©•ä¾¡`),w.length>0&&e(10,w[w.length-1].state="inactive",w),ae&&ae.stopDetection(),at.clearContext(),Vt(),Ot(),K=J.map(a=>{const l=O.find(v=>v.stepName===a);return l?{name:l.stepName,cents:l.adjustedFrequency?Math.round(l.centDifference):null,targetFreq:l.expectedFrequency,detectedFreq:l.adjustedFrequency||null,diff:l.adjustedFrequency?l.adjustedFrequency-l.expectedFrequency:null,accuracy:l.accuracy}:{name:a,cents:null,targetFreq:null,detectedFreq:null,diff:null,accuracy:"notMeasured"}}),xt(),Qt(),e(0,b="results")}function Vt(){let a=0,l=0;O.forEach((T,R)=>{T.isCorrect&&a++,l+=T.accuracy});const v=O.length>0?Math.round(l/O.length):0,k=Math.round(a/w.length*100);w.length,console.log(`ğŸ¯ çµæœ: ${a}/${w.length}æ­£è§£ (${k}%) å¹³å‡ç²¾åº¦${v}%`),O.length>0&&[...O]}function Bt(){rt(`${Je}/microphone-test`)}function je(){rt(`${Je}/`)}async function Lt(){try{e(32,Fe=!0),e(31,De=new hn({urls:{C4:"C4.mp3"},baseUrl:`${Je}/audio/piano/`,release:1.5,volume:Jn(),onload:()=>{e(32,Fe=!1)},onerror:T=>{console.error("âŒ Salamander PianoéŸ³æºèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:",T),e(32,Fe=!1)}}).toDestination());const a=/iPhone/.test(navigator.userAgent),l=/iPad/.test(navigator.userAgent),v=/Macintosh/.test(navigator.userAgent)&&"ontouchend"in document,k=a||l||v;console.log(l?"ğŸ” [RandomTraining] iPadæ¤œå‡º:":v?"ğŸ” [RandomTraining] iPadOSæ¤œå‡º:":a?"ğŸ” [RandomTraining] iPhoneæ¤œå‡º:":"ğŸ” [RandomTraining] ãã®ä»–ãƒ‡ãƒã‚¤ã‚¹æ¤œå‡º:",navigator.userAgent),console.log("ğŸ”Š [RandomTraining] éŸ³é‡è¨­å®šç¶­æŒ: 35dB")}catch(a){console.error("ã‚µãƒ³ãƒ—ãƒ©ãƒ¼åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",a),e(32,Fe=!1)}}async function Qe(){try{(await navigator.permissions.query({name:"microphone"})).state==="granted"?await Pe():e(1,D="denied")}catch{e(1,D="denied")}}function zt(){try{se=new vn,ee.info("[RandomTraining] æ¡ç‚¹ã‚¨ãƒ³ã‚¸ãƒ³åˆæœŸåŒ–å®Œäº†")}catch(a){ee.error("[RandomTraining] æ¡ç‚¹ã‚¨ãƒ³ã‚¸ãƒ³åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",a)}}function jt(a,l){if(!se||!U)return;const v=E-1;if(v<0||v>=w.length)return;const k=ze(m,v),T={baseFrequency:m,targetFrequency:k,detectedFrequency:a,detectedNote:l,volume:P,timestamp:Date.now(),scaleIndex:v,scaleName:w[v].name};try{se.processAttempt(T)}catch(R){ee.error("[RandomTraining] æ¡ç‚¹ã‚¨ãƒ³ã‚¸ãƒ³ã‚¨ãƒ©ãƒ¼:",R)}}function Ot(){if(!se){ee.error("[RandomTraining] æ¡ç‚¹ã‚¨ãƒ³ã‚¸ãƒ³ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“"),Gt();return}try{const a=se.generateDetailedReport();e(16,de={totalScore:a.totalScore,grade:a.grade,componentScores:a.componentScores}),a.intervalAnalysis&&a.intervalAnalysis.masteryLevels?e(3,re=Object.entries(a.intervalAnalysis.masteryLevels).map(([l,v])=>{var k,T;return{type:l,mastery:Math.round(v),attempts:((k=a.intervalAnalysis.attemptCounts)==null?void 0:k[l])||0,accuracy:((T=a.intervalAnalysis.accuracyRates)==null?void 0:T[l])||0}})):(console.warn("âš ï¸ [RandomTraining] intervalAnalysis.masteryLevels ãŒæœªå®šç¾©ã§ã™"),e(3,re=[])),a.consistencyHistory&&Array.isArray(a.consistencyHistory)?e(17,he=a.consistencyHistory.map((l,v)=>({score:Math.round(l),timestamp:Date.now()-(a.consistencyHistory.length-v)*1e3}))):(console.warn("âš ï¸ [RandomTraining] consistencyHistory ãŒæœªå®šç¾©ã¾ãŸã¯é…åˆ—ã§ã¯ã‚ã‚Šã¾ã›ã‚“"),e(17,he=[])),e(18,Te=a.feedback||{primary:"æ¡ç‚¹çµæœã‚’ç”Ÿæˆä¸­ã§ã™...",detailed:[],suggestions:[]}),e(20,Me={totalAttempts:a.totalAttempts||0,successRate:a.successRate||0,averageScore:a.totalScore||0,bestScore:Math.max(a.totalScore||0,Me.bestScore||0),sessionDuration:Math.round((Date.now()-Me.sessionStart)/6e4)||0,streakCount:a.streak||0,fatigueLevel:a.fatigueLevel||"normal",mostDifficultInterval:a.mostDifficultInterval||"-",mostSuccessfulInterval:a.mostSuccessfulInterval||"-",averageResponseTime:a.averageResponseTime||0}),ee.info("[RandomTraining] æ¡ç‚¹çµæœç”Ÿæˆå®Œäº†:",de)}catch(a){ee.error("[RandomTraining] æ¡ç‚¹çµæœç”Ÿæˆã‚¨ãƒ©ãƒ¼:",a)}}function Gt(){ee.info("[RandomTraining] ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã§æ¡ç‚¹çµæœã‚’ç”Ÿæˆ"),e(16,de={totalScore:78,grade:"B+",componentScores:{pitchAccuracy:82,recognitionSpeed:75,intervalMastery:80,directionAccuracy:85,consistency:70}}),e(3,re=[{type:"unison",mastery:95,attempts:8,accuracy:98},{type:"major_second",mastery:82,attempts:8,accuracy:85},{type:"major_third",mastery:78,attempts:8,accuracy:80},{type:"perfect_fourth",mastery:65,attempts:8,accuracy:68},{type:"perfect_fifth",mastery:88,attempts:8,accuracy:90},{type:"major_sixth",mastery:72,attempts:8,accuracy:75},{type:"major_seventh",mastery:58,attempts:8,accuracy:62},{type:"octave",mastery:92,attempts:8,accuracy:94}]),e(17,he=[{score:65,timestamp:Date.now()-42e4},{score:72,timestamp:Date.now()-36e4},{score:68,timestamp:Date.now()-3e5},{score:75,timestamp:Date.now()-24e4},{score:78,timestamp:Date.now()-18e4},{score:82,timestamp:Date.now()-12e4},{score:80,timestamp:Date.now()-6e4},{score:85,timestamp:Date.now()}]),e(18,Te={type:"improvement",primary:"è‰¯ã„é€²æ­©ãŒè¦‹ã‚‰ã‚Œã¾ã™ï¼",summary:"éŸ³ç¨‹ã®èªè­˜ç²¾åº¦ãŒå‘ä¸Šã—ã¦ã„ã¾ã™ã€‚ç‰¹ã«å®Œå…¨5åº¦ã¨ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ã®ç¿’å¾—åº¦ãŒé«˜ãã€åŸºæœ¬çš„ãªéŸ³æ„ŸãŒèº«ã«ã¤ã„ã¦ãã¦ã„ã¾ã™ã€‚",details:[{category:"strengths",text:"ãƒ¦ãƒ‹ã‚¾ãƒ³ã¨ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ã®èªè­˜ãŒã»ã¼å®Œç’§ã§ã™"},{category:"strengths",text:"å®Œå…¨5åº¦ã®å®‰å®šæ€§ãŒå„ªç§€ã§ã™"},{category:"improvements",text:"å®Œå…¨4åº¦ã®ç·´ç¿’ã‚’ã‚‚ã†å°‘ã—å¢—ã‚„ã—ã¾ã—ã‚‡ã†"},{category:"improvements",text:"é•·7åº¦ã®èªè­˜ç²¾åº¦ã‚’å‘ä¸Šã•ã›ã¾ã—ã‚‡ã†"},{category:"tips",text:"4åº¦ã¯ã€Œã‚½ãƒ¼ãƒ•ã‚¡ãƒ¼ã€ã®éŸ³ç¨‹ã§ã™"},{category:"practice",text:"æ¯æ—¥15åˆ†ã®ç¶™ç¶šç·´ç¿’ã‚’å¿ƒãŒã‘ã¾ã—ã‚‡ã†"}],nextSteps:["å®Œå…¨4åº¦ã®é›†ä¸­ç·´ç¿’ã‚’è¡Œã„ã¾ã—ã‚‡ã†","é€£ç¶šãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè·µç·´ç¿’ã‚’","1æ—¥15åˆ†ã®ç¶™ç¶šç·´ç¿’ã‚’å¿ƒãŒã‘ã¾ã—ã‚‡ã†"],motivation:"ç¶™ç¶šã¯åŠ›ãªã‚Šï¼ã‚ãªãŸã®ç›¸å¯¾éŸ³æ„Ÿã¯ç¢ºå®Ÿã«å‘ä¸Šã—ã¦ã„ã¾ã™ï¼"}),e(20,Me={totalAttempts:32,successRate:68.8,averageScore:78,bestScore:85,sessionDuration:8,streakCount:4,fatigueLevel:"normal",mostDifficultInterval:"å®Œå…¨4åº¦",mostSuccessfulInterval:"ãƒ¦ãƒ‹ã‚¾ãƒ³",averageResponseTime:2.1,sessionStart:Date.now()-48e4}),ee.info("[RandomTraining] ãƒ†ã‚¹ãƒˆæ¡ç‚¹çµæœç”Ÿæˆå®Œäº†")}function xt(){if(!K||K.length===0){console.warn("[UnifiedScore] noteResultsForDisplay ãŒç©ºã§ã™");return}const a=K.filter(G=>G.accuracy!=="notMeasured").length,l=K.length,v=K.filter(G=>G.accuracy!=="notMeasured"&&typeof G.accuracy=="number").map(G=>G.accuracy),k=v.length>0?Math.round(v.reduce((G,Se)=>G+Se,0)/v.length):0,T=y||"Unknown",R=m||0,Y=K.map(G=>({name:G.name,note:G.note||G.name,frequency:G.targetFreq||G.expectedFrequency,detectedFrequency:G.detectedFreq,cents:G.cents,grade:Ge.evaluateNote(G.cents),targetFreq:G.targetFreq,diff:G.diff})),Z=p,W=(Z==null?void 0:Z.sessionHistory)||[],ve={timestamp:new Date,baseNote:T,baseFrequency:R,noteResults:Y,measuredNotes:a,accuracy:k,grade:Ge.evaluateSession(K)},ke=[...W,ve];e(21,ne={mode:"continuous",timestamp:new Date,duration:60,totalNotes:l,measuredNotes:a,averageAccuracy:k,baseNote:T,baseFrequency:R,noteResults:Y,distribution:Ge.calculateDistribution(K),sessionHistory:ke,unifiedGrade:S(ke)}),console.log("[UnifiedScore] çµ±åˆæ¡ç‚¹ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆå®Œäº†ï¼ˆå®Œå…¨ç‰ˆï¼‰:",ne),Ut()}async function Ut(){if(!K||K.length===0){console.warn("ğŸ“Š [SessionStorage] ä¿å­˜ãƒ‡ãƒ¼ã‚¿ãªã—");return}try{console.log("ğŸ“Š [SessionStorage] ã‚»ãƒƒã‚·ãƒ§ãƒ³çµæœä¿å­˜é–‹å§‹");const a=K.map(R=>({name:R.name,cents:R.cents,targetFreq:R.targetFreq||R.expectedFrequency,detectedFreq:R.detectedFreq,diff:R.diff,accuracy:typeof R.accuracy=="number"?R.accuracy:0})),l=Le?Math.round((Date.now()-Le)/1e3):60;await _n(a,l,c,u)?(console.log("ğŸ“Š [SessionStorage] ã‚»ãƒƒã‚·ãƒ§ãƒ³çµæœä¿å­˜å®Œäº†"),console.log("ğŸ“Š [SessionStorage] ä¿å­˜å¾Œã®çŠ¶æ³:",{currentSession:g,totalSessions:i.length,isCompleted:n,nextBaseNote:c,nextBaseName:u})):console.error("ğŸ“Š [SessionStorage] ã‚»ãƒƒã‚·ãƒ§ãƒ³çµæœä¿å­˜å¤±æ•—")}catch(a){console.error("ğŸ“Š [SessionStorage] ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¿å­˜ã‚¨ãƒ©ãƒ¼:",a)}}async function Qt(){try{if(se){const a=i||[];for(const[v,k]of a.entries())if(k.noteResults&&k.noteResults.length>0){const T=k.baseFrequency||262;for(const R of k.noteResults)R.detectedFreq&&R.targetFreq&&await se.analyzePerformance({baseFreq:T,targetFreq:R.targetFreq,detectedFreq:R.detectedFreq,responseTime:2e3,volume:50,harmonicCorrection:null})}const l=se.generateDetailedReport();e(16,de={totalScore:l.totalScore||0,grade:l.grade||"C",componentScores:l.componentScores||{accuracy:0,speed:0,consistency:0}}),l.intervalAnalysis&&l.intervalAnalysis.masteryLevels?e(3,re=Object.entries(l.intervalAnalysis.masteryLevels).map(([v,k])=>{var T;return{type:v,mastery:Math.round(k),attempts:((T=l.intervalAnalysis.attemptCounts)==null?void 0:T[v])||0,accuracy:Math.round(k*.9)}})):e(3,re=At(K)),l.consistencyHistory&&Array.isArray(l.consistencyHistory)?e(17,he=l.consistencyHistory.map((v,k)=>({score:Math.round(v),timestamp:Date.now()-(l.consistencyHistory.length-k)*1e3}))):e(17,he=nt(K)),e(18,Te=ot(K)||l.feedback),console.log("ğŸ¯ [generateEnhancedScoringData] æŠ€è¡“åˆ†æçµæœç”Ÿæˆã‚’é–‹å§‹"),console.log("ğŸ¯ [generateEnhancedScoringData] results:",l),e(19,Ne=Xt(l)),console.log("ğŸ¯ [generateEnhancedScoringData] technicalFeedbackDataçµæœ:",Ne),e(20,Me={totalAttempts:l.totalAttempts||K.length,successRate:l.successRate||K.filter(v=>v.accuracy!=="notMeasured").length/K.length*100,averageScore:l.totalScore||(ne==null?void 0:ne.averageAccuracy)||0,bestScore:Math.max(l.totalScore||0,Me.bestScore||0),sessionDuration:Math.round(60),streakCount:l.streak||0,fatigueLevel:l.fatigueLevel||"normal",mostDifficultInterval:l.mostDifficultInterval||"æœªç‰¹å®š",mostSuccessfulInterval:l.mostSuccessfulInterval||"æœªç‰¹å®š",averageResponseTime:l.averageResponseTime||2.5,sessionStart:Date.now()-6e4})}else tt();console.log("[EnhancedScoring] è¿½åŠ æ¡ç‚¹ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆå®Œäº†")}catch(a){console.error("[EnhancedScoring] ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆã‚¨ãƒ©ãƒ¼:",a),tt()}}function tt(){const a=K.filter(v=>v.accuracy!=="notMeasured"),l=(ne==null?void 0:ne.averageAccuracy)||0;e(16,de={totalScore:Math.round(l*.8),grade:l>=90?"A":l>=80?"B":l>=70?"C":"D",componentScores:{accuracy:l,speed:85,consistency:Math.max(60,l-10)}}),e(3,re=At(K)),e(17,he=nt()),e(18,Te=ot(K)),e(20,Me={totalAttempts:K.length,successRate:a.length/K.length*100,averageScore:l,bestScore:l,sessionDuration:60,streakCount:0,fatigueLevel:"normal",mostDifficultInterval:"æœªåˆ†æ",mostSuccessfulInterval:"æœªåˆ†æ",averageResponseTime:2.5,sessionStart:Date.now()-6e4})}function nt(a){const l=(ne==null?void 0:ne.averageAccuracy)||70;return Array.from({length:8},(v,k)=>({score:Math.max(30,Math.min(100,l+(Math.random()-.5)*20)),timestamp:Date.now()-(8-k)*7500}))}function ot(a){const l=a.filter(Ve=>Ve.accuracy!=="notMeasured").length,v=(ne==null?void 0:ne.averageAccuracy)||0,k=8,T=i||[],R=T.length,Y={type:"info",categories:[{name:"éŸ³ç¨‹ç²¾åº¦",icon:"Target",score:v,message:`${v}%ã®ç²¾åº¦ã§éŸ³ç¨‹ã‚’æ‰ãˆã¦ã„ã¾ã™`},{name:"æ¸¬å®šæˆåŠŸç‡",icon:"Mic",score:Math.round(l/a.length*100),message:`${a.length}éŸ³ä¸­${l}éŸ³ã‚’æ­£å¸¸ã«æ¸¬å®š`}]};if(R<k)return Y;let Z,W,ve;const ke=(ne==null?void 0:ne.unifiedGrade)||"E",G=T.length;let Se=0,fe=0,me=0;T.forEach(Ve=>{Ve.grade==="excellent"?Se++:Ve.grade==="good"?fe++:Ve.grade==="pass"&&me++});const ge=G>0?Math.round(Se/G*100):0,He=G>0?Math.round((Se+fe+me)/G*100):0,ye=G>0?Math.round((Se+fe+me)/G*100):0;switch(ke){case"S":Z="excellent",W="éŸ³æ¥½å®¶ãƒ¬ãƒ™ãƒ«ã®ç›¸å¯¾éŸ³æ„Ÿã‚’é”æˆï¼",ve=`å„ªç§€ç‡${ge}%è¶…ãˆã®å®ŸåŠ›ã‚’è¨¼æ˜ã•ã‚Œã¾ã—ãŸã€‚`;break;case"A":Z="excellent",W="ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ™ãƒ«åˆ°é”ï¼",ve=`å„ªç§€ç‡${ge}%ã®å®‰å®šã—ãŸéŸ³æ„Ÿèƒ½åŠ›ã§ã™ã€‚`;break;case"B":Z="improvement",W="ãƒ—ãƒ­ãƒ•ã‚£ã‚·ã‚¨ãƒ³ãƒˆç´šé”æˆï¼",ve=`è‰¯å¥½ç‡${He}%ã®ç¢ºå®Ÿãªé€²æ­©ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚`;break;case"C":Z="improvement",W="ã‚¢ãƒ‰ãƒãƒ³ã‚¹ç´šåˆ°é”ï¼",ve=`åˆæ ¼ç‡${ye}%ã§ç€å®Ÿã«æˆé•·ä¸­ã§ã™ã€‚`;break;case"D":Z="practice",W="ç¶™ç¶šç·´ç¿’ã§å¿…ãšä¸Šé”ï¼",ve=`ç¾åœ¨ã®åˆæ ¼ç‡${ye}%ã‹ã‚‰ç›®æ¨™70%ã¸å‘ã‘ã¦ç·´ç¿’ã‚’ç¶šã‘ã¾ã—ã‚‡ã†ã€‚`;break;case"E":default:Z="encouragement",W="Eç´šãƒ“ã‚®ãƒŠãƒ¼",ve="ç·´ç¿’é–‹å§‹æ®µéšã§ã™ã€‚ç¶™ç¶šçš„ãªç·´ç¿’ã§å¿…ãšä¸Šé”ã—ã¾ã™ã€‚";break}return{...Y,type:Z,primary:W,summary:ve}}function Xt(a){var ke,G,Se;if((i||[]).length<8||!a)return null;const T=a.improvements||[];(ke=a.detailed)!=null&&ke.statistics;const R=[];let Y=0,Z=0;if((G=a.detailed)!=null&&G.intervals){const fe=a.detailed.intervals;if(fe.totalAnalyses>0){let me=0,ge=0;for(const[He,ye]of Object.entries(fe.masteryLevels))ye.attempts>0&&(me+=ye.averageAccuracy*ye.attempts,ge+=ye.attempts);Y=ge>0?me/ge:0}}if((Se=a.detailed)!=null&&Se.directions){const fe=a.detailed.directions;if(fe.totalAnalyses>0){let me=0,ge=0;for(const[He,ye]of Object.entries(fe.masteryData))ye.attempts>0&&(me+=ye.averageAccuracy*ye.attempts,ge+=ye.attempts);Z=ge>0?me/ge:0}}R.push({category:"improvements",text:`éŸ³ç¨‹ç²¾åº¦: ${Math.round(Y)}%ã€€ï¼ˆéŸ³ã®é«˜ã•ã‚’æ‰ãˆã‚‹æ­£ç¢ºæ€§ã€€ç›®æ¨™åŸºæº–ï¼š70ã€œ85%ï¼‰`}),R.push({category:"improvements",text:`æ–¹å‘æ€§: ${Math.round(Z)}%ã€€ï¼ˆéŸ³ç¨‹ã®ä¸Šä¸‹åˆ¤æ–­ã®ç²¾åº¦ã€€ç›®æ¨™åŸºæº–ï¼š80ã€œ90%ï¼‰`});const W=T.map(fe=>({category:"tips",text:fe.message})),ve=T.flatMap(fe=>(fe.actions||[]).map(me=>({category:"practice",text:me})));return[...R,...W,...ve],{type:"info",primary:"è©³ç´°åˆ†æçµæœ",summary:"éŸ³ç¨‹ç²¾åº¦ãƒ»ä¸€è²«æ€§ãƒ»æ–¹å‘æ€§ã®ç·åˆåˆ†æ",details:R}}ln(async()=>{if(!(typeof localStorage<"u"?localStorage.getItem("mic-test-completed"):null)){console.log("ğŸš« [RandomTraining] ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆæœªå®Œäº† - æº–å‚™ç”»é¢è¡¨ç¤º"),Qe();return}console.log("ğŸ“Š [SessionStorage] ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†åˆæœŸåŒ–é–‹å§‹");try{if(await ct()){if(console.log("ğŸ“Š [SessionStorage] ã‚»ãƒƒã‚·ãƒ§ãƒ³é€²è¡ŒçŠ¶æ³ã®èª­ã¿è¾¼ã¿å®Œäº†"),console.log("ğŸ“Š [SessionStorage] ç¾åœ¨ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³:",g,"/ 8"),console.log("ğŸ“Š [SessionStorage] æ¬¡ã®åŸºéŸ³:",c,"(",u,")"),console.log("ğŸ“Š [SessionStorage] å®Œäº†çŠ¶æ³:",n?"8ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†":`æ®‹ã‚Š${d}ã‚»ãƒƒã‚·ãƒ§ãƒ³`),n&&(console.log("ğŸ”„ [SessionStorage] 8ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†æ¤œå‡º - æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹å‡¦ç†"),await Oe()?console.log("âœ… [SessionStorage] æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹å®Œäº† - ã‚»ãƒƒã‚·ãƒ§ãƒ³1/8ã‹ã‚‰å†é–‹"):console.warn("âš ï¸ [SessionStorage] æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹å‡¦ç†ãŒå¤±æ•—")),g>1&&!n){console.warn("ğŸ”„ [SessionStorage] ã‚»ãƒƒã‚·ãƒ§ãƒ³é€”ä¸­ã§ã®ãƒªãƒ­ãƒ¼ãƒ‰æ¤œå‡º - ã‚»ãƒƒã‚·ãƒ§ãƒ³1ã‹ã‚‰å†é–‹"),console.warn("ğŸ”„ [SessionStorage] ç¾åœ¨:",g,"ã‚»ãƒƒã‚·ãƒ§ãƒ³ç›® â†’ ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹èª˜å°");const{SessionStorageManager:v}=await st(async()=>{const{SessionStorageManager:R}=await import("../chunks/u3zWv8bM.js").then(Y=>Y.h);return{SessionStorageManager:R}},__vite__mapDeps([0,1,2,3,4,5]),import.meta.url),k=v.getInstance();typeof localStorage<"u"&&(localStorage.removeItem("random-training-progress"),localStorage.removeItem("random-training-progress-backup"));const{resetProgress:T}=await st(async()=>{const{resetProgress:R}=await import("../chunks/u3zWv8bM.js").then(Y=>Y.j);return{resetProgress:R}},__vite__mapDeps([0,1,2,3,4,5]),import.meta.url);await T(),console.log("ğŸ”„ [SessionStorage] localStorage + ã‚¹ãƒˆã‚¢çŠ¶æ…‹å®Œå…¨ãƒªã‚»ãƒƒãƒˆå®Œäº†"),Qe();return}}else console.log("ğŸ“Š [SessionStorage] æ–°è¦ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹")}catch(l){console.error("ğŸ“Š [SessionStorage] åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",l)}if(Lt(),zt(),s.url.searchParams.get("from")==="microphone-test"){console.log("ğŸ¤ [RandomTraining] ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã‹ã‚‰ã®é·ç§»ã‚’æ¤œå‡º");const l=new URL(window.location);if(l.searchParams.delete("from"),window.history.replaceState({},"",l),e(1,D="granted"),e(0,b="setup"),console.log('ğŸ¤ [RandomTraining] microphoneState="granted", trainingPhase="setup" ã«è¨­å®š'),!Re){console.log("ğŸ¤ [RandomTraining] AudioManagerãƒªã‚½ãƒ¼ã‚¹å–å¾—é–‹å§‹");try{const v=await $e.initialize();We=v.audioContext,Re=v.mediaStream,Ye=v.sourceNode,console.log("ğŸ¤ [RandomTraining] AudioManagerãƒªã‚½ãƒ¼ã‚¹å–å¾—å®Œäº†")}catch(v){console.warn("âš ï¸ AudioManagerãƒªã‚½ãƒ¼ã‚¹å–å¾—å¤±æ•—ï¼ˆå¾Œã§å†è©¦è¡Œï¼‰:",v)}}if(await new Promise(v=>setTimeout(v,300)),ae&&ae.getIsInitialized&&!ae.getIsInitialized())try{console.log("ğŸ™ï¸ [RandomTraining] PitchDetectoråˆæœŸåŒ–é–‹å§‹");const v=$e.getStatus();console.log("ğŸ” [RandomTraining] AudioManagerçŠ¶æ…‹:",v),(!v.isInitialized||!v.mediaStreamActive)&&(console.log("ğŸ”„ [RandomTraining] AudioManagerçŠ¶æ…‹ä¸è‰¯ - å†åˆæœŸåŒ–å®Ÿè¡Œ"),await $e.initialize()),await ae.initialize(),console.log("âœ… [RandomTraining] PitchDetectoråˆæœŸåŒ–å®Œäº†")}catch(v){console.warn("âš ï¸ PitchDetectoråˆæœŸåŒ–å¤±æ•—:",v)}}else await new Promise(l=>setTimeout(l,100)),Qe()});function Jt(a){const{frequency:l,note:v,volume:k,rawVolume:T,clarity:R}=a.detail;let Y=l,Z=v;if(b==="guiding"&&U&&m>0&&l>0){const W=Kt(l);W&&(Y=W.frequency,Z=W.note)}e(14,oe=Y),e(15,_e=Z),e(13,P=k),Wt(l),se&&l>0&&m>0&&jt(l,v)}function Kt(a){if(!a||a<=0||!U||!m||P<25)return null;const v=E-1;if(v<0||v>=w.length)return null;const k=ze(m,v);if(!k||k<=0)return null;const R=Tt(a,k).correctedFrequency,Y=Wn(R);return{frequency:Math.round(R),note:Y}}function Wt(a,l){if(!a||a<=0||!U)return;if(!m||m<=0){console.error(`âŒ [æ¡ç‚¹ã‚¨ãƒ©ãƒ¼] åŸºéŸ³å‘¨æ³¢æ•°ãŒç„¡åŠ¹: ${m}Hz`),console.error(`âŒ [æ¡ç‚¹ã‚¨ãƒ©ãƒ¼] åŸºéŸ³å: ${y}`),console.error(`âŒ [æ¡ç‚¹ã‚¨ãƒ©ãƒ¼] activeStepIndex: ${E-1}`),console.error(`âŒ [æ¡ç‚¹ã‚¨ãƒ©ãƒ¼] trainingPhase: ${b}`),console.error(`âŒ [æ¡ç‚¹ã‚¨ãƒ©ãƒ¼] isGuideAnimationActive: ${U}`);return}if(P<25)return;const k=E-1;if(k<0||k>=w.length)return;k>=4&&ee.debug(`[æ¡ç‚¹ãƒ‡ãƒãƒƒã‚°] activeStepIndex=${k} (${w[k].name}), currentBaseFrequency=${m}Hz`);const T=ze(m,k);if(k>=0&&ee.debug(`[éŸ³ç¨‹è¨ˆç®—ä¿®æ­£ç‰ˆ] ${w[k].name}: æœŸå¾…å‘¨æ³¢æ•° ${T.toFixed(1)}Hz`),!T||T<=0||!isFinite(T)){console.error("âŒ [æ¡ç‚¹ã‚¨ãƒ©ãƒ¼] æœŸå¾…å‘¨æ³¢æ•°è¨ˆç®—ã‚¨ãƒ©ãƒ¼:"),console.error(`   åŸºéŸ³å‘¨æ³¢æ•°: ${m}Hz`),console.error(`   éŸ³éšã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹: ${k}`),console.error(`   æœŸå¾…å‘¨æ³¢æ•°: ${T}Hz`);return}const R=Tt(a,T),Y=R.correctedFrequency,Z=R.factor,W=Math.round(1200*Math.log2(Y/T));if((Math.abs(W)>200||Z!==1)&&(ee.debug(`[ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—å¼è£œæ­£] ${w[k].name}:`),console.warn(`   æ¤œå‡ºå‘¨æ³¢æ•°: ${a.toFixed(1)}Hz`),console.warn(`   è£œæ­£å¾Œå‘¨æ³¢æ•°: ${Y.toFixed(1)}Hz`),console.warn(`   æœŸå¾…å‘¨æ³¢æ•°: ${T.toFixed(1)}Hz`),console.warn(`   ã‚»ãƒ³ãƒˆå·®: ${W}Â¢`),console.warn(`   è£œæ­£ä¿‚æ•°: ${Z} (${R.description})`),console.warn(`   åŸºéŸ³: ${y} (${m.toFixed(1)}Hz)`)),!isFinite(W)){console.error("âŒ [æ¡ç‚¹ã‚¨ãƒ©ãƒ¼] ã‚»ãƒ³ãƒˆè¨ˆç®—ã‚¨ãƒ©ãƒ¼:"),console.error(`   æ¤œå‡ºå‘¨æ³¢æ•°: ${a}Hz`),console.error(`   æœŸå¾…å‘¨æ³¢æ•°: ${T}Hz`),console.error(`   ã‚»ãƒ³ãƒˆå·®: ${W}`);return}const ke=Math.abs(W)<=50;if(P>=15){const fe=Math.max(0,Math.round(100-Math.abs(W))),me=O.findIndex(He=>He.stepIndex===k),ge={stepIndex:k,stepName:w[k].name,expectedFrequency:Math.round(T),detectedFrequency:Math.round(a),adjustedFrequency:Math.round(Y),centDifference:W,accuracy:fe,isCorrect:ke,correctionFactor:Z,correctionDescription:R.description,timestamp:Date.now()};me>=0?O[me]=ge:O.push(ge),O.length%4===0&&ee.realtime(`æ¡ç‚¹é€²æ—: ${O.length}/${w.length}ã‚¹ãƒ†ãƒƒãƒ—å®Œäº†`)}}async function Yt(){if(n){console.warn("ğŸš« [RestartSame] 8ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†çŠ¶æ…‹ã§ã¯å†æŒ‘æˆ¦ä¸å¯ - æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹ãŒå¿…è¦"),await Oe()?(console.log("âœ… [RestartSame] æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹å®Œäº† - ã‚»ãƒƒã‚·ãƒ§ãƒ³1/8ã‹ã‚‰å†é–‹"),window.location.reload()):console.error("âŒ [RestartSame] æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹å¤±æ•—");return}xe(),e(0,b="setup"),te&&(clearTimeout(te),te=null),ae&&ae.resetDisplayState&&ae.resetDisplayState(),Xe(),console.log("ğŸ”„ [RestartSame] åŒã˜åŸºéŸ³ã§å†æŒ‘æˆ¦:",y,m+"Hz"),console.log("ğŸ”„ [RestartSame] åŸºéŸ³æƒ…å ±ä¿æŒå®Œäº† - ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œå¾…æ©Ÿ")}async function Zt(){if(n){console.warn("ğŸš« [RestartDifferent] 8ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†çŠ¶æ…‹ã§ã¯å†æŒ‘æˆ¦ä¸å¯ - æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹ãŒå¿…è¦"),await Oe()?(console.log("âœ… [RestartDifferent] æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹å®Œäº† - ã‚»ãƒƒã‚·ãƒ§ãƒ³1/8ã‹ã‚‰å†é–‹"),window.location.reload()):console.error("âŒ [RestartDifferent] æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹å¤±æ•—");return}xe(),e(0,b="setup"),te&&(clearTimeout(te),te=null),e(7,y=""),e(8,m=0),console.log("ğŸ”„ [restartDifferentBaseNote] åŸºéŸ³æƒ…å ±ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ"),ae&&ae.resetDisplayState&&ae.resetDisplayState(),Xe()}function Xe(){E=0,U=!1,O=[],e(10,w=w.map(a=>({...a,state:"inactive",completed:!1})))}async function en(){console.log("ğŸš€ [StartNewCycle] 8ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†å¾Œã®æœ€åˆã‹ã‚‰æŒ‘æˆ¦é–‹å§‹");try{await Oe()?(console.log("âœ… [StartNewCycle] æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹å®Œäº†"),localStorage.getItem("mic-test-completed")?(console.log("âœ… [StartNewCycle] ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆå®Œäº†ãƒ•ãƒ©ã‚°ç¢ºèª - ãƒªãƒ­ãƒ¼ãƒ‰ãªã—ã§çŠ¶æ…‹ãƒªã‚»ãƒƒãƒˆ"),xe(),await ct(),e(0,b="setup"),Xe(),Ze(),console.log("âœ… [StartNewCycle] çŠ¶æ…‹ãƒªã‚»ãƒƒãƒˆå®Œäº† - ã‚»ãƒƒã‚·ãƒ§ãƒ³1/8ã‹ã‚‰å†é–‹")):window.location.reload()):(console.error("âŒ [StartNewCycle] æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹å¤±æ•—"),je())}catch(a){console.error("âŒ [StartNewCycle] æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹ã‚¨ãƒ©ãƒ¼:",a),je()}}function tn(a){const{type:l}=a.detail;switch(l){case"same":Yt();break;case"different":Zt();break;case"restart":en();break;case"home":je();break;default:console.warn("ğŸš« [ActionButtons] æœªçŸ¥ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ—:",l)}}function nn(a){const{healthy:l,errors:v,details:k}=a.detail;e(2,C=l),e(6,q=v),l||(console.warn("âš ï¸ ãƒã‚¤ã‚¯ã®å¥åº·çŠ¶æ…‹ãŒæ‚ªåŒ–:",v),b==="guiding"&&(e(0,b="setup"),console.warn("ğŸ›‘ ãƒã‚¤ã‚¯å•é¡Œã«ã‚ˆã‚Šãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’åœæ­¢")))}un(()=>{console.log("ğŸ”„ [RandomTraining] onDestroy - AudioManagerãƒªã‚½ãƒ¼ã‚¹ã¯ä¿æŒ"),De&&(De.dispose(),e(31,De=null))});function on(a){fn[a?"unshift":"push"](()=>{ae=a,e(22,ae)})}return r.$$.update=()=>{r.$$.dirty[0]&6|r.$$.dirty[1]&3,r.$$.dirty[0]&1,r.$$.dirty[0]&56&&o&&n&&o.sessionHistory&&(e(3,re=Kn(o.sessionHistory)),console.log("ğŸµ [RandomTraining] intervalDataç”Ÿæˆå®Œäº†:",re.length,"ä»¶")),r.$$.dirty[0]&3&&b==="setup"&&D==="granted"&&xe()},[b,D,C,re,o,n,q,y,m,A,w,j,x,P,oe,_e,de,he,Te,Ne,Me,ne,ae,i,f,Et,Bt,je,Jt,tn,nn,De,Fe,on]}class mo extends sn{constructor(t){super(),rn(this,t,eo,Xn,an,{},null,[-1,-1,-1,-1])}}export{mo as component,fo as universal};
