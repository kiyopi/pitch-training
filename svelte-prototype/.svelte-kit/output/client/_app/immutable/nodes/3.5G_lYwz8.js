import{S as z,i as F,s as j,d as f,C as E,m as x,o as V,b as g,D as I,H as G,h as T,E as q,k,F as N,l as J,I as K,c as $,y,J as Z,e as b,f as D,G as P,j as C,K as Q,n as U,A as L,g as S,t as H,r as O}from"../chunks/D2cFSh3g.js";import"../chunks/IHki7fMi.js";import{p as R}from"../chunks/B0yWXTHQ.js";import{g as W,b as X}from"../chunks/BtMo1S7W.js";import{P as Y,C as tt}from"../chunks/DMJ04fUm.js";import{P as et,a as st,b as nt}from"../chunks/Dn5Wo9me.js";function ot(c){let t,s="ãƒã‚¤ã‚¯ã®ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã—ã¾ã™",r,e,o="ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆé–‹å§‹ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãƒã‚¤ã‚¯ã®ä½¿ç”¨ã‚’è¨±å¯ã—ã¦ãã ã•ã„",i,d;function p(n,v){if(n[0]==="pending")return lt;if(n[0]==="denied")return at;if(n[0]==="initial")return rt}let m=p(c),a=m&&m(c);return{c(){t=C("h3"),t.textContent=s,r=k(),e=C("p"),e.textContent=o,i=k(),a&&a.c(),d=O(),this.h()},l(n){t=b(n,"H3",{class:!0,"data-svelte-h":!0}),P(t)!=="svelte-gfi16f"&&(t.textContent=s),r=T(n),e=b(n,"P",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-1w19y1h"&&(e.textContent=o),i=T(n),a&&a.l(n),d=O(),this.h()},h(){y(t,"class","instructions-title svelte-s1thfd"),y(e,"class","instructions-description svelte-s1thfd")},m(n,v){g(n,t,v),g(n,r,v),g(n,e,v),g(n,i,v),a&&a.m(n,v),g(n,d,v)},p(n,v){m===(m=p(n))&&a?a.p(n,v):(a&&a.d(1),a=m&&m(n),a&&(a.c(),a.m(d.parentNode,d)))},d(n){n&&(f(t),f(r),f(e),f(i),f(d)),a&&a.d(n)}}}function it(c){let t,s="ãƒã‚¤ã‚¯æº–å‚™å®Œäº†",r,e,o,i=c[5].name+"",d,p,m,a,n,v="ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–‹å§‹",w,u;return{c(){t=C("h3"),t.textContent=s,r=k(),e=C("p"),o=H("ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–‹å§‹ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦"),d=H(i),p=H("ã¸é€²ã‚“ã§ãã ã•ã„"),m=k(),a=C("div"),n=C("button"),n.textContent=v,this.h()},l(l){t=b(l,"H3",{class:!0,"data-svelte-h":!0}),P(t)!=="svelte-11dam81"&&(t.textContent=s),r=T(l),e=b(l,"P",{class:!0});var _=D(e);o=S(_,"ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–‹å§‹ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦"),d=S(_,i),p=S(_,"ã¸é€²ã‚“ã§ãã ã•ã„"),_.forEach(f),m=T(l),a=b(l,"DIV",{class:!0});var h=D(a);n=b(h,"BUTTON",{class:!0,"data-svelte-h":!0}),P(n)!=="svelte-kae9rs"&&(n.textContent=v),h.forEach(f),this.h()},h(){y(t,"class","ready-title svelte-s1thfd"),y(e,"class","ready-description svelte-s1thfd"),y(n,"class","training-start-button enabled svelte-s1thfd"),y(a,"class","training-start-button-area svelte-s1thfd")},m(l,_){g(l,t,_),g(l,r,_),g(l,e,_),$(e,o),$(e,d),$(e,p),g(l,m,_),g(l,a,_),$(a,n),w||(u=L(n,"click",c[7]),w=!0)},p:U,d(l){l&&(f(t),f(r),f(e),f(m),f(a)),w=!1,u()}}}function rt(c){let t,s,r="ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹",e,o;return{c(){t=C("div"),s=C("button"),s.textContent=r,this.h()},l(i){t=b(i,"DIV",{class:!0});var d=D(t);s=b(d,"BUTTON",{class:!0,"data-svelte-h":!0}),P(s)!=="svelte-caex95"&&(s.textContent=r),d.forEach(f),this.h()},h(){y(s,"class","mic-test-button start svelte-s1thfd"),y(t,"class","mic-test-button-area svelte-s1thfd")},m(i,d){g(i,t,d),$(t,s),e||(o=L(s,"click",c[6]),e=!0)},p:U,d(i){i&&f(t),e=!1,o()}}}function at(c){let t,s,r="ãƒã‚¤ã‚¯è¨±å¯ã‚’å†è©¦è¡Œ",e,o;return{c(){t=C("div"),s=C("button"),s.textContent=r,this.h()},l(i){t=b(i,"DIV",{class:!0});var d=D(t);s=b(d,"BUTTON",{class:!0,"data-svelte-h":!0}),P(s)!=="svelte-1p3n8nt"&&(s.textContent=r),d.forEach(f),this.h()},h(){y(s,"class","mic-test-button retry svelte-s1thfd"),y(t,"class","mic-test-button-area svelte-s1thfd")},m(i,d){g(i,t,d),$(t,s),e||(o=L(s,"click",c[6]),e=!0)},p:U,d(i){i&&f(t),e=!1,o()}}}function lt(c){let t,s="ãƒã‚¤ã‚¯æº–å‚™ä¸­...";return{c(){t=C("p"),t.textContent=s,this.h()},l(r){t=b(r,"P",{class:!0,"data-svelte-h":!0}),P(t)!=="svelte-1vb5g92"&&(t.textContent=s),this.h()},h(){y(t,"class","status-text svelte-s1thfd")},m(r,e){g(r,t,e)},p:U,d(r){r&&f(t)}}}function ct(c){let t;function s(o,i){return o[0]==="granted"?it:ot}let r=s(c),e=r(c);return{c(){t=C("div"),e.c(),this.h()},l(o){t=b(o,"DIV",{class:!0});var i=D(t);e.l(i),i.forEach(f),this.h()},h(){y(t,"class","training-mode-content svelte-s1thfd")},m(o,i){g(o,t,i),e.m(t,null)},p(o,i){r===(r=s(o))&&e?e.p(o,i):(e.d(1),e=r(o),e&&(e.c(),e.m(t,null)))},d(o){o&&f(t),e.d()}}}function dt(c){let t,s,r='<div class="mic-test-header svelte-s1thfd"><div class="mic-icon svelte-s1thfd"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" x2="12" y1="19" y2="22"></line><line x1="8" x2="16" y1="22" y2="22"></line></svg></div> <div><h1 class="mic-test-title svelte-s1thfd">ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆ</h1> <p class="mic-test-description svelte-s1thfd">éŸ³æ„Ÿãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’å§‹ã‚ã‚‹å‰ã«ã€ãƒã‚¤ã‚¯ã®å‹•ä½œã‚’ç¢ºèªã—ã¾ã™</p></div></div>',e,o,i,d,p,m,a,n,v;i=new tt({props:{variant:"default",padding:"lg",$$slots:{default:[ct]},$$scope:{ctx:c}}}),p=new et({props:{frequency:c[2],note:c[3],volume:c[1],isMuted:c[0]!=="granted",muteMessage:"ãƒã‚¤ã‚¯è¨±å¯å¾Œã«é–‹å§‹"}});let w={isActive:c[0]==="granted",className:"pitch-detector-content",debugMode:!1};return n=new st({props:w}),c[10](n),n.$on("pitchUpdate",c[8]),n.$on("stateChange",ft),n.$on("error",c[9]),{c(){t=C("div"),s=C("div"),s.innerHTML=r,e=k(),o=C("div"),N(i.$$.fragment),d=k(),N(p.$$.fragment),m=k(),a=C("div"),N(n.$$.fragment),this.h()},l(u){t=b(u,"DIV",{class:!0});var l=D(t);s=b(l,"DIV",{class:!0,"data-svelte-h":!0}),P(s)!=="svelte-4qcd63"&&(s.innerHTML=r),e=T(l),o=b(l,"DIV",{class:!0});var _=D(o);q(i.$$.fragment,_),_.forEach(f),d=T(l),q(p.$$.fragment,l),m=T(l),a=b(l,"DIV",{style:!0});var h=D(a);q(n.$$.fragment,h),h.forEach(f),l.forEach(f),this.h()},h(){y(s,"class","header svelte-s1thfd"),y(o,"class","training-mode-info svelte-s1thfd"),Z(a,"display","none"),y(t,"class","microphone-test svelte-s1thfd")},m(u,l){g(u,t,l),$(t,s),$(t,e),$(t,o),I(i,o,null),$(t,d),I(p,t,null),$(t,m),$(t,a),I(n,a,null),v=!0},p(u,l){const _={};l&16385&&(_.$$scope={dirty:l,ctx:u}),i.$set(_);const h={};l&4&&(h.frequency=u[2]),l&8&&(h.note=u[3]),l&2&&(h.volume=u[1]),l&1&&(h.isMuted=u[0]!=="granted"),p.$set(h);const M={};l&1&&(M.isActive=u[0]==="granted"),n.$set(M)},i(u){v||(V(i.$$.fragment,u),V(p.$$.fragment,u),V(n.$$.fragment,u),v=!0)},o(u){x(i.$$.fragment,u),x(p.$$.fragment,u),x(n.$$.fragment,u),v=!1},d(u){u&&f(t),E(i),E(p),c[10](null),E(n)}}}function ut(c){let t,s,r;return s=new Y({props:{showBackButton:!0,$$slots:{default:[dt]},$$scope:{ctx:c}}}),{c(){t=k(),N(s.$$.fragment),this.h()},l(e){G("svelte-8st1fo",document.head).forEach(f),t=T(e),q(s.$$.fragment,e),this.h()},h(){document.title="ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆ - ç›¸å¯¾éŸ³æ„Ÿãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°"},m(e,o){g(e,t,o),I(s,e,o),r=!0},p(e,[o]){const i={};o&16415&&(i.$$scope={dirty:o,ctx:e}),s.$set(i)},i(e){r||(V(s.$$.fragment,e),r=!0)},o(e){x(s.$$.fragment,e),r=!1},d(e){e&&f(t),E(s,e)}}}function ft(c){}function ht(c,t,s){let r;J(c,R,h=>s(12,r=h));let e="random";K(()=>{r.url.searchParams.has("mode")&&(e=r.url.searchParams.get("mode")||"random")});let o="initial",i=0,d=0,p="ãƒ¼ãƒ¼",m=null;const a={random:{name:"ãƒ©ãƒ³ãƒ€ãƒ åŸºéŸ³ãƒ¢ãƒ¼ãƒ‰",description:"10ç¨®é¡ã®åŸºéŸ³ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«é¸æŠã—ã¦ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°",color:"green",path:"/training/random"},continuous:{name:"é€£ç¶šãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ¢ãƒ¼ãƒ‰",description:"é¸æŠã—ãŸå›æ•°ã ã‘é€£ç¶šã§å®Ÿè¡Œã—ã€ç·åˆè©•ä¾¡ã‚’ç¢ºèª",color:"orange",path:"/training/continuous"},chromatic:{name:"12éŸ³éšãƒ¢ãƒ¼ãƒ‰",description:"ã‚¯ãƒ­ãƒãƒãƒƒã‚¯ã‚¹ã‚±ãƒ¼ãƒ«ã®ä¸Šè¡Œãƒ»ä¸‹è¡Œã§å®Œå…¨åˆ¶è¦‡",color:"purple",path:"/training/chromatic"}},n=a[e]||a.random;async function v(){var h;s(0,o="pending");try{if(console.log("ğŸ¤ [MicTest] ãƒã‚¤ã‚¯è¨±å¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆé–‹å§‹"),!((h=navigator.mediaDevices)!=null&&h.getUserMedia)){s(0,o="denied"),console.error("âŒ [MicTest] getUserMediaãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“");return}const M=await nt.initialize();if(console.log("âœ… [MicTest] AudioManager ãƒªã‚½ãƒ¼ã‚¹å–å¾—å®Œäº†"),M.mediaStream&&M.audioContext)s(0,o="granted"),console.log("âœ… [MicTest] ãƒã‚¤ã‚¯è¨±å¯å®Œäº†"),setTimeout(async()=>{m&&(console.log("ğŸ™ï¸ [MicTest] PitchDetectoråˆæœŸåŒ–é–‹å§‹"),await m.initialize(),console.log("âœ… [MicTest] PitchDetectoråˆæœŸåŒ–å®Œäº†"),console.log("ğŸ¯ [MicTest] PitchDetector isActiveãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã§è‡ªå‹•æ¤œå‡ºé–‹å§‹"))},1e3);else throw new Error("ãƒªã‚½ãƒ¼ã‚¹å–å¾—å¤±æ•—")}catch(M){console.error("âŒ [MicTest] ãƒã‚¤ã‚¯è¨±å¯ã‚¨ãƒ©ãƒ¼:",M),s(0,o=((M==null?void 0:M.name)==="NotAllowedError","denied"))}}function w(){console.log("ğŸš€ [MicTest] ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–‹å§‹ - ãƒ©ãƒ³ãƒ€ãƒ åŸºéŸ³ãƒ¢ãƒ¼ãƒ‰ã¸é·ç§»"),localStorage.setItem("mic-test-completed","true"),console.log("âœ… [MicTest] ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆå®Œäº†ãƒ•ãƒ©ã‚°ã‚’ä¿å­˜"),W(`${X}${n.path}?from=microphone-test`)}function u(h){const{frequency:M,note:A,volume:B,rawVolume:mt,clarity:pt}=h.detail;s(2,d=M),s(3,p=A),s(1,i=B)}function l(h){console.error("âŒ [MicTest] PitchDetectorã‚¨ãƒ©ãƒ¼:",h.detail);const{error:M,reason:A,recovery:B}=h.detail;A==="mediastream_ended"&&B==="restart_required"&&(console.log("ğŸ”„ [MicTest] MediaStreamçµ‚äº†æ¤œå‡º - è‡ªå‹•å¾©æ—§é–‹å§‹"),s(0,o="initial"),s(1,i=0),s(2,d=0),s(3,p="ãƒ¼ãƒ¼"),console.log("âš ï¸ [MicTest] ãƒã‚¤ã‚¯å†è¨±å¯ãŒå¿…è¦ã§ã™"))}function _(h){Q[h?"unshift":"push"](()=>{m=h,s(4,m)})}return[o,i,d,p,m,n,v,w,u,l,_]}class Mt extends z{constructor(t){super(),F(this,t,ht,ut,j,{})}}export{Mt as component};
