import{S as zt,i as wt,s as Ht,n as St,d as o,N as Ot,z as ht,a as z,b as De,c as e,A as At,y as a,H as Rt,h as d,e as s,f as i,G as O,g,k as f,j as n,t as S,I as Gt,J as lt,L as jt}from"../chunks/BNDitMIn.js";import{e as Nt}from"../chunks/D6YF6ztN.js";import"../chunks/IHki7fMi.js";import{E as Lt}from"../chunks/BhJJ7ryS.js";function It(r,l,t){const v=r.slice();return v[12]=l[t],v[14]=t,v}function Bt(r){let l;return{c(){l=S("🧪 全テスト実行")},l(t){l=g(t,"🧪 全テスト実行")},m(t,v){De(t,l,v)},d(t){t&&o(l)}}}function Mt(r){let l;return{c(){l=S("🔄 テスト実行中...")},l(t){l=g(t,"🔄 テスト実行中...")},m(t,v){De(t,l,v)},d(t){t&&o(l)}}}function Pt(r){let l,t,v,m=r[1].name+"",_,c,u,b,h,x,I=r[4]+1+"",P,D,A=r[6].length+"",p;return{c(){l=n("section"),t=n("h3"),v=S("📊 実行中: "),_=S(m),c=f(),u=n("div"),b=n("div"),h=f(),x=n("p"),P=S(I),D=S(" / "),p=S(A),this.h()},l(k){l=s(k,"SECTION",{class:!0});var C=i(l);t=s(C,"H3",{class:!0});var V=i(t);v=g(V,"📊 実行中: "),_=g(V,m),V.forEach(o),c=d(C),u=s(C,"DIV",{class:!0});var w=i(u);b=s(w,"DIV",{class:!0,style:!0}),i(b).forEach(o),w.forEach(o),h=d(C),x=s(C,"P",{});var J=i(x);P=g(J,I),D=g(J," / "),p=g(J,A),J.forEach(o),C.forEach(o),this.h()},h(){a(t,"class","svelte-19llkxn"),a(b,"class","progress-bar svelte-19llkxn"),lt(b,"width",(r[4]+1)/r[6].length*100+"%"),a(u,"class","progress svelte-19llkxn"),a(l,"class","current-test svelte-19llkxn")},m(k,C){De(k,l,C),e(l,t),e(t,v),e(t,_),e(l,c),e(l,u),e(u,b),e(l,h),e(l,x),e(x,P),e(x,D),e(x,p)},p(k,C){C&2&&m!==(m=k[1].name+"")&&z(_,m),C&16&&lt(b,"width",(k[4]+1)/k[6].length*100+"%"),C&16&&I!==(I=k[4]+1+"")&&z(P,I)},d(k){k&&o(l)}}}function Dt(r){let l,t,v="📋 テスト結果",m,_=Nt(r[2]),c=[];for(let u=0;u<_.length;u+=1)c[u]=yt(It(r,_,u));return{c(){l=n("section"),t=n("h2"),t.textContent=v,m=f();for(let u=0;u<c.length;u+=1)c[u].c();this.h()},l(u){l=s(u,"SECTION",{class:!0});var b=i(l);t=s(b,"H2",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-s3709x"&&(t.textContent=v),m=d(b);for(let h=0;h<c.length;h+=1)c[h].l(b);b.forEach(o),this.h()},h(){a(t,"class","svelte-19llkxn"),a(l,"class","results svelte-19llkxn")},m(u,b){De(u,l,b),e(l,t),e(l,m);for(let h=0;h<c.length;h+=1)c[h]&&c[h].m(l,null)},p(u,b){if(b&4){_=Nt(u[2]);let h;for(h=0;h<_.length;h+=1){const x=It(u,_,h);c[h]?c[h].p(x,b):(c[h]=yt(x),c[h].c(),c[h].m(l,null))}for(;h<c.length;h+=1)c[h].d(1);c.length=_.length}},d(u){u&&o(l),jt(c,u)}}}function Ut(r){let l,t,v,m,_=r[12].result.score.total+"",c,u,b,h=r[12].result.score.grade+"",x,I,P,D,A,p="音程精度:",k,C,V=r[12].result.score.components.pitchAccuracy+"",w,J,M,L,H,$="認識速度:",re,R,B=r[12].result.score.components.recognitionSpeed+"",oe,K,T,q,y,F="音程習得度:",N,E,U=r[12].result.score.components.intervalMastery+"",X,Y,se,ce,ne,ke="方向性精度:",me,xe,qe=r[12].result.score.components.directionAccuracy+"",de,Ae,Xe,Ce,ie,ze="一貫性:",we,Ne,ve=r[12].result.score.components.consistency+"",be,Ye,Le,Z,fe,Be="💬 フィードバック",Me,Ve,ee=r[12].result.feedback.primary+"",Ee,Ze,Ue,le,ue,st="期待値:",Je,he=r[12].expected+"",ye,Q=r[12].result.feedback.detailed&&Vt(r);return{c(){l=n("div"),t=n("div"),v=n("div"),m=n("span"),c=S(_),u=f(),b=n("span"),x=S(h),I=f(),P=n("div"),D=n("div"),A=n("span"),A.textContent=p,k=f(),C=n("span"),w=S(V),J=S("%"),M=f(),L=n("div"),H=n("span"),H.textContent=$,re=f(),R=n("span"),oe=S(B),K=S("%"),T=f(),q=n("div"),y=n("span"),y.textContent=F,N=f(),E=n("span"),X=S(U),Y=S("%"),se=f(),ce=n("div"),ne=n("span"),ne.textContent=ke,me=f(),xe=n("span"),de=S(qe),Ae=S("%"),Xe=f(),Ce=n("div"),ie=n("span"),ie.textContent=ze,we=f(),Ne=n("span"),be=S(ve),Ye=S("%"),Le=f(),Z=n("div"),fe=n("h4"),fe.textContent=Be,Me=f(),Ve=n("p"),Ee=S(ee),Ze=f(),Q&&Q.c(),Ue=f(),le=n("div"),ue=n("strong"),ue.textContent=st,Je=f(),ye=S(he),this.h()},l(j){l=s(j,"DIV",{class:!0});var G=i(l);t=s(G,"DIV",{class:!0});var pe=i(t);v=s(pe,"DIV",{class:!0});var ge=i(v);m=s(ge,"SPAN",{class:!0,style:!0});var nt=i(m);c=g(nt,_),nt.forEach(o),u=d(ge),b=s(ge,"SPAN",{class:!0,style:!0});var $e=i(b);x=g($e,h),$e.forEach(o),ge.forEach(o),I=d(pe),P=s(pe,"DIV",{class:!0});var te=i(P);D=s(te,"DIV",{class:!0});var Te=i(D);A=s(Te,"SPAN",{class:!0,"data-svelte-h":!0}),O(A)!=="svelte-146tyqf"&&(A.textContent=p),k=d(Te),C=s(Te,"SPAN",{class:!0});var He=i(C);w=g(He,V),J=g(He,"%"),He.forEach(o),Te.forEach(o),M=d(te),L=s(te,"DIV",{class:!0});var Oe=i(L);H=s(Oe,"SPAN",{class:!0,"data-svelte-h":!0}),O(H)!=="svelte-sqw889"&&(H.textContent=$),re=d(Oe),R=s(Oe,"SPAN",{class:!0});var Ke=i(R);oe=g(Ke,B),K=g(Ke,"%"),Ke.forEach(o),Oe.forEach(o),T=d(te),q=s(te,"DIV",{class:!0});var _e=i(q);y=s(_e,"SPAN",{class:!0,"data-svelte-h":!0}),O(y)!=="svelte-1uo5o5u"&&(y.textContent=F),N=d(_e),E=s(_e,"SPAN",{class:!0});var Ie=i(E);X=g(Ie,U),Y=g(Ie,"%"),Ie.forEach(o),_e.forEach(o),se=d(te),ce=s(te,"DIV",{class:!0});var Qe=i(ce);ne=s(Qe,"SPAN",{class:!0,"data-svelte-h":!0}),O(ne)!=="svelte-vuo93o"&&(ne.textContent=ke),me=d(Qe),xe=s(Qe,"SPAN",{class:!0});var We=i(xe);de=g(We,qe),Ae=g(We,"%"),We.forEach(o),Qe.forEach(o),Xe=d(te),Ce=s(te,"DIV",{class:!0});var Se=i(Ce);ie=s(Se,"SPAN",{class:!0,"data-svelte-h":!0}),O(ie)!=="svelte-z9t95r"&&(ie.textContent=ze),we=d(Se),Ne=s(Se,"SPAN",{class:!0});var Fe=i(Ne);be=g(Fe,ve),Ye=g(Fe,"%"),Fe.forEach(o),Se.forEach(o),te.forEach(o),pe.forEach(o),Le=d(G),Z=s(G,"DIV",{class:!0});var Pe=i(Z);fe=s(Pe,"H4",{class:!0,"data-svelte-h":!0}),O(fe)!=="svelte-1svoycg"&&(fe.textContent=Be),Me=d(Pe),Ve=s(Pe,"P",{class:!0});var et=i(Ve);Ee=g(et,ee),et.forEach(o),Ze=d(Pe),Q&&Q.l(Pe),Pe.forEach(o),Ue=d(G),le=s(G,"DIV",{class:!0});var W=i(le);ue=s(W,"STRONG",{"data-svelte-h":!0}),O(ue)!=="svelte-1ri8yc2"&&(ue.textContent=st),Je=d(W),ye=g(W,he),W.forEach(o),G.forEach(o),this.h()},h(){a(m,"class","score-value svelte-19llkxn"),lt(m,"color",qt(r[12].result.score.total)),a(b,"class","grade svelte-19llkxn"),lt(b,"color",Ft(r[12].result.score.grade)),a(v,"class","total-score svelte-19llkxn"),a(A,"class","label svelte-19llkxn"),a(C,"class","value svelte-19llkxn"),a(D,"class","component svelte-19llkxn"),a(H,"class","label svelte-19llkxn"),a(R,"class","value svelte-19llkxn"),a(L,"class","component svelte-19llkxn"),a(y,"class","label svelte-19llkxn"),a(E,"class","value svelte-19llkxn"),a(q,"class","component svelte-19llkxn"),a(ne,"class","label svelte-19llkxn"),a(xe,"class","value svelte-19llkxn"),a(ce,"class","component svelte-19llkxn"),a(ie,"class","label svelte-19llkxn"),a(Ne,"class","value svelte-19llkxn"),a(Ce,"class","component svelte-19llkxn"),a(P,"class","component-scores svelte-19llkxn"),a(t,"class","score-display svelte-19llkxn"),a(fe,"class","svelte-19llkxn"),a(Ve,"class","primary-feedback svelte-19llkxn"),a(Z,"class","feedback svelte-19llkxn"),a(le,"class","expectation svelte-19llkxn"),a(l,"class","result-content svelte-19llkxn")},m(j,G){De(j,l,G),e(l,t),e(t,v),e(v,m),e(m,c),e(v,u),e(v,b),e(b,x),e(t,I),e(t,P),e(P,D),e(D,A),e(D,k),e(D,C),e(C,w),e(C,J),e(P,M),e(P,L),e(L,H),e(L,re),e(L,R),e(R,oe),e(R,K),e(P,T),e(P,q),e(q,y),e(q,N),e(q,E),e(E,X),e(E,Y),e(P,se),e(P,ce),e(ce,ne),e(ce,me),e(ce,xe),e(xe,de),e(xe,Ae),e(P,Xe),e(P,Ce),e(Ce,ie),e(Ce,we),e(Ce,Ne),e(Ne,be),e(Ne,Ye),e(l,Le),e(l,Z),e(Z,fe),e(Z,Me),e(Z,Ve),e(Ve,Ee),e(Z,Ze),Q&&Q.m(Z,null),e(l,Ue),e(l,le),e(le,ue),e(le,Je),e(le,ye)},p(j,G){G&4&&_!==(_=j[12].result.score.total+"")&&z(c,_),G&4&&lt(m,"color",qt(j[12].result.score.total)),G&4&&h!==(h=j[12].result.score.grade+"")&&z(x,h),G&4&&lt(b,"color",Ft(j[12].result.score.grade)),G&4&&V!==(V=j[12].result.score.components.pitchAccuracy+"")&&z(w,V),G&4&&B!==(B=j[12].result.score.components.recognitionSpeed+"")&&z(oe,B),G&4&&U!==(U=j[12].result.score.components.intervalMastery+"")&&z(X,U),G&4&&qe!==(qe=j[12].result.score.components.directionAccuracy+"")&&z(de,qe),G&4&&ve!==(ve=j[12].result.score.components.consistency+"")&&z(be,ve),G&4&&ee!==(ee=j[12].result.feedback.primary+"")&&z(Ee,ee),j[12].result.feedback.detailed?Q?Q.p(j,G):(Q=Vt(j),Q.c(),Q.m(Z,null)):Q&&(Q.d(1),Q=null),G&4&&he!==(he=j[12].expected+"")&&z(ye,he)},d(j){j&&o(l),Q&&Q.d()}}}function Jt(r){let l,t,v=r[12].error+"",m;return{c(){l=n("div"),t=S("❌ エラー: "),m=S(v),this.h()},l(_){l=s(_,"DIV",{class:!0});var c=i(l);t=g(c,"❌ エラー: "),m=g(c,v),c.forEach(o),this.h()},h(){a(l,"class","error svelte-19llkxn")},m(_,c){De(_,l,c),e(l,t),e(l,m)},p(_,c){c&4&&v!==(v=_[12].error+"")&&z(m,v)},d(_){_&&o(l)}}}function Vt(r){let l,t,v,m="音程:",_,c=r[12].result.feedback.detailed.interval+"",u,b,h,x,I="方向性:",P,D=r[12].result.feedback.detailed.direction+"",A,p,k,C,V="一貫性:",w,J=r[12].result.feedback.detailed.consistency+"",M,L,H,$,re="速度:",R,B=r[12].result.feedback.detailed.speed+"",oe;return{c(){l=n("div"),t=n("div"),v=n("strong"),v.textContent=m,_=f(),u=S(c),b=f(),h=n("div"),x=n("strong"),x.textContent=I,P=f(),A=S(D),p=f(),k=n("div"),C=n("strong"),C.textContent=V,w=f(),M=S(J),L=f(),H=n("div"),$=n("strong"),$.textContent=re,R=f(),oe=S(B),this.h()},l(K){l=s(K,"DIV",{class:!0});var T=i(l);t=s(T,"DIV",{class:!0});var q=i(t);v=s(q,"STRONG",{"data-svelte-h":!0}),O(v)!=="svelte-677z0q"&&(v.textContent=m),_=d(q),u=g(q,c),q.forEach(o),b=d(T),h=s(T,"DIV",{class:!0});var y=i(h);x=s(y,"STRONG",{"data-svelte-h":!0}),O(x)!=="svelte-8yvkz3"&&(x.textContent=I),P=d(y),A=g(y,D),y.forEach(o),p=d(T),k=s(T,"DIV",{class:!0});var F=i(k);C=s(F,"STRONG",{"data-svelte-h":!0}),O(C)!=="svelte-x7tjto"&&(C.textContent=V),w=d(F),M=g(F,J),F.forEach(o),L=d(T),H=s(T,"DIV",{class:!0});var N=i(H);$=s(N,"STRONG",{"data-svelte-h":!0}),O($)!=="svelte-xkjonl"&&($.textContent=re),R=d(N),oe=g(N,B),N.forEach(o),T.forEach(o),this.h()},h(){a(t,"class","feedback-item svelte-19llkxn"),a(h,"class","feedback-item svelte-19llkxn"),a(k,"class","feedback-item svelte-19llkxn"),a(H,"class","feedback-item svelte-19llkxn"),a(l,"class","detailed-feedback svelte-19llkxn")},m(K,T){De(K,l,T),e(l,t),e(t,v),e(t,_),e(t,u),e(l,b),e(l,h),e(h,x),e(h,P),e(h,A),e(l,p),e(l,k),e(k,C),e(k,w),e(k,M),e(l,L),e(l,H),e(H,$),e(H,R),e(H,oe)},p(K,T){T&4&&c!==(c=K[12].result.feedback.detailed.interval+"")&&z(u,c),T&4&&D!==(D=K[12].result.feedback.detailed.direction+"")&&z(A,D),T&4&&J!==(J=K[12].result.feedback.detailed.consistency+"")&&z(M,J),T&4&&B!==(B=K[12].result.feedback.detailed.speed+"")&&z(oe,B)},d(K){K&&o(l)}}}function yt(r){let l,t,v,m=r[12].scenario+"",_,c,u,b=r[12].timestamp+"",h,x,I;function P(p,k){return p[12].error?Jt:Ut}let D=P(r),A=D(r);return{c(){l=n("div"),t=n("div"),v=n("h3"),_=S(m),c=f(),u=n("span"),h=S(b),x=f(),A.c(),I=f(),this.h()},l(p){l=s(p,"DIV",{class:!0});var k=i(l);t=s(k,"DIV",{class:!0});var C=i(t);v=s(C,"H3",{class:!0});var V=i(v);_=g(V,m),V.forEach(o),c=d(C),u=s(C,"SPAN",{class:!0});var w=i(u);h=g(w,b),w.forEach(o),C.forEach(o),x=d(k),A.l(k),I=d(k),k.forEach(o),this.h()},h(){a(v,"class","svelte-19llkxn"),a(u,"class","timestamp svelte-19llkxn"),a(t,"class","result-header svelte-19llkxn"),a(l,"class","result-card svelte-19llkxn")},m(p,k){De(p,l,k),e(l,t),e(t,v),e(v,_),e(t,c),e(t,u),e(u,h),e(l,x),A.m(l,null),e(l,I)},p(p,k){k&4&&m!==(m=p[12].scenario+"")&&z(_,m),k&4&&b!==(b=p[12].timestamp+"")&&z(h,b),D===(D=P(p))&&A?A.p(p,k):(A.d(1),A=D(p),A&&(A.c(),A.m(l,I)))},d(p){p&&o(l),A.d()}}}function Tt(r){let l,t,v="📊 エンジン統計",m,_,c,u,b="セッション情報",h,x,I,P="総試行回数:",D,A,p=r[5].session.totalAttempts+"",k,C,V,w,J="平均スコア:",M,L,H=r[5].session.overallScore.toFixed(1)+"",$,re,R,B,oe="現在レベル:",K,T,q=r[5].session.currentLevel+"",y,F,N,E,U="パフォーマンス",X,Y,se,ce="平均速度:",ne,ke,me=r[5].performance.averageSpeed.toFixed(1)+"",xe,qe,de,Ae,Xe="精度トレンド:",Ce,ie,ze=r[5].performance.accuracyTrend+"",we,Ne,ve,be,Ye="セッション進捗:",Le,Z,fe=r[5].performance.sessionProgress+"",Be,Me,Ve,ee,Ee,Ze="分析器統計",Ue,le,ue,st="音程分析:",Je,he,ye=r[5].analyzers.interval.totalAnalyses+"",Q,j,G,pe,ge,nt="方向性分析:",$e,te,Te=r[5].analyzers.direction.totalAnalyses+"",He,Oe,Ke,_e,Ie,Qe="一貫性追跡:",We,Se,Fe=r[5].analyzers.consistency.totalAttempts+"",Pe,et;return{c(){l=n("section"),t=n("h2"),t.textContent=v,m=f(),_=n("div"),c=n("div"),u=n("h3"),u.textContent=b,h=f(),x=n("div"),I=n("span"),I.textContent=P,D=f(),A=n("span"),k=S(p),C=f(),V=n("div"),w=n("span"),w.textContent=J,M=f(),L=n("span"),$=S(H),re=f(),R=n("div"),B=n("span"),B.textContent=oe,K=f(),T=n("span"),y=S(q),F=f(),N=n("div"),E=n("h3"),E.textContent=U,X=f(),Y=n("div"),se=n("span"),se.textContent=ce,ne=f(),ke=n("span"),xe=S(me),qe=f(),de=n("div"),Ae=n("span"),Ae.textContent=Xe,Ce=f(),ie=n("span"),we=S(ze),Ne=f(),ve=n("div"),be=n("span"),be.textContent=Ye,Le=f(),Z=n("span"),Be=S(fe),Me=S("%"),Ve=f(),ee=n("div"),Ee=n("h3"),Ee.textContent=Ze,Ue=f(),le=n("div"),ue=n("span"),ue.textContent=st,Je=f(),he=n("span"),Q=S(ye),j=S("回"),G=f(),pe=n("div"),ge=n("span"),ge.textContent=nt,$e=f(),te=n("span"),He=S(Te),Oe=S("回"),Ke=f(),_e=n("div"),Ie=n("span"),Ie.textContent=Qe,We=f(),Se=n("span"),Pe=S(Fe),et=S("回"),this.h()},l(W){l=s(W,"SECTION",{class:!0});var ae=i(l);t=s(ae,"H2",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-bgef1u"&&(t.textContent=v),m=d(ae),_=s(ae,"DIV",{class:!0});var tt=i(_);c=s(tt,"DIV",{class:!0});var Re=i(c);u=s(Re,"H3",{class:!0,"data-svelte-h":!0}),O(u)!=="svelte-17emse7"&&(u.textContent=b),h=d(Re),x=s(Re,"DIV",{class:!0});var at=i(x);I=s(at,"SPAN",{class:!0,"data-svelte-h":!0}),O(I)!=="svelte-yy8w1i"&&(I.textContent=P),D=d(at),A=s(at,"SPAN",{class:!0});var xt=i(A);k=g(xt,p),xt.forEach(o),at.forEach(o),C=d(Re),V=s(Re,"DIV",{class:!0});var rt=i(V);w=s(rt,"SPAN",{class:!0,"data-svelte-h":!0}),O(w)!=="svelte-1yupbzd"&&(w.textContent=J),M=d(rt),L=s(rt,"SPAN",{class:!0});var Ct=i(L);$=g(Ct,H),Ct.forEach(o),rt.forEach(o),re=d(Re),R=s(Re,"DIV",{class:!0});var ot=i(R);B=s(ot,"SPAN",{class:!0,"data-svelte-h":!0}),O(B)!=="svelte-1lwfu5j"&&(B.textContent=oe),K=d(ot),T=s(ot,"SPAN",{class:!0});var bt=i(T);y=g(bt,q),bt.forEach(o),ot.forEach(o),Re.forEach(o),F=d(tt),N=s(tt,"DIV",{class:!0});var Ge=i(N);E=s(Ge,"H3",{class:!0,"data-svelte-h":!0}),O(E)!=="svelte-1x0fmtr"&&(E.textContent=U),X=d(Ge),Y=s(Ge,"DIV",{class:!0});var ct=i(Y);se=s(ct,"SPAN",{class:!0,"data-svelte-h":!0}),O(se)!=="svelte-16r563u"&&(se.textContent=ce),ne=d(ct),ke=s(ct,"SPAN",{class:!0});var Et=i(ke);xe=g(Et,me),Et.forEach(o),ct.forEach(o),qe=d(Ge),de=s(Ge,"DIV",{class:!0});var it=i(de);Ae=s(it,"SPAN",{class:!0,"data-svelte-h":!0}),O(Ae)!=="svelte-1hjadvd"&&(Ae.textContent=Xe),Ce=d(it),ie=s(it,"SPAN",{class:!0});var gt=i(ie);we=g(gt,ze),gt.forEach(o),it.forEach(o),Ne=d(Ge),ve=s(Ge,"DIV",{class:!0});var vt=i(ve);be=s(vt,"SPAN",{class:!0,"data-svelte-h":!0}),O(be)!=="svelte-kq0n13"&&(be.textContent=Ye),Le=d(vt),Z=s(vt,"SPAN",{class:!0});var pt=i(Z);Be=g(pt,fe),Me=g(pt,"%"),pt.forEach(o),vt.forEach(o),Ge.forEach(o),Ve=d(tt),ee=s(tt,"DIV",{class:!0});var je=i(ee);Ee=s(je,"H3",{class:!0,"data-svelte-h":!0}),O(Ee)!=="svelte-bwiav"&&(Ee.textContent=Ze),Ue=d(je),le=s(je,"DIV",{class:!0});var ut=i(le);ue=s(ut,"SPAN",{class:!0,"data-svelte-h":!0}),O(ue)!=="svelte-1q5z8h"&&(ue.textContent=st),Je=d(ut),he=s(ut,"SPAN",{class:!0});var _t=i(he);Q=g(_t,ye),j=g(_t,"回"),_t.forEach(o),ut.forEach(o),G=d(je),pe=s(je,"DIV",{class:!0});var dt=i(pe);ge=s(dt,"SPAN",{class:!0,"data-svelte-h":!0}),O(ge)!=="svelte-xcx73y"&&(ge.textContent=nt),$e=d(dt),te=s(dt,"SPAN",{class:!0});var kt=i(te);He=g(kt,Te),Oe=g(kt,"回"),kt.forEach(o),dt.forEach(o),Ke=d(je),_e=s(je,"DIV",{class:!0});var ft=i(_e);Ie=s(ft,"SPAN",{class:!0,"data-svelte-h":!0}),O(Ie)!=="svelte-u6xg0h"&&(Ie.textContent=Qe),We=d(ft),Se=s(ft,"SPAN",{class:!0});var mt=i(Se);Pe=g(mt,Fe),et=g(mt,"回"),mt.forEach(o),ft.forEach(o),je.forEach(o),tt.forEach(o),ae.forEach(o),this.h()},h(){a(t,"class","svelte-19llkxn"),a(u,"class","svelte-19llkxn"),a(I,"class","label svelte-19llkxn"),a(A,"class","value svelte-19llkxn"),a(x,"class","stat-item svelte-19llkxn"),a(w,"class","label svelte-19llkxn"),a(L,"class","value svelte-19llkxn"),a(V,"class","stat-item svelte-19llkxn"),a(B,"class","label svelte-19llkxn"),a(T,"class","value svelte-19llkxn"),a(R,"class","stat-item svelte-19llkxn"),a(c,"class","stat-card svelte-19llkxn"),a(E,"class","svelte-19llkxn"),a(se,"class","label svelte-19llkxn"),a(ke,"class","value svelte-19llkxn"),a(Y,"class","stat-item svelte-19llkxn"),a(Ae,"class","label svelte-19llkxn"),a(ie,"class","value svelte-19llkxn"),a(de,"class","stat-item svelte-19llkxn"),a(be,"class","label svelte-19llkxn"),a(Z,"class","value svelte-19llkxn"),a(ve,"class","stat-item svelte-19llkxn"),a(N,"class","stat-card svelte-19llkxn"),a(Ee,"class","svelte-19llkxn"),a(ue,"class","label svelte-19llkxn"),a(he,"class","value svelte-19llkxn"),a(le,"class","stat-item svelte-19llkxn"),a(ge,"class","label svelte-19llkxn"),a(te,"class","value svelte-19llkxn"),a(pe,"class","stat-item svelte-19llkxn"),a(Ie,"class","label svelte-19llkxn"),a(Se,"class","value svelte-19llkxn"),a(_e,"class","stat-item svelte-19llkxn"),a(ee,"class","stat-card svelte-19llkxn"),a(_,"class","stats-grid svelte-19llkxn"),a(l,"class","statistics svelte-19llkxn")},m(W,ae){De(W,l,ae),e(l,t),e(l,m),e(l,_),e(_,c),e(c,u),e(c,h),e(c,x),e(x,I),e(x,D),e(x,A),e(A,k),e(c,C),e(c,V),e(V,w),e(V,M),e(V,L),e(L,$),e(c,re),e(c,R),e(R,B),e(R,K),e(R,T),e(T,y),e(_,F),e(_,N),e(N,E),e(N,X),e(N,Y),e(Y,se),e(Y,ne),e(Y,ke),e(ke,xe),e(N,qe),e(N,de),e(de,Ae),e(de,Ce),e(de,ie),e(ie,we),e(N,Ne),e(N,ve),e(ve,be),e(ve,Le),e(ve,Z),e(Z,Be),e(Z,Me),e(_,Ve),e(_,ee),e(ee,Ee),e(ee,Ue),e(ee,le),e(le,ue),e(le,Je),e(le,he),e(he,Q),e(he,j),e(ee,G),e(ee,pe),e(pe,ge),e(pe,$e),e(pe,te),e(te,He),e(te,Oe),e(ee,Ke),e(ee,_e),e(_e,Ie),e(_e,We),e(_e,Se),e(Se,Pe),e(Se,et)},p(W,ae){ae&32&&p!==(p=W[5].session.totalAttempts+"")&&z(k,p),ae&32&&H!==(H=W[5].session.overallScore.toFixed(1)+"")&&z($,H),ae&32&&q!==(q=W[5].session.currentLevel+"")&&z(y,q),ae&32&&me!==(me=W[5].performance.averageSpeed.toFixed(1)+"")&&z(xe,me),ae&32&&ze!==(ze=W[5].performance.accuracyTrend+"")&&z(we,ze),ae&32&&fe!==(fe=W[5].performance.sessionProgress+"")&&z(Be,fe),ae&32&&ye!==(ye=W[5].analyzers.interval.totalAnalyses+"")&&z(Q,ye),ae&32&&Te!==(Te=W[5].analyzers.direction.totalAnalyses+"")&&z(He,Te),ae&32&&Fe!==(Fe=W[5].analyzers.consistency.totalAttempts+"")&&z(Pe,Fe)},d(W){W&&o(l)}}}function Kt(r){let l,t,v,m,_="🎯 Enhanced Scoring Engine",c,u,b="統合採点エンジンのテストページ",h,x,I,P,D,A=r[0]?"準備完了":"初期化中...",p,k,C,V,w,J,M,L,H,$,re,R,B,oe;function K(E,U){return E[3]?Mt:Bt}let T=K(r),q=T(r),y=r[3]&&r[1]&&Pt(r),F=r[2].length>0&&Dt(r),N=r[5]&&Tt(r);return{c(){l=f(),t=n("div"),v=n("header"),m=n("h1"),m.textContent=_,c=f(),u=n("p"),u.textContent=b,h=f(),x=n("div"),I=n("span"),P=f(),D=n("span"),p=S(A),k=f(),C=n("section"),V=n("button"),q.c(),J=f(),M=n("button"),L=S("🔄 リセット"),$=f(),y&&y.c(),re=f(),F&&F.c(),R=f(),N&&N.c(),this.h()},l(E){Rt("svelte-pwq006",document.head).forEach(o),l=d(E),t=s(E,"DIV",{class:!0});var X=i(t);v=s(X,"HEADER",{class:!0});var Y=i(v);m=s(Y,"H1",{class:!0,"data-svelte-h":!0}),O(m)!=="svelte-f90z2e"&&(m.textContent=_),c=d(Y),u=s(Y,"P",{class:!0,"data-svelte-h":!0}),O(u)!=="svelte-10mru30"&&(u.textContent=b),h=d(Y),x=s(Y,"DIV",{class:!0});var se=i(x);I=s(se,"SPAN",{class:!0}),i(I).forEach(o),P=d(se),D=s(se,"SPAN",{});var ce=i(D);p=g(ce,A),ce.forEach(o),se.forEach(o),Y.forEach(o),k=d(X),C=s(X,"SECTION",{class:!0});var ne=i(C);V=s(ne,"BUTTON",{class:!0});var ke=i(V);q.l(ke),ke.forEach(o),J=d(ne),M=s(ne,"BUTTON",{class:!0});var me=i(M);L=g(me,"🔄 リセット"),me.forEach(o),ne.forEach(o),$=d(X),y&&y.l(X),re=d(X),F&&F.l(X),R=d(X),N&&N.l(X),X.forEach(o),this.h()},h(){document.title="Enhanced Scoring Engine - Test Page",a(m,"class","svelte-19llkxn"),a(u,"class","svelte-19llkxn"),a(I,"class","status-indicator svelte-19llkxn"),ht(I,"ready",r[0]),ht(I,"error",!r[0]),a(x,"class","status svelte-19llkxn"),a(v,"class","header svelte-19llkxn"),a(V,"class","btn btn-primary svelte-19llkxn"),V.disabled=w=!r[0]||r[3],a(M,"class","btn btn-secondary svelte-19llkxn"),M.disabled=H=!r[0]||r[3],a(C,"class","controls svelte-19llkxn"),a(t,"class","container svelte-19llkxn")},m(E,U){De(E,l,U),De(E,t,U),e(t,v),e(v,m),e(v,c),e(v,u),e(v,h),e(v,x),e(x,I),e(x,P),e(x,D),e(D,p),e(t,k),e(t,C),e(C,V),q.m(V,null),e(C,J),e(C,M),e(M,L),e(t,$),y&&y.m(t,null),e(t,re),F&&F.m(t,null),e(t,R),N&&N.m(t,null),B||(oe=[At(V,"click",r[7]),At(M,"click",r[8])],B=!0)},p(E,[U]){U&1&&ht(I,"ready",E[0]),U&1&&ht(I,"error",!E[0]),U&1&&A!==(A=E[0]?"準備完了":"初期化中...")&&z(p,A),T!==(T=K(E))&&(q.d(1),q=T(E),q&&(q.c(),q.m(V,null))),U&9&&w!==(w=!E[0]||E[3])&&(V.disabled=w),U&9&&H!==(H=!E[0]||E[3])&&(M.disabled=H),E[3]&&E[1]?y?y.p(E,U):(y=Pt(E),y.c(),y.m(t,re)):y&&(y.d(1),y=null),E[2].length>0?F?F.p(E,U):(F=Dt(E),F.c(),F.m(t,R)):F&&(F.d(1),F=null),E[5]?N?N.p(E,U):(N=Tt(E),N.c(),N.m(t,null)):N&&(N.d(1),N=null)},i:St,o:St,d(E){E&&(o(l),o(t)),q.d(),y&&y.d(),F&&F.d(),N&&N.d(),B=!1,Ot(oe)}}}function qt(r){return r>=90?"#10b981":r>=80?"#3b82f6":r>=70?"#f59e0b":r>=60?"#f97316":"#ef4444"}function Ft(r){return["S","A+","A"].includes(r)?"#10b981":["B+","B"].includes(r)?"#3b82f6":["C+","C"].includes(r)?"#f59e0b":["D+","D"].includes(r)?"#f97316":"#ef4444"}function Qt(r,l,t){let v=null,m=!1,_=[{name:"完璧な長3度認識",baseFreq:440,targetFreq:554.37,detectedFreq:554.37,responseTime:800,volume:60,expected:"高得点"},{name:"やや不正確な完全5度",baseFreq:261.63,targetFreq:392,detectedFreq:385,responseTime:1500,volume:50,expected:"中程度の得点"},{name:"遅い反応での短2度",baseFreq:293.66,targetFreq:311.13,detectedFreq:315,responseTime:4e3,volume:45,expected:"速度減点あり"},{name:"方向性間違い",baseFreq:349.23,targetFreq:293.66,detectedFreq:415.3,responseTime:2200,volume:65,expected:"方向性エラー"}],c=null,u=[],b=!1,h=0,x=null;Gt(()=>{I()});function I(){try{v=new Lt({weights:{pitchAccuracy:.4,recognitionSpeed:.2,intervalMastery:.2,directionAccuracy:.1,consistency:.1},speedThresholds:{excellent:1e3,good:2e3,fair:3e3,poor:5e3}}),t(0,m=!0),console.log("✅ EnhancedScoringEngine初期化完了")}catch(p){console.error("❌ EnhancedScoringEngine初期化エラー:",p)}}async function P(p){if(!m)return console.error("採点エンジンが初期化されていません"),null;try{console.log(`🧪 テスト実行: ${p.name}`);const k=await v.analyzePerformance({baseFreq:p.baseFreq,targetFreq:p.targetFreq,detectedFreq:p.detectedFreq,responseTime:p.responseTime,volume:p.volume,harmonicCorrection:null});return{scenario:p.name,expected:p.expected,result:k,timestamp:new Date().toLocaleTimeString()}}catch(k){return console.error("❌ テスト実行エラー:",k),{scenario:p.name,expected:p.expected,error:k.message,timestamp:new Date().toLocaleTimeString()}}}async function D(){if(!m){alert("採点エンジンが初期化されていません");return}t(3,b=!0),t(2,u=[]),t(1,c=null),t(4,h=0);for(let p=0;p<_.length;p++){t(4,h=p),t(1,c=_[p]),await new Promise(C=>setTimeout(C,500));const k=await P(_[p]);k&&t(2,u=[...u,k])}t(3,b=!1),t(1,c=null),t(5,x=v.getStatistics()),console.log("✅ 全テスト完了")}function A(){v&&(v.reset(),t(2,u=[]),t(5,x=null),console.log("🔄 エンジンリセット完了"))}return[m,c,u,b,h,x,_,D,A]}class $t extends zt{constructor(l){super(),wt(this,l,Qt,Kt,Ht,{})}}export{$t as component};
