import{S as F,i as G,s as K,d as h,C as S,m as V,o as I,b as m,D as q,H as Z,h as j,E as A,k,F as N,l as J,L as z,c as T,y as b,K as Q,e as g,f as w,G as P,j as _,M as R,n as U,A as O,r as L}from"../chunks/CJUHymq1.js";import"../chunks/IHki7fMi.js";import{p as W}from"../chunks/DUgrQomt.js";import{g as X,b as Y}from"../chunks/BdXTrSTr.js";import{P as ee,C as te}from"../chunks/DqnuPPYK.js";import{a as E,P as se,b as ne}from"../chunks/0TDGV0x0.js";const oe=!1,$e=Object.freeze(Object.defineProperty({__proto__:null,ssr:oe},Symbol.toStringTag,{value:"Module"}));function ie(d){let e,s="ãƒã‚¤ã‚¯ã®ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã—ã¾ã™",a,t,o="ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆé–‹å§‹ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãƒã‚¤ã‚¯ã®ä½¿ç”¨ã‚’è¨±å¯ã—ã¦ãã ã•ã„",n,r;function u(i,c){if(i[0]==="pending")return ce;if(i[0]==="denied")return le;if(i[0]==="initial")return re}let p=u(d),l=p&&p(d);return{c(){e=_("h3"),e.textContent=s,a=k(),t=_("p"),t.textContent=o,n=k(),l&&l.c(),r=L(),this.h()},l(i){e=g(i,"H3",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-gfi16f"&&(e.textContent=s),a=j(i),t=g(i,"P",{class:!0,"data-svelte-h":!0}),P(t)!=="svelte-1w19y1h"&&(t.textContent=o),n=j(i),l&&l.l(i),r=L(),this.h()},h(){b(e,"class","instructions-title svelte-1v6hvj0"),b(t,"class","instructions-description svelte-1v6hvj0")},m(i,c){m(i,e,c),m(i,a,c),m(i,t,c),m(i,n,c),l&&l.m(i,c),m(i,r,c)},p(i,c){p===(p=u(i))&&l?l.p(i,c):(l&&l.d(1),l=p&&p(i),l&&(l.c(),l.m(r.parentNode,r)))},d(i){i&&(h(e),h(a),h(t),h(n),h(r)),l&&l.d(i)}}}function ae(d){let e,s="ãƒã‚¤ã‚¯æº–å‚™å®Œäº†",a,t,o="ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’é–‹å§‹ã—ã¦ãã ã•ã„",n,r,u,p="ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–‹å§‹",l,i;return{c(){e=_("h3"),e.textContent=s,a=k(),t=_("p"),t.textContent=o,n=k(),r=_("div"),u=_("button"),u.textContent=p,this.h()},l(c){e=g(c,"H3",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-11dam81"&&(e.textContent=s),a=j(c),t=g(c,"P",{class:!0,"data-svelte-h":!0}),P(t)!=="svelte-fsj0o8"&&(t.textContent=o),n=j(c),r=g(c,"DIV",{class:!0});var y=w(r);u=g(y,"BUTTON",{class:!0,"data-svelte-h":!0}),P(u)!=="svelte-kae9rs"&&(u.textContent=p),y.forEach(h),this.h()},h(){b(e,"class","ready-title svelte-1v6hvj0"),b(t,"class","ready-description svelte-1v6hvj0"),b(u,"class","training-start-button enabled svelte-1v6hvj0"),b(r,"class","training-start-button-area svelte-1v6hvj0")},m(c,y){m(c,e,y),m(c,a,y),m(c,t,y),m(c,n,y),m(c,r,y),T(r,u),l||(i=O(u,"click",d[6]),l=!0)},p:U,d(c){c&&(h(e),h(a),h(t),h(n),h(r)),l=!1,i()}}}function re(d){let e,s,a="ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹",t,o;return{c(){e=_("div"),s=_("button"),s.textContent=a,this.h()},l(n){e=g(n,"DIV",{class:!0});var r=w(e);s=g(r,"BUTTON",{class:!0,"data-svelte-h":!0}),P(s)!=="svelte-caex95"&&(s.textContent=a),r.forEach(h),this.h()},h(){b(s,"class","mic-test-button start svelte-1v6hvj0"),b(e,"class","mic-test-button-area svelte-1v6hvj0")},m(n,r){m(n,e,r),T(e,s),t||(o=O(s,"click",d[5]),t=!0)},p:U,d(n){n&&h(e),t=!1,o()}}}function le(d){let e,s,a="ãƒã‚¤ã‚¯è¨±å¯ã‚’å†è©¦è¡Œ",t,o;return{c(){e=_("div"),s=_("button"),s.textContent=a,this.h()},l(n){e=g(n,"DIV",{class:!0});var r=w(e);s=g(r,"BUTTON",{class:!0,"data-svelte-h":!0}),P(s)!=="svelte-1p3n8nt"&&(s.textContent=a),r.forEach(h),this.h()},h(){b(s,"class","mic-test-button retry svelte-1v6hvj0"),b(e,"class","mic-test-button-area svelte-1v6hvj0")},m(n,r){m(n,e,r),T(e,s),t||(o=O(s,"click",d[5]),t=!0)},p:U,d(n){n&&h(e),t=!1,o()}}}function ce(d){let e,s="ãƒã‚¤ã‚¯æº–å‚™ä¸­...";return{c(){e=_("p"),e.textContent=s,this.h()},l(a){e=g(a,"P",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-1vb5g92"&&(e.textContent=s),this.h()},h(){b(e,"class","status-text svelte-1v6hvj0")},m(a,t){m(a,e,t)},p:U,d(a){a&&h(e)}}}function de(d){let e;function s(o,n){return o[0]==="granted"?ae:ie}let a=s(d),t=a(d);return{c(){e=_("div"),t.c(),this.h()},l(o){e=g(o,"DIV",{class:!0});var n=w(e);t.l(n),n.forEach(h),this.h()},h(){b(e,"class","training-mode-content svelte-1v6hvj0")},m(o,n){m(o,e,n),t.m(e,null)},p(o,n){a===(a=s(o))&&t?t.p(o,n):(t.d(1),t=a(o),t&&(t.c(),t.m(e,null)))},d(o){o&&h(e),t.d()}}}function ue(d){let e,s,a='<div class="mic-test-header svelte-1v6hvj0"><div class="mic-icon svelte-1v6hvj0"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" x2="12" y1="19" y2="22"></line><line x1="8" x2="16" y1="22" y2="22"></line></svg></div> <div><h1 class="mic-test-title svelte-1v6hvj0">ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆ</h1> <p class="mic-test-description svelte-1v6hvj0">éŸ³æ„Ÿãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’å§‹ã‚ã‚‹å‰ã«ã€ãƒã‚¤ã‚¯ã®å‹•ä½œã‚’ç¢ºèªã—ã¾ã™</p></div></div>',t,o,n,r,u,p,l,i,c;n=new te({props:{variant:"default",padding:"lg",$$slots:{default:[de]},$$scope:{ctx:d}}}),u=new se({props:{frequency:d[2],note:d[3],volume:d[1],isMuted:d[0]!=="granted",muteMessage:"ãƒã‚¤ã‚¯è¨±å¯å¾Œã«é–‹å§‹"}});let y={isActive:d[0]==="granted",className:"pitch-detector-content",debugMode:!1};return i=new ne({props:y}),d[9](i),i.$on("pitchUpdate",d[7]),i.$on("stateChange",fe),i.$on("error",d[8]),{c(){e=_("div"),s=_("div"),s.innerHTML=a,t=k(),o=_("div"),N(n.$$.fragment),r=k(),N(u.$$.fragment),p=k(),l=_("div"),N(i.$$.fragment),this.h()},l(f){e=g(f,"DIV",{class:!0});var v=w(e);s=g(v,"DIV",{class:!0,"data-svelte-h":!0}),P(s)!=="svelte-4qcd63"&&(s.innerHTML=a),t=j(v),o=g(v,"DIV",{class:!0});var D=w(o);A(n.$$.fragment,D),D.forEach(h),r=j(v),A(u.$$.fragment,v),p=j(v),l=g(v,"DIV",{style:!0});var C=w(l);A(i.$$.fragment,C),C.forEach(h),v.forEach(h),this.h()},h(){b(s,"class","header svelte-1v6hvj0"),b(o,"class","training-mode-info svelte-1v6hvj0"),Q(l,"display","none"),b(e,"class","microphone-test svelte-1v6hvj0")},m(f,v){m(f,e,v),T(e,s),T(e,t),T(e,o),q(n,o,null),T(e,r),q(u,e,null),T(e,p),T(e,l),q(i,l,null),c=!0},p(f,v){const D={};v&65537&&(D.$$scope={dirty:v,ctx:f}),n.$set(D);const C={};v&4&&(C.frequency=f[2]),v&8&&(C.note=f[3]),v&2&&(C.volume=f[1]),v&1&&(C.isMuted=f[0]!=="granted"),u.$set(C);const x={};v&1&&(x.isActive=f[0]==="granted"),i.$set(x)},i(f){c||(I(n.$$.fragment,f),I(u.$$.fragment,f),I(i.$$.fragment,f),c=!0)},o(f){V(n.$$.fragment,f),V(u.$$.fragment,f),V(i.$$.fragment,f),c=!1},d(f){f&&h(e),S(n),S(u),d[9](null),S(i)}}}function he(d){let e,s,a;return s=new ee({props:{showBackButton:!0,$$slots:{default:[ue]},$$scope:{ctx:d}}}),{c(){e=k(),N(s.$$.fragment),this.h()},l(t){Z("svelte-8st1fo",document.head).forEach(h),e=j(t),A(s.$$.fragment,t),this.h()},h(){document.title="ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆ - ç›¸å¯¾éŸ³æ„Ÿãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°"},m(t,o){m(t,e,o),q(s,t,o),a=!0},p(t,[o]){const n={};o&65567&&(n.$$scope={dirty:o,ctx:t}),s.$set(n)},i(t){a||(I(s.$$.fragment,t),a=!0)},o(t){V(s.$$.fragment,t),a=!1},d(t){t&&h(e),S(s,t)}}}function fe(d){}function ve(d,e,s){let a;J(d,W,M=>s(12,a=M));let t="random";z(()=>{a.url.searchParams.has("mode")&&(t=a.url.searchParams.get("mode")||"random")});let o="initial",n=0,r=0,u="ãƒ¼ãƒ¼",p=null,l=null;z(()=>{l=E.getPlatformSpecs()});const i={random:{name:"ãƒ©ãƒ³ãƒ€ãƒ åŸºéŸ³ãƒ¢ãƒ¼ãƒ‰",description:"10ç¨®é¡ã®åŸºéŸ³ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«é¸æŠã—ã¦ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°",color:"green",path:"/training/random"},continuous:{name:"é€£ç¶šãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ¢ãƒ¼ãƒ‰",description:"é¸æŠã—ãŸå›æ•°ã ã‘é€£ç¶šã§å®Ÿè¡Œã—ã€ç·åˆè©•ä¾¡ã‚’ç¢ºèª",color:"orange",path:"/training/continuous"},chromatic:{name:"12éŸ³éšãƒ¢ãƒ¼ãƒ‰",description:"ã‚¯ãƒ­ãƒãƒãƒƒã‚¯ã‚¹ã‚±ãƒ¼ãƒ«ã®ä¸Šè¡Œãƒ»ä¸‹è¡Œã§å®Œå…¨åˆ¶è¦‡",color:"purple",path:"/training/chromatic"}},c=i[t]||i.random;async function y(){var M;s(0,o="pending");try{if(console.log("ğŸ¤ [MicTest] ãƒã‚¤ã‚¯è¨±å¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆé–‹å§‹"),!((M=navigator.mediaDevices)!=null&&M.getUserMedia)){s(0,o="denied"),console.error("âŒ [MicTest] getUserMediaãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“");return}const $=await E.initialize();if(console.log("âœ… [MicTest] AudioManager ãƒªã‚½ãƒ¼ã‚¹å–å¾—å®Œäº†"),$.mediaStream&&$.audioContext)s(0,o="granted"),console.log("âœ… [MicTest] ãƒã‚¤ã‚¯è¨±å¯å®Œäº†"),await C(),setTimeout(async()=>{p&&(console.log("ğŸ™ï¸ [MicTest] PitchDetectoråˆæœŸåŒ–é–‹å§‹"),await p.initialize(),console.log("âœ… [MicTest] PitchDetectoråˆæœŸåŒ–å®Œäº†"),console.log("ğŸ¯ [MicTest] PitchDetector isActiveãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã§è‡ªå‹•æ¤œå‡ºé–‹å§‹"))},1e3);else throw new Error("ãƒªã‚½ãƒ¼ã‚¹å–å¾—å¤±æ•—")}catch($){console.error("âŒ [MicTest] ãƒã‚¤ã‚¯è¨±å¯ã‚¨ãƒ©ãƒ¼:",$),s(0,o=(($==null?void 0:$.name)==="NotAllowedError","denied"))}}function f(){console.log("ğŸš€ [MicTest] ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–‹å§‹ - ãƒ©ãƒ³ãƒ€ãƒ åŸºéŸ³ãƒ¢ãƒ¼ãƒ‰ã¸é·ç§»"),localStorage.setItem("mic-test-completed","true"),console.log("âœ… [MicTest] ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆå®Œäº†ãƒ•ãƒ©ã‚°ã‚’ä¿å­˜"),X(`${Y}${c.path}?from=microphone-test`)}function v(M){const{frequency:$,note:B,volume:H,rawVolume:pe,clarity:me}=M.detail;s(2,r=$),s(3,u=B),s(1,n=H)}function D(M){console.error("âŒ [MicTest] PitchDetectorã‚¨ãƒ©ãƒ¼:",M.detail);const{error:$,reason:B,recovery:H}=M.detail;B==="mediastream_ended"&&H==="restart_required"&&(console.log("ğŸ”„ [MicTest] MediaStreamçµ‚äº†æ¤œå‡º - è‡ªå‹•å¾©æ—§é–‹å§‹"),s(0,o="initial"),s(1,n=0),s(2,r=0),s(3,u="ãƒ¼ãƒ¼"),console.log("âš ï¸ [MicTest] ãƒã‚¤ã‚¯å†è¨±å¯ãŒå¿…è¦ã§ã™"))}async function C(){if(l&&l.deviceType==="iPad"){console.log("ğŸ”§ [MicTest] iPadæ¤œå‡º - ãƒã‚¤ã‚¯æ„Ÿåº¦7.0xè‡ªå‹•è¨­å®šé–‹å§‹"),E.setSensitivity(7),console.log("âœ… [MicTest] iPad ãƒã‚¤ã‚¯æ„Ÿåº¦7.0xè‡ªå‹•è¨­å®šå®Œäº†");try{await E.initialize(),console.log("ğŸ”„ [MicTest] iPadç”¨AudioManagerå†åˆæœŸåŒ–å®Œäº†")}catch(M){console.warn("âš ï¸ [MicTest] AudioManagerå†åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",M)}}}function x(M){R[M?"unshift":"push"](()=>{p=M,s(4,p)})}return[o,n,r,u,p,y,f,v,D,x]}class Te extends F{constructor(e){super(),G(this,e,ve,he,K,{})}}export{Te as component,$e as universal};
