const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/CYOrYtYa.js","../chunks/DXfV3yLF.js","../chunks/BnpKoSs-.js","../chunks/D0QH3NT1.js","../chunks/DC6Dc1fJ.js","../assets/sessionStorage.C1aMkHwk.css"])))=>i.map(i=>d[i]);
import{_ as kn}from"../chunks/C1FmrZbK.js";import{S as uo,i as fo,d as te,s as mo,v as Te,c as Ie,a as go,H as qn,V as wn,q as de,r as Q,u as j,w as me,x as ge,y as ye,J as yo,b as v,K as He,L as xe,f as G,g as h,z as B,h as A,M as Ke,j as T,k as U,A as Se,m as X,l as Z,N as Me,o as I,p as Y,t as $,e as je,Q as lt,R as In,n as Mn}from"../chunks/DXfV3yLF.js";import{g as ho}from"../chunks/D0QH3NT1.js";import"../chunks/BnpKoSs-.js";import{b as it,g as pt}from"../chunks/DC6Dc1fJ.js";import{p as vt}from"../chunks/_JaMRS74.js";import{P as En,B as ut,C as Qe}from"../chunks/CrwomGmF.js";import{l as ce,a as Ue,h as St,P as Pn,b as Bn,V as po}from"../chunks/BRZWrjh2.js";import{l as _t,s as tt,c as vo,r as So,a as Dn,u as bt,b as _o,d as kt,p as bo,o as ko,f as qo,g as qt,i as wt,h as wo,j as Dt,n as Ft,k as Ct,m as Rt,t as Nt,E as Fn,q as nt,A as Kt,U as Qt,S as Do,F as Fo,C as Co,I as Ro,v as No,T as Ao,P as To,M as Vn,w as Io,x as Mo,y as At}from"../chunks/CYOrYtYa.js";const Eo=!1,Po=!1,Qo=Object.freeze(Object.defineProperty({__proto__:null,prerender:Po,ssr:Eo},Symbol.toStringTag,{value:"Module"})),{Object:Bo,console:Vo}=ho,M="src/routes/training/random/+page.svelte";function Cn(a,t,e){const c=a.slice();return c[96]=t[e],c[98]=e,c}function Rn(a,t,e){const c=a.slice();return c[99]=t[e],c}function Mt(a){var L,R,O;let t,e,c,r,n=(((L=a[23])==null?void 0:L.length)||0)+"",s,i,m,l,f,d=8-(((R=a[23])==null?void 0:R.length)||0)+"",g,S,y,_,w,J,F,q,C=Math.round((((O=a[23])==null?void 0:O.length)||0)/8*100)+"",N,W,p,b,V,E=a[0]==="results"&&Et(a);const P={c:function(){t=I("div"),e=I("div"),c=I("div"),r=I("span"),s=$(n),i=$("/8"),m=Y(),l=I("span"),f=$("æ®‹ã‚Š "),g=$(d),S=$(" ã‚»ãƒƒã‚·ãƒ§ãƒ³"),y=Y(),_=I("div"),w=I("div"),J=I("div"),F=Y(),q=I("span"),N=$(C),W=$("%"),p=Y(),E&&E.c(),b=Me(),this.h()},l:function(x){t=T(x,"DIV",{class:!0});var se=U(t);e=T(se,"DIV",{class:!0});var ne=U(e);c=T(ne,"DIV",{class:!0});var _e=U(c);r=T(_e,"SPAN",{class:!0});var he=U(r);s=Z(he,n),i=Z(he,"/8"),he.forEach(v),m=X(_e),l=T(_e,"SPAN",{class:!0});var ke=U(l);f=Z(ke,"æ®‹ã‚Š "),g=Z(ke,d),S=Z(ke," ã‚»ãƒƒã‚·ãƒ§ãƒ³"),ke.forEach(v),_e.forEach(v),y=X(ne),_=T(ne,"DIV",{class:!0});var Ee=U(_);w=T(Ee,"DIV",{class:!0});var Le=U(w);J=T(Le,"DIV",{class:!0,style:!0}),U(J).forEach(v),Le.forEach(v),F=X(Ee),q=T(Ee,"SPAN",{class:!0});var De=U(q);N=Z(De,C),W=Z(De,"%"),De.forEach(v),Ee.forEach(v),ne.forEach(v),se.forEach(v),p=X(x),E&&E.l(x),b=Me(),this.h()},h:function(){var x;B(r,"class","completed-count svelte-1ktm6f3"),A(r,M,2486,12,84406),B(l,"class","remaining-text svelte-1ktm6f3"),A(l,M,2487,12,84488),B(c,"class","session-info svelte-1ktm6f3"),A(c,M,2485,10,84367),B(J,"class","progress-fill svelte-1ktm6f3"),Ke(J,"width",(((x=a[23])==null?void 0:x.length)||0)/8*100+"%"),A(J,M,2491,14,84681),B(w,"class","progress-bar svelte-1ktm6f3"),A(w,M,2490,12,84640),B(q,"class","progress-text svelte-1ktm6f3"),A(q,M,2493,12,84807),B(_,"class","progress-section svelte-1ktm6f3"),A(_,M,2489,10,84597),B(e,"class","session-status svelte-1ktm6f3"),A(e,M,2484,8,84328),B(t,"class","session-progress svelte-1ktm6f3"),A(t,M,2483,6,84289)},m:function(x,se){G(x,t,se),h(t,e),h(e,c),h(c,r),h(r,s),h(r,i),h(c,m),h(c,l),h(l,f),h(l,g),h(l,S),h(e,y),h(e,_),h(_,w),h(w,J),h(_,F),h(_,q),h(q,N),h(q,W),G(x,p,se),E&&E.m(x,se),G(x,b,se),V=!0},p:function(x,se){var ne,_e,he,ke;(!V||se[0]&8388608)&&n!==(n=(((ne=x[23])==null?void 0:ne.length)||0)+"")&&je(s,n),(!V||se[0]&8388608)&&d!==(d=8-(((_e=x[23])==null?void 0:_e.length)||0)+"")&&je(g,d),(!V||se[0]&8388608)&&Ke(J,"width",(((he=x[23])==null?void 0:he.length)||0)/8*100+"%"),(!V||se[0]&8388608)&&C!==(C=Math.round((((ke=x[23])==null?void 0:ke.length)||0)/8*100)+"")&&je(N,C),x[0]==="results"?E?(E.p(x,se),se[0]&1&&j(E,1)):(E=Et(x),E.c(),j(E,1),E.m(b.parentNode,b)):E&&(He(),Q(E,1,1,()=>{E=null}),xe())},i:function(x){V||(j(E),V=!0)},o:function(x){Q(E),V=!1},d:function(x){x&&(v(t),v(p),v(b)),E&&E.d(x)}};return te("SvelteRegisterBlock",{block:P,id:Mt.name,type:"if",source:"(2483:4) {#if microphoneState === 'granted' && !$isLoading}",ctx:a}),P}function Et(a){let t,e,c;e=new Kt({props:{isCompleted:a[5],position:"top"},$$inline:!0}),e.$on("action",a[29]);const r={c:function(){t=I("div"),ye(e.$$.fragment),this.h()},l:function(s){t=T(s,"DIV",{class:!0});var i=U(t);ge(e.$$.fragment,i),i.forEach(v),this.h()},h:function(){B(t,"class","top-action-buttons svelte-1ktm6f3"),A(t,M,2501,8,85046)},m:function(s,i){G(s,t,i),me(e,t,null),c=!0},p:function(s,i){const m={};i[0]&32&&(m.isCompleted=s[5]),e.$set(m)},i:function(s){c||(j(e.$$.fragment,s),c=!0)},o:function(s){Q(e.$$.fragment,s),c=!1},d:function(s){s&&v(t),de(e)}};return te("SvelteRegisterBlock",{block:r,id:Et.name,type:"if",source:"(2501:6) {#if trainingPhase === 'results'}",ctx:a}),r}function Hn(a){let t,e;t=new Qe({props:{class:"error-card",$$slots:{default:[Ln]},$$scope:{ctx:a}},$$inline:!0});const c={c:function(){ye(t.$$.fragment)},l:function(n){ge(t.$$.fragment,n)},m:function(n,s){me(t,n,s),e=!0},p:function(n,s){const i={};s[3]&512&&(i.$$scope={dirty:s,ctx:n}),t.$set(i)},i:function(n){e||(j(t.$$.fragment,n),e=!0)},o:function(n){Q(t.$$.fragment,n),e=!1},d:function(n){de(t,n)}};return te("SvelteRegisterBlock",{block:c,id:Hn.name,type:"else",source:"(2692:2) {:else}",ctx:a}),c}function xn(a){let t,e,c,r,n,s,i,m={isActive:a[1]==="granted",trainingPhase:a[0],className:"pitch-detector-content",debugMode:!0,disableHarmonicCorrection:!1};e=new Bn({props:m,$$inline:!0}),a[33](e),e.$on("pitchUpdate",a[28]),e.$on("stateChange",eo),e.$on("error",to),e.$on("microphoneHealthChange",a[30]);let l=a[0]!=="results"&&Pt(a),f=a[0]!=="results"&&xt(a),d=a[0]==="results"&&Lt(a);const g={c:function(){t=I("div"),ye(e.$$.fragment),c=Y(),l&&l.c(),r=Y(),f&&f.c(),n=Y(),d&&d.c(),s=Me(),this.h()},l:function(y){t=T(y,"DIV",{style:!0});var _=U(t);ge(e.$$.fragment,_),_.forEach(v),c=X(y),l&&l.l(y),r=X(y),f&&f.l(y),n=X(y),d&&d.l(y),s=Me(),this.h()},h:function(){Ke(t,"display","none"),A(t,M,2520,4,85526)},m:function(y,_){G(y,t,_),me(e,t,null),G(y,c,_),l&&l.m(y,_),G(y,r,_),f&&f.m(y,_),G(y,n,_),d&&d.m(y,_),G(y,s,_),i=!0},p:function(y,_){const w={};_[0]&2&&(w.isActive=y[1]==="granted"),_[0]&1&&(w.trainingPhase=y[0]),e.$set(w),y[0]!=="results"?l?(l.p(y,_),_[0]&1&&j(l,1)):(l=Pt(y),l.c(),j(l,1),l.m(r.parentNode,r)):l&&(He(),Q(l,1,1,()=>{l=null}),xe()),y[0]!=="results"?f?(f.p(y,_),_[0]&1&&j(f,1)):(f=xt(y),f.c(),j(f,1),f.m(n.parentNode,n)):f&&(He(),Q(f,1,1,()=>{f=null}),xe()),y[0]==="results"?d?(d.p(y,_),_[0]&1&&j(d,1)):(d=Lt(y),d.c(),j(d,1),d.m(s.parentNode,s)):d&&(He(),Q(d,1,1,()=>{d=null}),xe())},i:function(y){i||(j(e.$$.fragment,y),j(l),j(f),j(d),i=!0)},o:function(y){Q(e.$$.fragment,y),Q(l),Q(f),Q(d),i=!1},d:function(y){y&&(v(t),v(c),v(r),v(n),v(s)),a[33](null),de(e),l&&l.d(y),f&&f.d(y),d&&d.d(y)}};return te("SvelteRegisterBlock",{block:g,id:xn.name,type:"if",source:"(2519:2) {#if microphoneState === 'granted'}",ctx:a}),g}function zn(a){let t;const e={c:function(){t=$("ğŸ¤ ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã¸ç§»å‹•")},l:function(r){t=Z(r,"ğŸ¤ ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã¸ç§»å‹•")},m:function(r,n){G(r,t,n)},d:function(r){r&&v(t)}};return te("SvelteRegisterBlock",{block:e,id:zn.name,type:"slot",source:'(2706:10) <Button variant=\\"primary\\" on:click={goToMicrophoneTest}>',ctx:a}),e}function jn(a){let t;const e={c:function(){t=$("ğŸ  ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹")},l:function(r){t=Z(r,"ğŸ  ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹")},m:function(r,n){G(r,t,n)},d:function(r){r&&v(t)}};return te("SvelteRegisterBlock",{block:e,id:jn.name,type:"slot",source:'(2709:10) <Button variant=\\"secondary\\" on:click={goHome}>',ctx:a}),e}function Ln(a){let t,e,c="ğŸ¤",r,n,s="ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãŒå¿…è¦ã§ã™",i,m,l="ãƒ©ãƒ³ãƒ€ãƒ åŸºéŸ³ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’é–‹å§‹ã™ã‚‹å‰ã«ã€ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã§éŸ³å£°å…¥åŠ›ã®ç¢ºèªã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚",f,d,g,S,y,_="ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆå®Œäº†å¾Œ",w,J,F,q="ã¾ãšã¯ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã§éŸ³å£°ç¢ºèªã‚’è¡Œã£ã¦ãã ã•ã„ã€‚",C,N,W,p,b,V;W=new ut({props:{variant:"primary",$$slots:{default:[zn]},$$scope:{ctx:a}},$$inline:!0}),W.$on("click",a[26]),b=new ut({props:{variant:"secondary",$$slots:{default:[jn]},$$scope:{ctx:a}},$$inline:!0}),b.$on("click",a[27]);const E={c:function(){t=I("div"),e=I("div"),e.textContent=c,r=Y(),n=I("h3"),n.textContent=s,i=Y(),m=I("p"),m.textContent=l,f=Y(),d=I("div"),g=I("p"),S=$("ã“ã®ãƒšãƒ¼ã‚¸ã¯"),y=I("strong"),y.textContent=_,w=$("ã«ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™ã€‚"),J=Y(),F=I("p"),F.textContent=q,C=Y(),N=I("div"),ye(W.$$.fragment),p=Y(),ye(b.$$.fragment),this.h()},l:function(L){t=T(L,"DIV",{class:!0});var R=U(t);e=T(R,"DIV",{class:!0,"data-svelte-h":!0}),Se(e)!=="svelte-15rbx8n"&&(e.textContent=c),r=X(R),n=T(R,"H3",{class:!0,"data-svelte-h":!0}),Se(n)!=="svelte-17kvze2"&&(n.textContent=s),i=X(R),m=T(R,"P",{class:!0,"data-svelte-h":!0}),Se(m)!=="svelte-12s9olt"&&(m.textContent=l),f=X(R),d=T(R,"DIV",{class:!0});var O=U(d);g=T(O,"P",{class:!0});var K=U(g);S=Z(K,"ã“ã®ãƒšãƒ¼ã‚¸ã¯"),y=T(K,"STRONG",{"data-svelte-h":!0}),Se(y)!=="svelte-1n3qsr6"&&(y.textContent=_),w=Z(K,"ã«ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™ã€‚"),K.forEach(v),J=X(O),F=T(O,"P",{class:!0,"data-svelte-h":!0}),Se(F)!=="svelte-v8nd09"&&(F.textContent=q),O.forEach(v),C=X(R),N=T(R,"DIV",{class:!0});var x=U(N);ge(W.$$.fragment,x),p=X(x),ge(b.$$.fragment,x),x.forEach(v),R.forEach(v),this.h()},h:function(){B(e,"class","error-icon svelte-1ktm6f3"),A(e,M,2695,8,91236),B(n,"class","svelte-1ktm6f3"),A(n,M,2696,8,91277),B(m,"class","svelte-1ktm6f3"),A(m,M,2697,8,91306),A(y,M,2700,19,91424),B(g,"class","svelte-1ktm6f3"),A(g,M,2700,10,91415),B(F,"class","svelte-1ktm6f3"),A(F,M,2701,10,91476),B(d,"class","recommendation svelte-1ktm6f3"),A(d,M,2699,8,91376),B(N,"class","action-buttons"),A(N,M,2704,8,91542),B(t,"class","error-content svelte-1ktm6f3"),A(t,M,2694,6,91200)},m:function(L,R){G(L,t,R),h(t,e),h(t,r),h(t,n),h(t,i),h(t,m),h(t,f),h(t,d),h(d,g),h(g,S),h(g,y),h(g,w),h(d,J),h(d,F),h(t,C),h(t,N),me(W,N,null),h(N,p),me(b,N,null),V=!0},p:function(L,R){const O={};R[3]&512&&(O.$$scope={dirty:R,ctx:L}),W.$set(O);const K={};R[3]&512&&(K.$$scope={dirty:R,ctx:L}),b.$set(K)},i:function(L){V||(j(W.$$.fragment,L),j(b.$$.fragment,L),V=!0)},o:function(L){Q(W.$$.fragment,L),Q(b.$$.fragment,L),V=!1},d:function(L){L&&v(t),de(W),de(b)}};return te("SvelteRegisterBlock",{block:E,id:Ln.name,type:"slot",source:'(2694:4) <Card class=\\"error-card\\">',ctx:a}),E}function Pt(a){let t,e,c,r,n,s,i=!a[2]&&a[6].length>0&&Bt(a);c=new Qe({props:{class:"main-card half-width",$$slots:{default:[Kn]},$$scope:{ctx:a}},$$inline:!0}),n=new Pn({props:{frequency:a[14],note:a[15],volume:a[13],isMuted:a[0]!=="guiding",muteMessage:"åŸºéŸ³å†ç”Ÿå¾Œã«é–‹å§‹",className:"half-width",showGuidance:!1},$$inline:!0});const m={c:function(){i&&i.c(),t=Y(),e=I("div"),ye(c.$$.fragment),r=Y(),ye(n.$$.fragment),this.h()},l:function(f){i&&i.l(f),t=X(f),e=T(f,"DIV",{class:!0});var d=U(e);ge(c.$$.fragment,d),r=X(d),ge(n.$$.fragment,d),d.forEach(v),this.h()},h:function(){B(e,"class","side-by-side-container svelte-1ktm6f3"),A(e,M,2559,6,86863)},m:function(f,d){i&&i.m(f,d),G(f,t,d),G(f,e,d),me(c,e,null),h(e,r),me(n,e,null),s=!0},p:function(f,d){!f[2]&&f[6].length>0?i?(i.p(f,d),d[0]&68&&j(i,1)):(i=Bt(f),i.c(),j(i,1),i.m(t.parentNode,t)):i&&(He(),Q(i,1,1,()=>{i=null}),xe());const g={};d[0]&7041|d[3]&512&&(g.$$scope={dirty:d,ctx:f}),c.$set(g);const S={};d[0]&16384&&(S.frequency=f[14]),d[0]&32768&&(S.note=f[15]),d[0]&8192&&(S.volume=f[13]),d[0]&1&&(S.isMuted=f[0]!=="guiding"),n.$set(S)},i:function(f){s||(j(i),j(c.$$.fragment,f),j(n.$$.fragment,f),s=!0)},o:function(f){Q(i),Q(c.$$.fragment,f),Q(n.$$.fragment,f),s=!1},d:function(f){f&&(v(t),v(e)),i&&i.d(f),de(c),de(n)}};return te("SvelteRegisterBlock",{block:m,id:Pt.name,type:"if",source:"(2538:4) {#if trainingPhase !== 'results'}",ctx:a}),m}function Bt(a){let t,e;t=new Qe({props:{class:"warning-card",$$slots:{default:[On]},$$scope:{ctx:a}},$$inline:!0});const c={c:function(){ye(t.$$.fragment)},l:function(n){ge(t.$$.fragment,n)},m:function(n,s){me(t,n,s),e=!0},p:function(n,s){const i={};s[0]&64|s[3]&512&&(i.$$scope={dirty:s,ctx:n}),t.$set(i)},i:function(n){e||(j(t.$$.fragment,n),e=!0)},o:function(n){Q(t.$$.fragment,n),e=!1},d:function(n){de(t,n)}};return te("SvelteRegisterBlock",{block:c,id:Bt.name,type:"if",source:"(2541:6) {#if !microphoneHealthy && microphoneErrors.length > 0}",ctx:a}),c}function Vt(a){let t,e=a[99]+"",c;const r={c:function(){t=I("li"),c=$(e),this.h()},l:function(s){t=T(s,"LI",{class:!0});var i=U(t);c=Z(i,e),i.forEach(v),this.h()},h:function(){B(t,"class","svelte-1ktm6f3"),A(t,M,2549,16,86631)},m:function(s,i){G(s,t,i),h(t,c)},p:function(s,i){i[0]&64&&e!==(e=s[99]+"")&&je(c,e)},d:function(s){s&&v(t)}};return te("SvelteRegisterBlock",{block:r,id:Vt.name,type:"each",source:"(2549:14) {#each microphoneErrors as error}",ctx:a}),r}function On(a){let t,e,c="âš ï¸ ãƒã‚¤ã‚¯æ¥ç¶šã«å•é¡ŒãŒã‚ã‚Šã¾ã™",r,n,s,i="ãƒã‚¤ã‚¯ãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã›ã‚“ã€‚ä»¥ä¸‹ã®å•é¡ŒãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸï¼š",m,l,f,d,g,S="è§£æ±ºæ–¹æ³•:",y,_=lt(a[6]),w=[];for(let F=0;F<_.length;F+=1)w[F]=Vt(Rn(a,_,F));const J={c:function(){t=I("div"),e=I("h3"),e.textContent=c,r=Y(),n=I("div"),s=I("p"),s.textContent=i,m=Y(),l=I("ul");for(let q=0;q<w.length;q+=1)w[q].c();f=Y(),d=I("p"),g=I("strong"),g.textContent=S,y=$(" ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãƒã‚¤ã‚¯è¨±å¯ã‚’å†åº¦å–å¾—ã—ã¦ãã ã•ã„ã€‚"),this.h()},l:function(q){t=T(q,"DIV",{class:!0});var C=U(t);e=T(C,"H3",{class:!0,"data-svelte-h":!0}),Se(e)!=="svelte-15qec5x"&&(e.textContent=c),C.forEach(v),r=X(q),n=T(q,"DIV",{class:!0});var N=U(n);s=T(N,"P",{class:!0,"data-svelte-h":!0}),Se(s)!=="svelte-171o2p0"&&(s.textContent=i),m=X(N),l=T(N,"UL",{class:!0});var W=U(l);for(let b=0;b<w.length;b+=1)w[b].l(W);W.forEach(v),f=X(N),d=T(N,"P",{class:!0});var p=U(d);g=T(p,"STRONG",{"data-svelte-h":!0}),Se(g)!=="svelte-79o66n"&&(g.textContent=S),y=Z(p," ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãƒã‚¤ã‚¯è¨±å¯ã‚’å†åº¦å–å¾—ã—ã¦ãã ã•ã„ã€‚"),p.forEach(v),N.forEach(v),this.h()},h:function(){B(e,"class","section-title svelte-1ktm6f3"),A(e,M,2543,12,86355),B(t,"class","card-header svelte-1ktm6f3"),A(t,M,2542,10,86317),B(s,"class","warning-message svelte-1ktm6f3"),A(s,M,2546,12,86469),B(l,"class","error-list svelte-1ktm6f3"),A(l,M,2547,12,86543),A(g,M,2553,14,86742),B(d,"class","fix-instruction svelte-1ktm6f3"),A(d,M,2552,12,86700),B(n,"class","card-content svelte-1ktm6f3"),A(n,M,2545,10,86430)},m:function(q,C){G(q,t,C),h(t,e),G(q,r,C),G(q,n,C),h(n,s),h(n,m),h(n,l);for(let N=0;N<w.length;N+=1)w[N]&&w[N].m(l,null);h(n,f),h(n,d),h(d,g),h(d,y)},p:function(q,C){if(C[0]&64){_=lt(q[6]);let N;for(N=0;N<_.length;N+=1){const W=Rn(q,_,N);w[N]?w[N].p(W,C):(w[N]=Vt(W),w[N].c(),w[N].m(l,null))}for(;N<w.length;N+=1)w[N].d(1);w.length=_.length}},d:function(q){q&&(v(t),v(r),v(n)),In(w,q)}};return te("SvelteRegisterBlock",{block:J,id:On.name,type:"slot",source:'(2542:8) <Card class=\\"warning-card\\">',ctx:a}),J}function Gn(a){let t;const e={c:function(){t=$("ğŸ¹ ãƒ©ãƒ³ãƒ€ãƒ åŸºéŸ³å†ç”Ÿ")},l:function(r){t=Z(r,"ğŸ¹ ãƒ©ãƒ³ãƒ€ãƒ åŸºéŸ³å†ç”Ÿ")},m:function(r,n){G(r,t,n)},p:Mn,d:function(r){r&&v(t)}};return te("SvelteRegisterBlock",{block:e,id:Gn.name,type:"else",source:"(2576:14) {:else}",ctx:a}),e}function Un(a){let t,e,c;const r={c:function(){t=$("ğŸ”„ "),e=$(a[7]),c=$(" å†ç”Ÿ")},l:function(s){t=Z(s,"ğŸ”„ "),e=Z(s,a[7]),c=Z(s," å†ç”Ÿ")},m:function(s,i){G(s,t,i),G(s,e,i),G(s,c,i)},p:function(s,i){i[0]&128&&je(e,s[7])},d:function(s){s&&(v(t),v(e),v(c))}};return te("SvelteRegisterBlock",{block:r,id:Un.name,type:"if",source:"(2574:68) ",ctx:a}),r}function Wn(a){let t;const e={c:function(){t=$("ğŸµ å†ç”Ÿä¸­...")},l:function(r){t=Z(r,"ğŸµ å†ç”Ÿä¸­...")},m:function(r,n){G(r,t,n)},p:Mn,d:function(r){r&&v(t)}};return te("SvelteRegisterBlock",{block:e,id:Wn.name,type:"if",source:"(2572:14) {#if isPlaying}",ctx:a}),e}function Jn(a){let t;function e(s,i){return s[9]?Wn:s[7]&&s[8]>0?Un:Gn}let c=e(a),r=c(a);const n={c:function(){r.c(),t=Me()},l:function(i){r.l(i),t=Me()},m:function(i,m){r.m(i,m),G(i,t,m)},p:function(i,m){c===(c=e(i))&&r?r.p(i,m):(r.d(1),r=c(i),r&&(r.c(),r.m(t.parentNode,t)))},d:function(i){i&&v(t),r.d(i)}};return te("SvelteRegisterBlock",{block:n,id:Jn.name,type:"slot",source:`(2567:12) <Button                variant=\\"primary\\"               disabled={isPlaying || trainingPhase === 'guiding' || trainingPhase === 'waiting'}               on:click={playBaseNote}             >`,ctx:a}),n}function Ht(a){let t,e,c,r,n,s=a[8].toFixed(1)+"",i,m;const l={c:function(){t=I("div"),e=$("ç¾åœ¨ã®åŸºéŸ³: "),c=I("strong"),r=$(a[7]),n=$(" ("),i=$(s),m=$("Hz)"),this.h()},l:function(d){t=T(d,"DIV",{class:!0});var g=U(t);e=Z(g,"ç¾åœ¨ã®åŸºéŸ³: "),c=T(g,"STRONG",{});var S=U(c);r=Z(S,a[7]),S.forEach(v),n=Z(g," ("),i=Z(g,s),m=Z(g,"Hz)"),g.forEach(v),this.h()},h:function(){A(c,M,2582,23,87692),B(t,"class","base-note-info svelte-1ktm6f3"),A(t,M,2581,14,87640)},m:function(d,g){G(d,t,g),h(t,e),h(t,c),h(c,r),h(t,n),h(t,i),h(t,m)},p:function(d,g){g[0]&128&&je(r,d[7]),g[0]&256&&s!==(s=d[8].toFixed(1)+"")&&je(i,s)},d:function(d){d&&v(t)}};return te("SvelteRegisterBlock",{block:l,id:Ht.name,type:"if",source:"(2581:12) {#if currentBaseNote}",ctx:a}),l}function Kn(a){let t,e,c="ğŸ¹ åŸºéŸ³å†ç”Ÿ",r,n,s,i,m,l,f,d="ã‚¬ã‚¤ãƒ‰é–‹å§‹ã¾ã§",g,S,y,_,w,J,F,q;s=new ut({props:{variant:"primary",disabled:a[9]||a[0]==="guiding"||a[0]==="waiting",$$slots:{default:[Jn]},$$scope:{ctx:a}},$$inline:!0}),s.$on("click",a[25]);let C=a[7]&&Ht(a);J=new Vn({props:{size:"20"},$$inline:!0});const N={c:function(){t=I("div"),e=I("h3"),e.textContent=c,r=Y(),n=I("div"),ye(s.$$.fragment),i=Y(),C&&C.c(),m=Y(),l=I("div"),f=I("div"),f.textContent=d,g=Y(),S=I("div"),y=I("div"),_=Y(),w=I("div"),ye(J.$$.fragment),this.h()},l:function(p){t=T(p,"DIV",{class:!0});var b=U(t);e=T(b,"H3",{class:!0,"data-svelte-h":!0}),Se(e)!=="svelte-syc53b"&&(e.textContent=c),b.forEach(v),r=X(p),n=T(p,"DIV",{class:!0});var V=U(n);ge(s.$$.fragment,V),i=X(V),C&&C.l(V),m=X(V),l=T(V,"DIV",{class:!0});var E=U(l);f=T(E,"DIV",{class:!0,"data-svelte-h":!0}),Se(f)!=="svelte-1dufnpv"&&(f.textContent=d),g=X(E),S=T(E,"DIV",{class:!0});var P=U(S);y=T(P,"DIV",{class:!0,style:!0}),U(y).forEach(v),_=X(P),w=T(P,"DIV",{class:!0});var L=U(w);ge(J.$$.fragment,L),L.forEach(v),P.forEach(v),E.forEach(v),V.forEach(v),this.h()},h:function(){B(e,"class","section-title svelte-1ktm6f3"),A(e,M,2563,12,87027),B(t,"class","card-header svelte-1ktm6f3"),A(t,M,2562,10,86989),B(f,"class","guide-start-label svelte-1ktm6f3"),A(f,M,2588,14,87917),B(y,"class","guide-progress-fill svelte-1ktm6f3"),Ke(y,"width",a[11]+"%"),A(y,M,2590,16,88022),B(w,"class",F="guide-music-icon "+(a[12]?"glowing":"")+" svelte-1ktm6f3"),A(w,M,2594,16,88170),B(S,"class","guide-start-bar svelte-1ktm6f3"),A(S,M,2589,14,87976),B(l,"class","guide-start-bar-container svelte-1ktm6f3"),A(l,M,2587,12,87863),B(n,"class","card-content svelte-1ktm6f3"),A(n,M,2565,10,87093)},m:function(p,b){G(p,t,b),h(t,e),G(p,r,b),G(p,n,b),me(s,n,null),h(n,i),C&&C.m(n,null),h(n,m),h(n,l),h(l,f),h(l,g),h(l,S),h(S,y),h(S,_),h(S,w),me(J,w,null),q=!0},p:function(p,b){const V={};b[0]&513&&(V.disabled=p[9]||p[0]==="guiding"||p[0]==="waiting"),b[0]&896|b[3]&512&&(V.$$scope={dirty:b,ctx:p}),s.$set(V),p[7]?C?C.p(p,b):(C=Ht(p),C.c(),C.m(n,m)):C&&(C.d(1),C=null),(!q||b[0]&2048)&&Ke(y,"width",p[11]+"%"),(!q||b[0]&4096&&F!==(F="guide-music-icon "+(p[12]?"glowing":"")+" svelte-1ktm6f3"))&&B(w,"class",F)},i:function(p){q||(j(s.$$.fragment,p),j(J.$$.fragment,p),q=!0)},o:function(p){Q(s.$$.fragment,p),Q(J.$$.fragment,p),q=!1},d:function(p){p&&(v(t),v(r),v(n)),de(s),C&&C.d(),de(J)}};return te("SvelteRegisterBlock",{block:N,id:Kn.name,type:"slot",source:'(2562:8) <Card class=\\"main-card half-width\\">',ctx:a}),N}function xt(a){let t,e;t=new Qe({props:{class:"main-card",$$slots:{default:[Qn]},$$scope:{ctx:a}},$$inline:!0});const c={c:function(){ye(t.$$.fragment)},l:function(n){ge(t.$$.fragment,n)},m:function(n,s){me(t,n,s),e=!0},p:function(n,s){const i={};s[0]&1025|s[3]&512&&(i.$$scope={dirty:s,ctx:n}),t.$set(i)},i:function(n){e||(j(t.$$.fragment,n),e=!0)},o:function(n){Q(t.$$.fragment,n),e=!1},d:function(n){de(t,n)}};return te("SvelteRegisterBlock",{block:c,id:xt.name,type:"if",source:"(2616:4) {#if trainingPhase !== 'results'}",ctx:a}),c}function zt(a){let t,e=a[96].name+"",c,r,n;const s={c:function(){t=I("div"),c=$(e),r=Y(),this.h()},l:function(m){t=T(m,"DIV",{class:!0});var l=U(t);c=Z(l,e),r=X(l),l.forEach(v),this.h()},h:function(){B(t,"class",n="scale-item "+a[96].state+" svelte-1ktm6f3"),A(t,M,2624,14,89072)},m:function(m,l){G(m,t,l),h(t,c),h(t,r)},p:function(m,l){l[0]&1024&&e!==(e=m[96].name+"")&&je(c,e),l[0]&1024&&n!==(n="scale-item "+m[96].state+" svelte-1ktm6f3")&&B(t,"class",n)},d:function(m){m&&v(t)}};return te("SvelteRegisterBlock",{block:s,id:zt.name,type:"each",source:"(2624:12) {#each scaleSteps as step, index}",ctx:a}),s}function jt(a){let t,e,c,r="ãƒ‰ãƒ¬ãƒŸãƒ•ã‚¡ã‚½ãƒ©ã‚·ãƒ‰",n;const s={c:function(){t=I("div"),e=$("ã‚¬ã‚¤ãƒ‰ã«åˆã‚ã›ã¦ "),c=I("strong"),c.textContent=r,n=$(" ã‚’æ­Œã£ã¦ãã ã•ã„"),this.h()},l:function(m){t=T(m,"DIV",{class:!0});var l=U(t);e=Z(l,"ã‚¬ã‚¤ãƒ‰ã«åˆã‚ã›ã¦ "),c=T(l,"STRONG",{"data-svelte-h":!0}),Se(c)!=="svelte-1dipf74"&&(c.textContent=r),n=Z(l," ã‚’æ­Œã£ã¦ãã ã•ã„"),l.forEach(v),this.h()},h:function(){A(c,M,2633,23,89339),B(t,"class","guide-instruction svelte-1ktm6f3"),A(t,M,2632,12,89284)},m:function(m,l){G(m,t,l),h(t,e),h(t,c),h(t,n)},d:function(m){m&&v(t)}};return te("SvelteRegisterBlock",{block:s,id:jt.name,type:"if",source:"(2632:10) {#if trainingPhase === 'guiding'}",ctx:a}),s}function Qn(a){let t,e,c="ğŸµ ãƒ‰ãƒ¬ãƒŸéŸ³éšã‚¬ã‚¤ãƒ‰",r,n,s,i,m=lt(a[10]),l=[];for(let g=0;g<m.length;g+=1)l[g]=zt(Cn(a,m,g));let f=a[0]==="guiding"&&jt(a);const d={c:function(){t=I("div"),e=I("h3"),e.textContent=c,r=Y(),n=I("div"),s=I("div");for(let S=0;S<l.length;S+=1)l[S].c();i=Y(),f&&f.c(),this.h()},l:function(S){t=T(S,"DIV",{class:!0});var y=U(t);e=T(y,"H3",{class:!0,"data-svelte-h":!0}),Se(e)!=="svelte-1mor0as"&&(e.textContent=c),y.forEach(v),r=X(S),n=T(S,"DIV",{class:!0});var _=U(n);s=T(_,"DIV",{class:!0});var w=U(s);for(let J=0;J<l.length;J+=1)l[J].l(w);w.forEach(v),i=X(_),f&&f.l(_),_.forEach(v),this.h()},h:function(){B(e,"class","section-title svelte-1ktm6f3"),A(e,M,2619,10,88883),B(t,"class","card-header svelte-1ktm6f3"),A(t,M,2618,8,88847),B(s,"class","scale-guide svelte-1ktm6f3"),A(s,M,2622,10,88986),B(n,"class","card-content svelte-1ktm6f3"),A(n,M,2621,8,88949)},m:function(S,y){G(S,t,y),h(t,e),G(S,r,y),G(S,n,y),h(n,s);for(let _=0;_<l.length;_+=1)l[_]&&l[_].m(s,null);h(n,i),f&&f.m(n,null)},p:function(S,y){if(y[0]&1024){m=lt(S[10]);let _;for(_=0;_<m.length;_+=1){const w=Cn(S,m,_);l[_]?l[_].p(w,y):(l[_]=zt(w),l[_].c(),l[_].m(s,null))}for(;_<l.length;_+=1)l[_].d(1);l.length=m.length}S[0]==="guiding"?f||(f=jt(S),f.c(),f.m(n,null)):f&&(f.d(1),f=null)},d:function(S){S&&(v(t),v(r),v(n)),In(l,S),f&&f.d()}};return te("SvelteRegisterBlock",{block:d,id:Qn.name,type:"slot",source:'(2618:6) <Card class=\\"main-card\\">',ctx:a}),d}function Lt(a){let t,e,c,r,n;const s=[Yn,Xn],i=[];function m(d,g){return d[4]&&d[5]?0:d[21]?1:-1}~(t=m(a))&&(e=i[t]=s[t](a));let l=a[0]==="results"&&Ot(a);const f={c:function(){e&&e.c(),c=Y(),l&&l.c(),r=Me()},l:function(g){e&&e.l(g),c=X(g),l&&l.l(g),r=Me()},m:function(g,S){~t&&i[t].m(g,S),G(g,c,S),l&&l.m(g,S),G(g,r,S),n=!0},p:function(g,S){let y=t;t=m(g),t===y?~t&&i[t].p(g,S):(e&&(He(),Q(i[y],1,1,()=>{i[y]=null}),xe()),~t?(e=i[t],e?e.p(g,S):(e=i[t]=s[t](g),e.c()),j(e,1),e.m(c.parentNode,c)):e=null),g[0]==="results"?l?(l.p(g,S),S[0]&1&&j(l,1)):(l=Ot(g),l.c(),j(l,1),l.m(r.parentNode,r)):l&&(He(),Q(l,1,1,()=>{l=null}),xe())},i:function(g){n||(j(e),j(l),n=!0)},o:function(g){Q(e),Q(l),n=!1},d:function(g){g&&(v(c),v(r)),~t&&i[t].d(g),l&&l.d(g)}};return te("SvelteRegisterBlock",{block:f,id:Lt.name,type:"if",source:"(2643:4) {#if trainingPhase === 'results'}",ctx:a}),f}function Xn(a){let t,e;t=new Qt({props:{scoreData:a[21],showDetails:!1,className:"mb-6 iphone-no-margin",currentScoreData:a[16],intervalData:a[3],consistencyData:a[17],feedbackData:a[18],technicalFeedbackData:a[19],sessionStatistics:a[20]},$$inline:!0});const c={c:function(){ye(t.$$.fragment)},l:function(n){ge(t.$$.fragment,n)},m:function(n,s){me(t,n,s),e=!0},p:function(n,s){const i={};s[0]&2097152&&(i.scoreData=n[21]),s[0]&65536&&(i.currentScoreData=n[16]),s[0]&8&&(i.intervalData=n[3]),s[0]&131072&&(i.consistencyData=n[17]),s[0]&262144&&(i.feedbackData=n[18]),s[0]&524288&&(i.technicalFeedbackData=n[19]),s[0]&1048576&&(i.sessionStatistics=n[20]),t.$set(i)},i:function(n){e||(j(t.$$.fragment,n),e=!0)},o:function(n){Q(t.$$.fragment,n),e=!1},d:function(n){de(t,n)}};return te("SvelteRegisterBlock",{block:c,id:Xn.name,type:"if",source:"(2658:40) ",ctx:a}),c}function Yn(a){let t,e;t=new Qt({props:{scoreData:a[4],showDetails:!1,className:"mb-6 iphone-no-margin",currentScoreData:a[16],intervalData:a[3],consistencyData:a[17],feedbackData:a[18],technicalFeedbackData:a[19],sessionStatistics:a[20]},$$inline:!0});const c={c:function(){ye(t.$$.fragment)},l:function(n){ge(t.$$.fragment,n)},m:function(n,s){me(t,n,s),e=!0},p:function(n,s){const i={};s[0]&16&&(i.scoreData=n[4]),s[0]&65536&&(i.currentScoreData=n[16]),s[0]&8&&(i.intervalData=n[3]),s[0]&131072&&(i.consistencyData=n[17]),s[0]&262144&&(i.feedbackData=n[18]),s[0]&524288&&(i.technicalFeedbackData=n[19]),s[0]&1048576&&(i.sessionStatistics=n[20]),t.$set(i)},i:function(n){e||(j(t.$$.fragment,n),e=!0)},o:function(n){Q(t.$$.fragment,n),e=!1},d:function(n){de(t,n)}};return te("SvelteRegisterBlock",{block:c,id:Yn.name,type:"if",source:"(2645:6) {#if $unifiedScoreData && $isCompleted}",ctx:a}),c}function Ot(a){let t,e;t=new Qe({props:{class:"main-card bottom-action-card",$$slots:{default:[Zn]},$$scope:{ctx:a}},$$inline:!0});const c={c:function(){ye(t.$$.fragment)},l:function(n){ge(t.$$.fragment,n)},m:function(n,s){me(t,n,s),e=!0},p:function(n,s){const i={};s[0]&32|s[3]&512&&(i.$$scope={dirty:s,ctx:n}),t.$set(i)},i:function(n){e||(j(t.$$.fragment,n),e=!0)},o:function(n){Q(t.$$.fragment,n),e=!1},d:function(n){de(t,n)}};return te("SvelteRegisterBlock",{block:c,id:Ot.name,type:"if",source:"(2676:6) {#if trainingPhase === 'results'}",ctx:a}),c}function Zn(a){let t,e,c;e=new Kt({props:{isCompleted:a[5],position:"bottom"},$$inline:!0}),e.$on("action",a[29]);const r={c:function(){t=I("div"),ye(e.$$.fragment),this.h()},l:function(s){t=T(s,"DIV",{class:!0});var i=U(t);ge(e.$$.fragment,i),i.forEach(v),this.h()},h:function(){B(t,"class","card-content svelte-1ktm6f3"),A(t,M,2677,10,90786)},m:function(s,i){G(s,t,i),me(e,t,null),c=!0},p:function(s,i){const m={};i[0]&32&&(m.isCompleted=s[5]),e.$set(m)},i:function(s){c||(j(e.$$.fragment,s),c=!0)},o:function(s){Q(e.$$.fragment,s),c=!1},d:function(s){s&&v(t),de(e)}};return te("SvelteRegisterBlock",{block:r,id:Zn.name,type:"slot",source:'(2677:8) <Card class=\\"main-card bottom-action-card\\">',ctx:a}),r}function $n(a){let t,e,c="ğŸµ ãƒ©ãƒ³ãƒ€ãƒ åŸºéŸ³ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°",r,n,s="10ç¨®é¡ã®åŸºéŸ³ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«é¸æŠã—ã¦ãƒ‰ãƒ¬ãƒŸãƒ•ã‚¡ã‚½ãƒ©ã‚·ãƒ‰ã‚’ç·´ç¿’",i,m,l,f,d,g,S,y,_,w,J,F,q,C,N,W,p=a[1]==="granted"&&!a[24]&&Mt(a);const b=[xn,Hn],V=[];function E(L,R){return L[1]==="granted"?0:1}q=E(a),C=V[q]=b[q](a);const P={c:function(){t=I("div"),e=I("h1"),e.textContent=c,r=Y(),n=I("p"),n.textContent=s,i=Y(),p&&p.c(),m=Y(),l=I("div"),f=$("ğŸ“± "),d=$(Ut),g=$(" | "),S=$(Wt),y=I("br"),_=Y(),w=I("small"),J=$(Jt),F=Y(),C.c(),N=Me(),this.h()},l:function(R){t=T(R,"DIV",{class:!0});var O=U(t);e=T(O,"H1",{class:!0,"data-svelte-h":!0}),Se(e)!=="svelte-1ptm9zr"&&(e.textContent=c),r=X(O),n=T(O,"P",{class:!0,"data-svelte-h":!0}),Se(n)!=="svelte-19nes7"&&(n.textContent=s),i=X(O),p&&p.l(O),m=X(O),l=T(O,"DIV",{class:!0});var K=U(l);f=Z(K,"ğŸ“± "),d=Z(K,Ut),g=Z(K," | "),S=Z(K,Wt),y=T(K,"BR",{}),_=X(K),w=T(K,"SMALL",{style:!0});var x=U(w);J=Z(x,Jt),x.forEach(v),K.forEach(v),O.forEach(v),F=X(R),C.l(R),N=Me(),this.h()},h:function(){B(e,"class","page-title svelte-1ktm6f3"),A(e,M,2477,4,84084),B(n,"class","page-description svelte-1ktm6f3"),A(n,M,2478,4,84132),A(y,M,2512,42,85345),Ke(w,"font-size","0.6rem"),A(w,M,2513,6,85357),B(l,"class","debug-info svelte-1ktm6f3"),A(l,M,2511,4,85278),B(t,"class","header-section svelte-1ktm6f3"),A(t,M,2476,2,84051)},m:function(R,O){G(R,t,O),h(t,e),h(t,r),h(t,n),h(t,i),p&&p.m(t,null),h(t,m),h(t,l),h(l,f),h(l,d),h(l,g),h(l,S),h(l,y),h(l,_),h(l,w),h(w,J),G(R,F,O),V[q].m(R,O),G(R,N,O),W=!0},p:function(R,O){R[1]==="granted"&&!R[24]?p?(p.p(R,O),O[0]&16777218&&j(p,1)):(p=Mt(R),p.c(),j(p,1),p.m(t,m)):p&&(He(),Q(p,1,1,()=>{p=null}),xe());let K=q;q=E(R),q===K?V[q].p(R,O):(He(),Q(V[K],1,1,()=>{V[K]=null}),xe(),C=V[q],C?C.p(R,O):(C=V[q]=b[q](R),C.c()),j(C,1),C.m(N.parentNode,N))},i:function(R){W||(j(p),j(C),W=!0)},o:function(R){Q(p),Q(C),W=!1},d:function(R){R&&(v(t),v(F),v(N)),p&&p.d(),V[q].d(R)}};return te("SvelteRegisterBlock",{block:P,id:$n.name,type:"slot",source:"(2475:0) <PageLayout>",ctx:a}),P}function Gt(a){let t,e;t=new En({props:{$$slots:{default:[$n]},$$scope:{ctx:a}},$$inline:!0});const c={c:function(){ye(t.$$.fragment)},l:function(n){ge(t.$$.fragment,n)},m:function(n,s){me(t,n,s),e=!0},p:function(n,s){const i={};s[0]&33554431|s[3]&512&&(i.$$scope={dirty:s,ctx:n}),t.$set(i)},i:function(n){e||(j(t.$$.fragment,n),e=!0)},o:function(n){Q(t.$$.fragment,n),e=!1},d:function(n){de(t,n)}};return te("SvelteRegisterBlock",{block:c,id:Gt.name,type:"component",source:"",ctx:a}),c}const Ut="v2.3.1-ANIMATED",Wt="07/29 04:15",Jt="ğŸ¬ è©•ä¾¡åˆ†å¸ƒã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…ãƒ»UXå‘ä¸Š";function Nn(){const a=/iPhone/.test(navigator.userAgent),t=/iPad/.test(navigator.userAgent),e=/Macintosh/.test(navigator.userAgent)&&"ontouchend"in document;return a||t||e?(console.log("ğŸ”Š [RandomTraining] iOS/iPadOSæ¤œå‡º - éŸ³é‡35dBè¨­å®š"),35):(console.log("ğŸ”Š [RandomTraining] PCæ¤œå‡º - éŸ³é‡-6dBè¨­å®š"),-6)}function Ho(){return{mode:"random",timestamp:new Date,duration:480,totalNotes:64,measuredNotes:59,averageAccuracy:79,baseNote:"C5",baseFrequency:523.25,sessionHistory:[{grade:"excellent",accuracy:92,baseNote:"C4",baseFrequency:261.63,timestamp:new Date(Date.now()-7*6e4),measuredNotes:8,noteResults:[{name:"ãƒ‰",note:"ãƒ‰",frequency:262,detectedFrequency:264,cents:13,grade:"excellent"},{name:"ãƒ¬",note:"ãƒ¬",frequency:294,detectedFrequency:291,cents:-18,grade:"good"},{name:"ãƒŸ",note:"ãƒŸ",frequency:330,detectedFrequency:335,cents:26,grade:"pass"},{name:"ãƒ•ã‚¡",note:"ãƒ•ã‚¡",frequency:349,detectedFrequency:346,cents:-15,grade:"excellent"},{name:"ã‚½",note:"ã‚½",frequency:392,detectedFrequency:388,cents:-18,grade:"good"},{name:"ãƒ©",note:"ãƒ©",frequency:440,detectedFrequency:444,cents:16,grade:"good"},{name:"ã‚·",note:"ã‚·",frequency:494,detectedFrequency:499,cents:17,grade:"good"},{name:"ãƒ‰ï¼ˆé«˜ï¼‰",note:"ãƒ‰ï¼ˆé«˜ï¼‰",frequency:523,detectedFrequency:520,cents:-10,grade:"excellent"}]},{grade:"good",accuracy:78,baseNote:"D4",baseFrequency:293.66,timestamp:new Date(Date.now()-6*6e4),measuredNotes:7,noteResults:[{name:"ãƒ‰",note:"ãƒ‰",frequency:294,detectedFrequency:290,cents:-23,grade:"good"},{name:"ãƒ¬",note:"ãƒ¬",frequency:330,detectedFrequency:340,cents:53,grade:"needWork"},{name:"ãƒŸ",note:"ãƒŸ",frequency:370,detectedFrequency:375,cents:23,grade:"good"},{name:"ãƒ•ã‚¡",note:"ãƒ•ã‚¡",frequency:392,detectedFrequency:385,cents:-31,grade:"pass"},{name:"ã‚½",note:"ã‚½",frequency:440,detectedFrequency:432,cents:-31,grade:"pass"},{name:"ãƒ©",note:"ãƒ©",frequency:494,detectedFrequency:510,cents:56,grade:"needWork"},{name:"ã‚·",note:"ã‚·",frequency:554,detectedFrequency:null,cents:null,grade:"notMeasured"},{name:"ãƒ‰ï¼ˆé«˜ï¼‰",note:"ãƒ‰ï¼ˆé«˜ï¼‰",frequency:587,detectedFrequency:580,cents:-21,grade:"good"}]},{grade:"excellent",accuracy:95,baseNote:"E4",baseFrequency:329.63,timestamp:new Date(Date.now()-5*6e4),measuredNotes:8,noteResults:[{name:"ãƒ‰",note:"ãƒ‰",frequency:330,detectedFrequency:332,cents:10,grade:"excellent"},{name:"ãƒ¬",note:"ãƒ¬",frequency:370,detectedFrequency:368,cents:-9,grade:"excellent"},{name:"ãƒŸ",note:"ãƒŸ",frequency:415,detectedFrequency:418,cents:12,grade:"excellent"},{name:"ãƒ•ã‚¡",note:"ãƒ•ã‚¡",frequency:440,detectedFrequency:436,cents:-16,grade:"good"},{name:"ã‚½",note:"ã‚½",frequency:494,detectedFrequency:497,cents:11,grade:"excellent"},{name:"ãƒ©",note:"ãƒ©",frequency:554,detectedFrequency:551,cents:-9,grade:"excellent"},{name:"ã‚·",note:"ã‚·",frequency:622,detectedFrequency:625,cents:8,grade:"excellent"},{name:"ãƒ‰ï¼ˆé«˜ï¼‰",note:"ãƒ‰ï¼ˆé«˜ï¼‰",frequency:659,detectedFrequency:655,cents:-10,grade:"excellent"}]},{grade:"needWork",accuracy:45,baseNote:"F4",baseFrequency:349.23,timestamp:new Date(Date.now()-4*6e4),measuredNotes:6,noteResults:[{name:"ãƒ‰",note:"ãƒ‰",frequency:349,detectedFrequency:345,cents:-20,grade:"good"},{name:"ãƒ¬",note:"ãƒ¬",frequency:392,detectedFrequency:420,cents:124,grade:"needWork"},{name:"ãƒŸ",note:"ãƒŸ",frequency:440,detectedFrequency:435,cents:-20,grade:"good"},{name:"ãƒ•ã‚¡",note:"ãƒ•ã‚¡",frequency:466,detectedFrequency:520,cents:195,grade:"needWork"},{name:"ã‚½",note:"ã‚½",frequency:523,detectedFrequency:410,cents:-455,grade:"needWork"},{name:"ãƒ©",note:"ãƒ©",frequency:587,detectedFrequency:null,cents:null,grade:"notMeasured"},{name:"ã‚·",note:"ã‚·",frequency:659,detectedFrequency:650,cents:-24,grade:"good"},{name:"ãƒ‰ï¼ˆé«˜ï¼‰",note:"ãƒ‰ï¼ˆé«˜ï¼‰",frequency:698,detectedFrequency:null,cents:null,grade:"notMeasured"}]},{grade:"good",accuracy:85,baseNote:"G4",baseFrequency:392,timestamp:new Date(Date.now()-3*6e4),measuredNotes:8,noteResults:[{name:"ãƒ‰",note:"ãƒ‰",frequency:392,detectedFrequency:395,cents:13,grade:"excellent"},{name:"ãƒ¬",note:"ãƒ¬",frequency:440,detectedFrequency:438,cents:-8,grade:"excellent"},{name:"ãƒŸ",note:"ãƒŸ",frequency:494,detectedFrequency:500,cents:21,grade:"good"},{name:"ãƒ•ã‚¡",note:"ãƒ•ã‚¡",frequency:523,detectedFrequency:520,cents:-10,grade:"excellent"},{name:"ã‚½",note:"ã‚½",frequency:587,detectedFrequency:595,cents:24,grade:"good"},{name:"ãƒ©",note:"ãƒ©",frequency:659,detectedFrequency:665,cents:16,grade:"good"},{name:"ã‚·",note:"ã‚·",frequency:740,detectedFrequency:755,cents:35,grade:"pass"},{name:"ãƒ‰ï¼ˆé«˜ï¼‰",note:"ãƒ‰ï¼ˆé«˜ï¼‰",frequency:784,detectedFrequency:780,cents:-9,grade:"excellent"}]},{grade:"excellent",accuracy:94,baseNote:"A4",baseFrequency:440,timestamp:new Date(Date.now()-2*6e4),measuredNotes:8,noteResults:[{name:"ãƒ‰",note:"ãƒ‰",frequency:440,detectedFrequency:442,cents:8,grade:"excellent"},{name:"ãƒ¬",note:"ãƒ¬",frequency:494,detectedFrequency:492,cents:-7,grade:"excellent"},{name:"ãƒŸ",note:"ãƒŸ",frequency:554,detectedFrequency:558,cents:12,grade:"excellent"},{name:"ãƒ•ã‚¡",note:"ãƒ•ã‚¡",frequency:587,detectedFrequency:585,cents:-6,grade:"excellent"},{name:"ã‚½",note:"ã‚½",frequency:659,detectedFrequency:665,cents:16,grade:"good"},{name:"ãƒ©",note:"ãƒ©",frequency:740,detectedFrequency:738,cents:-5,grade:"excellent"},{name:"ã‚·",note:"ã‚·",frequency:831,detectedFrequency:840,cents:19,grade:"good"},{name:"ãƒ‰ï¼ˆé«˜ï¼‰",note:"ãƒ‰ï¼ˆé«˜ï¼‰",frequency:880,detectedFrequency:882,cents:4,grade:"excellent"}]},{grade:"pass",accuracy:68,baseNote:"Bb4",baseFrequency:466.16,timestamp:new Date(Date.now()-1*6e4),measuredNotes:7,noteResults:[{name:"ãƒ‰",note:"ãƒ‰",frequency:466,detectedFrequency:470,cents:15,grade:"excellent"},{name:"ãƒ¬",note:"ãƒ¬",frequency:523,detectedFrequency:535,cents:39,grade:"pass"},{name:"ãƒŸ",note:"ãƒŸ",frequency:587,detectedFrequency:600,cents:38,grade:"pass"},{name:"ãƒ•ã‚¡",note:"ãƒ•ã‚¡",frequency:622,detectedFrequency:615,cents:-19,grade:"good"},{name:"ã‚½",note:"ã‚½",frequency:698,detectedFrequency:720,cents:54,grade:"needWork"},{name:"ãƒ©",note:"ãƒ©",frequency:784,detectedFrequency:null,cents:null,grade:"notMeasured"},{name:"ã‚·",note:"ã‚·",frequency:880,detectedFrequency:895,cents:29,grade:"pass"},{name:"ãƒ‰ï¼ˆé«˜ï¼‰",note:"ãƒ‰ï¼ˆé«˜ï¼‰",frequency:932,detectedFrequency:925,cents:-13,grade:"excellent"}]},{grade:"good",accuracy:82,baseNote:"C5",baseFrequency:523.25,timestamp:new Date,measuredNotes:8,noteResults:[{name:"ãƒ‰",note:"ãƒ‰",frequency:523,detectedFrequency:526,cents:10,grade:"excellent"},{name:"ãƒ¬",note:"ãƒ¬",frequency:587,detectedFrequency:584,cents:-9,grade:"excellent"},{name:"ãƒŸ",note:"ãƒŸ",frequency:659,detectedFrequency:665,cents:16,grade:"good"},{name:"ãƒ•ã‚¡",note:"ãƒ•ã‚¡",frequency:698,detectedFrequency:692,cents:-15,grade:"excellent"},{name:"ã‚½",note:"ã‚½",frequency:784,detectedFrequency:795,cents:24,grade:"good"},{name:"ãƒ©",note:"ãƒ©",frequency:880,detectedFrequency:890,cents:19,grade:"good"},{name:"ã‚·",note:"ã‚·",frequency:988,detectedFrequency:1010,cents:38,grade:"pass"},{name:"ãƒ‰ï¼ˆé«˜ï¼‰",note:"ãƒ‰ï¼ˆé«˜ï¼‰",frequency:1047,detectedFrequency:1042,cents:-8,grade:"excellent"}]}]}}function Tt(a){return[{scale:"ãƒ‰",interval:"unison",intervalName:"ãƒ¦ãƒ‹ã‚¾ãƒ³"},{scale:"ãƒ¬",interval:"major_second",intervalName:"é•·2åº¦"},{scale:"ãƒŸ",interval:"major_third",intervalName:"é•·3åº¦"},{scale:"ãƒ•ã‚¡",interval:"perfect_fourth",intervalName:"å®Œå…¨4åº¦"},{scale:"ã‚½",interval:"perfect_fifth",intervalName:"å®Œå…¨5åº¦"},{scale:"ãƒ©",interval:"major_sixth",intervalName:"é•·6åº¦"},{scale:"ã‚·",interval:"major_seventh",intervalName:"é•·7åº¦"},{scale:"ãƒ‰ï¼ˆé«˜ï¼‰",interval:"octave",intervalName:"ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–"}].map((e,c)=>{const r=a.find(n=>n.targetNote&&n.targetNote.includes(e.scale))||a[c];if(r&&r.accuracy!=="notMeasured"){const n=parseFloat(r.accuracy)||0,s=Math.round((100-n)*.5);return{type:e.interval,scale:e.scale,intervalName:e.intervalName,attempts:1,averageError:s,accuracy:n}}else return{type:e.interval,scale:e.scale,intervalName:e.intervalName,attempts:0,averageError:null,accuracy:0}})}function An(a){if(!a||!Array.isArray(a))return console.warn("âš ï¸ [RandomTraining] sessionHistory ãŒç„¡åŠ¹ã§ã™"),[];const t=[{type:"unison",scale:"ãƒ‰",intervalName:"ãƒ¦ãƒ‹ã‚¾ãƒ³",noteIndex:0},{type:"major_second",scale:"ãƒ¬",intervalName:"é•·2åº¦",noteIndex:1},{type:"major_third",scale:"ãƒŸ",intervalName:"é•·3åº¦",noteIndex:2},{type:"perfect_fourth",scale:"ãƒ•ã‚¡",intervalName:"å®Œå…¨4åº¦",noteIndex:3},{type:"perfect_fifth",scale:"ã‚½",intervalName:"å®Œå…¨5åº¦",noteIndex:4},{type:"major_sixth",scale:"ãƒ©",intervalName:"é•·6åº¦",noteIndex:5},{type:"major_seventh",scale:"ã‚·",intervalName:"é•·7åº¦",noteIndex:6},{type:"octave",scale:"ãƒ‰ï¼ˆé«˜ï¼‰",intervalName:"ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–",noteIndex:7}],e={};return t.forEach(c=>{e[c.type]={type:c.type,scale:c.scale,intervalName:c.intervalName,attempts:0,successCount:0,accuracySum:0,accuracyValues:[],errorValues:[]}}),a.forEach(c=>{!c.noteResults||!Array.isArray(c.noteResults)||c.noteResults.forEach((r,n)=>{if(n>=t.length)return;const s=t[n].type,i=e[s];if(i.attempts++,r.accuracy!=="notMeasured"&&typeof r.accuracy=="number"){i.accuracyValues.push(r.accuracy),i.accuracySum+=r.accuracy;const m=Math.round((100-r.accuracy)*.5);i.errorValues.push(m),r.accuracy>=70&&i.successCount++}})}),t.map(c=>{const r=e[c.type];if(r.attempts===0)return{type:c.type,scale:c.scale,intervalName:c.intervalName,attempts:0,averageError:null,accuracy:0};const n=r.accuracyValues.length>0?Math.round(r.accuracySum/r.accuracyValues.length):0,s=r.errorValues.length>0?Math.round(r.errorValues.reduce((m,l)=>m+l,0)/r.errorValues.length):null,i=r.accuracyValues.length>0?Math.round(r.successCount/r.accuracyValues.length*100):0;return{type:c.type,scale:c.scale,intervalName:c.intervalName,mastery:i,attempts:r.attempts,averageError:s,accuracy:n}})}function Tn(a){const t=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];if(a<=0)return"ãƒ¼ãƒ¼";const c=Math.round(12*Math.log2(a/440)),r=(c+9+120)%12,n=Math.floor((c+9)/12)+4;return t[r]+n}function It(a,t){const e=[{factor:4,freq:a*4,description:"2ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸Š"},{factor:3,freq:a*3,description:"1.5ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸Š"},{factor:2.5,freq:a*2.5,description:"1.3ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸Š"},{factor:2,freq:a*2,description:"1ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸Š"},{factor:1.5,freq:a*1.5,description:"0.5ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸Š"},{factor:1,freq:a,description:"è£œæ­£ãªã—"},{factor:.75,freq:a*.75,description:"0.33ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸‹"},{factor:.67,freq:a*.67,description:"0.5ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸‹"},{factor:.5,freq:a*.5,description:"1ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸‹"},{factor:.4,freq:a*.4,description:"1.3ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸‹"},{factor:.33,freq:a*.33,description:"1.5ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸‹"},{factor:.25,freq:a*.25,description:"2ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸‹"}];let c=null,r=1/0;const n=t*.5,s=t*1.5,i=e.filter(m=>m.freq>=n&&m.freq<=s);for(const m of i){const l=Math.abs(m.freq-t);l<r&&(r=l,c=m)}if(!c)for(const m of e){const l=Math.abs(m.freq-t);l<r&&(r=l,c=m)}return c?{correctedFrequency:c.freq,factor:c.factor,description:c.description,error:r}:{correctedFrequency:a,factor:1,description:"è£œæ­£ãªã—ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰",error:Math.abs(a-t)}}function ot(){try{"scrollTo"in window&&"behavior"in document.documentElement.style?window.scrollTo({top:0,behavior:"smooth"}):window.scrollTo(0,0),document.body&&(document.body.scrollTop=0),document.documentElement&&(document.documentElement.scrollTop=0),document.querySelectorAll("[data-scroll-container], .scroll-container, main").forEach(t=>{t.scrollTo?t.scrollTo(0,0):t.scrollTop=0})}catch(a){console.warn("ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¨ãƒ©ãƒ¼:",a);try{window.scroll(0,0)}catch(t){console.error("ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å®Œå…¨å¤±æ•—:",t)}}}function eo(a){}function to(a){console.error("âŒ PitchDetectorã‚¨ãƒ©ãƒ¼:",a.detail)}function xo(a,t,e){let c,r,n,s,i,m,l,f,d,g,S,y;Te(bt,"unifiedScoreData"),Ie(a,bt,o=>e(4,n=o)),Te(wt,"isCompleted"),Ie(a,wt,o=>e(5,s=o)),Te(vt,"page"),Ie(a,vt,o=>e(52,i=o)),Te(Rt,"currentSessionId"),Ie(a,Rt,o=>e(53,m=o)),Te(kt,"remainingSessions"),Ie(a,kt,o=>e(54,l=o)),Te(Ft,"nextBaseName"),Ie(a,Ft,o=>e(55,f=o)),Te(Ct,"nextBaseNote"),Ie(a,Ct,o=>e(56,d=o)),Te(qt,"sessionHistory"),Ie(a,qt,o=>e(23,g=o)),Te(Nt,"trainingProgress"),Ie(a,Nt,o=>e(57,S=o)),Te(Dt,"isLoading"),Ie(a,Dt,o=>e(24,y=o));let{$$slots:_={},$$scope:w}=t;go("Page",_,[]);function J(o){return nt.evaluateOverall(o)}let F="setup",q=typeof window<"u"?new URLSearchParams(window.location.search).get("from")==="microphone-test"?(ce.info("[RandomTraining] ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã‹ã‚‰ã®é·ç§»ã‚’æ¤œå‡º"),"granted"):(ce.info("[RandomTraining] ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹ã‚’æ¤œå‡º"),"checking"):"checking",C=!0,N=[];const W=["ãƒ‰","ãƒ¬","ãƒŸ","ãƒ•ã‚¡","ã‚½","ãƒ©","ã‚·","ãƒ‰ï¼ˆé«˜ï¼‰"];let p="",b=0,V=!1,E=0,P=W.map(o=>({name:o,state:"inactive",completed:!1})),L=null,R=!1,O=0,K=!1,x=null,se=!1,ne=[],_e=[],he=0,ke=0,Ee="ãƒ¼ãƒ¼",Le=0,De={correctCount:0,totalCount:8,averageAccuracy:0,averageTime:0,isCompleted:!1},Fe=null,ze={totalScore:0,grade:"C",componentScores:{pitchAccuracy:0,recognitionSpeed:0,intervalMastery:0,directionAccuracy:0,consistency:0}},Ce=[],Pe=[],Oe={},Xe={},Re={totalAttempts:0,successRate:0,averageScore:0,bestScore:0,sessionDuration:0,streakCount:0,fatigueLevel:"fresh",mostDifficultInterval:"-",mostSuccessfulInterval:"-",averageResponseTime:0,sessionStart:Date.now()},ft="intervals",oe=[],ue=null,fe=null,Ne=!0,ie=null,Be=null,at=null,rt=null,We=null;const Ge=[{note:"C4",name:"ãƒ‰ï¼ˆä¸­ï¼‰",frequency:261.63,semitonesFromC:0},{note:"Db4",name:"ãƒ‰#ï¼ˆä¸­ï¼‰",frequency:277.18,semitonesFromC:1},{note:"D4",name:"ãƒ¬ï¼ˆä¸­ï¼‰",frequency:293.66,semitonesFromC:2},{note:"Eb4",name:"ãƒ¬#ï¼ˆä¸­ï¼‰",frequency:311.13,semitonesFromC:3},{note:"E4",name:"ãƒŸï¼ˆä¸­ï¼‰",frequency:329.63,semitonesFromC:4},{note:"F4",name:"ãƒ•ã‚¡ï¼ˆä¸­ï¼‰",frequency:349.23,semitonesFromC:5},{note:"Gb4",name:"ãƒ•ã‚¡#ï¼ˆä¸­ï¼‰",frequency:369.99,semitonesFromC:6},{note:"Ab4",name:"ãƒ©bï¼ˆä¸­ï¼‰",frequency:415.3,semitonesFromC:8},{note:"Bb3",name:"ã‚·bï¼ˆä½ï¼‰",frequency:233.08,semitonesFromC:-2},{note:"B3",name:"ã‚·ï¼ˆä½ï¼‰",frequency:246.94,semitonesFromC:-1}];async function Je(){var o;e(1,q="checking");try{if(console.log("ğŸ¤ [RandomTraining] AudioManagerçµŒç”±ã§ãƒã‚¤ã‚¯è¨±å¯ç¢ºèªé–‹å§‹"),!((o=navigator.mediaDevices)!=null&&o.getUserMedia)){e(1,q="error");return}const u=await Ue.initialize();at=u.audioContext,Be=u.mediaStream,rt=u.sourceNode,console.log("âœ… [RandomTraining] AudioManager ãƒªã‚½ãƒ¼ã‚¹å–å¾—å®Œäº†"),e(1,q="granted"),e(0,F="setup"),setTimeout(async()=>{if(ie){ce.audio("[RandomTraining] PitchDetectoråˆæœŸåŒ–é–‹å§‹");const k=/iPhone/.test(navigator.userAgent),D=/iPad/.test(navigator.userAgent),H=/Macintosh/.test(navigator.userAgent)&&"ontouchend"in document;(D||H)&&(console.log("ğŸ”§ [RandomTraining] iPadæ¤œå‡º - ãƒã‚¤ã‚¯æ„Ÿåº¦7.0xè‡ªå‹•è¨­å®šé–‹å§‹"),Ue.setSensitivity(7),console.log("âœ… [RandomTraining] iPad ãƒã‚¤ã‚¯æ„Ÿåº¦7.0xè‡ªå‹•è¨­å®šå®Œäº†"));try{console.log("ğŸ¤ [RandomTraining] AudioManagerå†åˆæœŸåŒ–é–‹å§‹ï¼ˆiPadå¯¾å¿œï¼‰"),await Ue.initialize(),console.log("âœ… [RandomTraining] AudioManagerå†åˆæœŸåŒ–å®Œäº†")}catch(z){console.warn("âš ï¸ AudioManagerå†åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",z)}await ie.initialize(),ce.audio("[RandomTraining] PitchDetectoråˆæœŸåŒ–å®Œäº†")}},200)}catch(u){ce.error("[RandomTraining] ãƒã‚¤ã‚¯è¨±å¯ã‚¨ãƒ©ãƒ¼:",u),e(1,q=(u==null?void 0:u.name)==="NotAllowedError"?"denied":"error")}}function dt(){const o=d,u=f,k=Ge.find(D=>D.note===o)||Ge.find(D=>D.name===u)||Ge[0];if(e(7,p=k.name),e(8,b=k.frequency),ce.info(`[BaseNote] åŸºéŸ³è¨­å®šï¼ˆlocalStorageé€£æºï¼‰: ${p} = ${b}Hz`),ce.info(`[BaseNote] localStorageåŸºéŸ³æƒ…å ±: note=${o}, name=${u}`),!b||b<=0)throw ce.error("[BaseNote] åŸºéŸ³å‘¨æ³¢æ•°è¨­å®šã‚¨ãƒ©ãƒ¼:",k),new Error(`Invalid base frequency: ${b}`)}async function Xt(){if(V||!fe||Ne)return;if(q!=="granted"){console.log("ğŸ¤ [RandomTraining] ãƒã‚¤ã‚¯è¨±å¯ãŒå¿…è¦ã§ã™ã€‚è¨±å¯å–å¾—ã‚’é–‹å§‹...");try{await Je(),console.log("ğŸ¤ [RandomTraining] ãƒã‚¤ã‚¯è¨±å¯å–å¾—å®Œäº†")}catch(u){console.error("âŒ ãƒã‚¤ã‚¯è¨±å¯ã‚¨ãƒ©ãƒ¼:",u);return}}if(!Be&&q==="granted"){console.log("ğŸ¤ [RandomTraining] AudioManagerãƒªã‚½ãƒ¼ã‚¹æœªåˆæœŸåŒ–ã®ãŸã‚å–å¾—ã—ã¾ã™");try{await Je()}catch(u){console.error("âŒ AudioManagerãƒªã‚½ãƒ¼ã‚¹åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",u);return}}else Be&&console.log("ğŸ¤ [RandomTraining] AudioManagerãƒªã‚½ãƒ¼ã‚¹æ—¢å­˜ã®ãŸã‚å†åˆ©ç”¨");e(9,V=!0),e(0,F="listening"),We=Date.now(),dt();const o=Ge.find(u=>u.name===p).note;fe.triggerAttackRelease(o,2,At(),.7),setTimeout(()=>{e(9,V=!1),e(0,F="waiting"),setTimeout(()=>mt(),500)},2e3)}async function Yt(){if(V||!fe||y||!p)return;if(q!=="granted"){console.log("ğŸ¤ [RandomTraining] ãƒã‚¤ã‚¯è¨±å¯ãŒå¿…è¦ã§ã™ã€‚è¨±å¯å–å¾—ã‚’é–‹å§‹...");try{await Je(),console.log("ğŸ¤ [RandomTraining] ãƒã‚¤ã‚¯è¨±å¯å–å¾—å®Œäº†")}catch(u){console.error("âŒ ãƒã‚¤ã‚¯è¨±å¯ã‚¨ãƒ©ãƒ¼:",u);return}}if(!Be&&q==="granted"){console.log("ğŸ¤ [RandomTraining] AudioManagerãƒªã‚½ãƒ¼ã‚¹æœªåˆæœŸåŒ–ã®ãŸã‚å–å¾—ã—ã¾ã™");try{await Je()}catch(u){console.error("âŒ AudioManagerãƒªã‚½ãƒ¼ã‚¹åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",u);return}}else Be&&console.log("ğŸ¤ [RandomTraining] AudioManagerãƒªã‚½ãƒ¼ã‚¹æ—¢å­˜ã®ãŸã‚å†åˆ©ç”¨");if(e(9,V=!0),e(0,F="listening"),We=Date.now(),typeof window<"u"&&window.Tone){const u=window.Tone.context||window.Tone.getContext();u&&u.state==="suspended"&&(console.log("ğŸ”„ [RandomTraining] AudioContext suspendedæ¤œå‡º - å†é–‹ä¸­..."),await u.resume(),console.log("âœ… [RandomTraining] AudioContextå†é–‹å®Œäº†"))}const o=Ge.find(u=>u.name===p).note;fe.triggerAttackRelease(o,2,At(),.7),setTimeout(()=>{e(9,V=!1),e(0,F="waiting"),setTimeout(()=>mt(),500)},2e3)}async function no(){if(V||!fe||y||!p){console.log("ğŸ”„ [BaseNoteOnly] å†ç”Ÿæ¡ä»¶æœªæº€: isPlaying:",V,"sampler:",!!fe,"isLoading:",y,"currentBaseNote:",p);return}if(console.log("ğŸµ [BaseNoteOnly] åŸºéŸ³ã®ã¿å†ç”Ÿé–‹å§‹:",p),typeof window<"u"&&window.Tone){const u=window.Tone.context||window.Tone.getContext();u&&u.state==="suspended"&&(console.log("ğŸ”„ [BaseNoteOnly] AudioContext suspendedæ¤œå‡º - å†é–‹ä¸­..."),await u.resume(),console.log("âœ… [BaseNoteOnly] AudioContextå†é–‹å®Œäº†"))}const o=Ge.find(u=>u.name===p).note;fe.triggerAttackRelease(o,1.5,At(),.7),console.log("ğŸµ [BaseNoteOnly] åŸºéŸ³å†ç”Ÿå®Œäº†:",o)}function Zt(){p&&b>0?Yt():Xt(),$t()}function $t(){x&&clearInterval(x),e(11,O=0),K=!0,e(12,se=!1),console.log("ğŸµ [GuideStartBar] ã‚¬ã‚¤ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆãƒãƒ¼é–‹å§‹"),x=setInterval(()=>{e(11,O+=2.5),O>=100&&(e(11,O=100),e(12,se=!0),console.log("ğŸµ [GuideStartBar] ã‚¬ã‚¤ãƒ‰é–‹å§‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ï¼"),setTimeout(()=>{K=!1,e(12,se=!1),e(11,O=0)},800),clearInterval(x),x=null)},50)}function oo(){x&&(clearInterval(x),x=null),K=!1,e(12,se=!1),e(11,O=0)}function Ye(o,u){const D=[0,2,4,5,7,9,11,12][u],H=o*Math.pow(2,D/12);return ce.debug(`[calculateExpectedFrequency] ${P[u].name}: åŸºéŸ³${o.toFixed(1)}Hz + ${D}åŠéŸ³ = ${H.toFixed(1)}Hz`),H}function en(o,u){return Ye(o,u)}function mt(){e(0,F="guiding"),E=0,R=!0,ne=[],console.log(`ğŸ¬ ã‚¬ã‚¤ãƒ‰é–‹å§‹: ${p} (${b.toFixed(1)}Hz)`);function o(){if(E<P.length){E>0&&e(10,P[E-1].state="inactive",P),e(10,P[E].state="active",P);const u=en(b,E);St.setScaleContext({baseFrequency:b,currentScale:P[E].name,targetFrequency:u}),console.log(`ğŸµ [Scale] åŸºéŸ³:${p}(${b.toFixed(0)}Hz) ç¾åœ¨:${P[E].name} ç›®æ¨™:${u.toFixed(0)}Hz`),E>=4&&console.log(`ğŸ” [ãƒ‡ãƒãƒƒã‚°] Step ${E}: currentBaseFrequency=${b}, currentBaseNote='${p}'`),E++,L=setTimeout(()=>{o()},600)}else tn()}o()}function tn(){R=!1,console.log(`ğŸ ã‚¬ã‚¤ãƒ‰å®Œäº†: ${ne.length}/${P.length}ã‚¹ãƒ†ãƒƒãƒ—è©•ä¾¡`),P.length>0&&e(10,P[P.length-1].state="inactive",P),ie&&ie.stopDetection(),St.clearContext(),nn(),cn(),oe=W.map(o=>{const u=ne.find(k=>k.stepName===o);return u?{name:u.stepName,cents:u.adjustedFrequency?Math.round(u.centDifference):null,targetFreq:u.expectedFrequency,detectedFreq:u.adjustedFrequency||null,diff:u.adjustedFrequency?u.adjustedFrequency-u.expectedFrequency:null,accuracy:u.accuracy}:{name:o,cents:null,targetFreq:null,detectedFreq:null,diff:null,accuracy:"notMeasured"}}),un(),dn(),e(0,F="results")}function nn(){let o=0,u=0;ne.forEach((H,z)=>{H.isCorrect&&o++,u+=H.accuracy});const k=ne.length>0?Math.round(u/ne.length):0,D=Math.round(o/P.length*100);De={correctCount:o,totalCount:P.length,averageAccuracy:k,averageTime:0,isCompleted:!0},console.log(`ğŸ¯ çµæœ: ${o}/${P.length}æ­£è§£ (${D}%) å¹³å‡ç²¾åº¦${k}%`),ne.length>0&&(_e=[...ne])}function ao(){switch(F){case"setup":return Ne||!fe?"ğŸµ éŸ³æºèª­ã¿è¾¼ã¿ä¸­...":"ğŸ¤ ãƒã‚¤ã‚¯æº–å‚™å®Œäº† - ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–‹å§‹å¯èƒ½";case"listening":return"ğŸµ åŸºéŸ³å†ç”Ÿä¸­...";case"waiting":return"â³ é–“ã‚‚ãªãé–‹å§‹...";case"guiding":return"ğŸ™ï¸ ã‚¬ã‚¤ãƒ‰ã«åˆã‚ã›ã¦ãƒ‰ãƒ¬ãƒŸãƒ•ã‚¡ã‚½ãƒ©ã‚·ãƒ‰ã‚’æ­Œã£ã¦ãã ã•ã„";case"results":return"ğŸ‰ æ¡ç‚¹çµæœ";default:return"ğŸ”„ æº–å‚™ä¸­..."}}function ro(){return ne.length>0?ne:_e.length>0?_e:[]}function on(){pt(`${it}/microphone-test`)}function Ze(){pt(`${it}/`)}async function an(){try{e(32,Ne=!0),e(31,fe=new Mo({urls:{C4:"C4.mp3"},baseUrl:`${it}/audio/piano/`,release:1.5,volume:Nn(),onload:()=>{e(32,Ne=!1)},onerror:H=>{console.error("âŒ Salamander PianoéŸ³æºèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:",H),e(32,Ne=!1)}}).toDestination());const o=/iPhone/.test(navigator.userAgent),u=/iPad/.test(navigator.userAgent),k=/Macintosh/.test(navigator.userAgent)&&"ontouchend"in document,D=o||u||k;console.log(u?"ğŸ” [RandomTraining] iPadæ¤œå‡º:":k?"ğŸ” [RandomTraining] iPadOSæ¤œå‡º:":o?"ğŸ” [RandomTraining] iPhoneæ¤œå‡º:":"ğŸ” [RandomTraining] ãã®ä»–ãƒ‡ãƒã‚¤ã‚¹æ¤œå‡º:",navigator.userAgent),console.log("ğŸ”Š [RandomTraining] éŸ³é‡è¨­å®šç¶­æŒ: 35dB")}catch(o){console.error("ã‚µãƒ³ãƒ—ãƒ©ãƒ¼åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",o),e(32,Ne=!1)}}async function st(){try{(await navigator.permissions.query({name:"microphone"})).state==="granted"?await Je():e(1,q="denied")}catch{e(1,q="denied")}}function rn(){try{Fe=new Fn,ce.info("[RandomTraining] æ¡ç‚¹ã‚¨ãƒ³ã‚¸ãƒ³åˆæœŸåŒ–å®Œäº†")}catch(o){ce.error("[RandomTraining] æ¡ç‚¹ã‚¨ãƒ³ã‚¸ãƒ³åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",o)}}function sn(o,u){if(!Fe||!R)return;const k=E-1;if(k<0||k>=P.length)return;const D=Ye(b,k),H={baseFrequency:b,targetFrequency:D,detectedFrequency:o,detectedNote:u,volume:he,timestamp:Date.now(),scaleIndex:k,scaleName:P[k].name};try{Fe.processAttempt(H)}catch(z){ce.error("[RandomTraining] æ¡ç‚¹ã‚¨ãƒ³ã‚¸ãƒ³ã‚¨ãƒ©ãƒ¼:",z)}}function cn(){if(!Fe){ce.error("[RandomTraining] æ¡ç‚¹ã‚¨ãƒ³ã‚¸ãƒ³ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“"),ln();return}try{const o=Fe.generateDetailedReport();e(16,ze={totalScore:o.totalScore,grade:o.grade,componentScores:o.componentScores}),o.intervalAnalysis&&o.intervalAnalysis.masteryLevels?e(3,Ce=Object.entries(o.intervalAnalysis.masteryLevels).map(([u,k])=>{var D,H;return{type:u,mastery:Math.round(k),attempts:((D=o.intervalAnalysis.attemptCounts)==null?void 0:D[u])||0,accuracy:((H=o.intervalAnalysis.accuracyRates)==null?void 0:H[u])||0}})):(console.warn("âš ï¸ [RandomTraining] intervalAnalysis.masteryLevels ãŒæœªå®šç¾©ã§ã™"),e(3,Ce=[])),o.consistencyHistory&&Array.isArray(o.consistencyHistory)?e(17,Pe=o.consistencyHistory.map((u,k)=>({score:Math.round(u),timestamp:Date.now()-(o.consistencyHistory.length-k)*1e3}))):(console.warn("âš ï¸ [RandomTraining] consistencyHistory ãŒæœªå®šç¾©ã¾ãŸã¯é…åˆ—ã§ã¯ã‚ã‚Šã¾ã›ã‚“"),e(17,Pe=[])),e(18,Oe=o.feedback||{primary:"æ¡ç‚¹çµæœã‚’ç”Ÿæˆä¸­ã§ã™...",detailed:[],suggestions:[]}),e(20,Re={totalAttempts:o.totalAttempts||0,successRate:o.successRate||0,averageScore:o.totalScore||0,bestScore:Math.max(o.totalScore||0,Re.bestScore||0),sessionDuration:Math.round((Date.now()-Re.sessionStart)/6e4)||0,streakCount:o.streak||0,fatigueLevel:o.fatigueLevel||"normal",mostDifficultInterval:o.mostDifficultInterval||"-",mostSuccessfulInterval:o.mostSuccessfulInterval||"-",averageResponseTime:o.averageResponseTime||0}),ce.info("[RandomTraining] æ¡ç‚¹çµæœç”Ÿæˆå®Œäº†:",ze)}catch(o){ce.error("[RandomTraining] æ¡ç‚¹çµæœç”Ÿæˆã‚¨ãƒ©ãƒ¼:",o)}}function ln(){ce.info("[RandomTraining] ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã§æ¡ç‚¹çµæœã‚’ç”Ÿæˆ"),e(16,ze={totalScore:78,grade:"B+",componentScores:{pitchAccuracy:82,recognitionSpeed:75,intervalMastery:80,directionAccuracy:85,consistency:70}}),e(3,Ce=[{type:"unison",mastery:95,attempts:8,accuracy:98},{type:"major_second",mastery:82,attempts:8,accuracy:85},{type:"major_third",mastery:78,attempts:8,accuracy:80},{type:"perfect_fourth",mastery:65,attempts:8,accuracy:68},{type:"perfect_fifth",mastery:88,attempts:8,accuracy:90},{type:"major_sixth",mastery:72,attempts:8,accuracy:75},{type:"major_seventh",mastery:58,attempts:8,accuracy:62},{type:"octave",mastery:92,attempts:8,accuracy:94}]),e(17,Pe=[{score:65,timestamp:Date.now()-42e4},{score:72,timestamp:Date.now()-36e4},{score:68,timestamp:Date.now()-3e5},{score:75,timestamp:Date.now()-24e4},{score:78,timestamp:Date.now()-18e4},{score:82,timestamp:Date.now()-12e4},{score:80,timestamp:Date.now()-6e4},{score:85,timestamp:Date.now()}]),e(18,Oe={type:"improvement",primary:"è‰¯ã„é€²æ­©ãŒè¦‹ã‚‰ã‚Œã¾ã™ï¼",summary:"éŸ³ç¨‹ã®èªè­˜ç²¾åº¦ãŒå‘ä¸Šã—ã¦ã„ã¾ã™ã€‚ç‰¹ã«å®Œå…¨5åº¦ã¨ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ã®ç¿’å¾—åº¦ãŒé«˜ãã€åŸºæœ¬çš„ãªéŸ³æ„ŸãŒèº«ã«ã¤ã„ã¦ãã¦ã„ã¾ã™ã€‚",details:[{category:"strengths",text:"ãƒ¦ãƒ‹ã‚¾ãƒ³ã¨ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ã®èªè­˜ãŒã»ã¼å®Œç’§ã§ã™"},{category:"strengths",text:"å®Œå…¨5åº¦ã®å®‰å®šæ€§ãŒå„ªç§€ã§ã™"},{category:"improvements",text:"å®Œå…¨4åº¦ã®ç·´ç¿’ã‚’ã‚‚ã†å°‘ã—å¢—ã‚„ã—ã¾ã—ã‚‡ã†"},{category:"improvements",text:"é•·7åº¦ã®èªè­˜ç²¾åº¦ã‚’å‘ä¸Šã•ã›ã¾ã—ã‚‡ã†"},{category:"tips",text:"4åº¦ã¯ã€Œã‚½ãƒ¼ãƒ•ã‚¡ãƒ¼ã€ã®éŸ³ç¨‹ã§ã™"},{category:"practice",text:"æ¯æ—¥15åˆ†ã®ç¶™ç¶šç·´ç¿’ã‚’å¿ƒãŒã‘ã¾ã—ã‚‡ã†"}],nextSteps:["å®Œå…¨4åº¦ã®é›†ä¸­ç·´ç¿’ã‚’è¡Œã„ã¾ã—ã‚‡ã†","é€£ç¶šãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè·µç·´ç¿’ã‚’","1æ—¥15åˆ†ã®ç¶™ç¶šç·´ç¿’ã‚’å¿ƒãŒã‘ã¾ã—ã‚‡ã†"],motivation:"ç¶™ç¶šã¯åŠ›ãªã‚Šï¼ã‚ãªãŸã®ç›¸å¯¾éŸ³æ„Ÿã¯ç¢ºå®Ÿã«å‘ä¸Šã—ã¦ã„ã¾ã™ï¼"}),e(20,Re={totalAttempts:32,successRate:68.8,averageScore:78,bestScore:85,sessionDuration:8,streakCount:4,fatigueLevel:"normal",mostDifficultInterval:"å®Œå…¨4åº¦",mostSuccessfulInterval:"ãƒ¦ãƒ‹ã‚¾ãƒ³",averageResponseTime:2.1,sessionStart:Date.now()-48e4}),ce.info("[RandomTraining] ãƒ†ã‚¹ãƒˆæ¡ç‚¹çµæœç”Ÿæˆå®Œäº†")}function so(o){ft=o}function un(){if(!oe||oe.length===0){console.warn("[UnifiedScore] noteResultsForDisplay ãŒç©ºã§ã™");return}const o=oe.filter(ee=>ee.accuracy!=="notMeasured").length,u=oe.length,k=oe.filter(ee=>ee.accuracy!=="notMeasured"&&typeof ee.accuracy=="number").map(ee=>ee.accuracy),D=k.length>0?Math.round(k.reduce((ee,Ae)=>ee+Ae,0)/k.length):0,H=p||"Unknown",z=b||0,ae=oe.map(ee=>({name:ee.name,note:ee.note||ee.name,frequency:ee.targetFreq||ee.expectedFrequency,detectedFrequency:ee.detectedFreq,cents:ee.cents,grade:nt.evaluateNote(ee.cents),targetFreq:ee.targetFreq,diff:ee.diff})),le=S,re=(le==null?void 0:le.sessionHistory)||[],qe={timestamp:new Date,baseNote:H,baseFrequency:z,noteResults:ae,measuredNotes:o,accuracy:D,grade:nt.evaluateSession(oe)},Ve=[...re,qe];e(21,ue={mode:"random",timestamp:new Date,duration:60,totalNotes:u,measuredNotes:o,averageAccuracy:D,baseNote:H,baseFrequency:z,noteResults:ae,distribution:nt.calculateDistribution(oe),sessionHistory:Ve,unifiedGrade:J(Ve)}),console.log("[UnifiedScore] çµ±åˆæ¡ç‚¹ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆå®Œäº†ï¼ˆå®Œå…¨ç‰ˆï¼‰:",ue),fn()}async function fn(){if(!oe||oe.length===0){console.warn("ğŸ“Š [SessionStorage] ä¿å­˜ãƒ‡ãƒ¼ã‚¿ãªã—");return}try{console.log("ğŸ“Š [SessionStorage] ã‚»ãƒƒã‚·ãƒ§ãƒ³çµæœä¿å­˜é–‹å§‹");const o=oe.map(z=>({name:z.name,cents:z.cents,targetFreq:z.targetFreq||z.expectedFrequency,detectedFreq:z.detectedFreq,diff:z.diff,accuracy:typeof z.accuracy=="number"?z.accuracy:0})),u=We?Math.round((Date.now()-We)/1e3):60;await Dn(o,u,d,f)?(console.log("ğŸ“Š [SessionStorage] ã‚»ãƒƒã‚·ãƒ§ãƒ³çµæœä¿å­˜å®Œäº†"),console.log("ğŸ“Š [SessionStorage] ä¿å­˜å¾Œã®çŠ¶æ³:",{currentSession:m,totalSessions:g.length,isCompleted:s,nextBaseNote:d,nextBaseName:f})):console.error("ğŸ“Š [SessionStorage] ã‚»ãƒƒã‚·ãƒ§ãƒ³çµæœä¿å­˜å¤±æ•—")}catch(o){console.error("ğŸ“Š [SessionStorage] ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¿å­˜ã‚¨ãƒ©ãƒ¼:",o)}}async function dn(){try{if(Fe){const o=g||[];for(const[k,D]of o.entries())if(D.noteResults&&D.noteResults.length>0){const H=D.baseFrequency||262;for(const z of D.noteResults)z.detectedFreq&&z.targetFreq&&await Fe.analyzePerformance({baseFreq:H,targetFreq:z.targetFreq,detectedFreq:z.detectedFreq,responseTime:2e3,volume:50,harmonicCorrection:null})}const u=Fe.generateDetailedReport();e(16,ze={totalScore:u.totalScore||0,grade:u.grade||"C",componentScores:u.componentScores||{accuracy:0,speed:0,consistency:0}}),u.intervalAnalysis&&u.intervalAnalysis.masteryLevels?e(3,Ce=Object.entries(u.intervalAnalysis.masteryLevels).map(([k,D])=>{var H;return{type:k,mastery:Math.round(D),attempts:((H=u.intervalAnalysis.attemptCounts)==null?void 0:H[k])||0,accuracy:Math.round(D*.9)}})):e(3,Ce=Tt(oe)),u.consistencyHistory&&Array.isArray(u.consistencyHistory)?e(17,Pe=u.consistencyHistory.map((k,D)=>({score:Math.round(k),timestamp:Date.now()-(u.consistencyHistory.length-D)*1e3}))):e(17,Pe=yt(oe)),e(18,Oe=ht(oe)||u.feedback),console.log("ğŸ¯ [generateEnhancedScoringData] æŠ€è¡“åˆ†æçµæœç”Ÿæˆã‚’é–‹å§‹"),console.log("ğŸ¯ [generateEnhancedScoringData] results:",u),e(19,Xe=mn(u)),console.log("ğŸ¯ [generateEnhancedScoringData] technicalFeedbackDataçµæœ:",Xe),e(20,Re={totalAttempts:u.totalAttempts||oe.length,successRate:u.successRate||oe.filter(k=>k.accuracy!=="notMeasured").length/oe.length*100,averageScore:u.totalScore||(ue==null?void 0:ue.averageAccuracy)||0,bestScore:Math.max(u.totalScore||0,Re.bestScore||0),sessionDuration:Math.round(60),streakCount:u.streak||0,fatigueLevel:u.fatigueLevel||"normal",mostDifficultInterval:u.mostDifficultInterval||"æœªç‰¹å®š",mostSuccessfulInterval:u.mostSuccessfulInterval||"æœªç‰¹å®š",averageResponseTime:u.averageResponseTime||2.5,sessionStart:Date.now()-6e4})}else gt();console.log("[EnhancedScoring] è¿½åŠ æ¡ç‚¹ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆå®Œäº†")}catch(o){console.error("[EnhancedScoring] ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆã‚¨ãƒ©ãƒ¼:",o),gt()}}function gt(){const o=oe.filter(k=>k.accuracy!=="notMeasured"),u=(ue==null?void 0:ue.averageAccuracy)||0;e(16,ze={totalScore:Math.round(u*.8),grade:u>=90?"A":u>=80?"B":u>=70?"C":"D",componentScores:{accuracy:u,speed:85,consistency:Math.max(60,u-10)}}),e(3,Ce=Tt(oe)),e(17,Pe=yt()),e(18,Oe=ht(oe)),e(20,Re={totalAttempts:oe.length,successRate:o.length/oe.length*100,averageScore:u,bestScore:u,sessionDuration:60,streakCount:0,fatigueLevel:"normal",mostDifficultInterval:"æœªåˆ†æ",mostSuccessfulInterval:"æœªåˆ†æ",averageResponseTime:2.5,sessionStart:Date.now()-6e4})}function yt(o){const u=(ue==null?void 0:ue.averageAccuracy)||70;return Array.from({length:8},(k,D)=>({score:Math.max(30,Math.min(100,u+(Math.random()-.5)*20)),timestamp:Date.now()-(8-D)*7500}))}function ht(o){const u=o.filter(et=>et.accuracy!=="notMeasured").length,k=(ue==null?void 0:ue.averageAccuracy)||0,D=8,H=g||[],z=H.length,ae={type:"info",categories:[{name:"éŸ³ç¨‹ç²¾åº¦",icon:"Target",score:k,message:`${k}%ã®ç²¾åº¦ã§éŸ³ç¨‹ã‚’æ‰ãˆã¦ã„ã¾ã™`},{name:"æ¸¬å®šæˆåŠŸç‡",icon:"Mic",score:Math.round(u/o.length*100),message:`${o.length}éŸ³ä¸­${u}éŸ³ã‚’æ­£å¸¸ã«æ¸¬å®š`}]};if(z<D)return ae;let le,re,qe;const Ve=(ue==null?void 0:ue.unifiedGrade)||"E",ee=H.length;let Ae=0,pe=0,ve=0;H.forEach(et=>{et.grade==="excellent"?Ae++:et.grade==="good"?pe++:et.grade==="pass"&&ve++});const be=ee>0?Math.round(Ae/ee*100):0,$e=ee>0?Math.round((Ae+pe+ve)/ee*100):0,we=ee>0?Math.round((Ae+pe+ve)/ee*100):0;switch(Ve){case"S":le="excellent",re="éŸ³æ¥½å®¶ãƒ¬ãƒ™ãƒ«ã®ç›¸å¯¾éŸ³æ„Ÿã‚’é”æˆï¼",qe=`å„ªç§€ç‡${be}%è¶…ãˆã®å®ŸåŠ›ã‚’è¨¼æ˜ã•ã‚Œã¾ã—ãŸã€‚`;break;case"A":le="excellent",re="ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ™ãƒ«åˆ°é”ï¼",qe=`å„ªç§€ç‡${be}%ã®å®‰å®šã—ãŸéŸ³æ„Ÿèƒ½åŠ›ã§ã™ã€‚`;break;case"B":le="improvement",re="ãƒ—ãƒ­ãƒ•ã‚£ã‚·ã‚¨ãƒ³ãƒˆç´šé”æˆï¼",qe=`è‰¯å¥½ç‡${$e}%ã®ç¢ºå®Ÿãªé€²æ­©ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚`;break;case"C":le="improvement",re="ã‚¢ãƒ‰ãƒãƒ³ã‚¹ç´šåˆ°é”ï¼",qe=`åˆæ ¼ç‡${we}%ã§ç€å®Ÿã«æˆé•·ä¸­ã§ã™ã€‚`;break;case"D":le="practice",re="ç¶™ç¶šç·´ç¿’ã§å¿…ãšä¸Šé”ï¼",qe=`ç¾åœ¨ã®åˆæ ¼ç‡${we}%ã‹ã‚‰ç›®æ¨™70%ã¸å‘ã‘ã¦ç·´ç¿’ã‚’ç¶šã‘ã¾ã—ã‚‡ã†ã€‚`;break;case"E":default:le="encouragement",re="Eç´šãƒ“ã‚®ãƒŠãƒ¼",qe="ç·´ç¿’é–‹å§‹æ®µéšã§ã™ã€‚ç¶™ç¶šçš„ãªç·´ç¿’ã§å¿…ãšä¸Šé”ã—ã¾ã™ã€‚";break}return{...ae,type:le,primary:re,summary:qe}}function mn(o){var Ve,ee,Ae;if((g||[]).length<8||!o)return null;const H=o.improvements||[];(Ve=o.detailed)!=null&&Ve.statistics;const z=[];let ae=0,le=0;if((ee=o.detailed)!=null&&ee.intervals){const pe=o.detailed.intervals;if(pe.totalAnalyses>0){let ve=0,be=0;for(const[$e,we]of Object.entries(pe.masteryLevels))we.attempts>0&&(ve+=we.averageAccuracy*we.attempts,be+=we.attempts);ae=be>0?ve/be:0}}if((Ae=o.detailed)!=null&&Ae.directions){const pe=o.detailed.directions;if(pe.totalAnalyses>0){let ve=0,be=0;for(const[$e,we]of Object.entries(pe.masteryData))we.attempts>0&&(ve+=we.averageAccuracy*we.attempts,be+=we.attempts);le=be>0?ve/be:0}}z.push({category:"improvements",text:`éŸ³ç¨‹ç²¾åº¦: ${Math.round(ae)}%ã€€ï¼ˆéŸ³ã®é«˜ã•ã‚’æ‰ãˆã‚‹æ­£ç¢ºæ€§ã€€ç›®æ¨™åŸºæº–ï¼š70ã€œ85%ï¼‰`}),z.push({category:"improvements",text:`æ–¹å‘æ€§: ${Math.round(le)}%ã€€ï¼ˆéŸ³ç¨‹ã®ä¸Šä¸‹åˆ¤æ–­ã®ç²¾åº¦ã€€ç›®æ¨™åŸºæº–ï¼š80ã€œ90%ï¼‰`});const re=H.map(pe=>({category:"tips",text:pe.message})),qe=H.flatMap(pe=>(pe.actions||[]).map(ve=>({category:"practice",text:ve})));return[...z,...re,...qe],{type:"info",primary:"è©³ç´°åˆ†æçµæœ",summary:"éŸ³ç¨‹ç²¾åº¦ãƒ»ä¸€è²«æ€§ãƒ»æ–¹å‘æ€§ã®ç·åˆåˆ†æ",details:z}}qn(async()=>{if(!(typeof localStorage<"u"?localStorage.getItem("mic-test-completed"):null)){console.log("ğŸš« [RandomTraining] ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆæœªå®Œäº† - æº–å‚™ç”»é¢è¡¨ç¤º"),st();return}console.log("ğŸ“Š [SessionStorage] ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†åˆæœŸåŒ–é–‹å§‹");try{if(await _t()){if(console.log("ğŸ“Š [SessionStorage] ã‚»ãƒƒã‚·ãƒ§ãƒ³é€²è¡ŒçŠ¶æ³ã®èª­ã¿è¾¼ã¿å®Œäº†"),console.log("ğŸ“Š [SessionStorage] ç¾åœ¨ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³:",m,"/ 8"),console.log("ğŸ“Š [SessionStorage] æ¬¡ã®åŸºéŸ³:",d,"(",f,")"),console.log("ğŸ“Š [SessionStorage] å®Œäº†çŠ¶æ³:",s?"8ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†":`æ®‹ã‚Š${l}ã‚»ãƒƒã‚·ãƒ§ãƒ³`),s&&(console.log("ğŸ”„ [SessionStorage] 8ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†æ¤œå‡º - æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹å‡¦ç†"),await tt()?console.log("âœ… [SessionStorage] æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹å®Œäº† - ã‚»ãƒƒã‚·ãƒ§ãƒ³1/8ã‹ã‚‰å†é–‹"):console.warn("âš ï¸ [SessionStorage] æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹å‡¦ç†ãŒå¤±æ•—")),m>1&&!s){console.warn("ğŸ”„ [SessionStorage] ã‚»ãƒƒã‚·ãƒ§ãƒ³é€”ä¸­ã§ã®ãƒªãƒ­ãƒ¼ãƒ‰æ¤œå‡º - ã‚»ãƒƒã‚·ãƒ§ãƒ³1ã‹ã‚‰å†é–‹"),console.warn("ğŸ”„ [SessionStorage] ç¾åœ¨:",m,"ã‚»ãƒƒã‚·ãƒ§ãƒ³ç›® â†’ ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹èª˜å°");const{SessionStorageManager:k}=await kn(async()=>{const{SessionStorageManager:z}=await import("../chunks/CYOrYtYa.js").then(ae=>ae.z);return{SessionStorageManager:z}},__vite__mapDeps([0,1,2,3,4,5]),import.meta.url),D=k.getInstance();typeof localStorage<"u"&&(localStorage.removeItem("random-training-progress"),localStorage.removeItem("random-training-progress-backup"));const{resetProgress:H}=await kn(async()=>{const{resetProgress:z}=await import("../chunks/CYOrYtYa.js").then(ae=>ae.B);return{resetProgress:z}},__vite__mapDeps([0,1,2,3,4,5]),import.meta.url);await H(),console.log("ğŸ”„ [SessionStorage] localStorage + ã‚¹ãƒˆã‚¢çŠ¶æ…‹å®Œå…¨ãƒªã‚»ãƒƒãƒˆå®Œäº†"),st();return}}else console.log("ğŸ“Š [SessionStorage] æ–°è¦ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹")}catch(u){console.error("ğŸ“Š [SessionStorage] åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",u)}if(an(),rn(),i.url.searchParams.get("from")==="microphone-test"){console.log("ğŸ¤ [RandomTraining] ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã‹ã‚‰ã®é·ç§»ã‚’æ¤œå‡º");const u=new URL(window.location);if(u.searchParams.delete("from"),window.history.replaceState({},"",u),e(1,q="granted"),e(0,F="setup"),console.log('ğŸ¤ [RandomTraining] microphoneState="granted", trainingPhase="setup" ã«è¨­å®š'),!Be){console.log("ğŸ¤ [RandomTraining] AudioManagerãƒªã‚½ãƒ¼ã‚¹å–å¾—é–‹å§‹");try{const k=await Ue.initialize();at=k.audioContext,Be=k.mediaStream,rt=k.sourceNode,console.log("ğŸ¤ [RandomTraining] AudioManagerãƒªã‚½ãƒ¼ã‚¹å–å¾—å®Œäº†")}catch(k){console.warn("âš ï¸ AudioManagerãƒªã‚½ãƒ¼ã‚¹å–å¾—å¤±æ•—ï¼ˆå¾Œã§å†è©¦è¡Œï¼‰:",k)}}if(await new Promise(k=>setTimeout(k,300)),ie&&ie.getIsInitialized&&!ie.getIsInitialized())try{console.log("ğŸ™ï¸ [RandomTraining] PitchDetectoråˆæœŸåŒ–é–‹å§‹");const k=Ue.getStatus();console.log("ğŸ” [RandomTraining] AudioManagerçŠ¶æ…‹:",k),(!k.isInitialized||!k.mediaStreamActive)&&(console.log("ğŸ”„ [RandomTraining] AudioManagerçŠ¶æ…‹ä¸è‰¯ - å†åˆæœŸåŒ–å®Ÿè¡Œ"),await Ue.initialize()),await ie.initialize(),console.log("âœ… [RandomTraining] PitchDetectoråˆæœŸåŒ–å®Œäº†")}catch(k){console.warn("âš ï¸ PitchDetectoråˆæœŸåŒ–å¤±æ•—:",k)}}else await new Promise(u=>setTimeout(u,100)),st()});function gn(o){const{frequency:u,note:k,volume:D,rawVolume:H,clarity:z}=o.detail;let ae=u,le=k;if(F==="guiding"&&R&&b>0&&u>0){const re=yn(u);re&&(ae=re.frequency,le=re.note)}e(14,ke=ae),e(15,Ee=le),e(13,he=D),b>0&&ae>0?Le=Math.round(1200*Math.log2(ae/b)):Le=0,hn(u),Fe&&u>0&&b>0&&sn(u,k)}function yn(o){if(!o||o<=0||!R||!b||he<25)return null;const k=E-1;if(k<0||k>=P.length)return null;const D=Ye(b,k);if(!D||D<=0)return null;const z=It(o,D).correctedFrequency,ae=Tn(z);return{frequency:Math.round(z),note:ae}}function hn(o,u){if(!o||o<=0||!R)return;if(!b||b<=0){console.error(`âŒ [æ¡ç‚¹ã‚¨ãƒ©ãƒ¼] åŸºéŸ³å‘¨æ³¢æ•°ãŒç„¡åŠ¹: ${b}Hz`),console.error(`âŒ [æ¡ç‚¹ã‚¨ãƒ©ãƒ¼] åŸºéŸ³å: ${p}`),console.error(`âŒ [æ¡ç‚¹ã‚¨ãƒ©ãƒ¼] activeStepIndex: ${E-1}`),console.error(`âŒ [æ¡ç‚¹ã‚¨ãƒ©ãƒ¼] trainingPhase: ${F}`),console.error(`âŒ [æ¡ç‚¹ã‚¨ãƒ©ãƒ¼] isGuideAnimationActive: ${R}`);return}if(he<25)return;const D=E-1;if(D<0||D>=P.length)return;D>=4&&ce.debug(`[æ¡ç‚¹ãƒ‡ãƒãƒƒã‚°] activeStepIndex=${D} (${P[D].name}), currentBaseFrequency=${b}Hz`);const H=Ye(b,D);if(D>=0&&ce.debug(`[éŸ³ç¨‹è¨ˆç®—ä¿®æ­£ç‰ˆ] ${P[D].name}: æœŸå¾…å‘¨æ³¢æ•° ${H.toFixed(1)}Hz`),!H||H<=0||!isFinite(H)){console.error("âŒ [æ¡ç‚¹ã‚¨ãƒ©ãƒ¼] æœŸå¾…å‘¨æ³¢æ•°è¨ˆç®—ã‚¨ãƒ©ãƒ¼:"),console.error(`   åŸºéŸ³å‘¨æ³¢æ•°: ${b}Hz`),console.error(`   éŸ³éšã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹: ${D}`),console.error(`   æœŸå¾…å‘¨æ³¢æ•°: ${H}Hz`);return}const z=It(o,H),ae=z.correctedFrequency,le=z.factor,re=Math.round(1200*Math.log2(ae/H));if((Math.abs(re)>200||le!==1)&&(ce.debug(`[ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—å¼è£œæ­£] ${P[D].name}:`),console.warn(`   æ¤œå‡ºå‘¨æ³¢æ•°: ${o.toFixed(1)}Hz`),console.warn(`   è£œæ­£å¾Œå‘¨æ³¢æ•°: ${ae.toFixed(1)}Hz`),console.warn(`   æœŸå¾…å‘¨æ³¢æ•°: ${H.toFixed(1)}Hz`),console.warn(`   ã‚»ãƒ³ãƒˆå·®: ${re}Â¢`),console.warn(`   è£œæ­£ä¿‚æ•°: ${le} (${z.description})`),console.warn(`   åŸºéŸ³: ${p} (${b.toFixed(1)}Hz)`)),!isFinite(re)){console.error("âŒ [æ¡ç‚¹ã‚¨ãƒ©ãƒ¼] ã‚»ãƒ³ãƒˆè¨ˆç®—ã‚¨ãƒ©ãƒ¼:"),console.error(`   æ¤œå‡ºå‘¨æ³¢æ•°: ${o}Hz`),console.error(`   æœŸå¾…å‘¨æ³¢æ•°: ${H}Hz`),console.error(`   ã‚»ãƒ³ãƒˆå·®: ${re}`);return}const Ve=Math.abs(re)<=50;if(he>=15){const pe=Math.max(0,Math.round(100-Math.abs(re))),ve=ne.findIndex($e=>$e.stepIndex===D),be={stepIndex:D,stepName:P[D].name,expectedFrequency:Math.round(H),detectedFrequency:Math.round(o),adjustedFrequency:Math.round(ae),centDifference:re,accuracy:pe,isCorrect:Ve,correctionFactor:le,correctionDescription:z.description,timestamp:Date.now()};ve>=0?ne[ve]=be:ne.push(be),ne.length%4===0&&ce.realtime(`æ¡ç‚¹é€²æ—: ${ne.length}/${P.length}ã‚¹ãƒ†ãƒƒãƒ—å®Œäº†`)}}function co(){e(0,F="completed"),De.isCompleted=!0,De.averageAccuracy=Math.round(De.correctCount/De.totalCount*100),ie&&ie.stopDetection()}async function pn(){if(s){console.warn("ğŸš« [RestartSame] 8ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†çŠ¶æ…‹ã§ã¯å†æŒ‘æˆ¦ä¸å¯ - æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹ãŒå¿…è¦"),await tt()?(console.log("âœ… [RestartSame] æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹å®Œäº† - ã‚»ãƒƒã‚·ãƒ§ãƒ³1/8ã‹ã‚‰å†é–‹"),window.location.reload()):console.error("âŒ [RestartSame] æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹å¤±æ•—");return}ot(),e(0,F="setup"),L&&(clearTimeout(L),L=null),ie&&ie.resetDisplayState&&ie.resetDisplayState(),ct(),console.log("ğŸ”„ [RestartSame] åŒã˜åŸºéŸ³ã§å†æŒ‘æˆ¦:",p,b+"Hz"),console.log("ğŸ”„ [RestartSame] åŸºéŸ³æƒ…å ±ä¿æŒå®Œäº† - ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œå¾…æ©Ÿ")}async function vn(){if(s){console.warn("ğŸš« [RestartDifferent] 8ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†çŠ¶æ…‹ã§ã¯å†æŒ‘æˆ¦ä¸å¯ - æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹ãŒå¿…è¦"),await tt()?(console.log("âœ… [RestartDifferent] æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹å®Œäº† - ã‚»ãƒƒã‚·ãƒ§ãƒ³1/8ã‹ã‚‰å†é–‹"),window.location.reload()):console.error("âŒ [RestartDifferent] æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹å¤±æ•—");return}ot(),e(0,F="setup"),L&&(clearTimeout(L),L=null),e(7,p=""),e(8,b=0),console.log("ğŸ”„ [restartDifferentBaseNote] åŸºéŸ³æƒ…å ±ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ"),ie&&ie.resetDisplayState&&ie.resetDisplayState(),ct()}function ct(){E=0,R=!1,ne=[],e(10,P=P.map(o=>({...o,state:"inactive",completed:!1})))}async function Sn(){console.log("ğŸš€ [StartNewCycle] 8ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†å¾Œã®æœ€åˆã‹ã‚‰æŒ‘æˆ¦é–‹å§‹");try{await tt()?(console.log("âœ… [StartNewCycle] æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹å®Œäº†"),localStorage.getItem("mic-test-completed")?(console.log("âœ… [StartNewCycle] ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆå®Œäº†ãƒ•ãƒ©ã‚°ç¢ºèª - ãƒªãƒ­ãƒ¼ãƒ‰ãªã—ã§çŠ¶æ…‹ãƒªã‚»ãƒƒãƒˆ"),ot(),await _t(),e(0,F="setup"),ct(),dt(),console.log("âœ… [StartNewCycle] çŠ¶æ…‹ãƒªã‚»ãƒƒãƒˆå®Œäº† - ã‚»ãƒƒã‚·ãƒ§ãƒ³1/8ã‹ã‚‰å†é–‹")):window.location.reload()):(console.error("âŒ [StartNewCycle] æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹å¤±æ•—"),Ze())}catch(o){console.error("âŒ [StartNewCycle] æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹ã‚¨ãƒ©ãƒ¼:",o),Ze()}}function _n(o){const{type:u}=o.detail;switch(u){case"same":pn();break;case"different":vn();break;case"restart":Sn();break;case"home":Ze();break;default:console.warn("ğŸš« [ActionButtons] æœªçŸ¥ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ—:",u)}}function bn(o){const{healthy:u,errors:k,details:D}=o.detail;e(2,C=u),e(6,N=k),u||(console.warn("âš ï¸ ãƒã‚¤ã‚¯ã®å¥åº·çŠ¶æ…‹ãŒæ‚ªåŒ–:",k),F==="guiding"&&(e(0,F="setup"),console.warn("ğŸ›‘ ãƒã‚¤ã‚¯å•é¡Œã«ã‚ˆã‚Šãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’åœæ­¢")))}wn(()=>{console.log("ğŸ”„ [RandomTraining] onDestroy - AudioManagerãƒªã‚½ãƒ¼ã‚¹ã¯ä¿æŒ"),fe&&(fe.dispose(),e(31,fe=null))});const io=[];Bo.keys(t).forEach(o=>{!~io.indexOf(o)&&o.slice(0,2)!=="$$"&&o!=="slot"&&Vo.warn(`<Page> was created with unknown prop '${o}'`)});function lo(o){yo[o?"unshift":"push"](()=>{ie=o,e(22,ie)})}return a.$capture_state=()=>({onMount:qn,onDestroy:wn,goto:pt,base:it,page:vt,ChevronRight:Io,Music:Vn,Card:Qe,Button:ut,VolumeBar:po,PitchDisplay:To,PitchDetector:Bn,PitchDetectionDisplay:Pn,PageLayout:En,Tone:Ao,audioManager:Ue,harmonicCorrection:St,logger:ce,ScoreResultPanel:No,IntervalProgressTracker:Ro,ConsistencyGraph:Co,FeedbackDisplay:Fo,SessionStatistics:Do,UnifiedScoreResultFixed:Qt,ActionButtons:Kt,EvaluationEngine:nt,EnhancedScoringEngine:Fn,trainingProgress:Nt,currentSessionId:Rt,nextBaseNote:Ct,nextBaseName:Ft,isLoading:Dt,storageError:wo,isCompleted:wt,sessionHistory:qt,overallGrade:qo,overallAccuracy:ko,progressPercentage:bo,remainingSessions:kt,latestSessionResult:_o,unifiedScoreData:bt,loadProgress:_t,saveSessionResult:Dn,resetProgress:So,createNewProgress:vo,startNewCycleIfCompleted:tt,getVolumeForDevice:Nn,calculateUnifiedGrade:J,generateTestUnifiedScoreData:Ho,trainingPhase:F,microphoneState:q,microphoneHealthy:C,microphoneErrors:N,buildVersion:Ut,buildTimestamp:Wt,updateStatus:Jt,SCALE_NAMES:W,currentBaseNote:p,currentBaseFrequency:b,isPlaying:V,currentScaleIndex:E,scaleSteps:P,guideAnimationTimer:L,isGuideAnimationActive:R,guideStartProgress:O,isGuideStartBarActive:K,guideStartTimer:x,musicIconGlowing:se,scaleEvaluations:ne,previousEvaluations:_e,currentVolume:he,currentFrequency:ke,detectedNote:Ee,pitchDifference:Le,sessionResults:De,scoringEngine:Fe,currentScoreData:ze,intervalData:Ce,consistencyData:Pe,feedbackData:Oe,technicalFeedbackData:Xe,sessionStatistics:Re,activeTab:ft,noteResultsForDisplay:oe,currentUnifiedScoreData:ue,sampler:fe,isSamplerLoading:Ne,pitchDetectorComponent:ie,mediaStream:Be,audioContext:at,sourceNode:rt,sessionStartTime:We,baseNotes:Ge,checkMicrophonePermission:Je,selectRandomBaseNote:dt,playRandomBaseNote:Xt,playCurrentBaseNote:Yt,playBaseNoteOnly:no,playBaseNote:Zt,startGuideStartBar:$t,cleanupGuideStartBar:oo,calculateExpectedFrequency:Ye,calculateTargetFrequency:en,startGuideAnimation:mt,finishGuideAnimation:tn,calculateFinalResults:nn,getStatusMessage:ao,getDisplayEvaluations:ro,goToMicrophoneTest:on,goHome:Ze,initializeSampler:an,checkExistingMicrophonePermission:st,initializeScoringEngine:rn,updateScoringEngine:sn,generateFinalScoring:cn,generateTestScoreData:ln,switchTab:so,generateUnifiedScoreData:un,saveSessionToStorage:fn,generateEnhancedScoringData:dn,generateFallbackEnhancedData:gt,generateIntervalDataFromResults:Tt,generateIntervalDataFromSessionHistory:An,generateConsistencyDataFromResults:yt,generateFeedbackFromResults:ht,generateTechnicalFeedbackFromEnhancedEngine:mn,handlePitchUpdate:gn,getEvaluationCorrectedFrequency:yn,frequencyToNote:Tn,multiStageOctaveCorrection:It,evaluateScaleStep:hn,completeSession:co,restartSameBaseNote:pn,restartDifferentBaseNote:vn,scrollToTop:ot,resetSessionState:ct,startNewCycle:Sn,handleActionButtonClick:_n,handlePitchDetectorStateChange:eo,handlePitchDetectorError:to,handleMicrophoneHealthChange:bn,canRestartSession:r,canStartTraining:c,$unifiedScoreData:n,$isCompleted:s,$page:i,$currentSessionId:m,$remainingSessions:l,$nextBaseName:f,$nextBaseNote:d,$sessionHistory:g,$trainingProgress:S,$isLoading:y}),a.$inject_state=o=>{"trainingPhase"in o&&e(0,F=o.trainingPhase),"microphoneState"in o&&e(1,q=o.microphoneState),"microphoneHealthy"in o&&e(2,C=o.microphoneHealthy),"microphoneErrors"in o&&e(6,N=o.microphoneErrors),"currentBaseNote"in o&&e(7,p=o.currentBaseNote),"currentBaseFrequency"in o&&e(8,b=o.currentBaseFrequency),"isPlaying"in o&&e(9,V=o.isPlaying),"currentScaleIndex"in o&&(E=o.currentScaleIndex),"scaleSteps"in o&&e(10,P=o.scaleSteps),"guideAnimationTimer"in o&&(L=o.guideAnimationTimer),"isGuideAnimationActive"in o&&(R=o.isGuideAnimationActive),"guideStartProgress"in o&&e(11,O=o.guideStartProgress),"isGuideStartBarActive"in o&&(K=o.isGuideStartBarActive),"guideStartTimer"in o&&(x=o.guideStartTimer),"musicIconGlowing"in o&&e(12,se=o.musicIconGlowing),"scaleEvaluations"in o&&(ne=o.scaleEvaluations),"previousEvaluations"in o&&(_e=o.previousEvaluations),"currentVolume"in o&&e(13,he=o.currentVolume),"currentFrequency"in o&&e(14,ke=o.currentFrequency),"detectedNote"in o&&e(15,Ee=o.detectedNote),"pitchDifference"in o&&(Le=o.pitchDifference),"sessionResults"in o&&(De=o.sessionResults),"scoringEngine"in o&&(Fe=o.scoringEngine),"currentScoreData"in o&&e(16,ze=o.currentScoreData),"intervalData"in o&&e(3,Ce=o.intervalData),"consistencyData"in o&&e(17,Pe=o.consistencyData),"feedbackData"in o&&e(18,Oe=o.feedbackData),"technicalFeedbackData"in o&&e(19,Xe=o.technicalFeedbackData),"sessionStatistics"in o&&e(20,Re=o.sessionStatistics),"activeTab"in o&&(ft=o.activeTab),"noteResultsForDisplay"in o&&(oe=o.noteResultsForDisplay),"currentUnifiedScoreData"in o&&e(21,ue=o.currentUnifiedScoreData),"sampler"in o&&e(31,fe=o.sampler),"isSamplerLoading"in o&&e(32,Ne=o.isSamplerLoading),"pitchDetectorComponent"in o&&e(22,ie=o.pitchDetectorComponent),"mediaStream"in o&&(Be=o.mediaStream),"audioContext"in o&&(at=o.audioContext),"sourceNode"in o&&(rt=o.sourceNode),"sessionStartTime"in o&&(We=o.sessionStartTime),"canRestartSession"in o&&(r=o.canRestartSession),"canStartTraining"in o&&(c=o.canStartTraining)},t&&"$$inject"in t&&a.$inject_state(t.$$inject),a.$$.update=()=>{a.$$.dirty[0]&6|a.$$.dirty[1]&3&&(c=q==="granted"&&!Ne&&fe&&C),a.$$.dirty[0]&1&&(r=F==="results"),a.$$.dirty[0]&56&&n&&s&&n.sessionHistory&&(e(3,Ce=An(n.sessionHistory)),console.log("ğŸµ [RandomTraining] intervalDataç”Ÿæˆå®Œäº†:",Ce.length,"ä»¶")),a.$$.dirty[0]&3&&F==="setup"&&q==="granted"&&ot()},[F,q,C,Ce,n,s,N,p,b,V,P,O,se,he,ke,Ee,ze,Pe,Oe,Xe,Re,ue,ie,g,y,Zt,on,Ze,gn,_n,bn,fe,Ne,lo]}class Xo extends uo{constructor(t){super(t),fo(this,t,xo,Gt,mo,{},null,[-1,-1,-1,-1]),te("SvelteRegisterComponent",{component:this,tagName:"Page",options:t,id:Gt.name})}}export{Xo as component,Qo as universal};
