import{S as Jt,i as Qt,s as Wt,d as L,v as Oe,c as Ge,a as Zt,H as at,Z as qt,b as w,r as F,u as O,K as Et,L as Tt,f as R,z as S,h as b,j as C,k as x,o as _,J as In,n as be,q as $,w as ee,x as te,y as ne,m as D,p as I,Q as Mt,g as d,M as We,A as B,R as xn,e as ct,l as Z,t as X,N as Lt,I as Bn,O as Xt}from"../chunks/DQJjpEFo.js";import{g as Yt}from"../chunks/D0QH3NT1.js";import"../chunks/CCOHz7Q4.js";import{b as Fe,g as Qe}from"../chunks/CYxnSWzZ.js";import{P as Dt,B as It,C as xe}from"../chunks/GmfwjkDy.js";import{p as Nn}from"../chunks/BEmwouqq.js";import{a as gt,l as Vn,h as An,P as $t,b as en,V as Rn}from"../chunks/18BvmwZn.js";import{i as ht,n as vt,u as bt,a as Ct,c as _t,p as pt,l as Ot,S as qn,b as Mn,s as Ln,d as On,r as Gn,e as Gt,f as Fn,g as Hn,o as zn,h as Un,j as Kn,k as Jn,m as Qn,t as Wn,E as wt,A as tn,U as nn,T as Zn,P as Xn,M as on,C as Yn,q as $n,v as eo}from"../chunks/LNx4A-bS.js";const to=!1,no=!1,vo=Object.freeze(Object.defineProperty({__proto__:null,prerender:no,ssr:to},Symbol.toStringTag,{value:"Module"})),{console:oo}=Yt,q="src/lib/components/TrainingCore.svelte";function Ft(l,e,t){const s=l.slice();return s[55]=e[t],s[57]=t,s}function sn(l){let e,t,s,r,n,i,a,m,f,c,h,g=l[3]&&yt(l);s=new xe({props:{class:"main-card half-width",$$slots:{default:[hn]},$$scope:{ctx:l}},$$inline:!0}),n=new xe({props:{class:"main-card half-width",$$slots:{default:[vn]},$$scope:{ctx:l}},$$inline:!0}),a=new xe({props:{class:"main-card",$$slots:{default:[bn]},$$scope:{ctx:l}},$$inline:!0});let p={isActive:l[4]==="granted"&&l[11]==="listening",debugMode:!1};c=new en({props:p,$$inline:!0}),l[34](c),c.$on("pitchUpdate",l[22]),c.$on("error",l[23]);const y={c:function(){g&&g.c(),e=I(),t=_("div"),ne(s.$$.fragment),r=I(),ne(n.$$.fragment),i=I(),ne(a.$$.fragment),m=I(),f=_("div"),ne(c.$$.fragment),this.h()},l:function(u){g&&g.l(u),e=D(u),t=C(u,"DIV",{class:!0});var v=x(t);te(s.$$.fragment,v),r=D(v),te(n.$$.fragment,v),v.forEach(w),i=D(u),te(a.$$.fragment,u),m=D(u),f=C(u,"DIV",{style:!0});var k=x(f);te(c.$$.fragment,k),k.forEach(w),this.h()},h:function(){S(t,"class","side-by-side-container svelte-q662rn"),b(t,q,670,4,21141),We(f,"display","none"),b(f,q,738,4,23247)},m:function(u,v){g&&g.m(u,v),R(u,e,v),R(u,t,v),ee(s,t,null),d(t,r),ee(n,t,null),R(u,i,v),ee(a,u,v),R(u,m,v),R(u,f,v),ee(c,f,null),h=!0},p:function(u,v){u[3]?g?(g.p(u,v),v[0]&8&&O(g,1)):(g=yt(u),g.c(),O(g,1),g.m(e.parentNode,e)):g&&(Et(),F(g,1,1,()=>{g=null}),Tt());const k={};v[0]&3778|v[1]&134217728&&(k.$$scope={dirty:v,ctx:u}),s.$set(k);const N={};v[0]&28672|v[1]&134217728&&(N.$$scope={dirty:v,ctx:u}),n.$set(N);const V={};v[0]&131329|v[1]&134217728&&(V.$$scope={dirty:v,ctx:u}),a.$set(V);const j={};v[0]&2064&&(j.isActive=u[4]==="granted"&&u[11]==="listening"),c.$set(j)},i:function(u){h||(O(g),O(s.$$.fragment,u),O(n.$$.fragment,u),O(a.$$.fragment,u),O(c.$$.fragment,u),h=!0)},o:function(u){F(g),F(s.$$.fragment,u),F(n.$$.fragment,u),F(a.$$.fragment,u),F(c.$$.fragment,u),h=!1},d:function(u){u&&(w(e),w(t),w(i),w(m),w(f)),g&&g.d(u),$(s),$(n),$(a,u),l[34](null),$(c)}};return L("SvelteRegisterBlock",{block:y,id:sn.name,type:"else",source:"(648:2) {:else}",ctx:l}),y}function rn(l){let e,t,s,r;e=new nn({props:{currentScoreData:l[16],intervalData:[],consistencyData:[],feedbackData:null,technicalFeedbackData:null},$$inline:!0}),s=new tn({props:{showRestart:!l[18],showNext:!l[18],showHome:!0},$$inline:!0}),s.$on("restart",l[24]),s.$on("next",l[25]),s.$on("home",l[26]);const n={c:function(){ne(e.$$.fragment),t=I(),ne(s.$$.fragment)},l:function(a){te(e.$$.fragment,a),t=D(a),te(s.$$.fragment,a)},m:function(a,m){ee(e,a,m),R(a,t,m),ee(s,a,m),r=!0},p:function(a,m){const f={};m[0]&65536&&(f.currentScoreData=a[16]),e.$set(f);const c={};m[0]&262144&&(c.showRestart=!a[18]),m[0]&262144&&(c.showNext=!a[18]),s.$set(c)},i:function(a){r||(O(e.$$.fragment,a),O(s.$$.fragment,a),r=!0)},o:function(a){F(e.$$.fragment,a),F(s.$$.fragment,a),r=!1},d:function(a){a&&w(t),$(e,a),$(s,a)}};return L("SvelteRegisterBlock",{block:n,id:rn.name,type:"if",source:"(629:55) ",ctx:l}),n}function ln(l){let e,t;e=new xe({props:{class:"main-card",$$slots:{default:[_n]},$$scope:{ctx:l}},$$inline:!0});const s={c:function(){ne(e.$$.fragment)},l:function(n){te(e.$$.fragment,n)},m:function(n,i){ee(e,n,i),t=!0},p:function(n,i){const a={};i[1]&134217728&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i:function(n){t||(O(e.$$.fragment,n),t=!0)},o:function(n){F(e.$$.fragment,n),t=!1},d:function(n){$(e,n)}};return L("SvelteRegisterBlock",{block:s,id:ln.name,type:"if",source:"(617:72) ",ctx:l}),s}function an(l){let e,t;e=new xe({props:{class:"main-card",$$slots:{default:[pn]},$$scope:{ctx:l}},$$inline:!0});const s={c:function(){ne(e.$$.fragment)},l:function(n){te(e.$$.fragment,n)},m:function(n,i){ee(e,n,i),t=!0},p:function(n,i){const a={};i[1]&134217728&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i:function(n){t||(O(e.$$.fragment,n),t=!0)},o:function(n){F(e.$$.fragment,n),t=!1},d:function(n){$(e,n)}};return L("SvelteRegisterBlock",{block:s,id:an.name,type:"if",source:"(609:2) {#if microphoneState === 'checking'}",ctx:l}),s}function yt(l){let e,t;e=new xe({props:{class:"main-card",$$slots:{default:[cn]},$$scope:{ctx:l}},$$inline:!0});const s={c:function(){ne(e.$$.fragment)},l:function(n){te(e.$$.fragment,n)},m:function(n,i){ee(e,n,i),t=!0},p:function(n,i){const a={};i[0]&1572868|i[1]&134217728&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i:function(n){t||(O(e.$$.fragment,n),t=!0)},o:function(n){F(e.$$.fragment,n),t=!1},d:function(n){$(e,n)}};return L("SvelteRegisterBlock",{block:s,id:yt.name,type:"if",source:"(652:4) {#if useLocalStorage}",ctx:l}),s}function cn(l){let e,t,s="üìä ÈÄ≤ÊçóÁä∂Ê≥Å",r,n,i,a,m,f,c,h,g,p,y;const E={c:function(){e=_("div"),t=_("h3"),t.textContent=s,r=I(),n=_("div"),i=_("div"),a=_("div"),m=X("„Çª„ÉÉ„Ç∑„Éß„É≥ "),f=X(l[19]),c=X(" / "),h=X(l[2]),g=I(),p=_("div"),y=_("div"),this.h()},l:function(v){e=C(v,"DIV",{class:!0});var k=x(e);t=C(k,"H3",{class:!0,"data-svelte-h":!0}),B(t)!=="svelte-r02tv0"&&(t.textContent=s),k.forEach(w),r=D(v),n=C(v,"DIV",{class:!0});var N=x(n);i=C(N,"DIV",{class:!0});var V=x(i);a=C(V,"DIV",{class:!0});var j=x(a);m=Z(j,"„Çª„ÉÉ„Ç∑„Éß„É≥ "),f=Z(j,l[19]),c=Z(j," / "),h=Z(j,l[2]),j.forEach(w),g=D(V),p=C(V,"DIV",{class:!0});var T=x(p);y=C(T,"DIV",{class:!0,style:!0}),x(y).forEach(w),T.forEach(w),V.forEach(w),N.forEach(w),this.h()},h:function(){S(t,"class","section-title svelte-q662rn"),b(t,q,654,10,20666),S(e,"class","card-header svelte-q662rn"),b(e,q,653,8,20630),S(a,"class","session-counter svelte-q662rn"),b(a,q,658,12,20805),S(y,"class","progress-fill svelte-q662rn"),We(y,"width",l[20]+"%"),b(y,q,662,14,20964),S(p,"class","progress-bar svelte-q662rn"),b(p,q,661,12,20923),S(i,"class","progress-info svelte-q662rn"),b(i,q,657,10,20765),S(n,"class","card-content svelte-q662rn"),b(n,q,656,8,20728)},m:function(v,k){R(v,e,k),d(e,t),R(v,r,k),R(v,n,k),d(n,i),d(i,a),d(a,m),d(a,f),d(a,c),d(a,h),d(i,g),d(i,p),d(p,y)},p:function(v,k){k[0]&524288&&ct(f,v[19]),k[0]&4&&ct(h,v[2]),k[0]&1048576&&We(y,"width",v[20]+"%")},d:function(v){v&&(w(e),w(r),w(n))}};return L("SvelteRegisterBlock",{block:E,id:cn.name,type:"slot",source:'(653:6) <Card class=\\"main-card\\">',ctx:l}),E}function un(l){let e;const t={c:function(){e=X("üéπ Âü∫Èü≥ÂÜçÁîü")},l:function(r){e=Z(r,"üéπ Âü∫Èü≥ÂÜçÁîü")},m:function(r,n){R(r,e,n)},d:function(r){r&&w(e)}};return L("SvelteRegisterBlock",{block:t,id:un.name,type:"else",source:"(688:12) {:else}",ctx:l}),t}function fn(l){let e;const t={c:function(){e=X("üîÑ Ëá™ÂãïÂÜçÁîü„É¢„Éº„Éâ")},l:function(r){e=Z(r,"üîÑ Ëá™ÂãïÂÜçÁîü„É¢„Éº„Éâ")},m:function(r,n){R(r,e,n)},d:function(r){r&&w(e)}};return L("SvelteRegisterBlock",{block:t,id:fn.name,type:"if",source:"(686:31) ",ctx:l}),t}function dn(l){let e;const t={c:function(){e=X("‚è≥ Ë™≠„ÅøËæº„Åø‰∏≠...")},l:function(r){e=Z(r,"‚è≥ Ë™≠„ÅøËæº„Åø‰∏≠...")},m:function(r,n){R(r,e,n)},d:function(r){r&&w(e)}};return L("SvelteRegisterBlock",{block:t,id:dn.name,type:"if",source:"(684:39) ",ctx:l}),t}function mn(l){let e;const t={c:function(){e=X("üéµ ÂÜçÁîü‰∏≠...")},l:function(r){e=Z(r,"üéµ ÂÜçÁîü‰∏≠...")},m:function(r,n){R(r,e,n)},d:function(r){r&&w(e)}};return L("SvelteRegisterBlock",{block:t,id:mn.name,type:"if",source:"(682:12) {#if isPlaying}",ctx:l}),t}function gn(l){let e;function t(i,a){return i[7]?mn:i[6]?dn:i[1]?fn:un}let s=t(l),r=s(l);const n={c:function(){r.c(),e=Lt()},l:function(a){r.l(a),e=Lt()},m:function(a,m){r.m(a,m),R(a,e,m)},p:function(a,m){s!==(s=t(a))&&(r.d(1),r=s(a),r&&(r.c(),r.m(e.parentNode,e)))},d:function(a){a&&w(e),r.d(a)}};return L("SvelteRegisterBlock",{block:n,id:gn.name,type:"slot",source:`(677:10) <Button              variant=\\"primary\\"             disabled={isPlaying || isSamplerLoading || (autoPlay && trainingPhase === 'guiding')}             on:click={playBaseNote}           >`,ctx:l}),n}function hn(l){let e,t,s="üéπ Âü∫Èü≥ÂÜçÁîü",r,n,i,a,m,f,c="„Ç¨„Ç§„ÉâÈñãÂßã„Åæ„Åß",h,g,p,y,E,u,v,k;i=new It({props:{variant:"primary",disabled:l[7]||l[6]||l[1]&&l[11]==="guiding",$$slots:{default:[gn]},$$scope:{ctx:l}},$$inline:!0}),i.$on("click",l[21]),u=new on({props:{size:"20"},$$inline:!0});const N={c:function(){e=_("div"),t=_("h3"),t.textContent=s,r=I(),n=_("div"),ne(i.$$.fragment),a=I(),m=_("div"),f=_("div"),f.textContent=c,h=I(),g=_("div"),p=_("div"),y=I(),E=_("div"),ne(u.$$.fragment),this.h()},l:function(j){e=C(j,"DIV",{class:!0});var T=x(e);t=C(T,"H3",{class:!0,"data-svelte-h":!0}),B(t)!=="svelte-syc53b"&&(t.textContent=s),T.forEach(w),r=D(j),n=C(j,"DIV",{class:!0});var H=x(n);te(i.$$.fragment,H),a=D(H),m=C(H,"DIV",{class:!0});var U=x(m);f=C(U,"DIV",{class:!0,"data-svelte-h":!0}),B(f)!=="svelte-1dufnpv"&&(f.textContent=c),h=D(U),g=C(U,"DIV",{class:!0});var re=x(g);p=C(re,"DIV",{class:!0,style:!0}),x(p).forEach(w),y=D(re),E=C(re,"DIV",{class:!0});var Q=x(E);te(u.$$.fragment,Q),Q.forEach(w),re.forEach(w),U.forEach(w),H.forEach(w),this.h()},h:function(){S(t,"class","section-title svelte-q662rn"),b(t,q,673,10,21264),S(e,"class","card-header svelte-q662rn"),b(e,q,672,8,21228),S(f,"class","guide-start-label svelte-q662rn"),b(f,q,694,12,21913),S(p,"class","guide-progress-fill svelte-q662rn"),We(p,"width",l[9]+"%"),b(p,q,696,14,22014),S(E,"class",v="guide-music-icon "+(l[10]?"glowing":"")+" svelte-q662rn"),b(E,q,697,14,22105),S(g,"class","guide-start-bar svelte-q662rn"),b(g,q,695,12,21970),S(m,"class","guide-start-bar-container svelte-q662rn"),b(m,q,693,10,21861),S(n,"class","card-content svelte-q662rn"),b(n,q,675,8,21326)},m:function(j,T){R(j,e,T),d(e,t),R(j,r,T),R(j,n,T),ee(i,n,null),d(n,a),d(n,m),d(m,f),d(m,h),d(m,g),d(g,p),d(g,y),d(g,E),ee(u,E,null),k=!0},p:function(j,T){const H={};T[0]&2242&&(H.disabled=j[7]||j[6]||j[1]&&j[11]==="guiding"),T[0]&194|T[1]&134217728&&(H.$$scope={dirty:T,ctx:j}),i.$set(H),(!k||T[0]&512)&&We(p,"width",j[9]+"%"),(!k||T[0]&1024&&v!==(v="guide-music-icon "+(j[10]?"glowing":"")+" svelte-q662rn"))&&S(E,"class",v)},i:function(j){k||(O(i.$$.fragment,j),O(u.$$.fragment,j),k=!0)},o:function(j){F(i.$$.fragment,j),F(u.$$.fragment,j),k=!1},d:function(j){j&&(w(e),w(r),w(n)),$(i),$(u)}};return L("SvelteRegisterBlock",{block:N,id:hn.name,type:"slot",source:'(672:6) <Card class=\\"main-card half-width\\">',ctx:l}),N}function vn(l){let e,t,s="üé§ „É™„Ç¢„É´„Çø„Ç§„É†Ê§úÂá∫",r,n,i,a;i=new $t({props:{frequency:l[13],note:l[14],volume:l[12],isMuted:!1},$$inline:!0});const m={c:function(){e=_("div"),t=_("h3"),t.textContent=s,r=I(),n=_("div"),ne(i.$$.fragment),this.h()},l:function(c){e=C(c,"DIV",{class:!0});var h=x(e);t=C(h,"H3",{class:!0,"data-svelte-h":!0}),B(t)!=="svelte-1vribo5"&&(t.textContent=s),h.forEach(w),r=D(c),n=C(c,"DIV",{class:!0});var g=x(n);te(i.$$.fragment,g),g.forEach(w),this.h()},h:function(){S(t,"class","section-title svelte-q662rn"),b(t,q,708,10,22414),S(e,"class","card-header svelte-q662rn"),b(e,q,707,8,22378),S(n,"class","card-content svelte-q662rn"),b(n,q,710,8,22480)},m:function(c,h){R(c,e,h),d(e,t),R(c,r,h),R(c,n,h),ee(i,n,null),a=!0},p:function(c,h){const g={};h[0]&8192&&(g.frequency=c[13]),h[0]&16384&&(g.note=c[14]),h[0]&4096&&(g.volume=c[12]),i.$set(g)},i:function(c){a||(O(i.$$.fragment,c),a=!0)},o:function(c){F(i.$$.fragment,c),a=!1},d:function(c){c&&(w(e),w(r),w(n)),$(i)}};return L("SvelteRegisterBlock",{block:m,id:vn.name,type:"slot",source:'(707:6) <Card class=\\"main-card half-width\\">',ctx:l}),m}function kt(l){let e,t=l[55]+"",s,r,n;const i={c:function(){e=_("div"),s=X(t),r=I(),this.h()},l:function(m){e=C(m,"DIV",{class:!0});var f=x(e);s=Z(f,t),r=D(f),f.forEach(w),this.h()},h:function(){var m;S(e,"class",n="scale-item "+(((m=l[8][l[57]])==null?void 0:m.state)||"inactive")+" svelte-q662rn"),b(e,q,729,12,23035)},m:function(m,f){R(m,e,f),d(e,s),d(e,r)},p:function(m,f){var c;f[0]&131072&&t!==(t=m[55]+"")&&ct(s,t),f[0]&256&&n!==(n="scale-item "+(((c=m[8][m[57]])==null?void 0:c.state)||"inactive")+" svelte-q662rn")&&S(e,"class",n)},d:function(m){m&&w(e)}};return L("SvelteRegisterBlock",{block:i,id:kt.name,type:"each",source:"(729:10) {#each currentScale as step, index}",ctx:l}),i}function bn(l){let e,t,s,r=l[0]==="chromatic"?"12":"8",n,i,a,m,f,c=Mt(l[17]),h=[];for(let p=0;p<c.length;p+=1)h[p]=kt(Ft(l,c,p));const g={c:function(){e=_("div"),t=_("h3"),s=X("üéµ "),n=X(r),i=X("Èü≥Èöé„Ç¨„Ç§„Éâ"),a=I(),m=_("div"),f=_("div");for(let y=0;y<h.length;y+=1)h[y].c();this.h()},l:function(y){e=C(y,"DIV",{class:!0});var E=x(e);t=C(E,"H3",{class:!0});var u=x(t);s=Z(u,"üéµ "),n=Z(u,r),i=Z(u,"Èü≥Èöé„Ç¨„Ç§„Éâ"),u.forEach(w),E.forEach(w),a=D(y),m=C(y,"DIV",{class:!0});var v=x(m);f=C(v,"DIV",{class:!0});var k=x(f);for(let N=0;N<h.length;N+=1)h[N].l(k);k.forEach(w),v.forEach(w),this.h()},h:function(){S(t,"class","section-title svelte-q662rn"),b(t,q,724,8,22822),S(e,"class","card-header svelte-q662rn"),b(e,q,723,6,22788),S(f,"class","scale-guide svelte-q662rn"),b(f,q,727,8,22951),S(m,"class","card-content svelte-q662rn"),b(m,q,726,6,22916)},m:function(y,E){R(y,e,E),d(e,t),d(t,s),d(t,n),d(t,i),R(y,a,E),R(y,m,E),d(m,f);for(let u=0;u<h.length;u+=1)h[u]&&h[u].m(f,null)},p:function(y,E){if(E[0]&1&&r!==(r=y[0]==="chromatic"?"12":"8")&&ct(n,r),E[0]&131328){c=Mt(y[17]);let u;for(u=0;u<c.length;u+=1){const v=Ft(y,c,u);h[u]?h[u].p(v,E):(h[u]=kt(v),h[u].c(),h[u].m(f,null))}for(;u<h.length;u+=1)h[u].d(1);h.length=c.length}},d:function(y){y&&(w(e),w(a),w(m)),xn(h,y)}};return L("SvelteRegisterBlock",{block:g,id:bn.name,type:"slot",source:'(723:4) <Card class=\\"main-card\\">',ctx:l}),g}function Cn(l){let e;const t={c:function(){e=X("„Éõ„Éº„É†„Å´Êàª„Çã")},l:function(r){e=Z(r,"„Éõ„Éº„É†„Å´Êàª„Çã")},m:function(r,n){R(r,e,n)},d:function(r){r&&w(e)}};return L("SvelteRegisterBlock",{block:t,id:Cn.name,type:"slot",source:'(623:8) <Button variant=\\"primary\\" on:click={handleBackToHome}>',ctx:l}),t}function _n(l){let e,t,s="‚ö†Ô∏è „Éû„Ç§„ÇØË®±ÂèØ„ÅåÂøÖË¶Å„Åß„Åô",r,n,i="„Éû„Ç§„ÇØ„ÉÜ„Çπ„Éà„Éö„Éº„Ç∏„Åã„ÇâÈñãÂßã„Åó„Å¶„Åè„Å†„Åï„ÅÑ",a,m,f;m=new It({props:{variant:"primary",$$slots:{default:[Cn]},$$scope:{ctx:l}},$$inline:!0}),m.$on("click",l[26]);const c={c:function(){e=_("div"),t=_("h3"),t.textContent=s,r=I(),n=_("p"),n.textContent=i,a=I(),ne(m.$$.fragment),this.h()},l:function(g){e=C(g,"DIV",{class:!0});var p=x(e);t=C(p,"H3",{"data-svelte-h":!0}),B(t)!=="svelte-1iz0ljq"&&(t.textContent=s),r=D(p),n=C(p,"P",{"data-svelte-h":!0}),B(n)!=="svelte-13xvrzt"&&(n.textContent=i),a=D(p),te(m.$$.fragment,p),p.forEach(w),this.h()},h:function(){b(t,q,620,8,19821),b(n,q,621,8,19852),S(e,"class","card-content text-center svelte-q662rn"),b(e,q,619,6,19774)},m:function(g,p){R(g,e,p),d(e,t),d(e,r),d(e,n),d(e,a),ee(m,e,null),f=!0},p:function(g,p){const y={};p[1]&134217728&&(y.$$scope={dirty:p,ctx:g}),m.$set(y)},i:function(g){f||(O(m.$$.fragment,g),f=!0)},o:function(g){F(m.$$.fragment,g),f=!1},d:function(g){g&&w(e),$(m)}};return L("SvelteRegisterBlock",{block:c,id:_n.name,type:"slot",source:'(619:4) <Card class=\\"main-card\\">',ctx:l}),c}function pn(l){let e,t,s="‚è≥ „Éû„Ç§„ÇØÂàùÊúüÂåñ‰∏≠...",r,n,i="„Åó„Å∞„Çâ„Åè„ÅäÂæÖ„Å°„Åè„Å†„Åï„ÅÑ";const a={c:function(){e=_("div"),t=_("h3"),t.textContent=s,r=I(),n=_("p"),n.textContent=i,this.h()},l:function(f){e=C(f,"DIV",{class:!0});var c=x(e);t=C(c,"H3",{"data-svelte-h":!0}),B(t)!=="svelte-1tpl2vf"&&(t.textContent=s),r=D(c),n=C(c,"P",{"data-svelte-h":!0}),B(n)!=="svelte-1vogiv7"&&(n.textContent=i),c.forEach(w),this.h()},h:function(){b(t,q,612,8,19570),b(n,q,613,8,19600),S(e,"class","card-content text-center svelte-q662rn"),b(e,q,611,6,19523)},m:function(f,c){R(f,e,c),d(e,t),d(e,r),d(e,n)},p:be,d:function(f){f&&w(e)}};return L("SvelteRegisterBlock",{block:a,id:pn.name,type:"slot",source:'(611:4) <Card class=\\"main-card\\">',ctx:l}),a}function Pt(l){let e,t,s,r;const n=[an,ln,rn,sn],i=[];function a(f,c){return f[4]==="checking"?0:f[4]==="denied"||f[4]==="error"?1:f[15]&&f[16]?2:3}t=a(l),s=i[t]=n[t](l);const m={c:function(){e=_("div"),s.c(),this.h()},l:function(c){e=C(c,"DIV",{class:!0});var h=x(e);s.l(h),h.forEach(w),this.h()},h:function(){S(e,"class","training-core svelte-q662rn"),b(e,q,606,0,19396)},m:function(c,h){R(c,e,h),i[t].m(e,null),r=!0},p:function(c,h){let g=t;t=a(c),t===g?i[t].p(c,h):(Et(),F(i[g],1,1,()=>{i[g]=null}),Tt(),s=i[t],s?s.p(c,h):(s=i[t]=n[t](c),s.c()),O(s,1),s.m(e,null))},i:function(c){r||(O(s),r=!0)},o:function(c){F(s),r=!1},d:function(c){c&&w(e),i[t].d()}};return L("SvelteRegisterBlock",{block:m,id:Pt.name,type:"component",source:"",ctx:l}),m}function St(){const l=/iPhone/.test(navigator.userAgent),e=/iPad/.test(navigator.userAgent),t=/Macintosh/.test(navigator.userAgent)&&"ontouchend"in document;return l||e||t?(console.log("üîä [TrainingCore] iOS/iPadOSÊ§úÂá∫ - Èü≥Èáè35dBË®≠ÂÆö"),35):(console.log("üîä [TrainingCore] PCÊ§úÂá∫ - Èü≥Èáè-6dBË®≠ÂÆö"),-6)}function Ht(l){return{C4:261.63,Db4:277.18,D4:293.66,Eb4:311.13,E4:329.63,F4:349.23,Gb4:369.99,G4:392,Ab4:415.3,A4:440,Bb4:466.16,B4:493.88,C5:523.25,Db5:554.37,D5:587.33,Eb5:622.25,E5:659.25,F5:698.46,Gb5:739.99,G5:783.99}[l]||261.63}function zt(l,e){return l*([1,1.125,1.25,1.3333333333333333,1.5,1.6666666666666667,1.875,2][e]||1)}function Ut(l,e){return!l||!e||l<=0||e<=0?null:Math.round(1200*Math.log2(l/e))}function Kt(l){if(l===null)return 0;const e=Math.abs(l);return Math.max(0,Math.min(100,100-e/50*100))}function so(l,e,t){let s,r,n,i,a,m,f,c;Oe(ht,"isCompleted"),Ge(l,ht,o=>t(18,n=o)),Oe(vt,"nextBaseNote"),Ge(l,vt,o=>t(42,i=o)),Oe(bt,"unifiedScoreData"),Ge(l,bt,o=>t(43,a=o)),Oe(Ct,"nextBaseName"),Ge(l,Ct,o=>t(44,m=o)),Oe(_t,"currentSessionId"),Ge(l,_t,o=>t(19,f=o)),Oe(pt,"progressPercentage"),Ge(l,pt,o=>t(20,c=o));let{$$slots:h={},$$scope:g}=e;Zt("TrainingCore",h,[]);let{mode:p="random"}=e,{autoPlay:y=!1}=e,{sessionCount:E=8}=e,{baseNote:u=null}=e,{direction:v="asc"}=e,{useLocalStorage:k=!0}=e;const N="random-training-progress";let{onSessionComplete:V=null}=e,{onAllComplete:j=null}=e,{onMicrophoneError:T=null}=e;const H=null;let U="checking",re=null,Q=null,ce=null,Ce=null,ie=null,le=!1,me=!1,G=[],oe=0,Pe=!1,ue="waiting",se=0,ae=0,De="„Éº„Éº",K=[],Se=null,_e=!1,Y=null;at(async()=>{console.log(`üöÄ [TrainingCore] ${p}„É¢„Éº„ÉâÂàùÊúüÂåñÈñãÂßã`);try{k&&(await Ot(),console.log(`‚úÖ [TrainingCore] localStorageÂàùÊúüÂåñÂÆå‰∫Ü: „Çª„ÉÉ„Ç∑„Éß„É≥${f}/8`)),await ge(),await M(),Be(),console.log(`‚úÖ [TrainingCore] ${p}„É¢„Éº„ÉâÂàùÊúüÂåñÂÆå‰∫Ü`)}catch(o){console.error("‚ùå [TrainingCore] ÂàùÊúüÂåñ„Ç®„É©„Éº:",o),T&&T(o.message)}}),qt(()=>{ie&&ie.dispose()});async function ge(){const o=typeof localStorage<"u"&&localStorage.getItem("mic-test-completed")==="true";if(console.log("üé§ [TrainingCore] „Éû„Ç§„ÇØ„ÉÜ„Çπ„ÉàÂÆå‰∫Ü„Éï„É©„Ç∞:",o),!o){console.log("‚ö†Ô∏è [TrainingCore] „Éû„Ç§„ÇØ„ÉÜ„Çπ„ÉàÊú™ÂÆå‰∫Ü - „Éû„Ç§„ÇØ„ÉÜ„Çπ„Éà„Éö„Éº„Ç∏„Å∏„É™„ÉÄ„Ç§„É¨„ÇØ„Éà"),T&&T("„Éû„Ç§„ÇØ„ÉÜ„Çπ„Éà„ÅåÂøÖË¶Å„Åß„Åô");return}new URLSearchParams(window.location.search).get("from")==="microphone-test"?(t(4,U="granted"),console.log("‚úÖ [TrainingCore] „Éû„Ç§„ÇØ„ÉÜ„Çπ„ÉàÁµåÁî±„Åß„Ç¢„ÇØ„Çª„Çπ - Ë®±ÂèØÊ∏à„Åø"),await Ie()):(console.log("üîç [TrainingCore] „ÉÄ„Ç§„É¨„ÇØ„Éà„Ç¢„ÇØ„Çª„ÇπÊ§úÂá∫ - „Éû„Ç§„ÇØË®±ÂèØÁä∂ÊÖãÁ¢∫Ë™ç"),await He())}async function He(){try{(await navigator.permissions.query({name:"microphone"})).state==="granted"?await Ie():(t(4,U="denied"),console.log("‚ö†Ô∏è [TrainingCore] „Éû„Ç§„ÇØË®±ÂèØ„ÅåÂøÖË¶Å„Åß„Åô"))}catch(o){console.error("‚ùå [TrainingCore] „Éû„Ç§„ÇØË®±ÂèØÁ¢∫Ë™ç„Ç®„É©„Éº:",o),t(4,U="error")}}async function Ie(){var o;t(4,U="checking");try{if(console.log("üé§ [TrainingCore] AudioManagerÁµåÁî±„Åß„Éû„Ç§„ÇØË®±ÂèØÁ¢∫Ë™çÈñãÂßã"),!((o=navigator.mediaDevices)!=null&&o.getUserMedia)){t(4,U="error"),console.error("‚ùå [TrainingCore] getUserMediaÊú™ÂØæÂøú„Éñ„É©„Ç¶„Ç∂");return}const A=await gt.initialize();Q=A.audioContext,re=A.mediaStream,ce=A.sourceNode,console.log("‚úÖ [TrainingCore] AudioManager „É™„ÇΩ„Éº„ÇπÂèñÂæóÂÆå‰∫Ü"),t(4,U="granted"),t(11,ue="waiting"),setTimeout(async()=>{if(Ce){console.log("üéôÔ∏è [TrainingCore] PitchDetectorÂàùÊúüÂåñÈñãÂßã");const J=/iPad/.test(navigator.userAgent),we=/Macintosh/.test(navigator.userAgent)&&"ontouchend"in document;if(J||we){console.log("üì± [TrainingCore] iPad/iPadOSÊ§úÂá∫ - AudioManagerÂÜçÂàùÊúüÂåñ");try{await gt.initialize(),console.log("‚úÖ [TrainingCore] AudioManagerÂÜçÂàùÊúüÂåñÂÆå‰∫Ü")}catch(W){console.warn("‚ö†Ô∏è AudioManagerÂÜçÂàùÊúüÂåñ„Ç®„É©„Éº:",W)}}await Ce.initializeWithExternalAudioContext(Q,re),console.log("‚úÖ [TrainingCore] PitchDetectorÂàùÊúüÂåñÂÆå‰∫Ü")}},300)}catch(A){console.error("‚ùå [TrainingCore] „Éû„Ç§„ÇØË®±ÂèØ„Ç®„É©„Éº:",A),t(4,U=(A==null?void 0:A.name)==="NotAllowedError"?"denied":"error"),T&&T(A.message)}}async function M(){try{if(typeof window>"u"){console.log("‚ö†Ô∏è [TrainingCore] SSRÁí∞Â¢ÉÊ§úÂá∫ - Âü∫Èü≥ÂÜçÁîüÂàùÊúüÂåñ„Çπ„Ç≠„ÉÉ„Éó");return}t(6,le=!0),console.log("üéπ [TrainingCore] Salamander Grand Piano Ë™≠„ÅøËæº„ÅøÈñãÂßã"),ie=new qn({urls:{C4:"C4.mp3"},baseUrl:`${Fe}/audio/piano/`,release:1.5,volume:St(),onload:()=>{t(6,le=!1),console.log("‚úÖ [TrainingCore] Salamander PianoÈü≥Ê∫êË™≠„ÅøËæº„ÅøÂÆå‰∫Ü")},onerror:o=>{console.error("‚ùå [TrainingCore] Salamander PianoÈü≥Ê∫êË™≠„ÅøËæº„Åø„Ç®„É©„Éº:",o),t(6,le=!1)}}).toDestination(),await Mn(),t(6,le=!1),console.log("‚úÖ [TrainingCore] Salamander Grand Piano Ë™≠„ÅøËæº„ÅøÂÆå‰∫Ü")}catch(o){console.error("‚ùå [TrainingCore] Âü∫Èü≥ÂÜçÁîüÂàùÊúüÂåñ„Ç®„É©„Éº:",o),t(6,le=!1)}}async function fe(){if(!(me||!ie||le))try{if(typeof window<"u"&&window.Tone){const J=window.Tone.context||window.Tone.getContext();J&&J.state==="suspended"&&(console.log("üîÑ [TrainingCore] AudioContext suspendedÊ§úÂá∫ - ÂÜçÈñã‰∏≠..."),await J.resume(),console.log("‚úÖ [TrainingCore] AudioContextÂÜçÈñãÂÆå‰∫Ü")),$n.state!=="running"&&(await eo(),console.log("üîä [TrainingCore] Tone.js AudioContext ÈñãÂßã"))}t(7,me=!0);let o;if(p==="chromatic"&&u)o=u;else{const J=Math.floor(Math.random()*r.length);o=r[J]}const A=St();ie.volume.value=A,console.log(`üéπ [TrainingCore] Âü∫Èü≥ÂÜçÁîü: ${o} (${A}dB)`),ie.triggerAttackRelease(o,"2n"),Ne(),setTimeout(()=>{t(7,me=!1)},3e3)}catch(o){console.error("‚ùå [TrainingCore] Âü∫Èü≥ÂÜçÁîü„Ç®„É©„Éº:",o),t(7,me=!1)}}function Be(){t(8,G=s.map(()=>({state:"inactive"}))),console.log(`üéµ [TrainingCore] „Ç¨„Ç§„Éâ„Ç∑„Çπ„ÉÜ„É†ÂàùÊúüÂåñ: ${s.length}Èü≥Èöé`)}function Ne(){t(11,ue="guiding");let o=0;const A=setInterval(()=>{o+=2,t(9,oe=o),o>=100&&(clearInterval(A),t(10,Pe=!0),setTimeout(()=>{he()},2e3))},40)}function he(){console.log("üéµ [TrainingCore] „Ç¨„Ç§„Éâ„Ç∑„Éº„Ç±„É≥„ÇπÈñãÂßã");let o=0;const A=setInterval(()=>{o<G.length?(t(8,G[o].state="active",G),o++,t(8,G=[...G])):(clearInterval(A),t(11,ue="listening"),Se=Date.now(),K=s.map(J=>({name:J,cents:null,targetFreq:0,detectedFreq:0,diff:0,accuracy:0})),console.log("üé§ [TrainingCore] „É™„Çπ„Éã„É≥„Ç∞„Éï„Çß„Éº„Ç∫ÈñãÂßã"))},500)}async function ze(){if(!Se)return;const o=Math.round((Date.now()-Se)/1e3),A=u||i,J=m;console.log(`‚úÖ [TrainingCore] „Çª„ÉÉ„Ç∑„Éß„É≥ÂÆå‰∫Ü: ${o}Áßí`),k?await Gt(K,o,A,J)&&(console.log("‚úÖ [TrainingCore] „Çª„ÉÉ„Ç∑„Éß„É≥ÁµêÊûú‰øùÂ≠òÂÆå‰∫Ü"),t(16,Y=a),t(15,_e=!0),V&&V(),n&&j&&j()):(t(16,Y={mode:p,sessionHistory:[{sessionId:1,grade:wt.evaluateSession(K),accuracy:wt.calculateAccuracy(K),baseNote:A,baseName:J,noteResults:K,completedAt:new Date().toISOString()}],isCompleted:!0,totalSessions:1,targetSessions:1}),t(15,_e=!0),V&&V())}function Ve(o){const{frequency:A,note:J,volume:we}=o.detail;t(13,ae=A),t(14,De=J),t(12,se=we),ue==="listening"&&K.length>0&&ve(A)}function ve(o,A){const we=Ht(u||i),W=Ue();if(W>=0&&W<K.length){const qe=zt(we,W),Me=Ut(o,qe);K[W]={name:s[W],cents:Me,targetFreq:qe,detectedFreq:o,diff:o-qe,accuracy:Kt(Me)},K=[...K],K.filter(Xe=>Xe.cents!==null).length>=s.length&&ze()}}function Ue(){for(let o=0;o<G.length;o++)if(G[o].state==="active")return o;return-1}function Ae(o){console.error("‚ùå [TrainingCore] PitchDetector„Ç®„É©„Éº:",o.detail),T&&T(o.detail.error)}function de(){t(15,_e=!1),t(11,ue="waiting"),t(9,oe=0),t(10,Pe=!1),Be()}function Ke(){de(),y&&!n&&setTimeout(()=>fe(),1e3)}function Re(){Qe(`${Fe}/`)}const pe=["mode","autoPlay","sessionCount","baseNote","direction","useLocalStorage","onSessionComplete","onAllComplete","onMicrophoneError"];Object.keys(e).forEach(o=>{!~pe.indexOf(o)&&o.slice(0,2)!=="$$"&&o!=="slot"&&oo.warn(`<TrainingCore> was created with unknown prop '${o}'`)});function Ze(o){In[o?"unshift":"push"](()=>{Ce=o,t(5,Ce)})}return l.$$set=o=>{"mode"in o&&t(0,p=o.mode),"autoPlay"in o&&t(1,y=o.autoPlay),"sessionCount"in o&&t(2,E=o.sessionCount),"baseNote"in o&&t(27,u=o.baseNote),"direction"in o&&t(28,v=o.direction),"useLocalStorage"in o&&t(3,k=o.useLocalStorage),"onSessionComplete"in o&&t(30,V=o.onSessionComplete),"onAllComplete"in o&&t(31,j=o.onAllComplete),"onMicrophoneError"in o&&t(32,T=o.onMicrophoneError)},l.$capture_state=()=>({onMount:at,onDestroy:qt,goto:Qe,base:Fe,page:Nn,ChevronRight:Yn,Music:on,Card:xe,Button:It,VolumeBar:Rn,PitchDisplay:Xn,PitchDetector:en,PitchDetectionDisplay:$t,PageLayout:Dt,Tone:Zn,audioManager:gt,harmonicCorrection:An,logger:Vn,UnifiedScoreResultFixed:nn,ActionButtons:tn,EvaluationEngine:wt,trainingProgress:Wn,currentSessionId:_t,nextBaseNote:vt,nextBaseName:Ct,isLoading:Qn,storageError:Jn,isCompleted:ht,sessionHistory:Kn,overallGrade:Un,overallAccuracy:zn,progressPercentage:pt,remainingSessions:Hn,latestSessionResult:Fn,unifiedScoreData:bt,loadProgress:Ot,saveSessionResult:Gt,resetProgress:Gn,createNewProgress:On,startNewCycleIfCompleted:Ln,mode:p,autoPlay:y,sessionCount:E,baseNote:u,direction:v,useLocalStorage:k,sessionKey:N,onSessionComplete:V,onAllComplete:j,onMicrophoneError:T,onStorageError:H,microphoneState:U,mediaStream:re,audioContext:Q,sourceNode:ce,pitchDetectorComponent:Ce,sampler:ie,isSamplerLoading:le,isPlaying:me,scaleSteps:G,guideStartProgress:oe,musicIconGlowing:Pe,trainingPhase:ue,currentVolume:se,currentFrequency:ae,detectedNote:De,noteResults:K,sessionStartTime:Se,showScoreResult:_e,currentUnifiedScoreData:Y,initializeMicrophone:ge,checkExistingMicrophonePermission:He,checkMicrophonePermission:Ie,getVolumeForDevice:St,initializeBaseNotePlaying:M,playBaseNote:fe,initializeGuideSystem:Be,startGuideAnimation:Ne,executeGuideSequence:he,completeSession:ze,handlePitchUpdate:Ve,processNoteDetection:ve,getCurrentStepIndex:Ue,getFrequencyFromNote:Ht,calculateTargetFrequency:zt,calculateCents:Ut,calculateNoteAccuracy:Kt,handlePitchDetectorError:Ae,handleRestart:de,handleNextSession:Ke,handleBackToHome:Re,currentScale:s,baseNotePool:r,$isCompleted:n,$nextBaseNote:i,$unifiedScoreData:a,$nextBaseName:m,$currentSessionId:f,$progressPercentage:c}),l.$inject_state=o=>{"mode"in o&&t(0,p=o.mode),"autoPlay"in o&&t(1,y=o.autoPlay),"sessionCount"in o&&t(2,E=o.sessionCount),"baseNote"in o&&t(27,u=o.baseNote),"direction"in o&&t(28,v=o.direction),"useLocalStorage"in o&&t(3,k=o.useLocalStorage),"onSessionComplete"in o&&t(30,V=o.onSessionComplete),"onAllComplete"in o&&t(31,j=o.onAllComplete),"onMicrophoneError"in o&&t(32,T=o.onMicrophoneError),"microphoneState"in o&&t(4,U=o.microphoneState),"mediaStream"in o&&(re=o.mediaStream),"audioContext"in o&&(Q=o.audioContext),"sourceNode"in o&&(ce=o.sourceNode),"pitchDetectorComponent"in o&&t(5,Ce=o.pitchDetectorComponent),"sampler"in o&&(ie=o.sampler),"isSamplerLoading"in o&&t(6,le=o.isSamplerLoading),"isPlaying"in o&&t(7,me=o.isPlaying),"scaleSteps"in o&&t(8,G=o.scaleSteps),"guideStartProgress"in o&&t(9,oe=o.guideStartProgress),"musicIconGlowing"in o&&t(10,Pe=o.musicIconGlowing),"trainingPhase"in o&&t(11,ue=o.trainingPhase),"currentVolume"in o&&t(12,se=o.currentVolume),"currentFrequency"in o&&t(13,ae=o.currentFrequency),"detectedNote"in o&&t(14,De=o.detectedNote),"noteResults"in o&&(K=o.noteResults),"sessionStartTime"in o&&(Se=o.sessionStartTime),"showScoreResult"in o&&t(15,_e=o.showScoreResult),"currentUnifiedScoreData"in o&&t(16,Y=o.currentUnifiedScoreData),"currentScale"in o&&t(17,s=o.currentScale),"baseNotePool"in o&&(r=o.baseNotePool)},e&&"$$inject"in e&&l.$inject_state(e.$$inject),l.$$.update=()=>{l.$$.dirty[0]&268435457&&t(17,s=p==="chromatic"?v==="asc"?["„Éâ","„Éâ#","„É¨","„É¨#","„Éü","„Éï„Ç°","„Éï„Ç°#","„ÇΩ","„ÇΩ#","„É©","„É©#","„Ç∑"]:["„Ç∑","„É©#","„É©","„ÇΩ#","„ÇΩ","„Éï„Ç°#","„Éï„Ç°","„Éü","„É¨#","„É¨","„Éâ#","„Éâ"]:["„Éâ","„É¨","„Éü","„Éï„Ç°","„ÇΩ","„É©","„Ç∑","„ÉâÔºàÈ´òÔºâ"]),l.$$.dirty[0]&1&&(r=p==="continuous"?["Bb3","B3","Db4","Eb4","F#4","G#4","Bb4","C#5","Eb5","F#5"]:["C4","Db4","D4","Eb4","E4","F4","Gb4","Ab4","Bb3","B3"])},[p,y,E,k,U,Ce,le,me,G,oe,Pe,ue,se,ae,De,_e,Y,s,n,f,c,fe,Ve,Ae,de,Ke,Re,u,v,N,V,j,T,H,Ze]}class wn extends Jt{constructor(e){super(e),Qt(this,e,so,Pt,Wt,{mode:0,autoPlay:1,sessionCount:2,baseNote:27,direction:28,useLocalStorage:3,sessionKey:29,onSessionComplete:30,onAllComplete:31,onMicrophoneError:32,onStorageError:33},null,[-1,-1]),L("SvelteRegisterComponent",{component:this,tagName:"TrainingCore",options:e,id:Pt.name})}get mode(){throw new Error("<TrainingCore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set mode(e){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get autoPlay(){throw new Error("<TrainingCore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set autoPlay(e){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get sessionCount(){throw new Error("<TrainingCore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set sessionCount(e){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get baseNote(){throw new Error("<TrainingCore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set baseNote(e){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get direction(){throw new Error("<TrainingCore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set direction(e){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get useLocalStorage(){throw new Error("<TrainingCore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set useLocalStorage(e){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get sessionKey(){return this.$$.ctx[29]}set sessionKey(e){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get onSessionComplete(){throw new Error("<TrainingCore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set onSessionComplete(e){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get onAllComplete(){throw new Error("<TrainingCore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set onAllComplete(e){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get onMicrophoneError(){throw new Error("<TrainingCore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set onMicrophoneError(e){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get onStorageError(){return this.$$.ctx[33]}set onStorageError(e){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:ro}=Yt,P="src/routes/training/continuous/+page.svelte";function Sn(l){let e,t,s="‚ö°",r,n,i="Ë™≠„ÅøËæº„Åø‰∏≠...";const a={c:function(){e=_("div"),t=_("div"),t.textContent=s,r=I(),n=_("p"),n.textContent=i,this.h()},l:function(f){e=C(f,"DIV",{class:!0});var c=x(e);t=C(c,"DIV",{class:!0,"data-svelte-h":!0}),B(t)!=="svelte-2fq1u0"&&(t.textContent=s),r=D(c),n=C(c,"P",{"data-svelte-h":!0}),B(n)!=="svelte-c7iph6"&&(n.textContent=i),c.forEach(w),this.h()},h:function(){S(t,"class","loading-spinner svelte-14jb1jb"),b(t,P,156,8,4891),b(n,P,157,8,4936),S(e,"class","loading-placeholder svelte-14jb1jb"),b(e,P,155,6,4849)},m:function(f,c){R(f,e,c),d(e,t),d(e,r),d(e,n)},p:be,i:be,o:be,d:function(f){f&&w(e)}};return L("SvelteRegisterBlock",{block:a,id:Sn.name,type:"if",source:"(154:24) ",ctx:l}),a}function yn(l){let e,t;e=new wn({props:{mode:"continuous",autoPlay:!0,sessionCount:8,useLocalStorage:!0,sessionKey:"continuous-training-progress",onMicrophoneError:l[3],onStorageError:En,onSessionComplete:Tn,onAllComplete:Dn},$$inline:!0});const s={c:function(){ne(e.$$.fragment)},l:function(n){te(e.$$.fragment,n)},m:function(n,i){ee(e,n,i),t=!0},p:be,i:function(n){t||(O(e.$$.fragment,n),t=!0)},o:function(n){F(e.$$.fragment,n),t=!1},d:function(n){$(e,n)}};return L("SvelteRegisterBlock",{block:s,id:yn.name,type:"if",source:"(141:63) ",ctx:l}),s}function kn(l){let e,t,s,r,n="‚ö°",i,a,m,f="ÈÄ£Á∂ö„ÉÅ„É£„É¨„É≥„Ç∏„É¢„Éº„Éâ",c,h,g,p,y="üéØ",E,u,v,k="8„Çª„ÉÉ„Ç∑„Éß„É≥ÈÄ£Á∂ö",N,V,j,T,H,U="üî•",re,Q,ce,Ce="‰∏≠Á¥öÂêë„ÅëÈõ£ÊòìÂ∫¶",ie,le,me,G,oe,Pe="üöÄ",ue,se,ae,De="Ëá™ÂãïÈÄ≤Ë°å",K,Se,_e,Y,ge,He="üéº ‰ΩøÁî®Âü∫Èü≥Ôºà‰∏≠Á¥ö„É¨„Éô„É´Ôºâ",Ie,M,fe,Be="Bb3",Ne,he,ze="B3",Ve,ve,Ue="Db4",Ae,de,Ke="Eb4",Re,pe,Ze="F#4",o,A,J="G#4",we,W,qe="Bb4",Me,ye,Xe="C#5",ut,je,xt="Eb5",ft,Ee,Bt="F#5",dt,ke,Nt="üî• „ÉÅ„É£„É¨„É≥„Ç∏ÈñãÂßãÔºÅ",mt,Vt;const At={c:function(){e=_("div"),t=_("div"),s=_("div"),r=_("div"),r.textContent=n,i=I(),a=_("div"),m=_("h2"),m.textContent=f,c=I(),h=_("div"),g=_("div"),p=_("div"),p.textContent=y,E=I(),u=_("div"),v=_("strong"),v.textContent=k,N=_("br"),V=X(`
                  ÈÄî‰∏≠„ÅßÊ≠¢„Åæ„Çâ„Å™„ÅÑÈõÜ‰∏≠„Éà„É¨„Éº„Éã„É≥„Ç∞`),j=I(),T=_("div"),H=_("div"),H.textContent=U,re=I(),Q=_("div"),ce=_("strong"),ce.textContent=Ce,ie=_("br"),le=X(`
                  „Çà„ÇäÈõ£„Åó„ÅÑÂü∫Èü≥„Åß„ÅÆÊåëÊà¶`),me=I(),G=_("div"),oe=_("div"),oe.textContent=Pe,ue=I(),se=_("div"),ae=_("strong"),ae.textContent=De,K=_("br"),Se=X(`
                  „Çª„ÉÉ„Ç∑„Éß„É≥ÂÆå‰∫ÜÂæå„Å´Ëá™Âãï„ÅßÊ¨°„Å∏`),_e=I(),Y=_("div"),ge=_("h3"),ge.textContent=He,Ie=I(),M=_("div"),fe=_("span"),fe.textContent=Be,Ne=I(),he=_("span"),he.textContent=ze,Ve=I(),ve=_("span"),ve.textContent=Ue,Ae=I(),de=_("span"),de.textContent=Ke,Re=I(),pe=_("span"),pe.textContent=Ze,o=I(),A=_("span"),A.textContent=J,we=I(),W=_("span"),W.textContent=qe,Me=I(),ye=_("span"),ye.textContent=Xe,ut=I(),je=_("span"),je.textContent=xt,ft=I(),Ee=_("span"),Ee.textContent=Bt,dt=I(),ke=_("button"),ke.textContent=Nt,this.h()},l:function(Je){e=C(Je,"DIV",{class:!0});var $e=x(e);t=C($e,"DIV",{class:!0});var et=x(t);s=C(et,"DIV",{class:!0});var Rt=x(s);r=C(Rt,"DIV",{class:!0,"data-svelte-h":!0}),B(r)!=="svelte-9b7bld"&&(r.textContent=n),Rt.forEach(w),i=D(et),a=C(et,"DIV",{class:!0});var Te=x(a);m=C(Te,"H2",{class:!0,"data-svelte-h":!0}),B(m)!=="svelte-1je1qsu"&&(m.textContent=f),c=D(Te),h=C(Te,"DIV",{class:!0});var Le=x(h);g=C(Le,"DIV",{class:!0});var tt=x(g);p=C(tt,"DIV",{class:!0,"data-svelte-h":!0}),B(p)!=="svelte-9nnsxm"&&(p.textContent=y),E=D(tt),u=C(tt,"DIV",{class:!0});var nt=x(u);v=C(nt,"STRONG",{class:!0,"data-svelte-h":!0}),B(v)!=="svelte-uvx9fo"&&(v.textContent=k),N=C(nt,"BR",{}),V=Z(nt,`
                  ÈÄî‰∏≠„ÅßÊ≠¢„Åæ„Çâ„Å™„ÅÑÈõÜ‰∏≠„Éà„É¨„Éº„Éã„É≥„Ç∞`),nt.forEach(w),tt.forEach(w),j=D(Le),T=C(Le,"DIV",{class:!0});var ot=x(T);H=C(ot,"DIV",{class:!0,"data-svelte-h":!0}),B(H)!=="svelte-c6ysz9"&&(H.textContent=U),re=D(ot),Q=C(ot,"DIV",{class:!0});var st=x(Q);ce=C(st,"STRONG",{class:!0,"data-svelte-h":!0}),B(ce)!=="svelte-1g98qif"&&(ce.textContent=Ce),ie=C(st,"BR",{}),le=Z(st,`
                  „Çà„ÇäÈõ£„Åó„ÅÑÂü∫Èü≥„Åß„ÅÆÊåëÊà¶`),st.forEach(w),ot.forEach(w),me=D(Le),G=C(Le,"DIV",{class:!0});var rt=x(G);oe=C(rt,"DIV",{class:!0,"data-svelte-h":!0}),B(oe)!=="svelte-1ypnhme"&&(oe.textContent=Pe),ue=D(rt),se=C(rt,"DIV",{class:!0});var it=x(se);ae=C(it,"STRONG",{class:!0,"data-svelte-h":!0}),B(ae)!=="svelte-1g1wvsb"&&(ae.textContent=De),K=C(it,"BR",{}),Se=Z(it,`
                  „Çª„ÉÉ„Ç∑„Éß„É≥ÂÆå‰∫ÜÂæå„Å´Ëá™Âãï„ÅßÊ¨°„Å∏`),it.forEach(w),rt.forEach(w),Le.forEach(w),_e=D(Te),Y=C(Te,"DIV",{class:!0});var lt=x(Y);ge=C(lt,"H3",{class:!0,"data-svelte-h":!0}),B(ge)!=="svelte-gsfsbo"&&(ge.textContent=He),Ie=D(lt),M=C(lt,"DIV",{class:!0});var z=x(M);fe=C(z,"SPAN",{class:!0,"data-svelte-h":!0}),B(fe)!=="svelte-1cztwaa"&&(fe.textContent=Be),Ne=D(z),he=C(z,"SPAN",{class:!0,"data-svelte-h":!0}),B(he)!=="svelte-1npsk0u"&&(he.textContent=ze),Ve=D(z),ve=C(z,"SPAN",{class:!0,"data-svelte-h":!0}),B(ve)!=="svelte-6itt2f"&&(ve.textContent=Ue),Ae=D(z),de=C(z,"SPAN",{class:!0,"data-svelte-h":!0}),B(de)!=="svelte-1ke7wry"&&(de.textContent=Ke),Re=D(z),pe=C(z,"SPAN",{class:!0,"data-svelte-h":!0}),B(pe)!=="svelte-1nmuxhq"&&(pe.textContent=Ze),o=D(z),A=C(z,"SPAN",{class:!0,"data-svelte-h":!0}),B(A)!=="svelte-1rndh3b"&&(A.textContent=J),we=D(z),W=C(z,"SPAN",{class:!0,"data-svelte-h":!0}),B(W)!=="svelte-1ml1h8x"&&(W.textContent=qe),Me=D(z),ye=C(z,"SPAN",{class:!0,"data-svelte-h":!0}),B(ye)!=="svelte-1e15m8i"&&(ye.textContent=Xe),ut=D(z),je=C(z,"SPAN",{class:!0,"data-svelte-h":!0}),B(je)!=="svelte-g14k23"&&(je.textContent=xt),ft=D(z),Ee=C(z,"SPAN",{class:!0,"data-svelte-h":!0}),B(Ee)!=="svelte-1ut7nin"&&(Ee.textContent=Bt),z.forEach(w),lt.forEach(w),dt=D(Te),ke=C(Te,"BUTTON",{class:!0,"data-svelte-h":!0}),B(ke)!=="svelte-la0s3j"&&(ke.textContent=Nt),Te.forEach(w),et.forEach(w),$e.forEach(w),this.h()},h:function(){S(r,"class","challenge-icon svelte-14jb1jb"),b(r,P,86,12,2397),S(s,"class","challenge-icon-wrapper svelte-14jb1jb"),b(s,P,85,10,2348),S(m,"class","challenge-title svelte-14jb1jb"),b(m,P,90,12,2515),S(p,"class","feature-icon svelte-14jb1jb"),b(p,P,94,16,2674),S(v,"class","svelte-14jb1jb"),b(v,P,96,18,2770),b(N,P,96,43,2795),S(u,"class","feature-text svelte-14jb1jb"),b(u,P,95,16,2725),S(g,"class","feature-item svelte-14jb1jb"),b(g,P,93,14,2631),S(H,"class","feature-icon svelte-14jb1jb"),b(H,P,102,16,2951),S(ce,"class","svelte-14jb1jb"),b(ce,P,104,18,3047),b(ie,P,104,42,3071),S(Q,"class","feature-text svelte-14jb1jb"),b(Q,P,103,16,3002),S(T,"class","feature-item svelte-14jb1jb"),b(T,P,101,14,2908),S(oe,"class","feature-icon svelte-14jb1jb"),b(oe,P,110,16,3222),S(ae,"class","svelte-14jb1jb"),b(ae,P,112,18,3318),b(K,P,112,39,3339),S(se,"class","feature-text svelte-14jb1jb"),b(se,P,111,16,3273),S(G,"class","feature-item svelte-14jb1jb"),b(G,P,109,14,3179),S(h,"class","challenge-features svelte-14jb1jb"),b(h,P,92,12,2584),S(ge,"class","svelte-14jb1jb"),b(ge,P,119,14,3509),S(fe,"class","base-note svelte-14jb1jb"),b(fe,P,121,16,3593),S(he,"class","base-note svelte-14jb1jb"),b(he,P,122,16,3644),S(ve,"class","base-note svelte-14jb1jb"),b(ve,P,123,16,3694),S(de,"class","base-note svelte-14jb1jb"),b(de,P,124,16,3745),S(pe,"class","base-note svelte-14jb1jb"),b(pe,P,125,16,3796),S(A,"class","base-note svelte-14jb1jb"),b(A,P,126,16,3847),S(W,"class","base-note svelte-14jb1jb"),b(W,P,127,16,3898),S(ye,"class","base-note svelte-14jb1jb"),b(ye,P,128,16,3949),S(je,"class","base-note svelte-14jb1jb"),b(je,P,129,16,4e3),S(Ee,"class","base-note svelte-14jb1jb"),b(Ee,P,130,16,4051),S(M,"class","base-notes-grid svelte-14jb1jb"),b(M,P,120,14,3547),S(Y,"class","difficulty-info svelte-14jb1jb"),b(Y,P,118,12,3465),S(ke,"class","start-challenge-button svelte-14jb1jb"),b(ke,P,134,12,4151),S(a,"class","challenge-content"),b(a,P,89,10,2471),S(t,"class","challenge-card svelte-14jb1jb"),b(t,P,84,8,2309),S(e,"class","start-screen svelte-14jb1jb"),b(e,P,83,6,2274)},m:function(Je,$e){R(Je,e,$e),d(e,t),d(t,s),d(s,r),d(t,i),d(t,a),d(a,m),d(a,c),d(a,h),d(h,g),d(g,p),d(g,E),d(g,u),d(u,v),d(u,N),d(u,V),d(h,j),d(h,T),d(T,H),d(T,re),d(T,Q),d(Q,ce),d(Q,ie),d(Q,le),d(h,me),d(h,G),d(G,oe),d(G,ue),d(G,se),d(se,ae),d(se,K),d(se,Se),d(a,_e),d(a,Y),d(Y,ge),d(Y,Ie),d(Y,M),d(M,fe),d(M,Ne),d(M,he),d(M,Ve),d(M,ve),d(M,Ae),d(M,de),d(M,Re),d(M,pe),d(M,o),d(M,A),d(M,we),d(M,W),d(M,Me),d(M,ye),d(M,ut),d(M,je),d(M,ft),d(M,Ee),d(a,dt),d(a,ke),mt||(Vt=Xt(ke,"click",l[4],!1,!1,!1),mt=!0)},p:be,i:be,o:be,d:function(Je){Je&&w(e),mt=!1,Vt()}};return L("SvelteRegisterBlock",{block:At,id:kn.name,type:"if",source:"(82:62) ",ctx:l}),At}function Pn(l){let e,t,s,r="‚ö†Ô∏è",n,i,a,m="„Éû„Ç§„ÇØ„ÉÜ„Çπ„Éà„ÅåÂøÖË¶Å„Åß„Åô",f,c,h="ÈÄ£Á∂ö„ÉÅ„É£„É¨„É≥„Ç∏„ÇíÈñãÂßã„Åô„ÇãÂâç„Å´„ÄÅ„Éû„Ç§„ÇØ„ÅÆÂãï‰ΩúÁ¢∫Ë™ç„ÇíË°å„Å£„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",g,p,y="„Éû„Ç§„ÇØ„ÉÜ„Çπ„Éà„ÇíÈñãÂßã",E,u;const v={c:function(){e=_("div"),t=_("div"),s=_("div"),s.textContent=r,n=I(),i=_("div"),a=_("h3"),a.textContent=m,f=I(),c=_("p"),c.textContent=h,g=I(),p=_("button"),p.textContent=y,this.h()},l:function(N){e=C(N,"DIV",{class:!0});var V=x(e);t=C(V,"DIV",{class:!0});var j=x(t);s=C(j,"DIV",{class:!0,"data-svelte-h":!0}),B(s)!=="svelte-dwi5dc"&&(s.textContent=r),n=D(j),i=C(j,"DIV",{class:!0});var T=x(i);a=C(T,"H3",{class:!0,"data-svelte-h":!0}),B(a)!=="svelte-17kvze2"&&(a.textContent=m),f=D(T),c=C(T,"P",{class:!0,"data-svelte-h":!0}),B(c)!=="svelte-t9m3nr"&&(c.textContent=h),g=D(T),p=C(T,"BUTTON",{class:!0,"data-svelte-h":!0}),B(p)!=="svelte-18xr2xp"&&(p.textContent=y),T.forEach(w),j.forEach(w),V.forEach(w),this.h()},h:function(){S(s,"class","warning-icon svelte-14jb1jb"),b(s,P,68,10,1777),S(a,"class","svelte-14jb1jb"),b(a,P,70,12,1864),S(c,"class","svelte-14jb1jb"),b(c,P,71,12,1897),S(p,"class","mic-test-button svelte-14jb1jb"),b(p,P,72,12,1949),S(i,"class","warning-content svelte-14jb1jb"),b(i,P,69,10,1822),S(t,"class","warning-card svelte-14jb1jb"),b(t,P,67,8,1740),S(e,"class","mic-test-required svelte-14jb1jb"),b(e,P,66,6,1700)},m:function(N,V){R(N,e,V),d(e,t),d(t,s),d(t,n),d(t,i),d(i,a),d(i,f),d(i,c),d(i,g),d(i,p),E||(u=Xt(p,"click",l[5],!1,!1,!1),E=!0)},p:be,i:be,o:be,d:function(N){N&&w(e),E=!1,u()}};return L("SvelteRegisterBlock",{block:v,id:Pn.name,type:"if",source:"(66:4) {#if isClient && !micTestCompleted}",ctx:l}),v}function jn(l){let e,t,s,r="‚ö° ÈÄ£Á∂ö„ÉÅ„É£„É¨„É≥„Ç∏„É¢„Éº„Éâ",n,i,a="‰∏≠Á¥öËÄÖÂêë„ÅëÔºö„Çà„ÇäÈõ£„Åó„ÅÑÂü∫Èü≥„Åß8„Çª„ÉÉ„Ç∑„Éß„É≥ÈÄ£Á∂öÊåëÊà¶",m,f,c,h;const g=[Pn,kn,yn,Sn],p=[];function y(u,v){return u[2]&&!u[0]?0:u[2]&&u[0]&&u[1]?1:u[2]&&u[0]&&!u[1]?2:u[2]?-1:3}~(f=y(l))&&(c=p[f]=g[f](l));const E={c:function(){e=_("div"),t=_("div"),s=_("h1"),s.textContent=r,n=I(),i=_("p"),i.textContent=a,m=I(),c&&c.c(),this.h()},l:function(v){e=C(v,"DIV",{class:!0});var k=x(e);t=C(k,"DIV",{class:!0});var N=x(t);s=C(N,"H1",{class:!0,"data-svelte-h":!0}),B(s)!=="svelte-1nub9gt"&&(s.textContent=r),n=D(N),i=C(N,"P",{class:!0,"data-svelte-h":!0}),B(i)!=="svelte-16c1632"&&(i.textContent=a),N.forEach(w),m=D(k),c&&c.l(k),k.forEach(w),this.h()},h:function(){S(s,"class","page-title svelte-14jb1jb"),b(s,P,58,6,1493),S(i,"class","page-description svelte-14jb1jb"),b(i,P,59,6,1540),S(t,"class","page-header svelte-14jb1jb"),b(t,P,57,4,1461),S(e,"class","continuous-training-page svelte-14jb1jb"),b(e,P,54,2,1392)},m:function(v,k){R(v,e,k),d(e,t),d(t,s),d(t,n),d(t,i),d(e,m),~f&&p[f].m(e,null),h=!0},p:function(v,k){let N=f;f=y(v),f===N?~f&&p[f].p(v,k):(c&&(Et(),F(p[N],1,1,()=>{p[N]=null}),Tt()),~f?(c=p[f],c?c.p(v,k):(c=p[f]=g[f](v),c.c()),O(c,1),c.m(e,null)):c=null)},i:function(v){h||(O(c),h=!0)},o:function(v){F(c),h=!1},d:function(v){v&&w(e),~f&&p[f].d()}};return L("SvelteRegisterBlock",{block:E,id:jn.name,type:"slot",source:"(54:0) <PageLayout showBackButton={true}>",ctx:l}),E}function jt(l){let e,t,s;t=new Dt({props:{showBackButton:!0,$$slots:{default:[jn]},$$scope:{ctx:l}},$$inline:!0});const r={c:function(){e=I(),ne(t.$$.fragment),this.h()},l:function(i){Bn("svelte-13kpo59",document.head).forEach(w),e=D(i),te(t.$$.fragment,i),this.h()},h:function(){document.title="ÈÄ£Á∂ö„ÉÅ„É£„É¨„É≥„Ç∏„É¢„Éº„Éâ - Áõ∏ÂØæÈü≥ÊÑü„Éà„É¨„Éº„Éã„É≥„Ç∞"},m:function(i,a){R(i,e,a),ee(t,i,a),s=!0},p:function(i,[a]){const m={};a&71&&(m.$$scope={dirty:a,ctx:i}),t.$set(m)},i:function(i){s||(O(t.$$.fragment,i),s=!0)},o:function(i){F(t.$$.fragment,i),s=!1},d:function(i){i&&w(e),$(t,i)}};return L("SvelteRegisterBlock",{block:r,id:jt.name,type:"component",source:"",ctx:l}),r}function En(l){console.error("üö® [ContinuousTraining] „Çπ„Éà„É¨„Éº„Ç∏„Ç®„É©„Éº:",l)}function Tn(){console.log("‚úÖ [ContinuousTraining] „Çª„ÉÉ„Ç∑„Éß„É≥ÂÆå‰∫Ü")}function Dn(){console.log("üéâ [ContinuousTraining] 8„Çª„ÉÉ„Ç∑„Éß„É≥ÂÆå‰∫ÜÔºÅ")}function io(l,e,t){let{$$slots:s={},$$scope:r}=e;Zt("Page",s,[]);let n=!1,i=!1,a=!1;at(()=>{t(2,a=!0),typeof localStorage<"u"&&(t(0,n=localStorage.getItem("mic-test-completed")==="true"),console.log("üé§ [ContinuousTraining] „Éû„Ç§„ÇØ„ÉÜ„Çπ„ÉàÂÆå‰∫Ü„Éï„É©„Ç∞:",n))});function m(g){console.error("üö® [ContinuousTraining] „Éû„Ç§„ÇØ„É≠„Éï„Ç©„É≥„Ç®„É©„Éº:",g),Qe(`${Fe}/microphone-test?mode=continuous`)}function f(){t(1,i=!1)}const c=[];Object.keys(e).forEach(g=>{!~c.indexOf(g)&&g.slice(0,2)!=="$$"&&g!=="slot"&&ro.warn(`<Page> was created with unknown prop '${g}'`)});const h=()=>Qe(`${Fe}/microphone-test?mode=continuous`);return l.$capture_state=()=>({onMount:at,goto:Qe,base:Fe,PageLayout:Dt,TrainingCore:wn,micTestCompleted:n,showStartScreen:i,isClient:a,handleMicrophoneError:m,handleStorageError:En,handleSessionComplete:Tn,handleAllComplete:Dn,startChallenge:f}),l.$inject_state=g=>{"micTestCompleted"in g&&t(0,n=g.micTestCompleted),"showStartScreen"in g&&t(1,i=g.showStartScreen),"isClient"in g&&t(2,a=g.isClient)},e&&"$$inject"in e&&l.$inject_state(e.$$inject),[n,i,a,m,f,h]}class bo extends Jt{constructor(e){super(e),Qt(this,e,io,jt,Wt,{}),L("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:jt.name})}}export{bo as component,vo as universal};
