import{S as Ke,i as Ze,s as Qe,d as G,n as Ce,a as We,D as Ie,b as g,G as K,z as _,f as j,g as a,h as p,j as b,k as E,m as S,o as y,p as I,Z as Ct,e as re,O as Re,A as Q,l as V,t as P,E as Et,q as ne,r as X,u as Y,w as se,x as le,y as oe,L as Nt,M as Vt,H as Ee,J as xe,K as Pt}from"../chunks/Dujr-1LT.js";import{g as tt}from"../chunks/D0QH3NT1.js";import"../chunks/B_rl9Jj9.js";import{P as nt,B as we,C as ke}from"../chunks/8fqttIZr.js";const{console:Bt}=tt,Se="src/lib/components/VolumeBar.svelte";function Fe(s){let e,t,r,c,n,o;const d={c:function(){e=y("div"),t=y("div"),r=y("div"),c=I(),n=y("div"),this.h()},l:function(i){e=b(i,"DIV",{class:!0});var u=E(e);t=b(u,"DIV",{class:!0,style:!0});var m=E(t);r=b(m,"DIV",{class:!0,style:!0}),E(r).forEach(g),m.forEach(g),c=S(u),n=b(u,"DIV",{class:!0,style:!0}),E(n).forEach(g),u.forEach(g),this.h()},h:function(){_(r,"class","volume-bar-fill"),K(r,"position","absolute"),K(r,"top","0"),K(r,"left","0"),K(r,"height","100%"),p(r,Se,52,4,1646),_(t,"class","volume-bar-bg"),K(t,"height",s[1]),K(t,"border-radius","9999px"),K(t,"background-color","#e2e8f0"),K(t,"position","relative"),K(t,"overflow","hidden"),p(t,Se,51,2,1500),_(n,"class","threshold-indicator svelte-13z7ppf"),K(n,"position","absolute"),K(n,"top","0"),K(n,"left",s[0]+"%"),K(n,"width","2px"),K(n,"height",s[1]),K(n,"background-color","#64748b"),K(n,"border-radius","1px"),p(n,Se,60,2,1825),_(e,"class",o="volume-bar-container "+s[2]+" svelte-13z7ppf"),p(e,Se,50,0,1451)},m:function(i,u){j(i,e,u),a(e,t),a(t,r),s[5](r),a(e,c),a(e,n)},p:function(i,[u]){u&2&&K(t,"height",i[1]),u&1&&K(n,"left",i[0]+"%"),u&2&&K(n,"height",i[1]),u&4&&o!==(o="volume-bar-container "+i[2]+" svelte-13z7ppf")&&_(e,"class",o)},i:Ce,o:Ce,d:function(i){i&&g(e),s[5](null)}};return G("SvelteRegisterBlock",{block:d,id:Fe.name,type:"component",source:"",ctx:s}),d}function St(s,e,t){let{$$slots:r={},$$scope:c}=e;We("VolumeBar",r,[]);let{volume:n=0}=e,{threshold:o=30}=e,{height:d="12px"}=e,{className:f=""}=e,i;function u(l){return l<o?"#94a3b8":l<60?"#10b981":l<80?"#f59e0b":"#ef4444"}function m(l){if(i){const w=Math.max(0,Math.min(100,l)),A=u(w);(!window.volumeBarLastUpdate||Math.abs(window.volumeBarLastUpdate-w)>10)&&(console.log("VolumeBar更新:",w.toFixed(1),"%","color:",A),window.volumeBarLastUpdate=w),t(3,i.style.width=`${w}%`,i),t(3,i.style.backgroundColor=A,i)}}Ie(()=>{i&&(t(3,i.style.width="0%",i),t(3,i.style.backgroundColor="#94a3b8",i),t(3,i.style.height=d,i),t(3,i.style.borderRadius="9999px",i),t(3,i.style.transition="all 0.1s ease-out",i))});const v=["volume","threshold","height","className"];Object.keys(e).forEach(l=>{!~v.indexOf(l)&&l.slice(0,2)!=="$$"&&l!=="slot"&&Bt.warn(`<VolumeBar> was created with unknown prop '${l}'`)});function h(l){Ct[l?"unshift":"push"](()=>{i=l,t(3,i)})}return s.$$set=l=>{"volume"in l&&t(4,n=l.volume),"threshold"in l&&t(0,o=l.threshold),"height"in l&&t(1,d=l.height),"className"in l&&t(2,f=l.className)},s.$capture_state=()=>({onMount:Ie,volume:n,threshold:o,height:d,className:f,barElement:i,getVolumeColor:u,updateVolumeBar:m}),s.$inject_state=l=>{"volume"in l&&t(4,n=l.volume),"threshold"in l&&t(0,o=l.threshold),"height"in l&&t(1,d=l.height),"className"in l&&t(2,f=l.className),"barElement"in l&&t(3,i=l.barElement)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),s.$$.update=()=>{s.$$.dirty&16&&m(n)},[o,d,f,i,n,h]}class st extends Ke{constructor(e){super(e),Ze(this,e,St,Fe,Qe,{volume:4,threshold:0,height:1,className:2}),G("SvelteRegisterComponent",{component:this,tagName:"VolumeBar",options:e,id:Fe.name})}get volume(){throw new Error("<VolumeBar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set volume(e){throw new Error("<VolumeBar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get threshold(){throw new Error("<VolumeBar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set threshold(e){throw new Error("<VolumeBar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get height(){throw new Error("<VolumeBar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set height(e){throw new Error("<VolumeBar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get className(){throw new Error("<VolumeBar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set className(e){throw new Error("<VolumeBar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const W="src/lib/components/PitchDisplay.svelte";function He(s){let e,t,r="精度",c,n,o,d,f,i,u,m=ze(s[3])+"",v,h,l,w=s[3]>0?"+":"",A,H=s[3].toFixed(1)+"",B,C;const F={c:function(){e=y("div"),t=y("div"),t.textContent=r,c=I(),n=y("div"),o=y("div"),d=I(),f=y("div"),i=I(),u=y("div"),v=P(m),h=I(),l=y("div"),A=P(w),B=P(H),C=P("%"),this.h()},l:function(D){e=b(D,"DIV",{class:!0});var R=E(e);t=b(R,"DIV",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-4oi8f7"&&(t.textContent=r),c=S(R),n=b(R,"DIV",{class:!0});var k=E(n);o=b(k,"DIV",{class:!0,style:!0}),E(o).forEach(g),d=S(k),f=b(k,"DIV",{class:!0}),E(f).forEach(g),k.forEach(g),i=S(R),u=b(R,"DIV",{class:!0,style:!0});var U=E(u);v=V(U,m),U.forEach(g),h=S(R),l=b(R,"DIV",{class:!0});var J=E(l);A=V(J,w),B=V(J,H),C=V(J,"%"),J.forEach(g),R.forEach(g),this.h()},h:function(){_(t,"class","label svelte-17lpbmi"),p(t,W,70,6,1917),_(o,"class","accuracy-bar svelte-17lpbmi"),K(o,"background-color",Ne(s[3])),K(o,"width",Math.abs(s[3])+"%"),p(o,W,72,8,1996),_(f,"class","accuracy-center svelte-17lpbmi"),p(f,W,73,8,2122),_(n,"class","accuracy-bar-container svelte-17lpbmi"),p(n,W,71,6,1951),_(u,"class","accuracy-text svelte-17lpbmi"),K(u,"color",Ne(s[3])),p(u,W,75,6,2177),_(l,"class","accuracy-value svelte-17lpbmi"),p(l,W,78,6,2307),_(e,"class","accuracy-display svelte-17lpbmi"),p(e,W,69,4,1880)},m:function(D,R){j(D,e,R),a(e,t),a(e,c),a(e,n),a(n,o),a(n,d),a(n,f),a(e,i),a(e,u),a(u,v),a(e,h),a(e,l),a(l,A),a(l,B),a(l,C)},p:function(D,R){R&8&&K(o,"background-color",Ne(D[3])),R&8&&K(o,"width",Math.abs(D[3])+"%"),R&8&&m!==(m=ze(D[3])+"")&&re(v,m),R&8&&K(u,"color",Ne(D[3])),R&8&&w!==(w=D[3]>0?"+":"")&&re(A,w),R&8&&H!==(H=D[3].toFixed(1)+"")&&re(B,H)},d:function(D){D&&g(e)}};return G("SvelteRegisterBlock",{block:F,id:He.name,type:"if",source:"(69:2) {#if isDetecting && currentNote}",ctx:s}),F}function $e(s){let e,t,r,c="目標音程",n,o,d=s[6](s[1])+"",f,i,u,m,v="現在の音程",h,l,w=(s[4]&&s[6](s[2])||"---")+"",A,H,B,C,F="周波数",M,D,R=Te(s[0])+"",k,U,J,O=s[4]&&s[2]&&He(s);const L={c:function(){e=y("div"),t=y("div"),r=y("div"),r.textContent=c,n=I(),o=y("div"),f=P(d),i=I(),u=y("div"),m=y("div"),m.textContent=v,h=I(),l=y("div"),A=P(w),H=I(),B=y("div"),C=y("div"),C.textContent=F,M=I(),D=y("div"),k=P(R),U=I(),O&&O.c(),this.h()},l:function($){e=b($,"DIV",{class:!0});var q=E(e);t=b(q,"DIV",{class:!0});var T=E(t);r=b(T,"DIV",{class:!0,"data-svelte-h":!0}),Q(r)!=="svelte-101q5wq"&&(r.textContent=c),n=S(T),o=b(T,"DIV",{class:!0});var ie=E(o);f=V(ie,d),ie.forEach(g),T.forEach(g),i=S(q),u=b(q,"DIV",{class:!0});var ae=E(u);m=b(ae,"DIV",{class:!0,"data-svelte-h":!0}),Q(m)!=="svelte-1p184h3"&&(m.textContent=v),h=S(ae),l=b(ae,"DIV",{class:!0});var x=E(l);A=V(x,w),x.forEach(g),ae.forEach(g),H=S(q),B=b(q,"DIV",{class:!0});var te=E(B);C=b(te,"DIV",{class:!0,"data-svelte-h":!0}),Q(C)!=="svelte-1iigar3"&&(C.textContent=F),M=S(te),D=b(te,"DIV",{class:!0});var ue=E(D);k=V(ue,R),ue.forEach(g),te.forEach(g),U=S(q),O&&O.l(q),q.forEach(g),this.h()},h:function(){_(r,"class","label svelte-17lpbmi"),p(r,W,49,4,1306),_(o,"class","note-name target svelte-17lpbmi"),p(o,W,50,4,1340),_(t,"class","target-note svelte-17lpbmi"),p(t,W,48,2,1276),_(m,"class","label svelte-17lpbmi"),p(m,W,55,4,1469),_(l,"class","note-name current svelte-17lpbmi"),Re(l,"detecting",s[4]),p(l,W,56,4,1504),_(u,"class","current-note svelte-17lpbmi"),p(u,W,54,2,1438),_(C,"class","label svelte-17lpbmi"),p(C,W,63,4,1711),_(D,"class","frequency-value svelte-17lpbmi"),p(D,W,64,4,1744),_(B,"class","frequency-display svelte-17lpbmi"),p(B,W,62,2,1675),_(e,"class",J="pitch-display "+s[5]+" svelte-17lpbmi"),p(e,W,46,0,1216)},m:function($,q){j($,e,q),a(e,t),a(t,r),a(t,n),a(t,o),a(o,f),a(e,i),a(e,u),a(u,m),a(u,h),a(u,l),a(l,A),a(e,H),a(e,B),a(B,C),a(B,M),a(B,D),a(D,k),a(e,U),O&&O.m(e,null)},p:function($,[q]){q&2&&d!==(d=$[6]($[1])+"")&&re(f,d),q&20&&w!==(w=($[4]&&$[6]($[2])||"---")+"")&&re(A,w),q&16&&Re(l,"detecting",$[4]),q&1&&R!==(R=Te($[0])+"")&&re(k,R),$[4]&&$[2]?O?O.p($,q):(O=He($),O.c(),O.m(e,null)):O&&(O.d(1),O=null),q&32&&J!==(J="pitch-display "+$[5]+" svelte-17lpbmi")&&_(e,"class",J)},i:Ce,o:Ce,d:function($){$&&g(e),O&&O.d()}};return G("SvelteRegisterBlock",{block:L,id:$e.name,type:"component",source:"",ctx:s}),L}function Ne(s){const e=Math.abs(s);return e<=10?"#10b981":e<=25?"#f59e0b":"#ef4444"}function ze(s){const e=Math.abs(s);return e<=10?"素晴らしい！":e<=25?"もう少し！":"調整が必要"}function Te(s){return s>0?`${s.toFixed(1)} Hz`:"--.- Hz"}function It(s,e,t){let{$$slots:r={},$$scope:c}=e;We("PitchDisplay",r,[]);let{frequency:n=0}=e,{targetNote:o="C"}=e,{currentNote:d=""}=e,{accuracy:f=0}=e,{isDetecting:i=!1}=e,{className:u=""}=e;const m={C:"ド","C#":"ド#",Db:"レ♭",D:"レ","D#":"レ#",Eb:"ミ♭",E:"ミ",F:"ファ","F#":"ファ#",Gb:"ソ♭",G:"ソ","G#":"ソ#",Ab:"ラ♭",A:"ラ","A#":"ラ#",Bb:"シ♭",B:"シ"};function v(l){return m[l]||l}const h=["frequency","targetNote","currentNote","accuracy","isDetecting","className"];return Object.keys(e).forEach(l=>{!~h.indexOf(l)&&l.slice(0,2)!=="$$"&&l!=="slot"&&console.warn(`<PitchDisplay> was created with unknown prop '${l}'`)}),s.$$set=l=>{"frequency"in l&&t(0,n=l.frequency),"targetNote"in l&&t(1,o=l.targetNote),"currentNote"in l&&t(2,d=l.currentNote),"accuracy"in l&&t(3,f=l.accuracy),"isDetecting"in l&&t(4,i=l.isDetecting),"className"in l&&t(5,u=l.className)},s.$capture_state=()=>({frequency:n,targetNote:o,currentNote:d,accuracy:f,isDetecting:i,className:u,noteNames:m,getAccuracyColor:Ne,getAccuracyMessage:ze,formatFrequency:Te,formatNoteName:v}),s.$inject_state=l=>{"frequency"in l&&t(0,n=l.frequency),"targetNote"in l&&t(1,o=l.targetNote),"currentNote"in l&&t(2,d=l.currentNote),"accuracy"in l&&t(3,f=l.accuracy),"isDetecting"in l&&t(4,i=l.isDetecting),"className"in l&&t(5,u=l.className)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),[n,o,d,f,i,u,v]}class Rt extends Ke{constructor(e){super(e),Ze(this,e,It,$e,Qe,{frequency:0,targetNote:1,currentNote:2,accuracy:3,isDetecting:4,className:5}),G("SvelteRegisterComponent",{component:this,tagName:"PitchDisplay",options:e,id:$e.name})}get frequency(){throw new Error("<PitchDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set frequency(e){throw new Error("<PitchDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get targetNote(){throw new Error("<PitchDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set targetNote(e){throw new Error("<PitchDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get currentNote(){throw new Error("<PitchDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set currentNote(e){throw new Error("<PitchDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get accuracy(){throw new Error("<PitchDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set accuracy(e){throw new Error("<PitchDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get isDetecting(){throw new Error("<PitchDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set isDetecting(e){throw new Error("<PitchDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get className(){throw new Error("<PitchDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set className(e){throw new Error("<PitchDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:qt}=tt,N="src/routes/training/random/+page.svelte";function et(s,e,t){const r=s.slice();return r[18]=e[t],r[20]=t,r}function Oe(s){let e,t,r=s[6]+1+"",c,n;const o={c:function(){e=y("div"),t=P("進行状況: "),c=P(r),n=P("/8"),this.h()},l:function(f){e=b(f,"DIV",{class:!0});var i=E(e);t=V(i,"進行状況: "),c=V(i,r),n=V(i,"/8"),i.forEach(g),this.h()},h:function(){_(e,"class","progress-indicator svelte-liul6h"),p(e,N,161,8,4625)},m:function(f,i){j(f,e,i),a(e,t),a(e,c),a(e,n)},p:Ce,d:function(f){f&&g(e)}};return G("SvelteRegisterBlock",{block:o,id:Oe.name,type:"if",source:"(161:6) {#if trainingPhase === 'detecting'}",ctx:s}),o}function lt(s){let e,t,r=s[12]()+"",c,n,o=s[0]==="detecting"&&Oe(s);const d={c:function(){e=y("div"),t=y("div"),c=P(r),n=I(),o&&o.c(),this.h()},l:function(i){e=b(i,"DIV",{class:!0});var u=E(e);t=b(u,"DIV",{class:!0});var m=E(t);c=V(m,r),m.forEach(g),n=S(u),o&&o.l(u),u.forEach(g),this.h()},h:function(){_(t,"class","status-message svelte-liul6h"),p(t,N,159,6,4520),_(e,"class","status-content svelte-liul6h"),p(e,N,158,4,4485)},m:function(i,u){j(i,e,u),a(e,t),a(t,c),a(e,n),o&&o.m(e,null)},p:function(i,u){i[0]==="detecting"?o?o.p(i,u):(o=Oe(i),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d:function(i){i&&g(e),o&&o.d()}};return G("SvelteRegisterBlock",{block:d,id:lt.name,type:"slot",source:'(158:2) <Card variant=\\"primary\\" class=\\"status-card\\">',ctx:s}),d}function ot(s){let e,t;e=new ke({props:{class:"error-card",$$slots:{default:[rt]},$$scope:{ctx:s}},$$inline:!0});const r={c:function(){oe(e.$$.fragment)},l:function(n){le(e.$$.fragment,n)},m:function(n,o){se(e,n,o),t=!0},p:function(n,o){const d={};o&2097152&&(d.$$scope={dirty:o,ctx:n}),e.$set(d)},i:function(n){t||(Y(e.$$.fragment,n),t=!0)},o:function(n){X(e.$$.fragment,n),t=!1},d:function(n){ne(e,n)}};return G("SvelteRegisterBlock",{block:r,id:ot.name,type:"else",source:"(286:2) {:else}",ctx:s}),r}function ct(s){let e,t,r,c,n,o,d,f,i;t=new ke({props:{class:"main-card half-width",$$slots:{default:[ht]},$$scope:{ctx:s}},$$inline:!0}),c=new ke({props:{class:"main-card half-width",$$slots:{default:[vt]},$$scope:{ctx:s}},$$inline:!0}),o=new ke({props:{class:"main-card",$$slots:{default:[gt]},$$scope:{ctx:s}},$$inline:!0});let u=s[10].isCompleted&&_t(s);const m={c:function(){e=y("div"),oe(t.$$.fragment),r=I(),oe(c.$$.fragment),n=I(),oe(o.$$.fragment),d=I(),u&&u.c(),f=Ee(),this.h()},l:function(h){e=b(h,"DIV",{class:!0});var l=E(e);le(t.$$.fragment,l),r=S(l),le(c.$$.fragment,l),l.forEach(g),n=S(h),le(o.$$.fragment,h),d=S(h),u&&u.l(h),f=Ee(),this.h()},h:function(){_(e,"class","side-by-side-container svelte-liul6h"),p(e,N,172,4,4877)},m:function(h,l){j(h,e,l),se(t,e,null),a(e,r),se(c,e,null),j(h,n,l),se(o,h,l),j(h,d,l),u&&u.m(h,l),j(h,f,l),i=!0},p:function(h,l){const w={};l&2097181&&(w.$$scope={dirty:l,ctx:h}),t.$set(w);const A={};l&2097152&&(A.$$scope={dirty:l,ctx:h}),c.$set(A);const H={};l&2097185&&(H.$$scope={dirty:l,ctx:h}),o.$set(H),h[10].isCompleted&&u.p(h,l)},i:function(h){i||(Y(t.$$.fragment,h),Y(c.$$.fragment,h),Y(o.$$.fragment,h),Y(u),i=!0)},o:function(h){X(t.$$.fragment,h),X(c.$$.fragment,h),X(o.$$.fragment,h),X(u),i=!1},d:function(h){h&&(g(e),g(n),g(d),g(f)),ne(t),ne(c),ne(o,h),u&&u.d(h)}};return G("SvelteRegisterBlock",{block:m,id:ct.name,type:"if",source:"(169:2) {#if microphoneState === 'granted'}",ctx:s}),m}function it(s){let e;const t={c:function(){e=P("🎤 マイクテストページへ移動")},l:function(c){e=V(c,"🎤 マイクテストページへ移動")},m:function(c,n){j(c,e,n)},d:function(c){c&&g(e)}};return G("SvelteRegisterBlock",{block:t,id:it.name,type:"slot",source:'(300:10) <Button variant=\\"primary\\" on:click={goToMicrophoneTest}>',ctx:s}),t}function at(s){let e;const t={c:function(){e=P("🏠 ホームに戻る")},l:function(c){e=V(c,"🏠 ホームに戻る")},m:function(c,n){j(c,e,n)},d:function(c){c&&g(e)}};return G("SvelteRegisterBlock",{block:t,id:at.name,type:"slot",source:'(303:10) <Button variant=\\"secondary\\" on:click={goHome}>',ctx:s}),t}function rt(s){let e,t,r="🎤",c,n,o="マイクテストが必要です",d,f,i="ランダム基音トレーニングを開始する前に、マイクテストページで音声入力の確認をお願いします。",u,m,v,h,l,w="マイクテスト完了後",A,H,B,C="まずはマイクテストページで音声確認を行ってください。",F,M,D,R,k,U;D=new we({props:{variant:"primary",$$slots:{default:[it]},$$scope:{ctx:s}},$$inline:!0}),D.$on("click",Dt),k=new we({props:{variant:"secondary",$$slots:{default:[at]},$$scope:{ctx:s}},$$inline:!0}),k.$on("click",Xe);const J={c:function(){e=y("div"),t=y("div"),t.textContent=r,c=I(),n=y("h3"),n.textContent=o,d=I(),f=y("p"),f.textContent=i,u=I(),m=y("div"),v=y("p"),h=P("このページは"),l=y("strong"),l.textContent=w,A=P("にご利用いただけます。"),H=I(),B=y("p"),B.textContent=C,F=I(),M=y("div"),oe(D.$$.fragment),R=I(),oe(k.$$.fragment),this.h()},l:function(L){e=b(L,"DIV",{class:!0});var z=E(e);t=b(z,"DIV",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-15rbx8n"&&(t.textContent=r),c=S(z),n=b(z,"H3",{class:!0,"data-svelte-h":!0}),Q(n)!=="svelte-17kvze2"&&(n.textContent=o),d=S(z),f=b(z,"P",{class:!0,"data-svelte-h":!0}),Q(f)!=="svelte-12s9olt"&&(f.textContent=i),u=S(z),m=b(z,"DIV",{class:!0});var $=E(m);v=b($,"P",{class:!0});var q=E(v);h=V(q,"このページは"),l=b(q,"STRONG",{"data-svelte-h":!0}),Q(l)!=="svelte-1n3qsr6"&&(l.textContent=w),A=V(q,"にご利用いただけます。"),q.forEach(g),H=S($),B=b($,"P",{class:!0,"data-svelte-h":!0}),Q(B)!=="svelte-v8nd09"&&(B.textContent=C),$.forEach(g),F=S(z),M=b(z,"DIV",{class:!0});var T=E(M);le(D.$$.fragment,T),R=S(T),le(k.$$.fragment,T),T.forEach(g),z.forEach(g),this.h()},h:function(){_(t,"class","error-icon svelte-liul6h"),p(t,N,289,8,8825),_(n,"class","svelte-liul6h"),p(n,N,290,8,8866),_(f,"class","svelte-liul6h"),p(f,N,291,8,8895),p(l,N,294,19,9013),_(v,"class","svelte-liul6h"),p(v,N,294,10,9004),_(B,"class","svelte-liul6h"),p(B,N,295,10,9065),_(m,"class","recommendation svelte-liul6h"),p(m,N,293,8,8965),_(M,"class","action-buttons svelte-liul6h"),p(M,N,298,8,9131),_(e,"class","error-content svelte-liul6h"),p(e,N,288,6,8789)},m:function(L,z){j(L,e,z),a(e,t),a(e,c),a(e,n),a(e,d),a(e,f),a(e,u),a(e,m),a(m,v),a(v,h),a(v,l),a(v,A),a(m,H),a(m,B),a(e,F),a(e,M),se(D,M,null),a(M,R),se(k,M,null),U=!0},p:function(L,z){const $={};z&2097152&&($.$$scope={dirty:z,ctx:L}),D.$set($);const q={};z&2097152&&(q.$$scope={dirty:z,ctx:L}),k.$set(q)},i:function(L){U||(Y(D.$$.fragment,L),Y(k.$$.fragment,L),U=!0)},o:function(L){X(D.$$.fragment,L),X(k.$$.fragment,L),U=!1},d:function(L){L&&g(e),ne(D),ne(k)}};return G("SvelteRegisterBlock",{block:J,id:rt.name,type:"slot",source:'(288:4) <Card class=\\"error-card\\">',ctx:s}),J}function ut(s){let e;const t={c:function(){e=P("🔄 再生")},l:function(c){e=V(c,"🔄 再生")},m:function(c,n){j(c,e,n)},d:function(c){c&&g(e)}};return G("SvelteRegisterBlock",{block:t,id:ut.name,type:"else",source:"(189:12) {:else}",ctx:s}),t}function ft(s){let e;const t={c:function(){e=P("🎹 ランダム基音再生")},l:function(c){e=V(c,"🎹 ランダム基音再生")},m:function(c,n){j(c,e,n)},d:function(c){c&&g(e)}};return G("SvelteRegisterBlock",{block:t,id:ft.name,type:"if",source:"(187:48) ",ctx:s}),t}function dt(s){let e;const t={c:function(){e=P("🎵 再生中...")},l:function(c){e=V(c,"🎵 再生中...")},m:function(c,n){j(c,e,n)},d:function(c){c&&g(e)}};return G("SvelteRegisterBlock",{block:t,id:dt.name,type:"if",source:"(185:12) {#if isPlaying}",ctx:s}),t}function mt(s){let e;function t(o,d){return o[4]?dt:o[0]==="setup"?ft:ut}let r=t(s),c=r(s);const n={c:function(){c.c(),e=Ee()},l:function(d){c.l(d),e=Ee()},m:function(d,f){c.m(d,f),j(d,e,f)},p:function(d,f){r!==(r=t(d))&&(c.d(1),c=r(d),c&&(c.c(),c.m(e.parentNode,e)))},d:function(d){d&&g(e),c.d(d)}};return G("SvelteRegisterBlock",{block:n,id:mt.name,type:"slot",source:`(180:10) <Button              variant=\\"primary\\"             disabled={isPlaying || trainingPhase === 'detecting'}             on:click={playBaseNote}           >`,ctx:s}),n}function Ge(s){let e,t,r,c,n,o=s[3].toFixed(1)+"",d,f;const i={c:function(){e=y("div"),t=P("現在の基音: "),r=y("strong"),c=P(s[2]),n=P(" ("),d=P(o),f=P("Hz)"),this.h()},l:function(m){e=b(m,"DIV",{class:!0});var v=E(e);t=V(v,"現在の基音: "),r=b(v,"STRONG",{});var h=E(r);c=V(h,s[2]),h.forEach(g),n=V(v," ("),d=V(v,o),f=V(v,"Hz)"),v.forEach(g),this.h()},h:function(){p(r,N,195,21,5595),_(e,"class","base-note-info svelte-liul6h"),p(e,N,194,12,5545)},m:function(m,v){j(m,e,v),a(e,t),a(e,r),a(r,c),a(e,n),a(e,d),a(e,f)},p:function(m,v){v&4&&re(c,m[2]),v&8&&o!==(o=m[3].toFixed(1)+"")&&re(d,o)},d:function(m){m&&g(e)}};return G("SvelteRegisterBlock",{block:i,id:Ge.name,type:"if",source:"(194:10) {#if currentBaseNote}",ctx:s}),i}function ht(s){let e,t,r="🎹 基音再生",c,n,o,d,f;o=new we({props:{variant:"primary",disabled:s[4]||s[0]==="detecting",$$slots:{default:[mt]},$$scope:{ctx:s}},$$inline:!0}),o.$on("click",s[11]);let i=s[2]&&Ge(s);const u={c:function(){e=y("div"),t=y("h3"),t.textContent=r,c=I(),n=y("div"),oe(o.$$.fragment),d=I(),i&&i.c(),this.h()},l:function(v){e=b(v,"DIV",{class:!0});var h=E(e);t=b(h,"H3",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-syc53b"&&(t.textContent=r),h.forEach(g),c=S(v),n=b(v,"DIV",{class:!0});var l=E(n);le(o.$$.fragment,l),d=S(l),i&&i.l(l),l.forEach(g),this.h()},h:function(){_(t,"class","section-title svelte-liul6h"),p(t,N,176,10,5033),_(e,"class","card-header svelte-liul6h"),p(e,N,175,8,4997),_(n,"class","card-content svelte-liul6h"),p(n,N,178,8,5095)},m:function(v,h){j(v,e,h),a(e,t),j(v,c,h),j(v,n,h),se(o,n,null),a(n,d),i&&i.m(n,null),f=!0},p:function(v,h){const l={};h&17&&(l.disabled=v[4]||v[0]==="detecting"),h&2097169&&(l.$$scope={dirty:h,ctx:v}),o.$set(l),v[2]?i?i.p(v,h):(i=Ge(v),i.c(),i.m(n,null)):i&&(i.d(1),i=null)},i:function(v){f||(Y(o.$$.fragment,v),f=!0)},o:function(v){X(o.$$.fragment,v),f=!1},d:function(v){v&&(g(e),g(c),g(n)),ne(o),i&&i.d()}};return G("SvelteRegisterBlock",{block:u,id:ht.name,type:"slot",source:'(175:6) <Card class=\\"main-card half-width\\">',ctx:s}),u}function vt(s){let e,t,r="🎙️ リアルタイム音程検出",c,n,o,d,f,i="検出中:",u,m,v,h,l,w,A=s[9]>0?"+":"",H,B,C,F,M,D,R,k=Math.round(s[7])+"",U,J,O,L,z;L=new st({props:{volume:s[7],className:"modern-volume-bar"},$$inline:!0});const $={c:function(){e=y("div"),t=y("h3"),t.textContent=r,c=I(),n=y("div"),o=y("div"),d=y("div"),f=y("span"),f.textContent=i,u=I(),m=y("span"),v=P(s[8]),h=I(),l=y("span"),w=P("("),H=P(A),B=P(s[9]),C=P("セント)"),F=I(),M=y("div"),D=y("div"),R=P("音量レベル: "),U=P(k),J=P("%"),O=I(),oe(L.$$.fragment),this.h()},l:function(T){e=b(T,"DIV",{class:!0});var ie=E(e);t=b(ie,"H3",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-1bj87i9"&&(t.textContent=r),ie.forEach(g),c=S(T),n=b(T,"DIV",{class:!0});var ae=E(n);o=b(ae,"DIV",{class:!0});var x=E(o);d=b(x,"DIV",{class:!0});var te=E(d);f=b(te,"SPAN",{class:!0,"data-svelte-h":!0}),Q(f)!=="svelte-1ybkh45"&&(f.textContent=i),u=S(te),m=b(te,"SPAN",{class:!0});var ue=E(m);v=V(ue,s[8]),ue.forEach(g),h=S(te),l=b(te,"SPAN",{class:!0});var fe=E(l);w=V(fe,"("),H=V(fe,A),B=V(fe,s[9]),C=V(fe,"セント)"),fe.forEach(g),te.forEach(g),F=S(x),M=b(x,"DIV",{class:!0});var ve=E(M);D=b(ve,"DIV",{class:!0});var ee=E(D);R=V(ee,"音量レベル: "),U=V(ee,k),J=V(ee,"%"),ee.forEach(g),O=S(ve),le(L.$$.fragment,ve),ve.forEach(g),x.forEach(g),ae.forEach(g),this.h()},h:function(){_(t,"class","section-title svelte-liul6h"),p(t,N,204,10,5869),_(e,"class","card-header svelte-liul6h"),p(e,N,203,8,5833),_(f,"class","detected-label svelte-liul6h"),p(f,N,209,14,6061),_(m,"class","detected-note svelte-liul6h"),p(m,N,210,14,6116),_(l,"class","pitch-diff svelte-liul6h"),p(l,N,211,14,6180),_(d,"class","detected-info svelte-liul6h"),p(d,N,208,12,6019),_(D,"class","volume-label svelte-liul6h"),p(D,N,215,14,6354),_(M,"class","volume-section svelte-liul6h"),p(M,N,214,12,6311),_(o,"class","detection-display svelte-liul6h"),p(o,N,207,10,5975),_(n,"class","card-content svelte-liul6h"),p(n,N,206,8,5938)},m:function(T,ie){j(T,e,ie),a(e,t),j(T,c,ie),j(T,n,ie),a(n,o),a(o,d),a(d,f),a(d,u),a(d,m),a(m,v),a(d,h),a(d,l),a(l,w),a(l,H),a(l,B),a(l,C),a(o,F),a(o,M),a(M,D),a(D,R),a(D,U),a(D,J),a(M,O),se(L,M,null),z=!0},p:Ce,i:function(T){z||(Y(L.$$.fragment,T),z=!0)},o:function(T){X(L.$$.fragment,T),z=!1},d:function(T){T&&(g(e),g(c),g(n)),ne(L)}};return G("SvelteRegisterBlock",{block:$,id:vt.name,type:"slot",source:'(203:6) <Card class=\\"main-card half-width\\">',ctx:s}),$}function Le(s){let e,t=s[18].name+"",r,c,n;const o={c:function(){e=y("div"),r=P(t),c=I(),this.h()},l:function(f){e=b(f,"DIV",{class:!0});var i=E(e);r=V(i,t),c=S(i),i.forEach(g),this.h()},h:function(){_(e,"class",n="scale-item "+s[18].state+" svelte-liul6h"),Re(e,"current",s[20]===s[6]),p(e,N,231,12,6860)},m:function(f,i){j(f,e,i),a(e,r),a(e,c)},p:function(f,i){i&32&&t!==(t=f[18].name+"")&&re(r,t),i&32&&n!==(n="scale-item "+f[18].state+" svelte-liul6h")&&_(e,"class",n),i&96&&Re(e,"current",f[20]===f[6])},d:function(f){f&&g(e)}};return G("SvelteRegisterBlock",{block:o,id:Le.name,type:"each",source:"(231:10) {#each scaleSteps as step, index}",ctx:s}),o}function Ue(s){let e,t,r,c=s[5][s[6]].name+"",n,o;const d={c:function(){e=y("div"),t=P("現在: "),r=y("strong"),n=P(c),o=P(" を歌ってください"),this.h()},l:function(i){e=b(i,"DIV",{class:!0});var u=E(e);t=V(u,"現在: "),r=b(u,"STRONG",{});var m=E(r);n=V(m,c),m.forEach(g),o=V(u," を歌ってください"),u.forEach(g),this.h()},h:function(){p(r,N,241,16,7164),_(e,"class","guide-instruction svelte-liul6h"),p(e,N,240,10,7116)},m:function(i,u){j(i,e,u),a(e,t),a(e,r),a(r,n),a(e,o)},p:function(i,u){u&32&&c!==(c=i[5][i[6]].name+"")&&re(n,c)},d:function(i){i&&g(e)}};return G("SvelteRegisterBlock",{block:d,id:Ue.name,type:"if",source:"(240:8) {#if trainingPhase === 'detecting'}",ctx:s}),d}function gt(s){let e,t,r="🎵 相対音程ガイド",c,n,o,d,f=xe(s[5]),i=[];for(let v=0;v<f.length;v+=1)i[v]=Le(et(s,f,v));let u=s[0]==="detecting"&&Ue(s);const m={c:function(){e=y("div"),t=y("h3"),t.textContent=r,c=I(),n=y("div"),o=y("div");for(let h=0;h<i.length;h+=1)i[h].c();d=I(),u&&u.c(),this.h()},l:function(h){e=b(h,"DIV",{class:!0});var l=E(e);t=b(l,"H3",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-jpdpkv"&&(t.textContent=r),l.forEach(g),c=S(h),n=b(h,"DIV",{class:!0});var w=E(n);o=b(w,"DIV",{class:!0});var A=E(o);for(let H=0;H<i.length;H+=1)i[H].l(A);A.forEach(g),d=S(w),u&&u.l(w),w.forEach(g),this.h()},h:function(){_(t,"class","section-title svelte-liul6h"),p(t,N,226,8,6682),_(e,"class","card-header svelte-liul6h"),p(e,N,225,6,6648),_(o,"class","scale-guide svelte-liul6h"),p(o,N,229,8,6778),_(n,"class","card-content svelte-liul6h"),p(n,N,228,6,6743)},m:function(h,l){j(h,e,l),a(e,t),j(h,c,l),j(h,n,l),a(n,o);for(let w=0;w<i.length;w+=1)i[w]&&i[w].m(o,null);a(n,d),u&&u.m(n,null)},p:function(h,l){if(l&96){f=xe(h[5]);let w;for(w=0;w<f.length;w+=1){const A=et(h,f,w);i[w]?i[w].p(A,l):(i[w]=Le(A),i[w].c(),i[w].m(o,null))}for(;w<i.length;w+=1)i[w].d(1);i.length=f.length}h[0]==="detecting"?u?u.p(h,l):(u=Ue(h),u.c(),u.m(n,null)):u&&(u.d(1),u=null)},d:function(h){h&&(g(e),g(c),g(n)),Pt(i,h),u&&u.d()}};return G("SvelteRegisterBlock",{block:m,id:gt.name,type:"slot",source:'(225:4) <Card class=\\"main-card\\">',ctx:s}),m}function _t(s){let e,t;e=new ke({props:{class:"main-card results-card",$$slots:{default:[wt]},$$scope:{ctx:s}},$$inline:!0});const r={c:function(){oe(e.$$.fragment)},l:function(n){le(e.$$.fragment,n)},m:function(n,o){se(e,n,o),t=!0},p:function(n,o){const d={};o&2097152&&(d.$$scope={dirty:o,ctx:n}),e.$set(d)},i:function(n){t||(Y(e.$$.fragment,n),t=!0)},o:function(n){X(e.$$.fragment,n),t=!1},d:function(n){ne(e,n)}};return G("SvelteRegisterBlock",{block:r,id:_t.name,type:"if",source:"(250:4) {#if sessionResults.isCompleted}",ctx:s}),r}function pt(s){let e;const t={c:function(){e=P("🔄 再挑戦")},l:function(c){e=V(c,"🔄 再挑戦")},m:function(c,n){j(c,e,n)},d:function(c){c&&g(e)}};return G("SvelteRegisterBlock",{block:t,id:pt.name,type:"slot",source:'(272:12) <Button class=\\"primary-button\\" on:click={() => window.location.reload()}>',ctx:s}),t}function bt(s){let e;const t={c:function(){e=P("🎊 SNS共有")},l:function(c){e=V(c,"🎊 SNS共有")},m:function(c,n){j(c,e,n)},d:function(c){c&&g(e)}};return G("SvelteRegisterBlock",{block:t,id:bt.name,type:"slot",source:'(275:12) <Button class=\\"secondary-button\\">',ctx:s}),t}function yt(s){let e;const t={c:function(){e=P("🏠 ホーム")},l:function(c){e=V(c,"🏠 ホーム")},m:function(c,n){j(c,e,n)},d:function(c){c&&g(e)}};return G("SvelteRegisterBlock",{block:t,id:yt.name,type:"slot",source:'(278:12) <Button class=\\"secondary-button\\" on:click={goHome}>',ctx:s}),t}function wt(s){let e,t,r="🎉 セッション完了",c,n,o,d,f,i="正解率",u,m,v=s[10].correctCount+"",h,l,w=s[10].totalCount+"",A,H,B=Math.round(s[10].correctCount/s[10].totalCount*100)+"",C,F,M,D,R,k="平均精度",U,J,O=s[10].averageAccuracy+"",L,z,$,q,T,ie="平均時間",ae,x,te=s[10].averageTime+"",ue,fe,ve,ee,de,qe,ge,Ae,me,Ve;de=new we({props:{class:"primary-button",$$slots:{default:[pt]},$$scope:{ctx:s}},$$inline:!0}),de.$on("click",s[13]),ge=new we({props:{class:"secondary-button",$$slots:{default:[bt]},$$scope:{ctx:s}},$$inline:!0}),me=new we({props:{class:"secondary-button",$$slots:{default:[yt]},$$scope:{ctx:s}},$$inline:!0}),me.$on("click",Xe);const Ye={c:function(){e=y("div"),t=y("h3"),t.textContent=r,c=I(),n=y("div"),o=y("div"),d=y("div"),f=y("span"),f.textContent=i,u=I(),m=y("span"),h=P(v),l=P("/"),A=P(w),H=P(" ("),C=P(B),F=P("%)"),M=I(),D=y("div"),R=y("span"),R.textContent=k,U=I(),J=y("span"),L=P(O),z=P("%"),$=I(),q=y("div"),T=y("span"),T.textContent=ie,ae=I(),x=y("span"),ue=P(te),fe=P("秒"),ve=I(),ee=y("div"),oe(de.$$.fragment),qe=I(),oe(ge.$$.fragment),Ae=I(),oe(me.$$.fragment),this.h()},l:function(Z){e=b(Z,"DIV",{class:!0});var ce=E(e);t=b(ce,"H3",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-1gwq6en"&&(t.textContent=r),ce.forEach(g),c=S(Z),n=b(Z,"DIV",{class:!0});var pe=E(n);o=b(pe,"DIV",{class:!0});var he=E(o);d=b(he,"DIV",{class:!0});var be=E(d);f=b(be,"SPAN",{class:!0,"data-svelte-h":!0}),Q(f)!=="svelte-1gh3qlg"&&(f.textContent=i),u=S(be),m=b(be,"SPAN",{class:!0});var ye=E(m);h=V(ye,v),l=V(ye,"/"),A=V(ye,w),H=V(ye," ("),C=V(ye,B),F=V(ye,"%)"),ye.forEach(g),be.forEach(g),M=S(he),D=b(he,"DIV",{class:!0});var Pe=E(D);R=b(Pe,"SPAN",{class:!0,"data-svelte-h":!0}),Q(R)!=="svelte-121pedl"&&(R.textContent=k),U=S(Pe),J=b(Pe,"SPAN",{class:!0});var Me=E(J);L=V(Me,O),z=V(Me,"%"),Me.forEach(g),Pe.forEach(g),$=S(he),q=b(he,"DIV",{class:!0});var Be=E(q);T=b(Be,"SPAN",{class:!0,"data-svelte-h":!0}),Q(T)!=="svelte-1w9njq8"&&(T.textContent=ie),ae=S(Be),x=b(Be,"SPAN",{class:!0});var je=E(x);ue=V(je,te),fe=V(je,"秒"),je.forEach(g),Be.forEach(g),he.forEach(g),ve=S(pe),ee=b(pe,"DIV",{class:!0});var De=E(ee);le(de.$$.fragment,De),qe=S(De),le(ge.$$.fragment,De),Ae=S(De),le(me.$$.fragment,De),De.forEach(g),pe.forEach(g),this.h()},h:function(){_(t,"class","section-title svelte-liul6h"),p(t,N,252,10,7439),_(e,"class","card-header svelte-liul6h"),p(e,N,251,8,7403),_(f,"class","result-label svelte-liul6h"),p(f,N,257,14,7623),_(m,"class","result-value success svelte-liul6h"),p(m,N,258,14,7675),_(d,"class","result-item svelte-liul6h"),p(d,N,256,12,7583),_(R,"class","result-label svelte-liul6h"),p(R,N,261,14,7925),_(J,"class","result-value svelte-liul6h"),p(J,N,262,14,7978),_(D,"class","result-item svelte-liul6h"),p(D,N,260,12,7885),_(T,"class","result-label svelte-liul6h"),p(T,N,265,14,8117),_(x,"class","result-value svelte-liul6h"),p(x,N,266,14,8170),_(q,"class","result-item svelte-liul6h"),p(q,N,264,12,8077),_(o,"class","results-summary svelte-liul6h"),p(o,N,255,10,7541),_(ee,"class","action-buttons svelte-liul6h"),p(ee,N,270,10,8291),_(n,"class","card-content svelte-liul6h"),p(n,N,254,8,7504)},m:function(Z,ce){j(Z,e,ce),a(e,t),j(Z,c,ce),j(Z,n,ce),a(n,o),a(o,d),a(d,f),a(d,u),a(d,m),a(m,h),a(m,l),a(m,A),a(m,H),a(m,C),a(m,F),a(o,M),a(o,D),a(D,R),a(D,U),a(D,J),a(J,L),a(J,z),a(o,$),a(o,q),a(q,T),a(q,ae),a(q,x),a(x,ue),a(x,fe),a(n,ve),a(n,ee),se(de,ee,null),a(ee,qe),se(ge,ee,null),a(ee,Ae),se(me,ee,null),Ve=!0},p:function(Z,ce){const pe={};ce&2097152&&(pe.$$scope={dirty:ce,ctx:Z}),de.$set(pe);const he={};ce&2097152&&(he.$$scope={dirty:ce,ctx:Z}),ge.$set(he);const be={};ce&2097152&&(be.$$scope={dirty:ce,ctx:Z}),me.$set(be)},i:function(Z){Ve||(Y(de.$$.fragment,Z),Y(ge.$$.fragment,Z),Y(me.$$.fragment,Z),Ve=!0)},o:function(Z){X(de.$$.fragment,Z),X(ge.$$.fragment,Z),X(me.$$.fragment,Z),Ve=!1},d:function(Z){Z&&(g(e),g(c),g(n)),ne(de),ne(ge),ne(me)}};return G("SvelteRegisterBlock",{block:Ye,id:wt.name,type:"slot",source:'(251:6) <Card class=\\"main-card results-card\\">',ctx:s}),Ye}function kt(s){let e,t,r="🎵 ランダム基音トレーニング",c,n,o="10種類の基音からランダムに選択してドレミファソラシドを練習",d,f,i,u,m,v,h;f=new ke({props:{variant:"primary",class:"status-card",$$slots:{default:[lt]},$$scope:{ctx:s}},$$inline:!0});const l=[ct,ot],w=[];function A(B,C){return B[1]==="granted"?0:1}u=A(s),m=w[u]=l[u](s);const H={c:function(){e=y("div"),t=y("h1"),t.textContent=r,c=I(),n=y("p"),n.textContent=o,d=I(),oe(f.$$.fragment),i=I(),m.c(),v=Ee(),this.h()},l:function(C){e=b(C,"DIV",{class:!0});var F=E(e);t=b(F,"H1",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-1ptm9zr"&&(t.textContent=r),c=S(F),n=b(F,"P",{class:!0,"data-svelte-h":!0}),Q(n)!=="svelte-19nes7"&&(n.textContent=o),F.forEach(g),d=S(C),le(f.$$.fragment,C),i=S(C),m.l(C),v=Ee(),this.h()},h:function(){_(t,"class","page-title svelte-liul6h"),p(t,N,152,4,4291),_(n,"class","page-description svelte-liul6h"),p(n,N,153,4,4339),_(e,"class","header-section svelte-liul6h"),p(e,N,151,2,4258)},m:function(C,F){j(C,e,F),a(e,t),a(e,c),a(e,n),j(C,d,F),se(f,C,F),j(C,i,F),w[u].m(C,F),j(C,v,F),h=!0},p:function(C,F){const M={};F&2097153&&(M.$$scope={dirty:F,ctx:C}),f.$set(M);let D=u;u=A(C),u===D?w[u].p(C,F):(Nt(),X(w[D],1,1,()=>{w[D]=null}),Vt(),m=w[u],m?m.p(C,F):(m=w[u]=l[u](C),m.c()),Y(m,1),m.m(v.parentNode,v))},i:function(C){h||(Y(f.$$.fragment,C),Y(m),h=!0)},o:function(C){X(f.$$.fragment,C),X(m),h=!1},d:function(C){C&&(g(e),g(d),g(i),g(v)),ne(f,C),w[u].d(C)}};return G("SvelteRegisterBlock",{block:H,id:kt.name,type:"slot",source:"(150:0) <PageLayout>",ctx:s}),H}function Je(s){let e,t;e=new nt({props:{$$slots:{default:[kt]},$$scope:{ctx:s}},$$inline:!0});const r={c:function(){oe(e.$$.fragment)},l:function(n){le(e.$$.fragment,n)},m:function(n,o){se(e,n,o),t=!0},p:function(n,[o]){const d={};o&2097215&&(d.$$scope={dirty:o,ctx:n}),e.$set(d)},i:function(n){t||(Y(e.$$.fragment,n),t=!0)},o:function(n){X(e.$$.fragment,n),t=!1},d:function(n){ne(e,n)}};return G("SvelteRegisterBlock",{block:r,id:Je.name,type:"component",source:"",ctx:s}),r}function At(s){switch(s){case"active":return"warning";case"correct":return"success";case"incorrect":return"default";default:return"default"}}function Dt(){window.location.href="/microphone-test?mode=random"}function Xe(){window.location.href="/"}function Mt(s,e,t){let{$$slots:r={},$$scope:c}=e;We("Page",r,[]);let n="setup",o="checking",d="",f=0,i=!1,u=0,m=[{name:"ド",state:"inactive",completed:!1},{name:"レ",state:"inactive",completed:!1},{name:"ミ",state:"inactive",completed:!1},{name:"ファ",state:"inactive",completed:!1},{name:"ソ",state:"inactive",completed:!1},{name:"ラ",state:"inactive",completed:!1},{name:"シ",state:"inactive",completed:!1},{name:"ド（高）",state:"inactive",completed:!1}],v=0,h=0,l="ーー",w=0,A={correctCount:0,totalCount:8,averageAccuracy:0,averageTime:0,isCompleted:!1};const H=[{note:"C4",name:"ド（低）",frequency:261.63},{note:"D4",name:"レ（低）",frequency:293.66},{note:"E4",name:"ミ（低）",frequency:329.63},{note:"F4",name:"ファ（低）",frequency:349.23},{note:"G4",name:"ソ（低）",frequency:392},{note:"A4",name:"ラ（中）",frequency:440},{note:"B4",name:"シ（中）",frequency:493.88},{note:"C5",name:"ド（高）",frequency:523.25},{note:"D5",name:"レ（高）",frequency:587.33},{note:"E5",name:"ミ（高）",frequency:659.25}];async function B(){var k;t(1,o="checking");try{if(!((k=navigator.mediaDevices)!=null&&k.getUserMedia)){t(1,o="error");return}(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(J=>J.stop()),t(1,o="granted"),t(0,n="setup")}catch(U){console.error("マイク許可エラー:",U),t(1,o=U&&U.name==="NotAllowedError"?"denied":"error")}}function C(){const k=Math.floor(Math.random()*H.length),U=H[k];t(2,d=U.name),t(3,f=U.frequency),console.log("選択された基音:",d,f+"Hz")}async function F(){i||(t(4,i=!0),C(),console.log("基音再生:",d),setTimeout(()=>{t(4,i=!1),t(0,n="detecting"),t(5,m[0].state="active",m)},3e3))}function M(){switch(n){case"setup":return"🎤 マイク準備完了 - トレーニング開始可能";case"listening":return"🎵 基音再生中...";case"detecting":return"🎙️ 練習中 - ドレミファソラシドを歌ってください";case"completed":return"🎉 セッション完了！";default:return"🔄 準備中..."}}Ie(()=>{B()});const D=[];Object.keys(e).forEach(k=>{!~D.indexOf(k)&&k.slice(0,2)!=="$$"&&k!=="slot"&&qt.warn(`<Page> was created with unknown prop '${k}'`)});const R=()=>window.location.reload();return s.$capture_state=()=>({onMount:Ie,onDestroy:Et,Card:ke,Button:we,VolumeBar:st,PitchDisplay:Rt,PageLayout:nt,trainingPhase:n,microphoneState:o,currentBaseNote:d,currentBaseFrequency:f,isPlaying:i,currentScaleIndex:u,scaleSteps:m,currentVolume:v,currentFrequency:h,detectedNote:l,pitchDifference:w,sessionResults:A,baseNotes:H,checkMicrophonePermission:B,selectRandomBaseNote:C,playBaseNote:F,getScaleVariant:At,getStatusMessage:M,goToMicrophoneTest:Dt,goHome:Xe}),s.$inject_state=k=>{"trainingPhase"in k&&t(0,n=k.trainingPhase),"microphoneState"in k&&t(1,o=k.microphoneState),"currentBaseNote"in k&&t(2,d=k.currentBaseNote),"currentBaseFrequency"in k&&t(3,f=k.currentBaseFrequency),"isPlaying"in k&&t(4,i=k.isPlaying),"currentScaleIndex"in k&&t(6,u=k.currentScaleIndex),"scaleSteps"in k&&t(5,m=k.scaleSteps),"currentVolume"in k&&t(7,v=k.currentVolume),"currentFrequency"in k&&(h=k.currentFrequency),"detectedNote"in k&&t(8,l=k.detectedNote),"pitchDifference"in k&&t(9,w=k.pitchDifference),"sessionResults"in k&&t(10,A=k.sessionResults)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),[n,o,d,f,i,m,u,v,l,w,A,F,M,R]}class zt extends Ke{constructor(e){super(e),Ze(this,e,Mt,Je,Qe,{}),G("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:Je.name})}}export{zt as component};
