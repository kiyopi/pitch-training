const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/C2LwfFrM.js","../chunks/BbQtw8CC.js","../chunks/D6YF6ztN.js","../chunks/IHki7fMi.js","../chunks/DeSIqWoX.js","../assets/sessionStorage.2zs4CtXT.css"])))=>i.map(i=>d[i]);
import{_ as at}from"../chunks/C1FmrZbK.js";import{S as rn,i as sn,s as an,d as p,C as ce,m as B,o as R,b as $,D as le,N as cn,h as z,E as ie,k as j,F as ue,l as we,I as ln,Q as un,p as De,q as Ce,c as b,y as I,L as Ee,e as T,f as x,G as me,g as X,r as qe,j as A,t as J,M as fn,a as ke,O as It,n as Fe}from"../chunks/BbQtw8CC.js";import{e as Qe}from"../chunks/D6YF6ztN.js";import"../chunks/IHki7fMi.js";import{b as Ke,g as ct}from"../chunks/DeSIqWoX.js";import{p as mn}from"../chunks/CRF06j_Q.js";import{P as dn,C as Le}from"../chunks/DNmPTphr.js";import{B as We}from"../chunks/CB02h6m0.js";import{l as te,a as $e,b as gn,P as pn,h as lt}from"../chunks/DjSLRzt-.js";import{l as it,s as xe,S as hn,E as yn,n as ut,A as Nt,M as vn,U as Rt,a as Ge,b as _n,u as Sn,i as bn,c as wn,r as Dn,d as Cn,e as qn,f as Tn,t as An,g as Mn}from"../chunks/C2LwfFrM.js";const kn=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,In=!1,Nn=!1,go=Object.freeze(Object.defineProperty({__proto__:null,prerender:Nn,ssr:In},Symbol.toStringTag,{value:"Module"})),{document:ft}=kn;function mt(s,t,e){const n=s.slice();return n[96]=t[e],n[98]=e,n}function dt(s,t,e){const n=s.slice();return n[99]=t[e],n}function gt(s){var V,G,U;let t,e,n,o,r=(((V=s[23])==null?void 0:V.length)||0)+"",f,m,u,c,i,g=8-(((G=s[23])==null?void 0:G.length)||0)+"",d,_,h,C,q,E,Y,w,S=Math.round((((U=s[23])==null?void 0:U.length)||0)/8*100)+"",H,O,y,M,N,P=s[0]==="results"&&pt(s);return{c(){t=A("div"),e=A("div"),n=A("div"),o=A("span"),f=J(r),m=J("/8"),u=j(),c=A("span"),i=J("æ®‹ã‚Š "),d=J(g),_=J(" ã‚»ãƒƒã‚·ãƒ§ãƒ³"),h=j(),C=A("div"),q=A("div"),E=A("div"),Y=j(),w=A("span"),H=J(S),O=J("%"),y=j(),P&&P.c(),M=qe(),this.h()},l(L){t=T(L,"DIV",{class:!0});var oe=x(t);e=T(oe,"DIV",{class:!0});var _e=x(e);n=T(_e,"DIV",{class:!0});var re=x(n);o=T(re,"SPAN",{class:!0});var ge=x(o);f=X(ge,r),m=X(ge,"/8"),ge.forEach(p),u=z(re),c=T(re,"SPAN",{class:!0});var se=x(c);i=X(se,"æ®‹ã‚Š "),d=X(se,g),_=X(se," ã‚»ãƒƒã‚·ãƒ§ãƒ³"),se.forEach(p),re.forEach(p),h=z(_e),C=T(_e,"DIV",{class:!0});var he=x(C);q=T(he,"DIV",{class:!0});var Ae=x(q);E=T(Ae,"DIV",{class:!0,style:!0}),x(E).forEach(p),Ae.forEach(p),Y=z(he),w=T(he,"SPAN",{class:!0});var Ie=x(w);H=X(Ie,S),O=X(Ie,"%"),Ie.forEach(p),he.forEach(p),_e.forEach(p),oe.forEach(p),y=z(L),P&&P.l(L),M=qe(),this.h()},h(){var L;I(o,"class","completed-count svelte-pryaq0"),I(c,"class","remaining-text svelte-pryaq0"),I(n,"class","session-info svelte-pryaq0"),I(E,"class","progress-fill svelte-pryaq0"),Ee(E,"width",(((L=s[23])==null?void 0:L.length)||0)/8*100+"%"),I(q,"class","progress-bar svelte-pryaq0"),I(w,"class","progress-text svelte-pryaq0"),I(C,"class","progress-section svelte-pryaq0"),I(e,"class","session-status svelte-pryaq0"),I(t,"class","session-progress svelte-pryaq0")},m(L,oe){$(L,t,oe),b(t,e),b(e,n),b(n,o),b(o,f),b(o,m),b(n,u),b(n,c),b(c,i),b(c,d),b(c,_),b(e,h),b(e,C),b(C,q),b(q,E),b(C,Y),b(C,w),b(w,H),b(w,O),$(L,y,oe),P&&P.m(L,oe),$(L,M,oe),N=!0},p(L,oe){var _e,re,ge,se;(!N||oe[0]&8388608)&&r!==(r=(((_e=L[23])==null?void 0:_e.length)||0)+"")&&ke(f,r),(!N||oe[0]&8388608)&&g!==(g=8-(((re=L[23])==null?void 0:re.length)||0)+"")&&ke(d,g),(!N||oe[0]&8388608)&&Ee(E,"width",(((ge=L[23])==null?void 0:ge.length)||0)/8*100+"%"),(!N||oe[0]&8388608)&&S!==(S=Math.round((((se=L[23])==null?void 0:se.length)||0)/8*100)+"")&&ke(H,S),L[0]==="results"?P?(P.p(L,oe),oe[0]&1&&R(P,1)):(P=pt(L),P.c(),R(P,1),P.m(M.parentNode,M)):P&&(De(),B(P,1,1,()=>{P=null}),Ce())},i(L){N||(R(P),N=!0)},o(L){B(P),N=!1},d(L){L&&(p(t),p(y),p(M)),P&&P.d(L)}}}function pt(s){let t,e,n;return e=new Nt({props:{isCompleted:s[6],position:"top"}}),e.$on("action",s[29]),{c(){t=A("div"),ue(e.$$.fragment),this.h()},l(o){t=T(o,"DIV",{class:!0});var r=x(t);ie(e.$$.fragment,r),r.forEach(p),this.h()},h(){I(t,"class","top-action-buttons svelte-pryaq0")},m(o,r){$(o,t,r),le(e,t,null),n=!0},p(o,r){const f={};r[0]&64&&(f.isCompleted=o[6]),e.$set(f)},i(o){n||(R(e.$$.fragment,o),n=!0)},o(o){B(e.$$.fragment,o),n=!1},d(o){o&&p(t),ce(e)}}}function Rn(s){let t,e;return t=new Le({props:{class:"error-card",$$slots:{default:[Pn]},$$scope:{ctx:s}}}),{c(){ue(t.$$.fragment)},l(n){ie(t.$$.fragment,n)},m(n,o){le(t,n,o),e=!0},p(n,o){const r={};o[3]&512&&(r.$$scope={dirty:o,ctx:n}),t.$set(r)},i(n){e||(R(t.$$.fragment,n),e=!0)},o(n){B(t.$$.fragment,n),e=!1},d(n){ce(t,n)}}}function Fn(s){let t,e,n,o,r,f,m,u={isActive:s[1]==="granted",trainingPhase:s[0],className:"pitch-detector-content",debugMode:!0,disableHarmonicCorrection:!1};e=new gn({props:u}),s[33](e),e.$on("pitchUpdate",s[28]),e.$on("stateChange",eo),e.$on("error",to),e.$on("microphoneHealthChange",s[30]);let c=s[0]!=="results"&&ht(s),i=s[0]!=="results"&&St(s),g=s[0]==="results"&&Dt(s);return{c(){t=A("div"),ue(e.$$.fragment),n=j(),c&&c.c(),o=j(),i&&i.c(),r=j(),g&&g.c(),f=qe(),this.h()},l(d){t=T(d,"DIV",{style:!0});var _=x(t);ie(e.$$.fragment,_),_.forEach(p),n=z(d),c&&c.l(d),o=z(d),i&&i.l(d),r=z(d),g&&g.l(d),f=qe(),this.h()},h(){Ee(t,"display","none")},m(d,_){$(d,t,_),le(e,t,null),$(d,n,_),c&&c.m(d,_),$(d,o,_),i&&i.m(d,_),$(d,r,_),g&&g.m(d,_),$(d,f,_),m=!0},p(d,_){const h={};_[0]&2&&(h.isActive=d[1]==="granted"),_[0]&1&&(h.trainingPhase=d[0]),e.$set(h),d[0]!=="results"?c?(c.p(d,_),_[0]&1&&R(c,1)):(c=ht(d),c.c(),R(c,1),c.m(o.parentNode,o)):c&&(De(),B(c,1,1,()=>{c=null}),Ce()),d[0]!=="results"?i?(i.p(d,_),_[0]&1&&R(i,1)):(i=St(d),i.c(),R(i,1),i.m(r.parentNode,r)):i&&(De(),B(i,1,1,()=>{i=null}),Ce()),d[0]==="results"?g?(g.p(d,_),_[0]&1&&R(g,1)):(g=Dt(d),g.c(),R(g,1),g.m(f.parentNode,f)):g&&(De(),B(g,1,1,()=>{g=null}),Ce())},i(d){m||(R(e.$$.fragment,d),R(c),R(i),R(g),m=!0)},o(d){B(e.$$.fragment,d),B(c),B(i),B(g),m=!1},d(d){d&&(p(t),p(n),p(o),p(r),p(f)),s[33](null),ce(e),c&&c.d(d),i&&i.d(d),g&&g.d(d)}}}function $n(s){let t;return{c(){t=J("ğŸ¤ ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã¸ç§»å‹•")},l(e){t=X(e,"ğŸ¤ ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã¸ç§»å‹•")},m(e,n){$(e,t,n)},d(e){e&&p(t)}}}function En(s){let t;return{c(){t=J("ğŸ  ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹")},l(e){t=X(e,"ğŸ  ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹")},m(e,n){$(e,t,n)},d(e){e&&p(t)}}}function Pn(s){let t,e,n="ğŸ¤",o,r,f="ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãŒå¿…è¦ã§ã™",m,u,c="é€£ç¶šãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ¢ãƒ¼ãƒ‰ã‚’é–‹å§‹ã™ã‚‹å‰ã«ã€ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã§éŸ³å£°å…¥åŠ›ã®ç¢ºèªã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚",i,g,d='<p class="svelte-pryaq0">ã“ã®ãƒšãƒ¼ã‚¸ã¯<strong>ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆå®Œäº†å¾Œ</strong>ã«ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™ã€‚</p> <p class="svelte-pryaq0">ã¾ãšã¯ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã§éŸ³å£°ç¢ºèªã‚’è¡Œã£ã¦ãã ã•ã„ã€‚</p>',_,h,C,q,E,Y;return C=new We({props:{variant:"primary",$$slots:{default:[$n]},$$scope:{ctx:s}}}),C.$on("click",s[26]),E=new We({props:{variant:"secondary",$$slots:{default:[En]},$$scope:{ctx:s}}}),E.$on("click",s[27]),{c(){t=A("div"),e=A("div"),e.textContent=n,o=j(),r=A("h3"),r.textContent=f,m=j(),u=A("p"),u.textContent=c,i=j(),g=A("div"),g.innerHTML=d,_=j(),h=A("div"),ue(C.$$.fragment),q=j(),ue(E.$$.fragment),this.h()},l(w){t=T(w,"DIV",{class:!0});var S=x(t);e=T(S,"DIV",{class:!0,"data-svelte-h":!0}),me(e)!=="svelte-15rbx8n"&&(e.textContent=n),o=z(S),r=T(S,"H3",{class:!0,"data-svelte-h":!0}),me(r)!=="svelte-17kvze2"&&(r.textContent=f),m=z(S),u=T(S,"P",{class:!0,"data-svelte-h":!0}),me(u)!=="svelte-1t09god"&&(u.textContent=c),i=z(S),g=T(S,"DIV",{class:!0,"data-svelte-h":!0}),me(g)!=="svelte-13ge0u9"&&(g.innerHTML=d),_=z(S),h=T(S,"DIV",{class:!0});var H=x(h);ie(C.$$.fragment,H),q=z(H),ie(E.$$.fragment,H),H.forEach(p),S.forEach(p),this.h()},h(){I(e,"class","error-icon svelte-pryaq0"),I(r,"class","svelte-pryaq0"),I(u,"class","svelte-pryaq0"),I(g,"class","recommendation svelte-pryaq0"),I(h,"class","action-buttons"),I(t,"class","error-content svelte-pryaq0")},m(w,S){$(w,t,S),b(t,e),b(t,o),b(t,r),b(t,m),b(t,u),b(t,i),b(t,g),b(t,_),b(t,h),le(C,h,null),b(h,q),le(E,h,null),Y=!0},p(w,S){const H={};S[3]&512&&(H.$$scope={dirty:S,ctx:w}),C.$set(H);const O={};S[3]&512&&(O.$$scope={dirty:S,ctx:w}),E.$set(O)},i(w){Y||(R(C.$$.fragment,w),R(E.$$.fragment,w),Y=!0)},o(w){B(C.$$.fragment,w),B(E.$$.fragment,w),Y=!1},d(w){w&&p(t),ce(C),ce(E)}}}function ht(s){let t,e,n,o,r,f,m=!s[2]&&s[7].length>0&&yt(s);return n=new Le({props:{class:"main-card half-width",$$slots:{default:[xn]},$$scope:{ctx:s}}}),r=new pn({props:{frequency:s[14],note:s[15],volume:s[13],isMuted:s[0]!=="guiding",muteMessage:"åŸºéŸ³å†ç”Ÿå¾Œã«é–‹å§‹",className:"half-width",showGuidance:!1}}),{c(){m&&m.c(),t=j(),e=A("div"),ue(n.$$.fragment),o=j(),ue(r.$$.fragment),this.h()},l(u){m&&m.l(u),t=z(u),e=T(u,"DIV",{class:!0});var c=x(e);ie(n.$$.fragment,c),o=z(c),ie(r.$$.fragment,c),c.forEach(p),this.h()},h(){I(e,"class","side-by-side-container svelte-pryaq0")},m(u,c){m&&m.m(u,c),$(u,t,c),$(u,e,c),le(n,e,null),b(e,o),le(r,e,null),f=!0},p(u,c){!u[2]&&u[7].length>0?m?(m.p(u,c),c[0]&132&&R(m,1)):(m=yt(u),m.c(),R(m,1),m.m(t.parentNode,t)):m&&(De(),B(m,1,1,()=>{m=null}),Ce());const i={};c[0]&6921|c[3]&512&&(i.$$scope={dirty:c,ctx:u}),n.$set(i);const g={};c[0]&16384&&(g.frequency=u[14]),c[0]&32768&&(g.note=u[15]),c[0]&8192&&(g.volume=u[13]),c[0]&1&&(g.isMuted=u[0]!=="guiding"),r.$set(g)},i(u){f||(R(m),R(n.$$.fragment,u),R(r.$$.fragment,u),f=!0)},o(u){B(m),B(n.$$.fragment,u),B(r.$$.fragment,u),f=!1},d(u){u&&(p(t),p(e)),m&&m.d(u),ce(n),ce(r)}}}function yt(s){let t,e;return t=new Le({props:{class:"warning-card",$$slots:{default:[Hn]},$$scope:{ctx:s}}}),{c(){ue(t.$$.fragment)},l(n){ie(t.$$.fragment,n)},m(n,o){le(t,n,o),e=!0},p(n,o){const r={};o[0]&128|o[3]&512&&(r.$$scope={dirty:o,ctx:n}),t.$set(r)},i(n){e||(R(t.$$.fragment,n),e=!0)},o(n){B(t.$$.fragment,n),e=!1},d(n){ce(t,n)}}}function vt(s){let t,e=s[99]+"",n;return{c(){t=A("li"),n=J(e),this.h()},l(o){t=T(o,"LI",{class:!0});var r=x(t);n=X(r,e),r.forEach(p),this.h()},h(){I(t,"class","svelte-pryaq0")},m(o,r){$(o,t,r),b(t,n)},p(o,r){r[0]&128&&e!==(e=o[99]+"")&&ke(n,e)},d(o){o&&p(t)}}}function Hn(s){let t,e='<h3 class="section-title svelte-pryaq0">âš ï¸ ãƒã‚¤ã‚¯æ¥ç¶šã«å•é¡ŒãŒã‚ã‚Šã¾ã™</h3>',n,o,r,f="ãƒã‚¤ã‚¯ãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã›ã‚“ã€‚ä»¥ä¸‹ã®å•é¡ŒãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸï¼š",m,u,c,i,g="<strong>è§£æ±ºæ–¹æ³•:</strong> ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãƒã‚¤ã‚¯è¨±å¯ã‚’å†åº¦å–å¾—ã—ã¦ãã ã•ã„ã€‚",d=Qe(s[7]),_=[];for(let h=0;h<d.length;h+=1)_[h]=vt(dt(s,d,h));return{c(){t=A("div"),t.innerHTML=e,n=j(),o=A("div"),r=A("p"),r.textContent=f,m=j(),u=A("ul");for(let h=0;h<_.length;h+=1)_[h].c();c=j(),i=A("p"),i.innerHTML=g,this.h()},l(h){t=T(h,"DIV",{class:!0,"data-svelte-h":!0}),me(t)!=="svelte-1mob8td"&&(t.innerHTML=e),n=z(h),o=T(h,"DIV",{class:!0});var C=x(o);r=T(C,"P",{class:!0,"data-svelte-h":!0}),me(r)!=="svelte-171o2p0"&&(r.textContent=f),m=z(C),u=T(C,"UL",{class:!0});var q=x(u);for(let E=0;E<_.length;E+=1)_[E].l(q);q.forEach(p),c=z(C),i=T(C,"P",{class:!0,"data-svelte-h":!0}),me(i)!=="svelte-1o4df0k"&&(i.innerHTML=g),C.forEach(p),this.h()},h(){I(t,"class","card-header svelte-pryaq0"),I(r,"class","warning-message svelte-pryaq0"),I(u,"class","error-list svelte-pryaq0"),I(i,"class","fix-instruction svelte-pryaq0"),I(o,"class","card-content svelte-pryaq0")},m(h,C){$(h,t,C),$(h,n,C),$(h,o,C),b(o,r),b(o,m),b(o,u);for(let q=0;q<_.length;q+=1)_[q]&&_[q].m(u,null);b(o,c),b(o,i)},p(h,C){if(C[0]&128){d=Qe(h[7]);let q;for(q=0;q<d.length;q+=1){const E=dt(h,d,q);_[q]?_[q].p(E,C):(_[q]=vt(E),_[q].c(),_[q].m(u,null))}for(;q<_.length;q+=1)_[q].d(1);_.length=d.length}},d(h){h&&(p(t),p(n),p(o)),It(_,h)}}}function Vn(s){let t,e;return t=new We({props:{variant:"primary",disabled:s[3]||s[0]==="guiding"||s[0]==="waiting",style:"opacity: 0.7;",$$slots:{default:[On]},$$scope:{ctx:s}}}),t.$on("click",s[25]),{c(){ue(t.$$.fragment)},l(n){ie(t.$$.fragment,n)},m(n,o){le(t,n,o),e=!0},p(n,o){const r={};o[0]&9&&(r.disabled=n[3]||n[0]==="guiding"||n[0]==="waiting"),o[0]&768|o[3]&512&&(r.$$scope={dirty:o,ctx:n}),t.$set(r)},i(n){e||(R(t.$$.fragment,n),e=!0)},o(n){B(t.$$.fragment,n),e=!1},d(n){ce(t,n)}}}function Bn(s){let t,e="âš¡ é€£ç¶šãƒ¢ãƒ¼ãƒ‰é€²è¡Œä¸­";return{c(){t=A("div"),t.textContent=e,this.h()},l(n){t=T(n,"DIV",{class:!0,"data-svelte-h":!0}),me(t)!=="svelte-y39hwc"&&(t.textContent=e),this.h()},h(){I(t,"class","auto-play-status svelte-pryaq0")},m(n,o){$(n,t,o)},p:Fe,i:Fe,o:Fe,d(n){n&&p(t)}}}function Ln(s){let t,e="ğŸµ åŸºéŸ³å†ç”Ÿä¸­...";return{c(){t=A("div"),t.textContent=e,this.h()},l(n){t=T(n,"DIV",{class:!0,"data-svelte-h":!0}),me(t)!=="svelte-1thz8w1"&&(t.textContent=e),this.h()},h(){I(t,"class","auto-play-status svelte-pryaq0")},m(n,o){$(n,t,o)},p:Fe,i:Fe,o:Fe,d(n){n&&p(t)}}}function zn(s){let t;return{c(){t=J("ğŸ¹ åŸºéŸ³å†ç”Ÿï¼ˆè‡ªå‹•å®Ÿè¡Œä¸­ï¼‰")},l(e){t=X(e,"ğŸ¹ åŸºéŸ³å†ç”Ÿï¼ˆè‡ªå‹•å®Ÿè¡Œä¸­ï¼‰")},m(e,n){$(e,t,n)},p:Fe,d(e){e&&p(t)}}}function jn(s){let t,e,n;return{c(){t=J("ğŸ”„ "),e=J(s[8]),n=J(" å†ç”Ÿ")},l(o){t=X(o,"ğŸ”„ "),e=X(o,s[8]),n=X(o," å†ç”Ÿ")},m(o,r){$(o,t,r),$(o,e,r),$(o,n,r)},p(o,r){r[0]&256&&ke(e,o[8])},d(o){o&&(p(t),p(e),p(n))}}}function On(s){let t;function e(r,f){return r[8]&&r[9]>0?jn:zn}let n=e(s),o=n(s);return{c(){o.c(),t=qe()},l(r){o.l(r),t=qe()},m(r,f){o.m(r,f),$(r,t,f)},p(r,f){n===(n=e(r))&&o?o.p(r,f):(o.d(1),o=n(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&p(t),o.d(r)}}}function _t(s){let t,e,n,o,r,f=s[9].toFixed(1)+"",m,u;return{c(){t=A("div"),e=J("ç¾åœ¨ã®åŸºéŸ³: "),n=A("strong"),o=J(s[8]),r=J(" ("),m=J(f),u=J("Hz)"),this.h()},l(c){t=T(c,"DIV",{class:!0});var i=x(t);e=X(i,"ç¾åœ¨ã®åŸºéŸ³: "),n=T(i,"STRONG",{});var g=x(n);o=X(g,s[8]),g.forEach(p),r=X(i," ("),m=X(i,f),u=X(i,"Hz)"),i.forEach(p),this.h()},h(){I(t,"class","base-note-info svelte-pryaq0")},m(c,i){$(c,t,i),b(t,e),b(t,n),b(n,o),b(t,r),b(t,m),b(t,u)},p(c,i){i[0]&256&&ke(o,c[8]),i[0]&512&&f!==(f=c[9].toFixed(1)+"")&&ke(m,f)},d(c){c&&p(t)}}}function xn(s){let t,e='<h3 class="section-title svelte-pryaq0">ğŸ¹ åŸºéŸ³å†ç”Ÿ</h3>',n,o,r,f,m,u,c,i,g="ã‚¬ã‚¤ãƒ‰é–‹å§‹ã¾ã§",d,_,h,C,q,E,Y,w;const S=[Ln,Bn,Vn],H=[];function O(M,N){return M[3]?0:M[0]==="waiting"||M[0]==="guiding"?1:2}r=O(s),f=H[r]=S[r](s);let y=s[8]&&_t(s);return E=new vn({props:{size:"20"}}),{c(){t=A("div"),t.innerHTML=e,n=j(),o=A("div"),f.c(),m=j(),y&&y.c(),u=j(),c=A("div"),i=A("div"),i.textContent=g,d=j(),_=A("div"),h=A("div"),C=j(),q=A("div"),ue(E.$$.fragment),this.h()},l(M){t=T(M,"DIV",{class:!0,"data-svelte-h":!0}),me(t)!=="svelte-o46h1v"&&(t.innerHTML=e),n=z(M),o=T(M,"DIV",{class:!0});var N=x(o);f.l(N),m=z(N),y&&y.l(N),u=z(N),c=T(N,"DIV",{class:!0});var P=x(c);i=T(P,"DIV",{class:!0,"data-svelte-h":!0}),me(i)!=="svelte-1dufnpv"&&(i.textContent=g),d=z(P),_=T(P,"DIV",{class:!0});var V=x(_);h=T(V,"DIV",{class:!0,style:!0}),x(h).forEach(p),C=z(V),q=T(V,"DIV",{class:!0});var G=x(q);ie(E.$$.fragment,G),G.forEach(p),V.forEach(p),P.forEach(p),N.forEach(p),this.h()},h(){I(t,"class","card-header svelte-pryaq0"),I(i,"class","guide-start-label svelte-pryaq0"),I(h,"class","guide-progress-fill svelte-pryaq0"),Ee(h,"width",s[11]+"%"),I(q,"class",Y="guide-music-icon "+(s[12]?"glowing":"")+" svelte-pryaq0"),I(_,"class","guide-start-bar svelte-pryaq0"),I(c,"class","guide-start-bar-container svelte-pryaq0"),I(o,"class","card-content svelte-pryaq0")},m(M,N){$(M,t,N),$(M,n,N),$(M,o,N),H[r].m(o,null),b(o,m),y&&y.m(o,null),b(o,u),b(o,c),b(c,i),b(c,d),b(c,_),b(_,h),b(_,C),b(_,q),le(E,q,null),w=!0},p(M,N){let P=r;r=O(M),r===P?H[r].p(M,N):(De(),B(H[P],1,1,()=>{H[P]=null}),Ce(),f=H[r],f?f.p(M,N):(f=H[r]=S[r](M),f.c()),R(f,1),f.m(o,m)),M[8]?y?y.p(M,N):(y=_t(M),y.c(),y.m(o,u)):y&&(y.d(1),y=null),(!w||N[0]&2048)&&Ee(h,"width",M[11]+"%"),(!w||N[0]&4096&&Y!==(Y="guide-music-icon "+(M[12]?"glowing":"")+" svelte-pryaq0"))&&I(q,"class",Y)},i(M){w||(R(f),R(E.$$.fragment,M),w=!0)},o(M){B(f),B(E.$$.fragment,M),w=!1},d(M){M&&(p(t),p(n),p(o)),H[r].d(),y&&y.d(),ce(E)}}}function St(s){let t,e;return t=new Le({props:{class:"main-card",$$slots:{default:[Gn]},$$scope:{ctx:s}}}),{c(){ue(t.$$.fragment)},l(n){ie(t.$$.fragment,n)},m(n,o){le(t,n,o),e=!0},p(n,o){const r={};o[0]&1025|o[3]&512&&(r.$$scope={dirty:o,ctx:n}),t.$set(r)},i(n){e||(R(t.$$.fragment,n),e=!0)},o(n){B(t.$$.fragment,n),e=!1},d(n){ce(t,n)}}}function bt(s){let t,e=s[96].name+"",n,o,r;return{c(){t=A("div"),n=J(e),o=j(),this.h()},l(f){t=T(f,"DIV",{class:!0});var m=x(t);n=X(m,e),o=z(m),m.forEach(p),this.h()},h(){I(t,"class",r="scale-item "+s[96].state+" svelte-pryaq0")},m(f,m){$(f,t,m),b(t,n),b(t,o)},p(f,m){m[0]&1024&&e!==(e=f[96].name+"")&&ke(n,e),m[0]&1024&&r!==(r="scale-item "+f[96].state+" svelte-pryaq0")&&I(t,"class",r)},d(f){f&&p(t)}}}function wt(s){let t,e="ã‚¬ã‚¤ãƒ‰ã«åˆã‚ã›ã¦ <strong>ãƒ‰ãƒ¬ãƒŸãƒ•ã‚¡ã‚½ãƒ©ã‚·ãƒ‰</strong> ã‚’æ­Œã£ã¦ãã ã•ã„";return{c(){t=A("div"),t.innerHTML=e,this.h()},l(n){t=T(n,"DIV",{class:!0,"data-svelte-h":!0}),me(t)!=="svelte-sgc3nk"&&(t.innerHTML=e),this.h()},h(){I(t,"class","guide-instruction svelte-pryaq0")},m(n,o){$(n,t,o)},d(n){n&&p(t)}}}function Gn(s){let t,e='<h3 class="section-title svelte-pryaq0">ğŸµ ãƒ‰ãƒ¬ãƒŸéŸ³éšã‚¬ã‚¤ãƒ‰</h3>',n,o,r,f,m=Qe(s[10]),u=[];for(let i=0;i<m.length;i+=1)u[i]=bt(mt(s,m,i));let c=s[0]==="guiding"&&wt();return{c(){t=A("div"),t.innerHTML=e,n=j(),o=A("div"),r=A("div");for(let i=0;i<u.length;i+=1)u[i].c();f=j(),c&&c.c(),this.h()},l(i){t=T(i,"DIV",{class:!0,"data-svelte-h":!0}),me(t)!=="svelte-z1jpw4"&&(t.innerHTML=e),n=z(i),o=T(i,"DIV",{class:!0});var g=x(o);r=T(g,"DIV",{class:!0});var d=x(r);for(let _=0;_<u.length;_+=1)u[_].l(d);d.forEach(p),f=z(g),c&&c.l(g),g.forEach(p),this.h()},h(){I(t,"class","card-header svelte-pryaq0"),I(r,"class","scale-guide svelte-pryaq0"),I(o,"class","card-content svelte-pryaq0")},m(i,g){$(i,t,g),$(i,n,g),$(i,o,g),b(o,r);for(let d=0;d<u.length;d+=1)u[d]&&u[d].m(r,null);b(o,f),c&&c.m(o,null)},p(i,g){if(g[0]&1024){m=Qe(i[10]);let d;for(d=0;d<m.length;d+=1){const _=mt(i,m,d);u[d]?u[d].p(_,g):(u[d]=bt(_),u[d].c(),u[d].m(r,null))}for(;d<u.length;d+=1)u[d].d(1);u.length=m.length}i[0]==="guiding"?c||(c=wt(),c.c(),c.m(o,null)):c&&(c.d(1),c=null)},d(i){i&&(p(t),p(n),p(o)),It(u,i),c&&c.d()}}}function Dt(s){let t,e,n,o,r;const f=[Qn,Un],m=[];function u(i,g){return i[5]&&i[6]?0:i[21]?1:-1}~(t=u(s))&&(e=m[t]=f[t](s));let c=s[0]==="results"&&Ct(s);return{c(){e&&e.c(),n=j(),c&&c.c(),o=qe()},l(i){e&&e.l(i),n=z(i),c&&c.l(i),o=qe()},m(i,g){~t&&m[t].m(i,g),$(i,n,g),c&&c.m(i,g),$(i,o,g),r=!0},p(i,g){let d=t;t=u(i),t===d?~t&&m[t].p(i,g):(e&&(De(),B(m[d],1,1,()=>{m[d]=null}),Ce()),~t?(e=m[t],e?e.p(i,g):(e=m[t]=f[t](i),e.c()),R(e,1),e.m(n.parentNode,n)):e=null),i[0]==="results"?c?(c.p(i,g),g[0]&1&&R(c,1)):(c=Ct(i),c.c(),R(c,1),c.m(o.parentNode,o)):c&&(De(),B(c,1,1,()=>{c=null}),Ce())},i(i){r||(R(e),R(c),r=!0)},o(i){B(e),B(c),r=!1},d(i){i&&(p(n),p(o)),~t&&m[t].d(i),c&&c.d(i)}}}function Un(s){let t,e;return t=new Rt({props:{scoreData:s[21],showDetails:!1,className:"mb-6 iphone-no-margin",currentScoreData:s[16],intervalData:s[4],consistencyData:s[17],feedbackData:s[18],technicalFeedbackData:s[19],sessionStatistics:s[20]}}),{c(){ue(t.$$.fragment)},l(n){ie(t.$$.fragment,n)},m(n,o){le(t,n,o),e=!0},p(n,o){const r={};o[0]&2097152&&(r.scoreData=n[21]),o[0]&65536&&(r.currentScoreData=n[16]),o[0]&16&&(r.intervalData=n[4]),o[0]&131072&&(r.consistencyData=n[17]),o[0]&262144&&(r.feedbackData=n[18]),o[0]&524288&&(r.technicalFeedbackData=n[19]),o[0]&1048576&&(r.sessionStatistics=n[20]),t.$set(r)},i(n){e||(R(t.$$.fragment,n),e=!0)},o(n){B(t.$$.fragment,n),e=!1},d(n){ce(t,n)}}}function Qn(s){let t,e;return t=new Rt({props:{scoreData:s[5],showDetails:!1,className:"mb-6 iphone-no-margin",currentScoreData:s[16],intervalData:s[4],consistencyData:s[17],feedbackData:s[18],technicalFeedbackData:s[19],sessionStatistics:s[20]}}),{c(){ue(t.$$.fragment)},l(n){ie(t.$$.fragment,n)},m(n,o){le(t,n,o),e=!0},p(n,o){const r={};o[0]&32&&(r.scoreData=n[5]),o[0]&65536&&(r.currentScoreData=n[16]),o[0]&16&&(r.intervalData=n[4]),o[0]&131072&&(r.consistencyData=n[17]),o[0]&262144&&(r.feedbackData=n[18]),o[0]&524288&&(r.technicalFeedbackData=n[19]),o[0]&1048576&&(r.sessionStatistics=n[20]),t.$set(r)},i(n){e||(R(t.$$.fragment,n),e=!0)},o(n){B(t.$$.fragment,n),e=!1},d(n){ce(t,n)}}}function Ct(s){let t,e;return t=new Le({props:{class:"main-card bottom-action-card",$$slots:{default:[Xn]},$$scope:{ctx:s}}}),{c(){ue(t.$$.fragment)},l(n){ie(t.$$.fragment,n)},m(n,o){le(t,n,o),e=!0},p(n,o){const r={};o[0]&64|o[3]&512&&(r.$$scope={dirty:o,ctx:n}),t.$set(r)},i(n){e||(R(t.$$.fragment,n),e=!0)},o(n){B(t.$$.fragment,n),e=!1},d(n){ce(t,n)}}}function Xn(s){let t,e,n;return e=new Nt({props:{isCompleted:s[6],position:"bottom"}}),e.$on("action",s[29]),{c(){t=A("div"),ue(e.$$.fragment),this.h()},l(o){t=T(o,"DIV",{class:!0});var r=x(t);ie(e.$$.fragment,r),r.forEach(p),this.h()},h(){I(t,"class","card-content svelte-pryaq0")},m(o,r){$(o,t,r),le(e,t,null),n=!0},p(o,r){const f={};r[0]&64&&(f.isCompleted=o[6]),e.$set(f)},i(o){n||(R(e.$$.fragment,o),n=!0)},o(o){B(e.$$.fragment,o),n=!1},d(o){o&&p(t),ce(e)}}}function Jn(s){let t,e,n="âš¡ é€£ç¶šãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ¢ãƒ¼ãƒ‰",o,r,f="ä¸­ç´šè€…å‘ã‘ï¼š8ã‚»ãƒƒã‚·ãƒ§ãƒ³é€£ç¶šã§åŸºéŸ³ãŒè‡ªå‹•å†ç”Ÿã•ã‚Œã‚‹é›†ä¸­ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°",m,u,c,i,g,d,_,h,C,q,E,Y,w,S,H,O,y=s[1]==="granted"&&!s[24]&&gt(s);const M=[Fn,Rn],N=[];function P(V,G){return V[1]==="granted"?0:1}return w=P(s),S=N[w]=M[w](s),{c(){t=A("div"),e=A("h1"),e.textContent=n,o=j(),r=A("p"),r.textContent=f,m=j(),y&&y.c(),u=j(),c=A("div"),i=J("ğŸ“± "),g=J(qt),d=J(" | "),_=J(Tt),h=A("br"),C=j(),q=A("small"),E=J(At),Y=j(),S.c(),H=qe(),this.h()},l(V){t=T(V,"DIV",{class:!0});var G=x(t);e=T(G,"H1",{class:!0,"data-svelte-h":!0}),me(e)!=="svelte-1nub9gt"&&(e.textContent=n),o=z(G),r=T(G,"P",{class:!0,"data-svelte-h":!0}),me(r)!=="svelte-gneggn"&&(r.textContent=f),m=z(G),y&&y.l(G),u=z(G),c=T(G,"DIV",{class:!0});var U=x(c);i=X(U,"ğŸ“± "),g=X(U,qt),d=X(U," | "),_=X(U,Tt),h=T(U,"BR",{}),C=z(U),q=T(U,"SMALL",{style:!0});var L=x(q);E=X(L,At),L.forEach(p),U.forEach(p),G.forEach(p),Y=z(V),S.l(V),H=qe(),this.h()},h(){I(e,"class","page-title svelte-pryaq0"),I(r,"class","page-description svelte-pryaq0"),Ee(q,"font-size","0.6rem"),I(c,"class","debug-info svelte-pryaq0"),I(t,"class","header-section svelte-pryaq0")},m(V,G){$(V,t,G),b(t,e),b(t,o),b(t,r),b(t,m),y&&y.m(t,null),b(t,u),b(t,c),b(c,i),b(c,g),b(c,d),b(c,_),b(c,h),b(c,C),b(c,q),b(q,E),$(V,Y,G),N[w].m(V,G),$(V,H,G),O=!0},p(V,G){V[1]==="granted"&&!V[24]?y?(y.p(V,G),G[0]&16777218&&R(y,1)):(y=gt(V),y.c(),R(y,1),y.m(t,u)):y&&(De(),B(y,1,1,()=>{y=null}),Ce());let U=w;w=P(V),w===U?N[w].p(V,G):(De(),B(N[U],1,1,()=>{N[U]=null}),Ce(),S=N[w],S?S.p(V,G):(S=N[w]=M[w](V),S.c()),R(S,1),S.m(H.parentNode,H))},i(V){O||(R(y),R(S),O=!0)},o(V){B(y),B(S),O=!1},d(V){V&&(p(t),p(Y),p(H)),y&&y.d(),N[w].d(V)}}}function Kn(s){let t,e,n;return e=new dn({props:{$$slots:{default:[Jn]},$$scope:{ctx:s}}}),{c(){t=j(),ue(e.$$.fragment),this.h()},l(o){cn("svelte-13kpo59",ft.head).forEach(p),t=z(o),ie(e.$$.fragment,o),this.h()},h(){ft.title="é€£ç¶šãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ¢ãƒ¼ãƒ‰ - ç›¸å¯¾éŸ³æ„Ÿãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°"},m(o,r){$(o,t,r),le(e,o,r),n=!0},p(o,r){const f={};r[0]&33554431|r[3]&512&&(f.$$scope={dirty:r,ctx:o}),e.$set(f)},i(o){n||(R(e.$$.fragment,o),n=!0)},o(o){B(e.$$.fragment,o),n=!1},d(o){o&&p(t),ce(e,o)}}}const qt="v2.3.1-ANIMATED",Tt="07/29 04:15",At="ğŸ¬ è©•ä¾¡åˆ†å¸ƒã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…ãƒ»UXå‘ä¸Š";function Wn(){const s=/iPhone/.test(navigator.userAgent),t=/iPad/.test(navigator.userAgent),e=/Macintosh/.test(navigator.userAgent)&&"ontouchend"in document;return s||t||e?(console.log("ğŸ”Š [RandomTraining] iOS/iPadOSæ¤œå‡º - éŸ³é‡35dBè¨­å®š"),35):(console.log("ğŸ”Š [RandomTraining] PCæ¤œå‡º - éŸ³é‡-6dBè¨­å®š"),-6)}function Mt(s){return[{scale:"ãƒ‰",interval:"unison",intervalName:"ãƒ¦ãƒ‹ã‚¾ãƒ³"},{scale:"ãƒ¬",interval:"major_second",intervalName:"é•·2åº¦"},{scale:"ãƒŸ",interval:"major_third",intervalName:"é•·3åº¦"},{scale:"ãƒ•ã‚¡",interval:"perfect_fourth",intervalName:"å®Œå…¨4åº¦"},{scale:"ã‚½",interval:"perfect_fifth",intervalName:"å®Œå…¨5åº¦"},{scale:"ãƒ©",interval:"major_sixth",intervalName:"é•·6åº¦"},{scale:"ã‚·",interval:"major_seventh",intervalName:"é•·7åº¦"},{scale:"ãƒ‰ï¼ˆé«˜ï¼‰",interval:"octave",intervalName:"ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–"}].map((e,n)=>{const o=s.find(r=>r.targetNote&&r.targetNote.includes(e.scale))||s[n];if(o&&o.accuracy!=="notMeasured"){const r=parseFloat(o.accuracy)||0,f=Math.round((100-r)*.5);return{type:e.interval,scale:e.scale,intervalName:e.intervalName,attempts:1,averageError:f,accuracy:r}}else return{type:e.interval,scale:e.scale,intervalName:e.intervalName,attempts:0,averageError:null,accuracy:0}})}function Yn(s){if(!s||!Array.isArray(s))return console.warn("âš ï¸ [RandomTraining] sessionHistory ãŒç„¡åŠ¹ã§ã™"),[];const t=[{type:"unison",scale:"ãƒ‰",intervalName:"ãƒ¦ãƒ‹ã‚¾ãƒ³",noteIndex:0},{type:"major_second",scale:"ãƒ¬",intervalName:"é•·2åº¦",noteIndex:1},{type:"major_third",scale:"ãƒŸ",intervalName:"é•·3åº¦",noteIndex:2},{type:"perfect_fourth",scale:"ãƒ•ã‚¡",intervalName:"å®Œå…¨4åº¦",noteIndex:3},{type:"perfect_fifth",scale:"ã‚½",intervalName:"å®Œå…¨5åº¦",noteIndex:4},{type:"major_sixth",scale:"ãƒ©",intervalName:"é•·6åº¦",noteIndex:5},{type:"major_seventh",scale:"ã‚·",intervalName:"é•·7åº¦",noteIndex:6},{type:"octave",scale:"ãƒ‰ï¼ˆé«˜ï¼‰",intervalName:"ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–",noteIndex:7}],e={};return t.forEach(n=>{e[n.type]={type:n.type,scale:n.scale,intervalName:n.intervalName,attempts:0,successCount:0,accuracySum:0,accuracyValues:[],errorValues:[]}}),s.forEach(n=>{!n.noteResults||!Array.isArray(n.noteResults)||n.noteResults.forEach((o,r)=>{if(r>=t.length)return;const f=t[r].type,m=e[f];if(m.attempts++,o.accuracy!=="notMeasured"&&typeof o.accuracy=="number"){m.accuracyValues.push(o.accuracy),m.accuracySum+=o.accuracy;const u=Math.round((100-o.accuracy)*.5);m.errorValues.push(u),o.accuracy>=70&&m.successCount++}})}),t.map(n=>{const o=e[n.type];if(o.attempts===0)return{type:n.type,scale:n.scale,intervalName:n.intervalName,attempts:0,averageError:null,accuracy:0};const r=o.accuracyValues.length>0?Math.round(o.accuracySum/o.accuracyValues.length):0,f=o.errorValues.length>0?Math.round(o.errorValues.reduce((u,c)=>u+c,0)/o.errorValues.length):null,m=o.accuracyValues.length>0?Math.round(o.successCount/o.accuracyValues.length*100):0;return{type:n.type,scale:n.scale,intervalName:n.intervalName,mastery:m,attempts:o.attempts,averageError:f,accuracy:r}})}function Zn(s){const t=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];if(s<=0)return"ãƒ¼ãƒ¼";const n=Math.round(12*Math.log2(s/440)),o=(n+9+120)%12,r=Math.floor((n+9)/12)+4;return t[o]+r}function kt(s,t){const e=[{factor:4,freq:s*4,description:"2ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸Š"},{factor:3,freq:s*3,description:"1.5ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸Š"},{factor:2.5,freq:s*2.5,description:"1.3ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸Š"},{factor:2,freq:s*2,description:"1ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸Š"},{factor:1.5,freq:s*1.5,description:"0.5ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸Š"},{factor:1,freq:s,description:"è£œæ­£ãªã—"},{factor:.75,freq:s*.75,description:"0.33ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸‹"},{factor:.67,freq:s*.67,description:"0.5ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸‹"},{factor:.5,freq:s*.5,description:"1ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸‹"},{factor:.4,freq:s*.4,description:"1.3ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸‹"},{factor:.33,freq:s*.33,description:"1.5ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸‹"},{factor:.25,freq:s*.25,description:"2ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸‹"}];let n=null,o=1/0;const r=t*.5,f=t*1.5,m=e.filter(u=>u.freq>=r&&u.freq<=f);for(const u of m){const c=Math.abs(u.freq-t);c<o&&(o=c,n=u)}if(!n)for(const u of e){const c=Math.abs(u.freq-t);c<o&&(o=c,n=u)}return n?{correctedFrequency:n.freq,factor:n.factor,description:n.description,error:o}:{correctedFrequency:s,factor:1,description:"è£œæ­£ãªã—ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰",error:Math.abs(s-t)}}function Ue(){try{"scrollTo"in window&&"behavior"in document.documentElement.style?window.scrollTo({top:0,behavior:"smooth"}):window.scrollTo(0,0),document.body&&(document.body.scrollTop=0),document.documentElement&&(document.documentElement.scrollTop=0),document.querySelectorAll("[data-scroll-container], .scroll-container, main").forEach(t=>{t.scrollTo?t.scrollTo(0,0):t.scrollTop=0})}catch(s){console.warn("ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¨ãƒ©ãƒ¼:",s);try{window.scroll(0,0)}catch(t){console.error("ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å®Œå…¨å¤±æ•—:",t)}}}function eo(s){}function to(s){console.error("âŒ PitchDetectorã‚¨ãƒ©ãƒ¼:",s.detail)}function no(s,t,e){let n,o,r,f,m,u,c,i,g,d;we(s,Sn,a=>e(5,n=a)),we(s,bn,a=>e(6,o=a)),we(s,mn,a=>e(52,r=a)),we(s,wn,a=>e(53,f=a)),we(s,Dn,a=>e(54,m=a)),we(s,Cn,a=>e(55,u=a)),we(s,qn,a=>e(56,c=a)),we(s,Tn,a=>e(23,i=a)),we(s,An,a=>e(57,g=a)),we(s,Mn,a=>e(24,d=a));function _(a){return Ge.evaluateOverall(a)}let h="setup",C=typeof window<"u"?new URLSearchParams(window.location.search).get("from")==="microphone-test"?(te.info("[RandomTraining] ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã‹ã‚‰ã®é·ç§»ã‚’æ¤œå‡º"),"granted"):(te.info("[RandomTraining] ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹ã‚’æ¤œå‡º"),"checking"):"checking",q=!0,E=[];const Y=["ãƒ‰","ãƒ¬","ãƒŸ","ãƒ•ã‚¡","ã‚½","ãƒ©","ã‚·","ãƒ‰ï¼ˆé«˜ï¼‰"];let w="",S=0,H=!1,O=0,y=Y.map(a=>({name:a,state:"inactive",completed:!1})),M=null,N=!1,P=0,V=null,G=!1,U=[],L=0,oe=0,_e="ãƒ¼ãƒ¼",re=null,ge={totalScore:0,grade:"C",componentScores:{pitchAccuracy:0,recognitionSpeed:0,intervalMastery:0,directionAccuracy:0,consistency:0}},se=[],he=[],Ae={},Ie={},Me={totalAttempts:0,successRate:0,averageScore:0,bestScore:0,sessionDuration:0,streakCount:0,fatigueLevel:"fresh",mostDifficultInterval:"-",mostSuccessfulInterval:"-",averageResponseTime:0,sessionStart:Date.now()},K=[],ne=null,Se=null,Ne=!0,ae=null,Re=null,Ye=null,Ze=null,ze=null;const Pe=[{note:"C4",name:"ãƒ‰ï¼ˆä¸­ï¼‰",frequency:261.63,semitonesFromC:0},{note:"Db4",name:"ãƒ‰#ï¼ˆä¸­ï¼‰",frequency:277.18,semitonesFromC:1},{note:"D4",name:"ãƒ¬ï¼ˆä¸­ï¼‰",frequency:293.66,semitonesFromC:2},{note:"Eb4",name:"ãƒ¬#ï¼ˆä¸­ï¼‰",frequency:311.13,semitonesFromC:3},{note:"E4",name:"ãƒŸï¼ˆä¸­ï¼‰",frequency:329.63,semitonesFromC:4},{note:"F4",name:"ãƒ•ã‚¡ï¼ˆä¸­ï¼‰",frequency:349.23,semitonesFromC:5},{note:"Gb4",name:"ãƒ•ã‚¡#ï¼ˆä¸­ï¼‰",frequency:369.99,semitonesFromC:6},{note:"Ab4",name:"ãƒ©bï¼ˆä¸­ï¼‰",frequency:415.3,semitonesFromC:8},{note:"Bb3",name:"ã‚·bï¼ˆä½ï¼‰",frequency:233.08,semitonesFromC:-2},{note:"B3",name:"ã‚·ï¼ˆä½ï¼‰",frequency:246.94,semitonesFromC:-1}];async function He(){var a;e(1,C="checking");try{if(console.log("ğŸ¤ [RandomTraining] AudioManagerçµŒç”±ã§ãƒã‚¤ã‚¯è¨±å¯ç¢ºèªé–‹å§‹"),!((a=navigator.mediaDevices)!=null&&a.getUserMedia)){e(1,C="error");return}const l=await $e.initialize();Ye=l.audioContext,Re=l.mediaStream,Ze=l.sourceNode,console.log("âœ… [RandomTraining] AudioManager ãƒªã‚½ãƒ¼ã‚¹å–å¾—å®Œäº†"),e(1,C="granted"),e(0,h="setup"),setTimeout(async()=>{if(ae){te.audio("[RandomTraining] PitchDetectoråˆæœŸåŒ–é–‹å§‹");const v=/iPhone/.test(navigator.userAgent),D=/iPad/.test(navigator.userAgent),k=/Macintosh/.test(navigator.userAgent)&&"ontouchend"in document;(D||k)&&(console.log("ğŸ”§ [RandomTraining] iPadæ¤œå‡º - ãƒã‚¤ã‚¯æ„Ÿåº¦7.0xè‡ªå‹•è¨­å®šé–‹å§‹"),$e.setSensitivity(7),console.log("âœ… [RandomTraining] iPad ãƒã‚¤ã‚¯æ„Ÿåº¦7.0xè‡ªå‹•è¨­å®šå®Œäº†"));try{console.log("ğŸ¤ [RandomTraining] AudioManagerå†åˆæœŸåŒ–é–‹å§‹ï¼ˆiPadå¯¾å¿œï¼‰"),await $e.initialize(),console.log("âœ… [RandomTraining] AudioManagerå†åˆæœŸåŒ–å®Œäº†")}catch(F){console.warn("âš ï¸ AudioManagerå†åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",F)}await ae.initialize(),te.audio("[RandomTraining] PitchDetectoråˆæœŸåŒ–å®Œäº†")}},200)}catch(l){te.error("[RandomTraining] ãƒã‚¤ã‚¯è¨±å¯ã‚¨ãƒ©ãƒ¼:",l),e(1,C=(l==null?void 0:l.name)==="NotAllowedError"?"denied":"error")}}function et(){const a=c,l=u,v=Pe.find(D=>D.note===a)||Pe.find(D=>D.name===l)||Pe[0];if(e(8,w=v.name),e(9,S=v.frequency),te.info(`[BaseNote] åŸºéŸ³è¨­å®šï¼ˆlocalStorageé€£æºï¼‰: ${w} = ${S}Hz`),te.info(`[BaseNote] localStorageåŸºéŸ³æƒ…å ±: note=${a}, name=${l}`),!S||S<=0)throw te.error("[BaseNote] åŸºéŸ³å‘¨æ³¢æ•°è¨­å®šã‚¨ãƒ©ãƒ¼:",v),new Error(`Invalid base frequency: ${S}`)}async function Ft(){if(H||!Se||Ne)return;if(C!=="granted"){console.log("ğŸ¤ [RandomTraining] ãƒã‚¤ã‚¯è¨±å¯ãŒå¿…è¦ã§ã™ã€‚è¨±å¯å–å¾—ã‚’é–‹å§‹...");try{await He(),console.log("ğŸ¤ [RandomTraining] ãƒã‚¤ã‚¯è¨±å¯å–å¾—å®Œäº†")}catch(l){console.error("âŒ ãƒã‚¤ã‚¯è¨±å¯ã‚¨ãƒ©ãƒ¼:",l);return}}if(!Re&&C==="granted"){console.log("ğŸ¤ [RandomTraining] AudioManagerãƒªã‚½ãƒ¼ã‚¹æœªåˆæœŸåŒ–ã®ãŸã‚å–å¾—ã—ã¾ã™");try{await He()}catch(l){console.error("âŒ AudioManagerãƒªã‚½ãƒ¼ã‚¹åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",l);return}}else Re&&console.log("ğŸ¤ [RandomTraining] AudioManagerãƒªã‚½ãƒ¼ã‚¹æ—¢å­˜ã®ãŸã‚å†åˆ©ç”¨");e(3,H=!0),e(0,h="listening"),ze=Date.now(),et();const a=Pe.find(l=>l.name===w).note;Se.triggerAttackRelease(a,2,ut(),.7),setTimeout(()=>{e(3,H=!1),e(0,h="waiting"),setTimeout(()=>nt(),500)},2e3)}async function $t(){if(H||!Se||d||!w)return;if(C!=="granted"){console.log("ğŸ¤ [RandomTraining] ãƒã‚¤ã‚¯è¨±å¯ãŒå¿…è¦ã§ã™ã€‚è¨±å¯å–å¾—ã‚’é–‹å§‹...");try{await He(),console.log("ğŸ¤ [RandomTraining] ãƒã‚¤ã‚¯è¨±å¯å–å¾—å®Œäº†")}catch(l){console.error("âŒ ãƒã‚¤ã‚¯è¨±å¯ã‚¨ãƒ©ãƒ¼:",l);return}}if(!Re&&C==="granted"){console.log("ğŸ¤ [RandomTraining] AudioManagerãƒªã‚½ãƒ¼ã‚¹æœªåˆæœŸåŒ–ã®ãŸã‚å–å¾—ã—ã¾ã™");try{await He()}catch(l){console.error("âŒ AudioManagerãƒªã‚½ãƒ¼ã‚¹åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",l);return}}else Re&&console.log("ğŸ¤ [RandomTraining] AudioManagerãƒªã‚½ãƒ¼ã‚¹æ—¢å­˜ã®ãŸã‚å†åˆ©ç”¨");if(e(3,H=!0),e(0,h="listening"),ze=Date.now(),typeof window<"u"&&window.Tone){const l=window.Tone.context||window.Tone.getContext();l&&l.state==="suspended"&&(console.log("ğŸ”„ [RandomTraining] AudioContext suspendedæ¤œå‡º - å†é–‹ä¸­..."),await l.resume(),console.log("âœ… [RandomTraining] AudioContextå†é–‹å®Œäº†"))}const a=Pe.find(l=>l.name===w).note;Se.triggerAttackRelease(a,2,ut(),.7),setTimeout(()=>{e(3,H=!1),e(0,h="waiting"),setTimeout(()=>nt(),500)},2e3)}function tt(){w&&S>0?$t():Ft(),Et()}function Et(){V&&clearInterval(V),e(11,P=0),e(12,G=!1),console.log("ğŸµ [GuideStartBar] ã‚¬ã‚¤ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆãƒãƒ¼é–‹å§‹"),V=setInterval(()=>{e(11,P+=2.5),P>=100&&(e(11,P=100),e(12,G=!0),console.log("ğŸµ [GuideStartBar] ã‚¬ã‚¤ãƒ‰é–‹å§‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ï¼"),setTimeout(()=>{e(12,G=!1),e(11,P=0)},800),clearInterval(V),V=null)},50)}function je(a,l){const D=[0,2,4,5,7,9,11,12][l],k=a*Math.pow(2,D/12);return te.debug(`[calculateExpectedFrequency] ${y[l].name}: åŸºéŸ³${a.toFixed(1)}Hz + ${D}åŠéŸ³ = ${k.toFixed(1)}Hz`),k}function Pt(a,l){return je(a,l)}function nt(){e(0,h="guiding"),O=0,N=!0,U=[],console.log(`ğŸ¬ ã‚¬ã‚¤ãƒ‰é–‹å§‹: ${w} (${S.toFixed(1)}Hz)`);function a(){if(O<y.length){O>0&&e(10,y[O-1].state="inactive",y),e(10,y[O].state="active",y);const l=Pt(S,O);lt.setScaleContext({baseFrequency:S,currentScale:y[O].name,targetFrequency:l}),console.log(`ğŸµ [Scale] åŸºéŸ³:${w}(${S.toFixed(0)}Hz) ç¾åœ¨:${y[O].name} ç›®æ¨™:${l.toFixed(0)}Hz`),O>=4&&console.log(`ğŸ” [ãƒ‡ãƒãƒƒã‚°] Step ${O}: currentBaseFrequency=${S}, currentBaseNote='${w}'`),O++,M=setTimeout(()=>{a()},600)}else Ht()}a()}function Ht(){N=!1,console.log(`ğŸ ã‚¬ã‚¤ãƒ‰å®Œäº†: ${U.length}/${y.length}ã‚¹ãƒ†ãƒƒãƒ—è©•ä¾¡`),y.length>0&&e(10,y[y.length-1].state="inactive",y),ae&&ae.stopDetection(),lt.clearContext(),Vt(),Ot(),K=Y.map(a=>{const l=U.find(v=>v.stepName===a);return l?{name:l.stepName,cents:l.adjustedFrequency?Math.round(l.centDifference):null,targetFreq:l.expectedFrequency,detectedFreq:l.adjustedFrequency||null,diff:l.adjustedFrequency?l.adjustedFrequency-l.expectedFrequency:null,accuracy:l.accuracy}:{name:a,cents:null,targetFreq:null,detectedFreq:null,diff:null,accuracy:"notMeasured"}}),Gt(),Qt(),e(0,h="results")}function Vt(){let a=0,l=0;U.forEach((k,F)=>{k.isCorrect&&a++,l+=k.accuracy});const v=U.length>0?Math.round(l/U.length):0,D=Math.round(a/y.length*100);y.length,console.log(`ğŸ¯ çµæœ: ${a}/${y.length}æ­£è§£ (${D}%) å¹³å‡ç²¾åº¦${v}%`),U.length>0&&[...U]}function Bt(){ct(`${Ke}/microphone-test`)}function Oe(){ct(`${Ke}/`)}async function Lt(){try{e(32,Ne=!0),e(31,Se=new hn({urls:{C4:"C4.mp3"},baseUrl:`${Ke}/audio/piano/`,release:1.5,volume:Wn(),onload:()=>{e(32,Ne=!1)},onerror:k=>{console.error("âŒ Salamander PianoéŸ³æºèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:",k),e(32,Ne=!1)}}).toDestination());const a=/iPhone/.test(navigator.userAgent),l=/iPad/.test(navigator.userAgent),v=/Macintosh/.test(navigator.userAgent)&&"ontouchend"in document,D=a||l||v;console.log(l?"ğŸ” [RandomTraining] iPadæ¤œå‡º:":v?"ğŸ” [RandomTraining] iPadOSæ¤œå‡º:":a?"ğŸ” [RandomTraining] iPhoneæ¤œå‡º:":"ğŸ” [RandomTraining] ãã®ä»–ãƒ‡ãƒã‚¤ã‚¹æ¤œå‡º:",navigator.userAgent),console.log("ğŸ”Š [RandomTraining] éŸ³é‡è¨­å®šç¶­æŒ: 35dB")}catch(a){console.error("ã‚µãƒ³ãƒ—ãƒ©ãƒ¼åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",a),e(32,Ne=!1)}}async function Xe(){try{(await navigator.permissions.query({name:"microphone"})).state==="granted"?await He():e(1,C="denied")}catch{e(1,C="denied")}}function zt(){try{re=new yn,te.info("[RandomTraining] æ¡ç‚¹ã‚¨ãƒ³ã‚¸ãƒ³åˆæœŸåŒ–å®Œäº†")}catch(a){te.error("[RandomTraining] æ¡ç‚¹ã‚¨ãƒ³ã‚¸ãƒ³åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",a)}}function jt(a,l){if(!re||!N)return;const v=O-1;if(v<0||v>=y.length)return;const D=je(S,v),k={baseFrequency:S,targetFrequency:D,detectedFrequency:a,detectedNote:l,volume:L,timestamp:Date.now(),scaleIndex:v,scaleName:y[v].name};try{re.processAttempt(k)}catch(F){te.error("[RandomTraining] æ¡ç‚¹ã‚¨ãƒ³ã‚¸ãƒ³ã‚¨ãƒ©ãƒ¼:",F)}}function Ot(){if(!re){te.error("[RandomTraining] æ¡ç‚¹ã‚¨ãƒ³ã‚¸ãƒ³ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“"),xt();return}try{const a=re.generateDetailedReport();e(16,ge={totalScore:a.totalScore,grade:a.grade,componentScores:a.componentScores}),a.intervalAnalysis&&a.intervalAnalysis.masteryLevels?e(4,se=Object.entries(a.intervalAnalysis.masteryLevels).map(([l,v])=>{var D,k;return{type:l,mastery:Math.round(v),attempts:((D=a.intervalAnalysis.attemptCounts)==null?void 0:D[l])||0,accuracy:((k=a.intervalAnalysis.accuracyRates)==null?void 0:k[l])||0}})):(console.warn("âš ï¸ [RandomTraining] intervalAnalysis.masteryLevels ãŒæœªå®šç¾©ã§ã™"),e(4,se=[])),a.consistencyHistory&&Array.isArray(a.consistencyHistory)?e(17,he=a.consistencyHistory.map((l,v)=>({score:Math.round(l),timestamp:Date.now()-(a.consistencyHistory.length-v)*1e3}))):(console.warn("âš ï¸ [RandomTraining] consistencyHistory ãŒæœªå®šç¾©ã¾ãŸã¯é…åˆ—ã§ã¯ã‚ã‚Šã¾ã›ã‚“"),e(17,he=[])),e(18,Ae=a.feedback||{primary:"æ¡ç‚¹çµæœã‚’ç”Ÿæˆä¸­ã§ã™...",detailed:[],suggestions:[]}),e(20,Me={totalAttempts:a.totalAttempts||0,successRate:a.successRate||0,averageScore:a.totalScore||0,bestScore:Math.max(a.totalScore||0,Me.bestScore||0),sessionDuration:Math.round((Date.now()-Me.sessionStart)/6e4)||0,streakCount:a.streak||0,fatigueLevel:a.fatigueLevel||"normal",mostDifficultInterval:a.mostDifficultInterval||"-",mostSuccessfulInterval:a.mostSuccessfulInterval||"-",averageResponseTime:a.averageResponseTime||0}),te.info("[RandomTraining] æ¡ç‚¹çµæœç”Ÿæˆå®Œäº†:",ge)}catch(a){te.error("[RandomTraining] æ¡ç‚¹çµæœç”Ÿæˆã‚¨ãƒ©ãƒ¼:",a)}}function xt(){te.info("[RandomTraining] ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã§æ¡ç‚¹çµæœã‚’ç”Ÿæˆ"),e(16,ge={totalScore:78,grade:"B+",componentScores:{pitchAccuracy:82,recognitionSpeed:75,intervalMastery:80,directionAccuracy:85,consistency:70}}),e(4,se=[{type:"unison",mastery:95,attempts:8,accuracy:98},{type:"major_second",mastery:82,attempts:8,accuracy:85},{type:"major_third",mastery:78,attempts:8,accuracy:80},{type:"perfect_fourth",mastery:65,attempts:8,accuracy:68},{type:"perfect_fifth",mastery:88,attempts:8,accuracy:90},{type:"major_sixth",mastery:72,attempts:8,accuracy:75},{type:"major_seventh",mastery:58,attempts:8,accuracy:62},{type:"octave",mastery:92,attempts:8,accuracy:94}]),e(17,he=[{score:65,timestamp:Date.now()-42e4},{score:72,timestamp:Date.now()-36e4},{score:68,timestamp:Date.now()-3e5},{score:75,timestamp:Date.now()-24e4},{score:78,timestamp:Date.now()-18e4},{score:82,timestamp:Date.now()-12e4},{score:80,timestamp:Date.now()-6e4},{score:85,timestamp:Date.now()}]),e(18,Ae={type:"improvement",primary:"è‰¯ã„é€²æ­©ãŒè¦‹ã‚‰ã‚Œã¾ã™ï¼",summary:"éŸ³ç¨‹ã®èªè­˜ç²¾åº¦ãŒå‘ä¸Šã—ã¦ã„ã¾ã™ã€‚ç‰¹ã«å®Œå…¨5åº¦ã¨ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ã®ç¿’å¾—åº¦ãŒé«˜ãã€åŸºæœ¬çš„ãªéŸ³æ„ŸãŒèº«ã«ã¤ã„ã¦ãã¦ã„ã¾ã™ã€‚",details:[{category:"strengths",text:"ãƒ¦ãƒ‹ã‚¾ãƒ³ã¨ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ã®èªè­˜ãŒã»ã¼å®Œç’§ã§ã™"},{category:"strengths",text:"å®Œå…¨5åº¦ã®å®‰å®šæ€§ãŒå„ªç§€ã§ã™"},{category:"improvements",text:"å®Œå…¨4åº¦ã®ç·´ç¿’ã‚’ã‚‚ã†å°‘ã—å¢—ã‚„ã—ã¾ã—ã‚‡ã†"},{category:"improvements",text:"é•·7åº¦ã®èªè­˜ç²¾åº¦ã‚’å‘ä¸Šã•ã›ã¾ã—ã‚‡ã†"},{category:"tips",text:"4åº¦ã¯ã€Œã‚½ãƒ¼ãƒ•ã‚¡ãƒ¼ã€ã®éŸ³ç¨‹ã§ã™"},{category:"practice",text:"æ¯æ—¥15åˆ†ã®ç¶™ç¶šç·´ç¿’ã‚’å¿ƒãŒã‘ã¾ã—ã‚‡ã†"}],nextSteps:["å®Œå…¨4åº¦ã®é›†ä¸­ç·´ç¿’ã‚’è¡Œã„ã¾ã—ã‚‡ã†","é€£ç¶šãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè·µç·´ç¿’ã‚’","1æ—¥15åˆ†ã®ç¶™ç¶šç·´ç¿’ã‚’å¿ƒãŒã‘ã¾ã—ã‚‡ã†"],motivation:"ç¶™ç¶šã¯åŠ›ãªã‚Šï¼ã‚ãªãŸã®ç›¸å¯¾éŸ³æ„Ÿã¯ç¢ºå®Ÿã«å‘ä¸Šã—ã¦ã„ã¾ã™ï¼"}),e(20,Me={totalAttempts:32,successRate:68.8,averageScore:78,bestScore:85,sessionDuration:8,streakCount:4,fatigueLevel:"normal",mostDifficultInterval:"å®Œå…¨4åº¦",mostSuccessfulInterval:"ãƒ¦ãƒ‹ã‚¾ãƒ³",averageResponseTime:2.1,sessionStart:Date.now()-48e4}),te.info("[RandomTraining] ãƒ†ã‚¹ãƒˆæ¡ç‚¹çµæœç”Ÿæˆå®Œäº†")}function Gt(){if(!K||K.length===0){console.warn("[UnifiedScore] noteResultsForDisplay ãŒç©ºã§ã™");return}const a=K.filter(Q=>Q.accuracy!=="notMeasured").length,l=K.length,v=K.filter(Q=>Q.accuracy!=="notMeasured"&&typeof Q.accuracy=="number").map(Q=>Q.accuracy),D=v.length>0?Math.round(v.reduce((Q,be)=>Q+be,0)/v.length):0,k=w||"Unknown",F=S||0,Z=K.map(Q=>({name:Q.name,note:Q.note||Q.name,frequency:Q.targetFreq||Q.expectedFrequency,detectedFrequency:Q.detectedFreq,cents:Q.cents,grade:Ge.evaluateNote(Q.cents),targetFreq:Q.targetFreq,diff:Q.diff})),ee=g,W=(ee==null?void 0:ee.sessionHistory)||[],ye={timestamp:new Date,baseNote:k,baseFrequency:F,noteResults:Z,measuredNotes:a,accuracy:D,grade:Ge.evaluateSession(K)},Te=[...W,ye];e(21,ne={mode:"continuous",timestamp:new Date,duration:60,totalNotes:l,measuredNotes:a,averageAccuracy:D,baseNote:k,baseFrequency:F,noteResults:Z,distribution:Ge.calculateDistribution(K),sessionHistory:Te,unifiedGrade:_(Te)}),console.log("[UnifiedScore] çµ±åˆæ¡ç‚¹ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆå®Œäº†ï¼ˆå®Œå…¨ç‰ˆï¼‰:",ne),Ut()}async function Ut(){if(!K||K.length===0){console.warn("ğŸ“Š [SessionStorage] ä¿å­˜ãƒ‡ãƒ¼ã‚¿ãªã—");return}try{console.log("ğŸ“Š [SessionStorage] ã‚»ãƒƒã‚·ãƒ§ãƒ³çµæœä¿å­˜é–‹å§‹");const a=K.map(F=>({name:F.name,cents:F.cents,targetFreq:F.targetFreq||F.expectedFrequency,detectedFreq:F.detectedFreq,diff:F.diff,accuracy:typeof F.accuracy=="number"?F.accuracy:0})),l=ze?Math.round((Date.now()-ze)/1e3):60;await _n(a,l,c,u)?(console.log("ğŸ“Š [SessionStorage] ã‚»ãƒƒã‚·ãƒ§ãƒ³çµæœä¿å­˜å®Œäº†"),console.log("ğŸ“Š [SessionStorage] ä¿å­˜å¾Œã®çŠ¶æ³:",{currentSession:f,totalSessions:i.length,isCompleted:o,nextBaseNote:c,nextBaseName:u})):console.error("ğŸ“Š [SessionStorage] ã‚»ãƒƒã‚·ãƒ§ãƒ³çµæœä¿å­˜å¤±æ•—")}catch(a){console.error("ğŸ“Š [SessionStorage] ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¿å­˜ã‚¨ãƒ©ãƒ¼:",a)}}async function Qt(){try{if(re){const a=i||[];for(const[v,D]of a.entries())if(D.noteResults&&D.noteResults.length>0){const k=D.baseFrequency||262;for(const F of D.noteResults)F.detectedFreq&&F.targetFreq&&await re.analyzePerformance({baseFreq:k,targetFreq:F.targetFreq,detectedFreq:F.detectedFreq,responseTime:2e3,volume:50,harmonicCorrection:null})}const l=re.generateDetailedReport();e(16,ge={totalScore:l.totalScore||0,grade:l.grade||"C",componentScores:l.componentScores||{accuracy:0,speed:0,consistency:0}}),l.intervalAnalysis&&l.intervalAnalysis.masteryLevels?e(4,se=Object.entries(l.intervalAnalysis.masteryLevels).map(([v,D])=>{var k;return{type:v,mastery:Math.round(D),attempts:((k=l.intervalAnalysis.attemptCounts)==null?void 0:k[v])||0,accuracy:Math.round(D*.9)}})):e(4,se=Mt(K)),l.consistencyHistory&&Array.isArray(l.consistencyHistory)?e(17,he=l.consistencyHistory.map((v,D)=>({score:Math.round(v),timestamp:Date.now()-(l.consistencyHistory.length-D)*1e3}))):e(17,he=rt(K)),e(18,Ae=st(K)||l.feedback),console.log("ğŸ¯ [generateEnhancedScoringData] æŠ€è¡“åˆ†æçµæœç”Ÿæˆã‚’é–‹å§‹"),console.log("ğŸ¯ [generateEnhancedScoringData] results:",l),e(19,Ie=Xt(l)),console.log("ğŸ¯ [generateEnhancedScoringData] technicalFeedbackDataçµæœ:",Ie),e(20,Me={totalAttempts:l.totalAttempts||K.length,successRate:l.successRate||K.filter(v=>v.accuracy!=="notMeasured").length/K.length*100,averageScore:l.totalScore||(ne==null?void 0:ne.averageAccuracy)||0,bestScore:Math.max(l.totalScore||0,Me.bestScore||0),sessionDuration:Math.round(60),streakCount:l.streak||0,fatigueLevel:l.fatigueLevel||"normal",mostDifficultInterval:l.mostDifficultInterval||"æœªç‰¹å®š",mostSuccessfulInterval:l.mostSuccessfulInterval||"æœªç‰¹å®š",averageResponseTime:l.averageResponseTime||2.5,sessionStart:Date.now()-6e4})}else ot();console.log("[EnhancedScoring] è¿½åŠ æ¡ç‚¹ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆå®Œäº†")}catch(a){console.error("[EnhancedScoring] ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆã‚¨ãƒ©ãƒ¼:",a),ot()}}function ot(){const a=K.filter(v=>v.accuracy!=="notMeasured"),l=(ne==null?void 0:ne.averageAccuracy)||0;e(16,ge={totalScore:Math.round(l*.8),grade:l>=90?"A":l>=80?"B":l>=70?"C":"D",componentScores:{accuracy:l,speed:85,consistency:Math.max(60,l-10)}}),e(4,se=Mt(K)),e(17,he=rt()),e(18,Ae=st(K)),e(20,Me={totalAttempts:K.length,successRate:a.length/K.length*100,averageScore:l,bestScore:l,sessionDuration:60,streakCount:0,fatigueLevel:"normal",mostDifficultInterval:"æœªåˆ†æ",mostSuccessfulInterval:"æœªåˆ†æ",averageResponseTime:2.5,sessionStart:Date.now()-6e4})}function rt(a){const l=(ne==null?void 0:ne.averageAccuracy)||70;return Array.from({length:8},(v,D)=>({score:Math.max(30,Math.min(100,l+(Math.random()-.5)*20)),timestamp:Date.now()-(8-D)*7500}))}function st(a){const l=a.filter(Be=>Be.accuracy!=="notMeasured").length,v=(ne==null?void 0:ne.averageAccuracy)||0,D=8,k=i||[],F=k.length,Z={type:"info",categories:[{name:"éŸ³ç¨‹ç²¾åº¦",icon:"Target",score:v,message:`${v}%ã®ç²¾åº¦ã§éŸ³ç¨‹ã‚’æ‰ãˆã¦ã„ã¾ã™`},{name:"æ¸¬å®šæˆåŠŸç‡",icon:"Mic",score:Math.round(l/a.length*100),message:`${a.length}éŸ³ä¸­${l}éŸ³ã‚’æ­£å¸¸ã«æ¸¬å®š`}]};if(F<D)return Z;let ee,W,ye;const Te=(ne==null?void 0:ne.unifiedGrade)||"E",Q=k.length;let be=0,fe=0,de=0;k.forEach(Be=>{Be.grade==="excellent"?be++:Be.grade==="good"?fe++:Be.grade==="pass"&&de++});const pe=Q>0?Math.round(be/Q*100):0,Ve=Q>0?Math.round((be+fe+de)/Q*100):0,ve=Q>0?Math.round((be+fe+de)/Q*100):0;switch(Te){case"S":ee="excellent",W="éŸ³æ¥½å®¶ãƒ¬ãƒ™ãƒ«ã®ç›¸å¯¾éŸ³æ„Ÿã‚’é”æˆï¼",ye=`å„ªç§€ç‡${pe}%è¶…ãˆã®å®ŸåŠ›ã‚’è¨¼æ˜ã•ã‚Œã¾ã—ãŸã€‚`;break;case"A":ee="excellent",W="ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ™ãƒ«åˆ°é”ï¼",ye=`å„ªç§€ç‡${pe}%ã®å®‰å®šã—ãŸéŸ³æ„Ÿèƒ½åŠ›ã§ã™ã€‚`;break;case"B":ee="improvement",W="ãƒ—ãƒ­ãƒ•ã‚£ã‚·ã‚¨ãƒ³ãƒˆç´šé”æˆï¼",ye=`è‰¯å¥½ç‡${Ve}%ã®ç¢ºå®Ÿãªé€²æ­©ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚`;break;case"C":ee="improvement",W="ã‚¢ãƒ‰ãƒãƒ³ã‚¹ç´šåˆ°é”ï¼",ye=`åˆæ ¼ç‡${ve}%ã§ç€å®Ÿã«æˆé•·ä¸­ã§ã™ã€‚`;break;case"D":ee="practice",W="ç¶™ç¶šç·´ç¿’ã§å¿…ãšä¸Šé”ï¼",ye=`ç¾åœ¨ã®åˆæ ¼ç‡${ve}%ã‹ã‚‰ç›®æ¨™70%ã¸å‘ã‘ã¦ç·´ç¿’ã‚’ç¶šã‘ã¾ã—ã‚‡ã†ã€‚`;break;case"E":default:ee="encouragement",W="Eç´šãƒ“ã‚®ãƒŠãƒ¼",ye="ç·´ç¿’é–‹å§‹æ®µéšã§ã™ã€‚ç¶™ç¶šçš„ãªç·´ç¿’ã§å¿…ãšä¸Šé”ã—ã¾ã™ã€‚";break}return{...Z,type:ee,primary:W,summary:ye}}function Xt(a){var Te,Q,be;if((i||[]).length<8||!a)return null;const k=a.improvements||[];(Te=a.detailed)!=null&&Te.statistics;const F=[];let Z=0,ee=0;if((Q=a.detailed)!=null&&Q.intervals){const fe=a.detailed.intervals;if(fe.totalAnalyses>0){let de=0,pe=0;for(const[Ve,ve]of Object.entries(fe.masteryLevels))ve.attempts>0&&(de+=ve.averageAccuracy*ve.attempts,pe+=ve.attempts);Z=pe>0?de/pe:0}}if((be=a.detailed)!=null&&be.directions){const fe=a.detailed.directions;if(fe.totalAnalyses>0){let de=0,pe=0;for(const[Ve,ve]of Object.entries(fe.masteryData))ve.attempts>0&&(de+=ve.averageAccuracy*ve.attempts,pe+=ve.attempts);ee=pe>0?de/pe:0}}F.push({category:"improvements",text:`éŸ³ç¨‹ç²¾åº¦: ${Math.round(Z)}%ã€€ï¼ˆéŸ³ã®é«˜ã•ã‚’æ‰ãˆã‚‹æ­£ç¢ºæ€§ã€€ç›®æ¨™åŸºæº–ï¼š70ã€œ85%ï¼‰`}),F.push({category:"improvements",text:`æ–¹å‘æ€§: ${Math.round(ee)}%ã€€ï¼ˆéŸ³ç¨‹ã®ä¸Šä¸‹åˆ¤æ–­ã®ç²¾åº¦ã€€ç›®æ¨™åŸºæº–ï¼š80ã€œ90%ï¼‰`});const W=k.map(fe=>({category:"tips",text:fe.message})),ye=k.flatMap(fe=>(fe.actions||[]).map(de=>({category:"practice",text:de})));return[...F,...W,...ye],{type:"info",primary:"è©³ç´°åˆ†æçµæœ",summary:"éŸ³ç¨‹ç²¾åº¦ãƒ»ä¸€è²«æ€§ãƒ»æ–¹å‘æ€§ã®ç·åˆåˆ†æ",details:F}}ln(async()=>{if(!(typeof localStorage<"u"?localStorage.getItem("mic-test-completed"):null)){console.log("ğŸš« [RandomTraining] ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆæœªå®Œäº† - æº–å‚™ç”»é¢è¡¨ç¤º"),Xe();return}console.log("ğŸ“Š [SessionStorage] ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†åˆæœŸåŒ–é–‹å§‹");try{if(await it()){if(console.log("ğŸ“Š [SessionStorage] ã‚»ãƒƒã‚·ãƒ§ãƒ³é€²è¡ŒçŠ¶æ³ã®èª­ã¿è¾¼ã¿å®Œäº†"),console.log("ğŸ“Š [SessionStorage] ç¾åœ¨ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³:",f,"/ 8"),console.log("ğŸ“Š [SessionStorage] æ¬¡ã®åŸºéŸ³:",c,"(",u,")"),console.log("ğŸ“Š [SessionStorage] å®Œäº†çŠ¶æ³:",o?"8ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†":`æ®‹ã‚Š${m}ã‚»ãƒƒã‚·ãƒ§ãƒ³`),o&&(console.log("ğŸ”„ [SessionStorage] 8ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†æ¤œå‡º - æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹å‡¦ç†"),await xe()?console.log("âœ… [SessionStorage] æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹å®Œäº† - ã‚»ãƒƒã‚·ãƒ§ãƒ³1/8ã‹ã‚‰å†é–‹"):console.warn("âš ï¸ [SessionStorage] æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹å‡¦ç†ãŒå¤±æ•—")),f>1&&!o){console.warn("ğŸ”„ [SessionStorage] ã‚»ãƒƒã‚·ãƒ§ãƒ³é€”ä¸­ã§ã®ãƒªãƒ­ãƒ¼ãƒ‰æ¤œå‡º - ã‚»ãƒƒã‚·ãƒ§ãƒ³1ã‹ã‚‰å†é–‹"),console.warn("ğŸ”„ [SessionStorage] ç¾åœ¨:",f,"ã‚»ãƒƒã‚·ãƒ§ãƒ³ç›® â†’ ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹èª˜å°");const{SessionStorageManager:v}=await at(async()=>{const{SessionStorageManager:F}=await import("../chunks/C2LwfFrM.js").then(Z=>Z.h);return{SessionStorageManager:F}},__vite__mapDeps([0,1,2,3,4,5]),import.meta.url),D=v.getInstance();typeof localStorage<"u"&&(localStorage.removeItem("random-training-progress"),localStorage.removeItem("random-training-progress-backup"));const{resetProgress:k}=await at(async()=>{const{resetProgress:F}=await import("../chunks/C2LwfFrM.js").then(Z=>Z.j);return{resetProgress:F}},__vite__mapDeps([0,1,2,3,4,5]),import.meta.url);await k(),console.log("ğŸ”„ [SessionStorage] localStorage + ã‚¹ãƒˆã‚¢çŠ¶æ…‹å®Œå…¨ãƒªã‚»ãƒƒãƒˆå®Œäº†"),Xe();return}}else console.log("ğŸ“Š [SessionStorage] æ–°è¦ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹")}catch(l){console.error("ğŸ“Š [SessionStorage] åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",l)}if(Lt(),zt(),r.url.searchParams.get("from")==="microphone-test"){console.log("ğŸ¤ [RandomTraining] ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã‹ã‚‰ã®é·ç§»ã‚’æ¤œå‡º");const l=new URL(window.location);if(l.searchParams.delete("from"),window.history.replaceState({},"",l),e(1,C="granted"),e(0,h="setup"),console.log('ğŸ¤ [RandomTraining] microphoneState="granted", trainingPhase="setup" ã«è¨­å®š'),!Re){console.log("ğŸ¤ [RandomTraining] AudioManagerãƒªã‚½ãƒ¼ã‚¹å–å¾—é–‹å§‹");try{const v=await $e.initialize();Ye=v.audioContext,Re=v.mediaStream,Ze=v.sourceNode,console.log("ğŸ¤ [RandomTraining] AudioManagerãƒªã‚½ãƒ¼ã‚¹å–å¾—å®Œäº†")}catch(v){console.warn("âš ï¸ AudioManagerãƒªã‚½ãƒ¼ã‚¹å–å¾—å¤±æ•—ï¼ˆå¾Œã§å†è©¦è¡Œï¼‰:",v)}}if(await new Promise(v=>setTimeout(v,300)),ae&&ae.getIsInitialized&&!ae.getIsInitialized())try{console.log("ğŸ™ï¸ [RandomTraining] PitchDetectoråˆæœŸåŒ–é–‹å§‹");const v=$e.getStatus();console.log("ğŸ” [RandomTraining] AudioManagerçŠ¶æ…‹:",v),(!v.isInitialized||!v.mediaStreamActive)&&(console.log("ğŸ”„ [RandomTraining] AudioManagerçŠ¶æ…‹ä¸è‰¯ - å†åˆæœŸåŒ–å®Ÿè¡Œ"),await $e.initialize()),await ae.initialize(),console.log("âœ… [RandomTraining] PitchDetectoråˆæœŸåŒ–å®Œäº†")}catch(v){console.warn("âš ï¸ PitchDetectoråˆæœŸåŒ–å¤±æ•—:",v)}}else await new Promise(l=>setTimeout(l,100)),Xe()});function Jt(a){const{frequency:l,note:v,volume:D,rawVolume:k,clarity:F}=a.detail;let Z=l,ee=v;if(h==="guiding"&&N&&S>0&&l>0){const W=Kt(l);W&&(Z=W.frequency,ee=W.note)}e(14,oe=Z),e(15,_e=ee),e(13,L=D),Wt(l),re&&l>0&&S>0&&jt(l,v)}function Kt(a){if(!a||a<=0||!N||!S||L<25)return null;const v=O-1;if(v<0||v>=y.length)return null;const D=je(S,v);if(!D||D<=0)return null;const F=kt(a,D).correctedFrequency,Z=Zn(F);return{frequency:Math.round(F),note:Z}}function Wt(a,l){if(!a||a<=0||!N)return;if(!S||S<=0){console.error(`âŒ [æ¡ç‚¹ã‚¨ãƒ©ãƒ¼] åŸºéŸ³å‘¨æ³¢æ•°ãŒç„¡åŠ¹: ${S}Hz`),console.error(`âŒ [æ¡ç‚¹ã‚¨ãƒ©ãƒ¼] åŸºéŸ³å: ${w}`),console.error(`âŒ [æ¡ç‚¹ã‚¨ãƒ©ãƒ¼] activeStepIndex: ${O-1}`),console.error(`âŒ [æ¡ç‚¹ã‚¨ãƒ©ãƒ¼] trainingPhase: ${h}`),console.error(`âŒ [æ¡ç‚¹ã‚¨ãƒ©ãƒ¼] isGuideAnimationActive: ${N}`);return}if(L<25)return;const D=O-1;if(D<0||D>=y.length)return;D>=4&&te.debug(`[æ¡ç‚¹ãƒ‡ãƒãƒƒã‚°] activeStepIndex=${D} (${y[D].name}), currentBaseFrequency=${S}Hz`);const k=je(S,D);if(D>=0&&te.debug(`[éŸ³ç¨‹è¨ˆç®—ä¿®æ­£ç‰ˆ] ${y[D].name}: æœŸå¾…å‘¨æ³¢æ•° ${k.toFixed(1)}Hz`),!k||k<=0||!isFinite(k)){console.error("âŒ [æ¡ç‚¹ã‚¨ãƒ©ãƒ¼] æœŸå¾…å‘¨æ³¢æ•°è¨ˆç®—ã‚¨ãƒ©ãƒ¼:"),console.error(`   åŸºéŸ³å‘¨æ³¢æ•°: ${S}Hz`),console.error(`   éŸ³éšã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹: ${D}`),console.error(`   æœŸå¾…å‘¨æ³¢æ•°: ${k}Hz`);return}const F=kt(a,k),Z=F.correctedFrequency,ee=F.factor,W=Math.round(1200*Math.log2(Z/k));if((Math.abs(W)>200||ee!==1)&&(te.debug(`[ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—å¼è£œæ­£] ${y[D].name}:`),console.warn(`   æ¤œå‡ºå‘¨æ³¢æ•°: ${a.toFixed(1)}Hz`),console.warn(`   è£œæ­£å¾Œå‘¨æ³¢æ•°: ${Z.toFixed(1)}Hz`),console.warn(`   æœŸå¾…å‘¨æ³¢æ•°: ${k.toFixed(1)}Hz`),console.warn(`   ã‚»ãƒ³ãƒˆå·®: ${W}Â¢`),console.warn(`   è£œæ­£ä¿‚æ•°: ${ee} (${F.description})`),console.warn(`   åŸºéŸ³: ${w} (${S.toFixed(1)}Hz)`)),!isFinite(W)){console.error("âŒ [æ¡ç‚¹ã‚¨ãƒ©ãƒ¼] ã‚»ãƒ³ãƒˆè¨ˆç®—ã‚¨ãƒ©ãƒ¼:"),console.error(`   æ¤œå‡ºå‘¨æ³¢æ•°: ${a}Hz`),console.error(`   æœŸå¾…å‘¨æ³¢æ•°: ${k}Hz`),console.error(`   ã‚»ãƒ³ãƒˆå·®: ${W}`);return}const Te=Math.abs(W)<=50;if(L>=15){const fe=Math.max(0,Math.round(100-Math.abs(W))),de=U.findIndex(Ve=>Ve.stepIndex===D),pe={stepIndex:D,stepName:y[D].name,expectedFrequency:Math.round(k),detectedFrequency:Math.round(a),adjustedFrequency:Math.round(Z),centDifference:W,accuracy:fe,isCorrect:Te,correctionFactor:ee,correctionDescription:F.description,timestamp:Date.now()};de>=0?U[de]=pe:U.push(pe),U.length%4===0&&te.realtime(`æ¡ç‚¹é€²æ—: ${U.length}/${y.length}ã‚¹ãƒ†ãƒƒãƒ—å®Œäº†`)}}async function Yt(){if(o){console.warn("ğŸš« [RestartSame] 8ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†çŠ¶æ…‹ã§ã¯å†æŒ‘æˆ¦ä¸å¯ - æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹ãŒå¿…è¦"),await xe()?(console.log("âœ… [RestartSame] æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹å®Œäº† - ã‚»ãƒƒã‚·ãƒ§ãƒ³1/8ã‹ã‚‰å†é–‹"),window.location.reload()):console.error("âŒ [RestartSame] æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹å¤±æ•—");return}Ue(),e(0,h="setup"),M&&(clearTimeout(M),M=null),ae&&ae.resetDisplayState&&ae.resetDisplayState(),Je(),console.log("ğŸ”„ [RestartSame] åŒã˜åŸºéŸ³ã§å†æŒ‘æˆ¦:",w,S+"Hz"),console.log("ğŸ”„ [RestartSame] åŸºéŸ³æƒ…å ±ä¿æŒå®Œäº† - ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œå¾…æ©Ÿ")}async function Zt(){if(o){console.warn("ğŸš« [RestartDifferent] 8ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†çŠ¶æ…‹ã§ã¯å†æŒ‘æˆ¦ä¸å¯ - æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹ãŒå¿…è¦"),await xe()?(console.log("âœ… [RestartDifferent] æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹å®Œäº† - ã‚»ãƒƒã‚·ãƒ§ãƒ³1/8ã‹ã‚‰å†é–‹"),window.location.reload()):console.error("âŒ [RestartDifferent] æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹å¤±æ•—");return}Ue(),e(0,h="setup"),M&&(clearTimeout(M),M=null),e(8,w=""),e(9,S=0),console.log("ğŸ”„ [restartDifferentBaseNote] åŸºéŸ³æƒ…å ±ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ"),ae&&ae.resetDisplayState&&ae.resetDisplayState(),Je()}function Je(){O=0,N=!1,U=[],e(10,y=y.map(a=>({...a,state:"inactive",completed:!1})))}async function en(){console.log("ğŸš€ [StartNewCycle] 8ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†å¾Œã®æœ€åˆã‹ã‚‰æŒ‘æˆ¦é–‹å§‹");try{await xe()?(console.log("âœ… [StartNewCycle] æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹å®Œäº†"),localStorage.getItem("mic-test-completed")?(console.log("âœ… [StartNewCycle] ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆå®Œäº†ãƒ•ãƒ©ã‚°ç¢ºèª - ãƒªãƒ­ãƒ¼ãƒ‰ãªã—ã§çŠ¶æ…‹ãƒªã‚»ãƒƒãƒˆ"),Ue(),await it(),e(0,h="setup"),Je(),et(),console.log("âœ… [StartNewCycle] çŠ¶æ…‹ãƒªã‚»ãƒƒãƒˆå®Œäº† - ã‚»ãƒƒã‚·ãƒ§ãƒ³1/8ã‹ã‚‰å†é–‹")):window.location.reload()):(console.error("âŒ [StartNewCycle] æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹å¤±æ•—"),Oe())}catch(a){console.error("âŒ [StartNewCycle] æ–°ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹ã‚¨ãƒ©ãƒ¼:",a),Oe()}}function tn(a){const{type:l}=a.detail;switch(l){case"same":Yt();break;case"different":Zt();break;case"restart":en();break;case"home":Oe();break;default:console.warn("ğŸš« [ActionButtons] æœªçŸ¥ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ—:",l)}}function nn(a){const{healthy:l,errors:v,details:D}=a.detail;e(2,q=l),e(7,E=v),l||(console.warn("âš ï¸ ãƒã‚¤ã‚¯ã®å¥åº·çŠ¶æ…‹ãŒæ‚ªåŒ–:",v),h==="guiding"&&(e(0,h="setup"),console.warn("ğŸ›‘ ãƒã‚¤ã‚¯å•é¡Œã«ã‚ˆã‚Šãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’åœæ­¢")))}un(()=>{console.log("ğŸ”„ [RandomTraining] onDestroy - AudioManagerãƒªã‚½ãƒ¼ã‚¹ã¯ä¿æŒ"),Se&&(Se.dispose(),e(31,Se=null))});function on(a){fn[a?"unshift":"push"](()=>{ae=a,e(22,ae)})}return s.$$.update=()=>{s.$$.dirty[0]&6|s.$$.dirty[1]&3,s.$$.dirty[0]&1,s.$$.dirty[0]&112&&n&&o&&n.sessionHistory&&(e(4,se=Yn(n.sessionHistory)),console.log("ğŸµ [RandomTraining] intervalDataç”Ÿæˆå®Œäº†:",se.length,"ä»¶")),s.$$.dirty[0]&3&&h==="setup"&&C==="granted"&&Ue(),s.$$.dirty[0]&11|s.$$.dirty[1]&3&&h==="setup"&&C==="granted"&&Se&&!Ne&&!H&&setTimeout(()=>{h==="setup"&&!H&&(console.log("ğŸµ [ContinuousMode] è‡ªå‹•åŸºéŸ³å†ç”Ÿé–‹å§‹"),tt())},800)},[h,C,q,H,se,n,o,E,w,S,y,P,G,L,oe,_e,ge,he,Ae,Ie,Me,ne,ae,i,d,tt,Bt,Oe,Jt,tn,nn,Se,Ne,on]}class po extends rn{constructor(t){super(),sn(this,t,no,Kn,an,{},null,[-1,-1,-1,-1])}}export{po as component,go as universal};
