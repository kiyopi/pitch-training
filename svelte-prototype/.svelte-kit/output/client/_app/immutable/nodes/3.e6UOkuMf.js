import{S as He,i as Re,s as Fe,d,C as _e,m as Te,o as be,b as S,D as Ce,I as Ge,h as k,E as Me,k as D,F as we,l as Ke,M as Ue,c as i,y as u,K as Qe,e as g,f as E,G as U,j as _,R as Oe,Q as Ze,L as ze,a as oe,T as ge,A as R,g as O,t as L,r as Le,n as Se}from"../chunks/BJp-dNlk.js";import"../chunks/IHki7fMi.js";import{p as Je}from"../chunks/DSZDj4MG.js";import{g as We,b as Xe}from"../chunks/q1nTZLTz.js";import{P as Ye,C as et}from"../chunks/DZHPMXgl.js";import{a as re,P as tt,b as st}from"../chunks/B_FSRna_.js";const nt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,ot=!1,Ct=Object.freeze(Object.defineProperty({__proto__:null,ssr:ot},Symbol.toStringTag,{value:"Module"})),{document:qe}=nt;function lt(n){let e,t="ãƒã‚¤ã‚¯ã®ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã—ã¾ã™",p,s,a="ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆé–‹å§‹ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãƒã‚¤ã‚¯ã®ä½¿ç”¨ã‚’è¨±å¯ã—ã¦ãã ã•ã„",l,f;function C(o,T){if(o[0]==="pending")return ct;if(o[0]==="denied")return rt;if(o[0]==="initial")return at}let M=C(n),r=M&&M(n);return{c(){e=_("h3"),e.textContent=t,p=D(),s=_("p"),s.textContent=a,l=D(),r&&r.c(),f=Le(),this.h()},l(o){e=g(o,"H3",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-gfi16f"&&(e.textContent=t),p=k(o),s=g(o,"P",{class:!0,"data-svelte-h":!0}),U(s)!=="svelte-1w19y1h"&&(s.textContent=a),l=k(o),r&&r.l(o),f=Le(),this.h()},h(){u(e,"class","instructions-title svelte-prem1"),u(s,"class","instructions-description svelte-prem1")},m(o,T){S(o,e,T),S(o,p,T),S(o,s,T),S(o,l,T),r&&r.m(o,T),S(o,f,T)},p(o,T){M===(M=C(o))&&r?r.p(o,T):(r&&r.d(1),r=M&&M(o),r&&(r.c(),r.m(f.parentNode,f)))},d(o){o&&(d(e),d(p),d(s),d(l),d(f)),r&&r.d(o)}}}function it(n){let e,t="ãƒã‚¤ã‚¯æº–å‚™å®Œäº†",p,s,a="éŸ³é‡ã‚’èª¿æ•´ã—ã¦ã‹ã‚‰ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’é–‹å§‹ã—ã¦ãã ã•ã„",l,f,C,M,r,o=n[9]&&(n[9].isIOS||n[8].includes("ãã®ä»–")),T,w,c,v,A,I,H,F,V,q,Y="-20dB",J,B,K,P,N="+10dB",G,x,Q=n[7]?"å†ç”Ÿä¸­...":"ãƒ‰(C4)ã‚’å†ç”Ÿ",j,ce,m,b,W,X=n[6].toFixed(1)+"",ue,de,ye,Z,te,Ie="0.1x",Pe,z,ke,se,xe="10.0x",pe,ne,ee,Ae="ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–‹å§‹",De,Be,$=o&&je(n);return{c(){e=_("h3"),e.textContent=t,p=D(),s=_("p"),s.textContent=a,l=D(),f=_("div"),C=_("span"),M=L(n[8]),r=D(),$&&$.c(),T=D(),w=_("div"),c=_("div"),v=_("label"),A=L("åŸºéŸ³éŸ³é‡: "),I=L(n[5]),H=L("dB"),F=D(),V=_("div"),q=_("span"),q.textContent=Y,J=D(),B=_("input"),K=D(),P=_("span"),P.textContent=N,G=D(),x=_("button"),j=L(Q),ce=D(),m=_("div"),b=_("label"),W=L("ãƒã‚¤ã‚¯æ„Ÿåº¦: "),ue=L(X),de=L("x"),ye=D(),Z=_("div"),te=_("span"),te.textContent=Ie,Pe=D(),z=_("input"),ke=D(),se=_("span"),se.textContent=xe,pe=D(),ne=_("div"),ee=_("button"),ee.textContent=Ae,this.h()},l(h){e=g(h,"H3",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-11dam81"&&(e.textContent=t),p=k(h),s=g(h,"P",{class:!0,"data-svelte-h":!0}),U(s)!=="svelte-1pr7rqg"&&(s.textContent=a),l=k(h),f=g(h,"DIV",{class:!0});var y=E(f);C=g(y,"SPAN",{class:!0});var Ve=E(C);M=O(Ve,n[8]),Ve.forEach(d),y.forEach(d),r=k(h),$&&$.l(h),T=k(h),w=g(h,"DIV",{class:!0});var me=E(w);c=g(me,"DIV",{class:!0});var le=E(c);v=g(le,"LABEL",{class:!0});var fe=E(v);A=O(fe,"åŸºéŸ³éŸ³é‡: "),I=O(fe,n[5]),H=O(fe,"dB"),fe.forEach(d),F=k(le),V=g(le,"DIV",{class:!0});var ie=E(V);q=g(ie,"SPAN",{class:!0,"data-svelte-h":!0}),U(q)!=="svelte-5u5ai6"&&(q.textContent=Y),J=k(ie),B=g(ie,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),K=k(ie),P=g(ie,"SPAN",{class:!0,"data-svelte-h":!0}),U(P)!=="svelte-ptz1f5"&&(P.textContent=N),ie.forEach(d),G=k(le),x=g(le,"BUTTON",{class:!0});var Ne=E(x);j=O(Ne,Q),Ne.forEach(d),le.forEach(d),ce=k(me),m=g(me,"DIV",{class:!0});var ve=E(m);b=g(ve,"LABEL",{class:!0});var he=E(b);W=O(he,"ãƒã‚¤ã‚¯æ„Ÿåº¦: "),ue=O(he,X),de=O(he,"x"),he.forEach(d),ye=k(ve),Z=g(ve,"DIV",{class:!0});var ae=E(Z);te=g(ae,"SPAN",{class:!0,"data-svelte-h":!0}),U(te)!=="svelte-1m4xt2o"&&(te.textContent=Ie),Pe=k(ae),z=g(ae,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),ke=k(ae),se=g(ae,"SPAN",{class:!0,"data-svelte-h":!0}),U(se)!=="svelte-1jlarki"&&(se.textContent=xe),ae.forEach(d),ve.forEach(d),me.forEach(d),pe=k(h),ne=g(h,"DIV",{class:!0});var $e=E(ne);ee=g($e,"BUTTON",{class:!0,"data-svelte-h":!0}),U(ee)!=="svelte-kae9rs"&&(ee.textContent=Ae),$e.forEach(d),this.h()},h(){u(e,"class","ready-title svelte-prem1"),u(s,"class","ready-description svelte-prem1"),u(C,"class","device-label svelte-prem1"),u(f,"class","device-info svelte-prem1"),u(v,"class","volume-label svelte-prem1"),u(q,"class","slider-min svelte-prem1"),u(B,"type","range"),u(B,"min","-20"),u(B,"max","10"),u(B,"step","1"),u(B,"class","volume-slider svelte-prem1"),u(P,"class","slider-max svelte-prem1"),u(V,"class","volume-slider-container svelte-prem1"),u(x,"class","base-tone-test-button svelte-prem1"),x.disabled=n[7],u(c,"class","volume-control-section svelte-prem1"),u(b,"class","volume-label svelte-prem1"),u(te,"class","slider-min svelte-prem1"),u(z,"type","range"),u(z,"min","0.1"),u(z,"max","10.0"),u(z,"step","0.1"),u(z,"class","volume-slider svelte-prem1"),u(se,"class","slider-max svelte-prem1"),u(Z,"class","volume-slider-container svelte-prem1"),u(m,"class","volume-control-section svelte-prem1"),u(w,"class","volume-controls svelte-prem1"),u(ee,"class","training-start-button enabled svelte-prem1"),u(ne,"class","training-start-button-area svelte-prem1")},m(h,y){S(h,e,y),S(h,p,y),S(h,s,y),S(h,l,y),S(h,f,y),i(f,C),i(C,M),S(h,r,y),$&&$.m(h,y),S(h,T,y),S(h,w,y),i(w,c),i(c,v),i(v,A),i(v,I),i(v,H),i(c,F),i(c,V),i(V,q),i(V,J),i(V,B),ge(B,n[5]),i(V,K),i(V,P),i(c,G),i(c,x),i(x,j),i(w,ce),i(w,m),i(m,b),i(b,W),i(b,ue),i(b,de),i(m,ye),i(m,Z),i(Z,te),i(Z,Pe),i(Z,z),ge(z,n[6]),i(Z,ke),i(Z,se),S(h,pe,y),S(h,ne,y),i(ne,ee),De||(Be=[R(B,"change",n[20]),R(B,"input",n[20]),R(B,"input",n[14]),R(x,"click",n[15]),R(z,"change",n[21]),R(z,"input",n[21]),R(z,"input",n[16]),R(ee,"click",n[11])],De=!0)},p(h,y){y&256&&oe(M,h[8]),y&768&&(o=h[9]&&(h[9].isIOS||h[8].includes("ãã®ä»–"))),o?$?$.p(h,y):($=je(h),$.c(),$.m(T.parentNode,T)):$&&($.d(1),$=null),y&32&&oe(I,h[5]),y&32&&ge(B,h[5]),y&128&&Q!==(Q=h[7]?"å†ç”Ÿä¸­...":"ãƒ‰(C4)ã‚’å†ç”Ÿ")&&oe(j,Q),y&128&&(x.disabled=h[7]),y&64&&X!==(X=h[6].toFixed(1)+"")&&oe(ue,X),y&64&&ge(z,h[6])},d(h){h&&(d(e),d(p),d(s),d(l),d(f),d(r),d(T),d(w),d(pe),d(ne)),$&&$.d(h),De=!1,ze(Be)}}}function at(n){let e,t,p="ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹",s,a;return{c(){e=_("div"),t=_("button"),t.textContent=p,this.h()},l(l){e=g(l,"DIV",{class:!0});var f=E(e);t=g(f,"BUTTON",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-caex95"&&(t.textContent=p),f.forEach(d),this.h()},h(){u(t,"class","mic-test-button start svelte-prem1"),u(e,"class","mic-test-button-area svelte-prem1")},m(l,f){S(l,e,f),i(e,t),s||(a=R(t,"click",n[10]),s=!0)},p:Se,d(l){l&&d(e),s=!1,a()}}}function rt(n){let e,t,p="ãƒã‚¤ã‚¯è¨±å¯ã‚’å†è©¦è¡Œ",s,a;return{c(){e=_("div"),t=_("button"),t.textContent=p,this.h()},l(l){e=g(l,"DIV",{class:!0});var f=E(e);t=g(f,"BUTTON",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-1p3n8nt"&&(t.textContent=p),f.forEach(d),this.h()},h(){u(t,"class","mic-test-button retry svelte-prem1"),u(e,"class","mic-test-button-area svelte-prem1")},m(l,f){S(l,e,f),i(e,t),s||(a=R(t,"click",n[10]),s=!0)},p:Se,d(l){l&&d(e),s=!1,a()}}}function ct(n){let e,t="ãƒã‚¤ã‚¯æº–å‚™ä¸­...";return{c(){e=_("p"),e.textContent=t,this.h()},l(p){e=g(p,"P",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-1vb5g92"&&(e.textContent=t),this.h()},h(){u(e,"class","status-text svelte-prem1")},m(p,s){S(p,e,s)},p:Se,d(p){p&&d(e)}}}function je(n){var B,K;let e,t,p=n[9].isIOS?`${n[9].deviceType}å°‚ç”¨è¨­å®š`:"é«˜æ„Ÿåº¦è¨­å®šï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰",s,a,l,f,C="é«˜æ„Ÿåº¦è¨­å®š",M,r,o="è¶…é«˜æ„Ÿåº¦è¨­å®š",T,w,c,v,A=((B=n[9])==null?void 0:B.divisor)+"",I,H,F=((K=n[9])==null?void 0:K.gainCompensation)+"",V,q,Y,J;return{c(){e=_("div"),t=_("h4"),s=L(p),a=D(),l=_("div"),f=_("button"),f.textContent=C,M=D(),r=_("button"),r.textContent=o,T=D(),w=_("div"),c=_("small"),v=L("ä»•æ§˜æ›¸æº–æ‹ : divisor="),I=L(A),H=L(", gain="),V=L(F),q=L("x"),this.h()},l(P){e=g(P,"DIV",{class:!0});var N=E(e);t=g(N,"H4",{class:!0});var G=E(t);s=O(G,p),G.forEach(d),a=k(N),l=g(N,"DIV",{class:!0});var x=E(l);f=g(x,"BUTTON",{class:!0,"data-svelte-h":!0}),U(f)!=="svelte-1skmm1s"&&(f.textContent=C),M=k(x),r=g(x,"BUTTON",{class:!0,"data-svelte-h":!0}),U(r)!=="svelte-1lgelbb"&&(r.textContent=o),x.forEach(d),T=k(N),w=g(N,"DIV",{class:!0});var Q=E(w);c=g(Q,"SMALL",{class:!0});var j=E(c);v=O(j,"ä»•æ§˜æ›¸æº–æ‹ : divisor="),I=O(j,A),H=O(j,", gain="),V=O(j,F),q=O(j,"x"),j.forEach(d),Q.forEach(d),N.forEach(d),this.h()},h(){u(t,"class","preset-title svelte-prem1"),u(f,"class","preset-button svelte-prem1"),u(r,"class","preset-button svelte-prem1"),u(l,"class","preset-buttons svelte-prem1"),u(c,"class","svelte-prem1"),u(w,"class","preset-specs svelte-prem1"),u(e,"class","preset-section svelte-prem1")},m(P,N){S(P,e,N),i(e,t),i(t,s),i(e,a),i(e,l),i(l,f),i(l,M),i(l,r),i(e,T),i(e,w),i(w,c),i(c,v),i(c,I),i(c,H),i(c,V),i(c,q),Y||(J=[R(f,"click",n[18]),R(r,"click",n[19])],Y=!0)},p(P,N){var G,x;N&512&&p!==(p=P[9].isIOS?`${P[9].deviceType}å°‚ç”¨è¨­å®š`:"é«˜æ„Ÿåº¦è¨­å®šï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰")&&oe(s,p),N&512&&A!==(A=((G=P[9])==null?void 0:G.divisor)+"")&&oe(I,A),N&512&&F!==(F=((x=P[9])==null?void 0:x.gainCompensation)+"")&&oe(V,F)},d(P){P&&d(e),Y=!1,ze(J)}}}function ut(n){let e;function t(a,l){return a[0]==="granted"?it:lt}let p=t(n),s=p(n);return{c(){e=_("div"),s.c(),this.h()},l(a){e=g(a,"DIV",{class:!0});var l=E(e);s.l(l),l.forEach(d),this.h()},h(){u(e,"class","training-mode-content svelte-prem1")},m(a,l){S(a,e,l),s.m(e,null)},p(a,l){p===(p=t(a))&&s?s.p(a,l):(s.d(1),s=p(a),s&&(s.c(),s.m(e,null)))},d(a){a&&d(e),s.d()}}}function dt(n){let e,t,p='<div class="mic-test-header svelte-prem1"><div class="mic-icon svelte-prem1"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" x2="12" y1="19" y2="22"></line><line x1="8" x2="16" y1="22" y2="22"></line></svg></div> <div><h1 class="mic-test-title svelte-prem1">ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆ</h1> <p class="mic-test-description svelte-prem1">éŸ³æ„Ÿãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’å§‹ã‚ã‚‹å‰ã«ã€ãƒã‚¤ã‚¯ã®å‹•ä½œã‚’ç¢ºèªã—ã¾ã™</p></div></div>',s,a,l,f,C,M,r,o,T;l=new et({props:{variant:"default",padding:"lg",$$slots:{default:[ut]},$$scope:{ctx:n}}}),C=new tt({props:{frequency:n[2],note:n[3],volume:n[1],isMuted:n[0]!=="granted",muteMessage:"ãƒã‚¤ã‚¯è¨±å¯å¾Œã«é–‹å§‹"}});let w={isActive:n[0]==="granted",className:"pitch-detector-content",debugMode:!1};return o=new st({props:w}),n[22](o),o.$on("pitchUpdate",n[12]),o.$on("stateChange",mt),o.$on("error",n[13]),{c(){e=_("div"),t=_("div"),t.innerHTML=p,s=D(),a=_("div"),we(l.$$.fragment),f=D(),we(C.$$.fragment),M=D(),r=_("div"),we(o.$$.fragment),this.h()},l(c){e=g(c,"DIV",{class:!0});var v=E(e);t=g(v,"DIV",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-4qcd63"&&(t.innerHTML=p),s=k(v),a=g(v,"DIV",{class:!0});var A=E(a);Me(l.$$.fragment,A),A.forEach(d),f=k(v),Me(C.$$.fragment,v),M=k(v),r=g(v,"DIV",{style:!0});var I=E(r);Me(o.$$.fragment,I),I.forEach(d),v.forEach(d),this.h()},h(){u(t,"class","header svelte-prem1"),u(a,"class","training-mode-info svelte-prem1"),Qe(r,"display","none"),u(e,"class","microphone-test svelte-prem1")},m(c,v){S(c,e,v),i(e,t),i(e,s),i(e,a),Ce(l,a,null),i(e,f),Ce(C,e,null),i(e,M),i(e,r),Ce(o,r,null),T=!0},p(c,v){const A={};v&1073742817&&(A.$$scope={dirty:v,ctx:c}),l.$set(A);const I={};v&4&&(I.frequency=c[2]),v&8&&(I.note=c[3]),v&2&&(I.volume=c[1]),v&1&&(I.isMuted=c[0]!=="granted"),C.$set(I);const H={};v&1&&(H.isActive=c[0]==="granted"),o.$set(H)},i(c){T||(be(l.$$.fragment,c),be(C.$$.fragment,c),be(o.$$.fragment,c),T=!0)},o(c){Te(l.$$.fragment,c),Te(C.$$.fragment,c),Te(o.$$.fragment,c),T=!1},d(c){c&&d(e),_e(l),_e(C),n[22](null),_e(o)}}}function pt(n){let e,t,p;return t=new Ye({props:{showBackButton:!0,$$slots:{default:[dt]},$$scope:{ctx:n}}}),{c(){e=D(),we(t.$$.fragment),this.h()},l(s){Ge("svelte-8st1fo",qe.head).forEach(d),e=k(s),Me(t.$$.fragment,s),this.h()},h(){qe.title="ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆ - ç›¸å¯¾éŸ³æ„Ÿãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°"},m(s,a){S(s,e,a),Ce(t,s,a),p=!0},p(s,[a]){const l={};a&1073742847&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){p||(be(t.$$.fragment,s),p=!0)},o(s){Te(t.$$.fragment,s),p=!1},d(s){s&&d(e),_e(t,s)}}}function mt(n){}async function Ee(){if(typeof window<"u"&&window.Tone){const n=window.Tone.context||window.Tone.getContext();if(n&&n.state==="suspended")return console.log("ğŸ”„ [MicTest] AudioContext suspendedæ¤œå‡º - å†é–‹ä¸­..."),await n.resume(),console.log("âœ… [MicTest] AudioContextå†é–‹å®Œäº†"),!0}return!1}function ft(n,e,t){let p;Ke(n,Je,m=>t(25,p=m));let s="random";Ue(()=>{p.url.searchParams.has("mode")&&(s=p.url.searchParams.get("mode")||"random")});let a="initial",l=0,f=0,C="ãƒ¼ãƒ¼",M=null,r=0,o=3,T=null,w=!1,c="",v=null;Ue(()=>{t(9,v=re.getPlatformSpecs()),t(8,c=`${v.deviceType}æ¤œå‡º`),t(5,r=20),console.log(`ğŸ” [MicTest] ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±: ${c}`,navigator.userAgent),console.log(`ğŸ” [MicTest] ã‚¿ãƒƒãƒã‚µãƒãƒ¼ãƒˆ: ${"ontouchend"in document}`),console.log(`ğŸ“Š [MicTest] ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ä»•æ§˜é©ç”¨: divisor=${v.divisor}, gain=${v.gainCompensation}`)});const A={random:{name:"ãƒ©ãƒ³ãƒ€ãƒ åŸºéŸ³ãƒ¢ãƒ¼ãƒ‰",description:"10ç¨®é¡ã®åŸºéŸ³ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«é¸æŠã—ã¦ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°",color:"green",path:"/training/random"},continuous:{name:"é€£ç¶šãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ¢ãƒ¼ãƒ‰",description:"é¸æŠã—ãŸå›æ•°ã ã‘é€£ç¶šã§å®Ÿè¡Œã—ã€ç·åˆè©•ä¾¡ã‚’ç¢ºèª",color:"orange",path:"/training/continuous"},chromatic:{name:"12éŸ³éšãƒ¢ãƒ¼ãƒ‰",description:"ã‚¯ãƒ­ãƒãƒãƒƒã‚¯ã‚¹ã‚±ãƒ¼ãƒ«ã®ä¸Šè¡Œãƒ»ä¸‹è¡Œã§å®Œå…¨åˆ¶è¦‡",color:"purple",path:"/training/chromatic"}},I=A[s]||A.random;async function H(){var m;t(0,a="pending");try{if(console.log("ğŸ¤ [MicTest] ãƒã‚¤ã‚¯è¨±å¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆé–‹å§‹"),!((m=navigator.mediaDevices)!=null&&m.getUserMedia)){t(0,a="denied"),console.error("âŒ [MicTest] getUserMediaãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“");return}const b=await re.initialize();if(console.log("âœ… [MicTest] AudioManager ãƒªã‚½ãƒ¼ã‚¹å–å¾—å®Œäº†"),b.mediaStream&&b.audioContext)t(0,a="granted"),console.log("âœ… [MicTest] ãƒã‚¤ã‚¯è¨±å¯å®Œäº†"),await Ee(),await N(),setTimeout(async()=>{M&&(console.log("ğŸ™ï¸ [MicTest] PitchDetectoråˆæœŸåŒ–é–‹å§‹"),await Ee(),await M.initialize(),console.log("âœ… [MicTest] PitchDetectoråˆæœŸåŒ–å®Œäº†"),console.log("ğŸ¯ [MicTest] PitchDetector isActiveãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã§è‡ªå‹•æ¤œå‡ºé–‹å§‹"))},1e3);else throw new Error("ãƒªã‚½ãƒ¼ã‚¹å–å¾—å¤±æ•—")}catch(b){console.error("âŒ [MicTest] ãƒã‚¤ã‚¯è¨±å¯ã‚¨ãƒ©ãƒ¼:",b),t(0,a=((b==null?void 0:b.name)==="NotAllowedError","denied"))}}function F(){console.log("ğŸš€ [MicTest] ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–‹å§‹ - ãƒ©ãƒ³ãƒ€ãƒ åŸºéŸ³ãƒ¢ãƒ¼ãƒ‰ã¸é·ç§»"),localStorage.setItem("mic-test-completed","true"),console.log("âœ… [MicTest] ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆå®Œäº†ãƒ•ãƒ©ã‚°ã‚’ä¿å­˜"),We(`${Xe}${I.path}?from=microphone-test`)}function V(m){const{frequency:b,note:W,volume:X,rawVolume:ue,clarity:de}=m.detail;t(2,f=b),t(3,C=W),t(1,l=X)}function q(m){console.error("âŒ [MicTest] PitchDetectorã‚¨ãƒ©ãƒ¼:",m.detail);const{error:b,reason:W,recovery:X}=m.detail;W==="mediastream_ended"&&X==="restart_required"&&(console.log("ğŸ”„ [MicTest] MediaStreamçµ‚äº†æ¤œå‡º - è‡ªå‹•å¾©æ—§é–‹å§‹"),t(0,a="initial"),t(1,l=0),t(2,f=0),t(3,C="ãƒ¼ãƒ¼"),console.log("âš ï¸ [MicTest] ãƒã‚¤ã‚¯å†è¨±å¯ãŒå¿…è¦ã§ã™"))}async function Y(){try{if(console.log("ğŸ¹ [MicTest] åŸºéŸ³ãƒ†ã‚¹ãƒˆåˆæœŸåŒ–é–‹å§‹"),typeof window<"u"){if(!window.Tone){console.log("ğŸ“¦ [MicTest] Tone.jså‹•çš„èª­ã¿è¾¼ã¿é–‹å§‹");const m=document.createElement("script");m.src="https://unpkg.com/tone@latest/build/Tone.js",document.head.appendChild(m),await new Promise((b,W)=>{m.onload=b,m.onerror=W}),console.log("âœ… [MicTest] Tone.jsèª­ã¿è¾¼ã¿å®Œäº†")}await window.Tone.start(),T=new window.Tone.Sampler({urls:{C4:"C4.mp3"},baseUrl:"https://tonejs.github.io/audio/salamander/",release:1.5,volume:20,onload:()=>{console.log("âœ… [MicTest] åŸºéŸ³ã‚µãƒ³ãƒ—ãƒ©ãƒ¼èª­ã¿è¾¼ã¿å®Œäº†")},onerror:m=>{console.error("âŒ [MicTest] åŸºéŸ³ã‚µãƒ³ãƒ—ãƒ©ãƒ¼èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:",m)}}).toDestination(),console.log("ğŸ”Š [MicTest] åˆæœŸéŸ³é‡ç¶­æŒ: 20dB")}else console.warn("âš ï¸ [MicTest] windowæœªå®šç¾© - åŸºéŸ³ãƒ†ã‚¹ãƒˆç„¡åŠ¹")}catch(m){console.error("âŒ [MicTest] åŸºéŸ³ãƒ†ã‚¹ãƒˆåˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",m)}}function J(){T&&(T.volume.value=r,console.log(`ğŸ”Š [MicTest] åŸºéŸ³éŸ³é‡è¨­å®š: ${r}dB`))}async function B(){if(!(!T||w))try{t(7,w=!0),console.log("ğŸµ [MicTest] åŸºéŸ³å†ç”Ÿé–‹å§‹: C4"),await Ee()&&console.log("ğŸ”Š [MicTest] AudioContextå†é–‹å¾Œã«åŸºéŸ³å†ç”Ÿå®Ÿè¡Œ"),await T.triggerAttackRelease("C4",2,window.Tone.now(),.7),setTimeout(()=>{t(7,w=!1),console.log("âœ… [MicTest] åŸºéŸ³å†ç”Ÿå®Œäº†")},2e3)}catch(m){console.error("âŒ [MicTest] åŸºéŸ³å†ç”Ÿã‚¨ãƒ©ãƒ¼:",m),t(7,w=!1)}}function K(){try{re.setSensitivity(o),console.log(`ğŸ¤ [MicTest] ãƒã‚¤ã‚¯æ„Ÿåº¦æ›´æ–°å®Œäº†: ${o}x`)}catch(m){console.error("âŒ [MicTest] ãƒã‚¤ã‚¯æ„Ÿåº¦èª¿æ•´ã‚¨ãƒ©ãƒ¼:",m)}}function P(m){const b=re.getPlatformSpecs();switch(m){case"ipad-high":t(5,r=3),t(6,o=b.gainCompensation*2);break;case"ipad-extreme":t(5,r=7),t(6,o=b.gainCompensation*4);break;default:return}J(),K(),console.log(`ğŸ¯ [MicTest] ${m} ãƒ—ãƒªã‚»ãƒƒãƒˆé©ç”¨: åŸºéŸ³${r}dB, ãƒã‚¤ã‚¯${o}x`),console.log(`ğŸ“Š [MicTest] ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ä»•æ§˜: divisor=${b.divisor}, gainCompensation=${b.gainCompensation}, ãƒ‡ãƒã‚¤ã‚¹=${b.deviceType}`)}async function N(){if(await Y(),v&&v.deviceType==="iPad"){console.log("ğŸ”§ [MicTest] iPadæ¤œå‡º - ãƒã‚¤ã‚¯æ„Ÿåº¦5.0xè‡ªå‹•è¨­å®šé–‹å§‹"),t(6,o=5),K(),console.log("âœ… [MicTest] iPad ãƒã‚¤ã‚¯æ„Ÿåº¦5.0xè‡ªå‹•è¨­å®šå®Œäº†");try{await re.initialize(),console.log("ğŸ”„ [MicTest] iPadç”¨AudioManagerå†åˆæœŸåŒ–å®Œäº†")}catch(m){console.warn("âš ï¸ [MicTest] AudioManagerå†åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",m)}}else try{t(6,o=re.getSensitivity()),console.log(`ğŸ¤ [MicTest] ç¾åœ¨ã®ãƒã‚¤ã‚¯æ„Ÿåº¦å–å¾—: ${o}x`)}catch(m){console.warn("âš ï¸ [MicTest] ãƒã‚¤ã‚¯æ„Ÿåº¦å–å¾—ã‚¨ãƒ©ãƒ¼:",m)}}const G=()=>P("ipad-high"),x=()=>P("ipad-extreme");function Q(){r=Oe(this.value),t(5,r)}function j(){o=Oe(this.value),t(6,o)}function ce(m){Ze[m?"unshift":"push"](()=>{M=m,t(4,M)})}return[a,l,f,C,M,r,o,w,c,v,H,F,V,q,J,B,K,P,G,x,Q,j,ce]}class Mt extends He{constructor(e){super(),Re(this,e,ft,pt,Fe,{})}}export{Mt as component,Ct as universal};
