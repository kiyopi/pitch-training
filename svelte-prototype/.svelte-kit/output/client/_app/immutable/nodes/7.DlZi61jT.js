import{S as Ye,i as xe,s as $e,d as K,n as Ne,a as et,D as He,b as m,G as te,z as h,f as Y,g as a,h as v,j as p,k,m as I,o as w,p as S,Z as It,e as oe,O as Pe,A as ne,l as M,t as L,E as st,q as ve,r as fe,u as ae,w as ge,F as St,x as _e,y as pe,L as tt,M as nt,B as De,C as Ve,J as Me,K as ct,H as lt}from"../chunks/Dujr-1LT.js";import{g as rt}from"../chunks/D0QH3NT1.js";import"../chunks/B_rl9Jj9.js";import{P as it,B as Ie,C as ke}from"../chunks/BlOhcc-l.js";const{console:At}=rt,Fe="src/lib/components/VolumeBar.svelte";function Le(l){let e,t,r,i,s,n;const c={c:function(){e=w("div"),t=w("div"),r=w("div"),i=S(),s=w("div"),this.h()},l:function(d){e=p(d,"DIV",{class:!0});var u=k(e);t=p(u,"DIV",{class:!0,style:!0});var y=k(t);r=p(y,"DIV",{class:!0,style:!0}),k(r).forEach(m),y.forEach(m),i=I(u),s=p(u,"DIV",{class:!0,style:!0}),k(s).forEach(m),u.forEach(m),this.h()},h:function(){h(r,"class","volume-bar-fill"),te(r,"position","absolute"),te(r,"top","0"),te(r,"left","0"),te(r,"height","100%"),v(r,Fe,52,4,1646),h(t,"class","volume-bar-bg"),te(t,"height",l[1]),te(t,"border-radius","9999px"),te(t,"background-color","#e2e8f0"),te(t,"position","relative"),te(t,"overflow","hidden"),v(t,Fe,51,2,1500),h(s,"class","threshold-indicator svelte-13z7ppf"),te(s,"position","absolute"),te(s,"top","0"),te(s,"left",l[0]+"%"),te(s,"width","2px"),te(s,"height",l[1]),te(s,"background-color","#64748b"),te(s,"border-radius","1px"),v(s,Fe,60,2,1825),h(e,"class",n="volume-bar-container "+l[2]+" svelte-13z7ppf"),v(e,Fe,50,0,1451)},m:function(d,u){Y(d,e,u),a(e,t),a(t,r),l[5](r),a(e,i),a(e,s)},p:function(d,[u]){u&2&&te(t,"height",d[1]),u&1&&te(s,"left",d[0]+"%"),u&2&&te(s,"height",d[1]),u&4&&n!==(n="volume-bar-container "+d[2]+" svelte-13z7ppf")&&h(e,"class",n)},i:Ne,o:Ne,d:function(d){d&&m(e),l[5](null)}};return K("SvelteRegisterBlock",{block:c,id:Le.name,type:"component",source:"",ctx:l}),c}function Rt(l,e,t){let{$$slots:r={},$$scope:i}=e;et("VolumeBar",r,[]);let{volume:s=0}=e,{threshold:n=30}=e,{height:c="12px"}=e,{className:f=""}=e,d;function u(o){return o<n?"#94a3b8":o<60?"#10b981":o<80?"#f59e0b":"#ef4444"}function y(o){if(d){const g=Math.max(0,Math.min(100,o)),D=u(g);(!window.volumeBarLastUpdate||Math.abs(window.volumeBarLastUpdate-g)>10)&&(console.log("VolumeBar更新:",g.toFixed(1),"%","color:",D),window.volumeBarLastUpdate=g),t(3,d.style.width=`${g}%`,d),t(3,d.style.backgroundColor=D,d)}}He(()=>{d&&(t(3,d.style.width="0%",d),t(3,d.style.backgroundColor="#94a3b8",d),t(3,d.style.height=c,d),t(3,d.style.borderRadius="9999px",d),t(3,d.style.transition="all 0.1s ease-out",d))});const _=["volume","threshold","height","className"];Object.keys(e).forEach(o=>{!~_.indexOf(o)&&o.slice(0,2)!=="$$"&&o!=="slot"&&At.warn(`<VolumeBar> was created with unknown prop '${o}'`)});function C(o){It[o?"unshift":"push"](()=>{d=o,t(3,d)})}return l.$$set=o=>{"volume"in o&&t(4,s=o.volume),"threshold"in o&&t(0,n=o.threshold),"height"in o&&t(1,c=o.height),"className"in o&&t(2,f=o.className)},l.$capture_state=()=>({onMount:He,volume:s,threshold:n,height:c,className:f,barElement:d,getVolumeColor:u,updateVolumeBar:y}),l.$inject_state=o=>{"volume"in o&&t(4,s=o.volume),"threshold"in o&&t(0,n=o.threshold),"height"in o&&t(1,c=o.height),"className"in o&&t(2,f=o.className),"barElement"in o&&t(3,d=o.barElement)},e&&"$$inject"in e&&l.$inject_state(e.$$inject),l.$$.update=()=>{l.$$.dirty&16&&y(s)},[n,c,f,d,s,C]}class ut extends Ye{constructor(e){super(e),xe(this,e,Rt,Le,$e,{volume:4,threshold:0,height:1,className:2}),K("SvelteRegisterComponent",{component:this,tagName:"VolumeBar",options:e,id:Le.name})}get volume(){throw new Error("<VolumeBar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set volume(e){throw new Error("<VolumeBar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get threshold(){throw new Error("<VolumeBar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set threshold(e){throw new Error("<VolumeBar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get height(){throw new Error("<VolumeBar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set height(e){throw new Error("<VolumeBar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get className(){throw new Error("<VolumeBar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set className(e){throw new Error("<VolumeBar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const me="src/lib/components/PitchDisplay.svelte";function je(l){let e,t,r="精度",i,s,n,c,f,d,u,y=Ge(l[3])+"",_,C,o,g=l[3]>0?"+":"",D,B=l[3].toFixed(1)+"",P,R;const O={c:function(){e=w("div"),t=w("div"),t.textContent=r,i=S(),s=w("div"),n=w("div"),c=S(),f=w("div"),d=S(),u=w("div"),_=L(y),C=S(),o=w("div"),D=L(g),P=L(B),R=L("%"),this.h()},l:function(N){e=p(N,"DIV",{class:!0});var V=k(e);t=p(V,"DIV",{class:!0,"data-svelte-h":!0}),ne(t)!=="svelte-4oi8f7"&&(t.textContent=r),i=I(V),s=p(V,"DIV",{class:!0});var q=k(s);n=p(q,"DIV",{class:!0,style:!0}),k(n).forEach(m),c=I(q),f=p(q,"DIV",{class:!0}),k(f).forEach(m),q.forEach(m),d=I(V),u=p(V,"DIV",{class:!0,style:!0});var F=k(u);_=M(F,y),F.forEach(m),C=I(V),o=p(V,"DIV",{class:!0});var T=k(o);D=M(T,g),P=M(T,B),R=M(T,"%"),T.forEach(m),V.forEach(m),this.h()},h:function(){h(t,"class","label svelte-17lpbmi"),v(t,me,70,6,1917),h(n,"class","accuracy-bar svelte-17lpbmi"),te(n,"background-color",Be(l[3])),te(n,"width",Math.abs(l[3])+"%"),v(n,me,72,8,1996),h(f,"class","accuracy-center svelte-17lpbmi"),v(f,me,73,8,2122),h(s,"class","accuracy-bar-container svelte-17lpbmi"),v(s,me,71,6,1951),h(u,"class","accuracy-text svelte-17lpbmi"),te(u,"color",Be(l[3])),v(u,me,75,6,2177),h(o,"class","accuracy-value svelte-17lpbmi"),v(o,me,78,6,2307),h(e,"class","accuracy-display svelte-17lpbmi"),v(e,me,69,4,1880)},m:function(N,V){Y(N,e,V),a(e,t),a(e,i),a(e,s),a(s,n),a(s,c),a(s,f),a(e,d),a(e,u),a(u,_),a(e,C),a(e,o),a(o,D),a(o,P),a(o,R)},p:function(N,V){V&8&&te(n,"background-color",Be(N[3])),V&8&&te(n,"width",Math.abs(N[3])+"%"),V&8&&y!==(y=Ge(N[3])+"")&&oe(_,y),V&8&&te(u,"color",Be(N[3])),V&8&&g!==(g=N[3]>0?"+":"")&&oe(D,g),V&8&&B!==(B=N[3].toFixed(1)+"")&&oe(P,B)},d:function(N){N&&m(e)}};return K("SvelteRegisterBlock",{block:O,id:je.name,type:"if",source:"(69:2) {#if isDetecting && currentNote}",ctx:l}),O}function We(l){let e,t,r,i="目標音程",s,n,c=l[6](l[1])+"",f,d,u,y,_="現在の音程",C,o,g=(l[4]&&l[6](l[2])||"---")+"",D,B,P,R,O="周波数",j,N,V=Oe(l[0])+"",q,F,T,z=l[4]&&l[2]&&je(l);const $={c:function(){e=w("div"),t=w("div"),r=w("div"),r.textContent=i,s=S(),n=w("div"),f=L(c),d=S(),u=w("div"),y=w("div"),y.textContent=_,C=S(),o=w("div"),D=L(g),B=S(),P=w("div"),R=w("div"),R.textContent=O,j=S(),N=w("div"),q=L(V),F=S(),z&&z.c(),this.h()},l:function(H){e=p(H,"DIV",{class:!0});var G=k(e);t=p(G,"DIV",{class:!0});var ee=k(t);r=p(ee,"DIV",{class:!0,"data-svelte-h":!0}),ne(r)!=="svelte-101q5wq"&&(r.textContent=i),s=I(ee),n=p(ee,"DIV",{class:!0});var J=k(n);f=M(J,c),J.forEach(m),ee.forEach(m),d=I(G),u=p(G,"DIV",{class:!0});var se=k(u);y=p(se,"DIV",{class:!0,"data-svelte-h":!0}),ne(y)!=="svelte-1p184h3"&&(y.textContent=_),C=I(se),o=p(se,"DIV",{class:!0});var ie=k(o);D=M(ie,g),ie.forEach(m),se.forEach(m),B=I(G),P=p(G,"DIV",{class:!0});var ce=k(P);R=p(ce,"DIV",{class:!0,"data-svelte-h":!0}),ne(R)!=="svelte-1iigar3"&&(R.textContent=O),j=I(ce),N=p(ce,"DIV",{class:!0});var re=k(N);q=M(re,V),re.forEach(m),ce.forEach(m),F=I(G),z&&z.l(G),G.forEach(m),this.h()},h:function(){h(r,"class","label svelte-17lpbmi"),v(r,me,49,4,1306),h(n,"class","note-name target svelte-17lpbmi"),v(n,me,50,4,1340),h(t,"class","target-note svelte-17lpbmi"),v(t,me,48,2,1276),h(y,"class","label svelte-17lpbmi"),v(y,me,55,4,1469),h(o,"class","note-name current svelte-17lpbmi"),Pe(o,"detecting",l[4]),v(o,me,56,4,1504),h(u,"class","current-note svelte-17lpbmi"),v(u,me,54,2,1438),h(R,"class","label svelte-17lpbmi"),v(R,me,63,4,1711),h(N,"class","frequency-value svelte-17lpbmi"),v(N,me,64,4,1744),h(P,"class","frequency-display svelte-17lpbmi"),v(P,me,62,2,1675),h(e,"class",T="pitch-display "+l[5]+" svelte-17lpbmi"),v(e,me,46,0,1216)},m:function(H,G){Y(H,e,G),a(e,t),a(t,r),a(t,s),a(t,n),a(n,f),a(e,d),a(e,u),a(u,y),a(u,C),a(u,o),a(o,D),a(e,B),a(e,P),a(P,R),a(P,j),a(P,N),a(N,q),a(e,F),z&&z.m(e,null)},p:function(H,[G]){G&2&&c!==(c=H[6](H[1])+"")&&oe(f,c),G&20&&g!==(g=(H[4]&&H[6](H[2])||"---")+"")&&oe(D,g),G&16&&Pe(o,"detecting",H[4]),G&1&&V!==(V=Oe(H[0])+"")&&oe(q,V),H[4]&&H[2]?z?z.p(H,G):(z=je(H),z.c(),z.m(e,null)):z&&(z.d(1),z=null),G&32&&T!==(T="pitch-display "+H[5]+" svelte-17lpbmi")&&h(e,"class",T)},i:Ne,o:Ne,d:function(H){H&&m(e),z&&z.d()}};return K("SvelteRegisterBlock",{block:$,id:We.name,type:"component",source:"",ctx:l}),$}function Be(l){const e=Math.abs(l);return e<=10?"#10b981":e<=25?"#f59e0b":"#ef4444"}function Ge(l){const e=Math.abs(l);return e<=10?"素晴らしい！":e<=25?"もう少し！":"調整が必要"}function Oe(l){return l>0?`${l.toFixed(1)} Hz`:"--.- Hz"}function qt(l,e,t){let{$$slots:r={},$$scope:i}=e;et("PitchDisplay",r,[]);let{frequency:s=0}=e,{targetNote:n="C"}=e,{currentNote:c=""}=e,{accuracy:f=0}=e,{isDetecting:d=!1}=e,{className:u=""}=e;const y={C:"ド","C#":"ド#",Db:"レ♭",D:"レ","D#":"レ#",Eb:"ミ♭",E:"ミ",F:"ファ","F#":"ファ#",Gb:"ソ♭",G:"ソ","G#":"ソ#",Ab:"ラ♭",A:"ラ","A#":"ラ#",Bb:"シ♭",B:"シ"};function _(o){return y[o]||o}const C=["frequency","targetNote","currentNote","accuracy","isDetecting","className"];return Object.keys(e).forEach(o=>{!~C.indexOf(o)&&o.slice(0,2)!=="$$"&&o!=="slot"&&console.warn(`<PitchDisplay> was created with unknown prop '${o}'`)}),l.$$set=o=>{"frequency"in o&&t(0,s=o.frequency),"targetNote"in o&&t(1,n=o.targetNote),"currentNote"in o&&t(2,c=o.currentNote),"accuracy"in o&&t(3,f=o.accuracy),"isDetecting"in o&&t(4,d=o.isDetecting),"className"in o&&t(5,u=o.className)},l.$capture_state=()=>({frequency:s,targetNote:n,currentNote:c,accuracy:f,isDetecting:d,className:u,noteNames:y,getAccuracyColor:Be,getAccuracyMessage:Ge,formatFrequency:Oe,formatNoteName:_}),l.$inject_state=o=>{"frequency"in o&&t(0,s=o.frequency),"targetNote"in o&&t(1,n=o.targetNote),"currentNote"in o&&t(2,c=o.currentNote),"accuracy"in o&&t(3,f=o.accuracy),"isDetecting"in o&&t(4,d=o.isDetecting),"className"in o&&t(5,u=o.className)},e&&"$$inject"in e&&l.$inject_state(e.$$inject),[s,n,c,f,d,u,_]}class ft extends Ye{constructor(e){super(e),xe(this,e,qt,We,$e,{frequency:0,targetNote:1,currentNote:2,accuracy:3,isDetecting:4,className:5}),K("SvelteRegisterComponent",{component:this,tagName:"PitchDisplay",options:e,id:We.name})}get frequency(){throw new Error("<PitchDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set frequency(e){throw new Error("<PitchDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get targetNote(){throw new Error("<PitchDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set targetNote(e){throw new Error("<PitchDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get currentNote(){throw new Error("<PitchDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set currentNote(e){throw new Error("<PitchDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get accuracy(){throw new Error("<PitchDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set accuracy(e){throw new Error("<PitchDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get isDetecting(){throw new Error("<PitchDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set isDetecting(e){throw new Error("<PitchDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get className(){throw new Error("<PitchDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set className(e){throw new Error("<PitchDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:Tt}=rt,E="src/routes/training/random/+page.svelte";function ot(l,e,t){const r=l.slice();return r[38]=e[t],r[40]=t,r}function at(l,e,t){const r=l.slice();return r[38]=e[t],r[40]=t,r}function dt(l){let e,t,r;t=new ke({props:{variant:"default",padding:"lg",$$slots:{default:[pt]},$$scope:{ctx:l}},$$inline:!0});const i={c:function(){e=w("div"),pe(t.$$.fragment),this.h()},l:function(n){e=p(n,"DIV",{class:!0});var c=k(e);_e(t.$$.fragment,c),c.forEach(m),this.h()},h:function(){h(e,"class","results-screen"),v(e,E,456,6,13828)},m:function(n,c){Y(n,e,c),ge(t,e,null),r=!0},p:function(n,c){const f={};c[0]&49159|c[1]&2048&&(f.$$scope={dirty:c,ctx:n}),t.$set(f)},i:function(n){r||(ae(t.$$.fragment,n),r=!0)},o:function(n){fe(t.$$.fragment,n),r=!1},d:function(n){n&&m(e),ve(t)}};return K("SvelteRegisterBlock",{block:i,id:dt.name,type:"if",source:"(455:26) ",ctx:l}),i}function ht(l){let e,t,r,i,s,n,c,f,d,u,y;t=new ke({props:{variant:"default",padding:"lg",$$slots:{default:[wt]},$$scope:{ctx:l}},$$inline:!0}),n=new ke({props:{variant:"default",padding:"md",$$slots:{default:[bt]},$$scope:{ctx:l}},$$inline:!0}),f=new ke({props:{variant:"default",padding:"md",$$slots:{default:[yt]},$$scope:{ctx:l}},$$inline:!0}),u=new ke({props:{variant:"default",padding:"md",$$slots:{default:[Et]},$$scope:{ctx:l}},$$inline:!0});const _={c:function(){e=w("div"),pe(t.$$.fragment),r=S(),i=w("div"),s=w("div"),pe(n.$$.fragment),c=S(),pe(f.$$.fragment),d=S(),pe(u.$$.fragment),this.h()},l:function(o){e=p(o,"DIV",{class:!0});var g=k(e);_e(t.$$.fragment,g),r=I(g),i=p(g,"DIV",{class:!0});var D=k(i);s=p(D,"DIV",{class:!0});var B=k(s);_e(n.$$.fragment,B),c=I(B),_e(f.$$.fragment,B),B.forEach(m),D.forEach(m),d=I(g),_e(u.$$.fragment,g),g.forEach(m),this.h()},h:function(){h(s,"class","display-grid svelte-1samlw1"),v(s,E,421,10,12655),h(i,"class","realtime-display svelte-1samlw1"),v(i,E,420,8,12614),h(e,"class","detection-screen"),v(e,E,398,6,11641)},m:function(o,g){Y(o,e,g),ge(t,e,null),a(e,r),a(e,i),a(i,s),ge(n,s,null),a(s,c),ge(f,s,null),a(e,d),ge(u,e,null),y=!0},p:function(o,g){const D={};g[0]&769|g[1]&2048&&(D.$$scope={dirty:g,ctx:o}),t.$set(D);const B={};g[0]&2048|g[1]&2048&&(B.$$scope={dirty:g,ctx:o}),n.$set(B);const P={};g[0]&12928|g[1]&2048&&(P.$$scope={dirty:g,ctx:o}),f.$set(P);const R={};g[0]&516|g[1]&2048&&(R.$$scope={dirty:g,ctx:o}),u.$set(R)},i:function(o){y||(ae(t.$$.fragment,o),ae(n.$$.fragment,o),ae(f.$$.fragment,o),ae(u.$$.fragment,o),y=!0)},o:function(o){fe(t.$$.fragment,o),fe(n.$$.fragment,o),fe(f.$$.fragment,o),fe(u.$$.fragment,o),y=!1},d:function(o){o&&m(e),ve(t),ve(n),ve(f),ve(u)}};return K("SvelteRegisterBlock",{block:_,id:ht.name,type:"if",source:"(397:26) ",ctx:l}),_}function mt(l){let e,t,r;t=new ke({props:{variant:"success",padding:"lg",$$slots:{default:[Ct]},$$scope:{ctx:l}},$$inline:!0});const i={c:function(){e=w("div"),pe(t.$$.fragment),this.h()},l:function(n){e=p(n,"DIV",{class:!0});var c=k(e);_e(t.$$.fragment,c),c.forEach(m),this.h()},h:function(){h(e,"class","playing-screen"),v(e,E,372,6,10644)},m:function(n,c){Y(n,e,c),ge(t,e,null),r=!0},p:function(n,c){const f={};c[0]&256|c[1]&2048&&(f.$$scope={dirty:c,ctx:n}),t.$set(f)},i:function(n){r||(ae(t.$$.fragment,n),r=!0)},o:function(n){fe(t.$$.fragment,n),r=!1},d:function(n){n&&m(e),ve(t)}};return K("SvelteRegisterBlock",{block:i,id:mt.name,type:"if",source:"(371:24) ",ctx:l}),i}function vt(l){let e,t,r;t=new ke({props:{variant:"default",padding:"lg",$$slots:{default:[Bt]},$$scope:{ctx:l}},$$inline:!0});const i={c:function(){e=w("div"),pe(t.$$.fragment),this.h()},l:function(n){e=p(n,"DIV",{class:!0});var c=k(e);_e(t.$$.fragment,c),c.forEach(m),this.h()},h:function(){h(e,"class","start-screen"),v(e,E,304,6,8424)},m:function(n,c){Y(n,e,c),ge(t,e,null),r=!0},p:function(n,c){const f={};c[0]&56|c[1]&2048&&(f.$$scope={dirty:c,ctx:n}),t.$set(f)},i:function(n){r||(ae(t.$$.fragment,n),r=!0)},o:function(n){fe(t.$$.fragment,n),r=!1},d:function(n){n&&m(e),ve(t)}};return K("SvelteRegisterBlock",{block:i,id:vt.name,type:"if",source:"(303:4) {#if !isPlaying && !isDetecting && !showResults}",ctx:l}),i}function Ue(l){let e,t,r=l[38]+"",i,s,n,c=l[0][l[40]]?"✓":"×",f,d,u;const y={c:function(){e=w("div"),t=w("span"),i=L(r),s=S(),n=w("span"),f=L(c),u=S(),this.h()},l:function(C){e=p(C,"DIV",{class:!0});var o=k(e);t=p(o,"SPAN",{class:!0});var g=k(t);i=M(g,r),g.forEach(m),s=I(o),n=p(o,"SPAN",{class:!0});var D=k(n);f=M(D,c),D.forEach(m),u=I(o),o.forEach(m),this.h()},h:function(){h(t,"class","scale-note-name svelte-1samlw1"),v(t,E,484,20,14882),h(n,"class",d="scale-result-icon "+(l[0][l[40]]?"correct":"incorrect")+" svelte-1samlw1"),v(n,E,485,20,14946),h(e,"class","scale-result svelte-1samlw1"),v(e,E,483,18,14835)},m:function(C,o){Y(C,e,o),a(e,t),a(t,i),a(e,s),a(e,n),a(n,f),a(e,u)},p:function(C,o){o[0]&1&&c!==(c=C[0][C[40]]?"✓":"×")&&oe(f,c),o[0]&1&&d!==(d="scale-result-icon "+(C[0][C[40]]?"correct":"incorrect")+" svelte-1samlw1")&&h(n,"class",d)},d:function(C){C&&m(e)}};return K("SvelteRegisterBlock",{block:y,id:Ue.name,type:"each",source:"(483:16) {#each scaleNotes as note, index}",ctx:l}),y}function gt(l){let e;const t={c:function(){e=L("もう一度チャレンジ")},l:function(i){e=M(i,"もう一度チャレンジ")},m:function(i,s){Y(i,e,s)},d:function(i){i&&m(e)}};return K("SvelteRegisterBlock",{block:t,id:gt.name,type:"slot",source:'(496:14) <Button variant=\\"success\\" size=\\"lg\\" fullWidth on:click={startTraining}>',ctx:l}),t}function _t(l){let e;const t={c:function(){e=L("結果を保存")},l:function(i){e=M(i,"結果を保存")},m:function(i,s){Y(i,e,s)},d:function(i){i&&m(e)}};return K("SvelteRegisterBlock",{block:t,id:_t.name,type:"slot",source:'(499:14) <Button variant=\\"secondary\\" size=\\"md\\" fullWidth>',ctx:l}),t}function pt(l){let e,t,r="トレーニング結果",i,s,n,c,f,d,u,y="点",_,C,o,g,D,B,P,R,O,j,N,V,q,F,T,z,$="音階別結果",A,H,G,ee,J,se,ie,ce,re=Me(l[16]),Z=[];for(let de=0;de<re.length;de+=1)Z[de]=Ue(ot(l,re,de));J=new Ie({props:{variant:"success",size:"lg",fullWidth:!0,$$slots:{default:[gt]},$$scope:{ctx:l}},$$inline:!0}),J.$on("click",l[20]),ie=new Ie({props:{variant:"secondary",size:"md",fullWidth:!0,$$slots:{default:[_t]},$$scope:{ctx:l}},$$inline:!0});const Ce={c:function(){e=w("div"),t=w("h2"),t.textContent=r,i=S(),s=w("div"),n=w("div"),c=w("span"),f=L(l[1]),d=S(),u=w("span"),u.textContent=y,C=S(),o=w("div"),g=w("h3"),D=L(l[15]),B=S(),P=w("p"),R=L("8音階中 "),O=L(l[2]),j=L("音階 正解"),N=S(),V=w("p"),q=L(l[14]),F=S(),T=w("div"),z=w("h3"),z.textContent=$,A=S(),H=w("div");for(let W=0;W<Z.length;W+=1)Z[W].c();G=S(),ee=w("div"),pe(J.$$.fragment),se=S(),pe(ie.$$.fragment),this.h()},l:function(W){e=p(W,"DIV",{class:!0});var Q=k(e);t=p(Q,"H2",{class:!0,"data-svelte-h":!0}),ne(t)!=="svelte-1w4iqdy"&&(t.textContent=r),i=I(Q),s=p(Q,"DIV",{class:!0});var he=k(s);n=p(he,"DIV",{class:!0});var b=k(n);c=p(b,"SPAN",{class:!0});var U=k(c);f=M(U,l[1]),U.forEach(m),d=I(b),u=p(b,"SPAN",{class:!0,"data-svelte-h":!0}),ne(u)!=="svelte-yaz7vv"&&(u.textContent=y),b.forEach(m),C=I(he),o=p(he,"DIV",{class:!0});var x=k(o);g=p(x,"H3",{class:!0});var X=k(g);D=M(X,l[15]),X.forEach(m),B=I(x),P=p(x,"P",{class:!0});var ye=k(P);R=M(ye,"8音階中 "),O=M(ye,l[2]),j=M(ye,"音階 正解"),ye.forEach(m),N=I(x),V=p(x,"P",{class:!0});var we=k(V);q=M(we,l[14]),we.forEach(m),x.forEach(m),he.forEach(m),F=I(Q),T=p(Q,"DIV",{class:!0});var ue=k(T);z=p(ue,"H3",{class:!0,"data-svelte-h":!0}),ne(z)!=="svelte-140f1nw"&&(z.textContent=$),A=I(ue),H=p(ue,"DIV",{class:!0});var le=k(H);for(let Ee=0;Ee<Z.length;Ee+=1)Z[Ee].l(le);le.forEach(m),ue.forEach(m),G=I(Q),ee=p(Q,"DIV",{class:!0});var be=k(ee);_e(J.$$.fragment,be),se=I(be),_e(ie.$$.fragment,be),be.forEach(m),Q.forEach(m),this.h()},h:function(){h(t,"class","results-title svelte-1samlw1"),v(t,E,459,12,13955),h(c,"class","score-value svelte-1samlw1"),v(c,E,464,16,14154),h(u,"class","score-unit svelte-1samlw1"),v(u,E,465,16,14211),h(n,"class",_="score-circle "+l[15].toLowerCase()+" svelte-1samlw1"),v(n,E,463,14,14089),h(g,"class","grade-title svelte-1samlw1"),v(g,E,468,16,14321),h(P,"class","score-description svelte-1samlw1"),v(P,E,469,16,14374),h(V,"class","feedback-message svelte-1samlw1"),v(V,E,472,16,14484),h(o,"class","grade-info svelte-1samlw1"),v(o,E,467,14,14280),h(s,"class","score-display svelte-1samlw1"),v(s,E,462,12,14047),h(z,"class","details-title svelte-1samlw1"),v(z,E,480,14,14688),h(H,"class","scale-results svelte-1samlw1"),v(H,E,481,14,14739),h(T,"class","detailed-results"),v(T,E,479,12,14643),h(ee,"class","action-buttons svelte-1samlw1"),v(ee,E,494,12,15243),h(e,"class","results-content svelte-1samlw1"),v(e,E,458,10,13913)},m:function(W,Q){Y(W,e,Q),a(e,t),a(e,i),a(e,s),a(s,n),a(n,c),a(c,f),a(n,d),a(n,u),a(s,C),a(s,o),a(o,g),a(g,D),a(o,B),a(o,P),a(P,R),a(P,O),a(P,j),a(o,N),a(o,V),a(V,q),a(e,F),a(e,T),a(T,z),a(T,A),a(T,H);for(let he=0;he<Z.length;he+=1)Z[he]&&Z[he].m(H,null);a(e,G),a(e,ee),ge(J,ee,null),a(ee,se),ge(ie,ee,null),ce=!0},p:function(W,Q){if((!ce||Q[0]&2)&&oe(f,W[1]),(!ce||Q[0]&32768&&_!==(_="score-circle "+W[15].toLowerCase()+" svelte-1samlw1"))&&h(n,"class",_),(!ce||Q[0]&32768)&&oe(D,W[15]),(!ce||Q[0]&4)&&oe(O,W[2]),(!ce||Q[0]&16384)&&oe(q,W[14]),Q[0]&65537){re=Me(W[16]);let U;for(U=0;U<re.length;U+=1){const x=ot(W,re,U);Z[U]?Z[U].p(x,Q):(Z[U]=Ue(x),Z[U].c(),Z[U].m(H,null))}for(;U<Z.length;U+=1)Z[U].d(1);Z.length=re.length}const he={};Q[1]&2048&&(he.$$scope={dirty:Q,ctx:W}),J.$set(he);const b={};Q[1]&2048&&(b.$$scope={dirty:Q,ctx:W}),ie.$set(b)},i:function(W){ce||(ae(J.$$.fragment,W),ae(ie.$$.fragment,W),ce=!0)},o:function(W){fe(J.$$.fragment,W),fe(ie.$$.fragment,W),ce=!1},d:function(W){W&&m(e),ct(Z,W),ve(J),ve(ie)}};return K("SvelteRegisterBlock",{block:Ce,id:pt.name,type:"slot",source:'(458:8) <Card variant=\\"default\\" padding=\\"lg\\">',ctx:l}),Ce}function Je(l){let e,t=l[0][l[40]]?"✓":"×",r,i;const s={c:function(){e=w("span"),r=L(t),this.h()},l:function(c){e=p(c,"SPAN",{class:!0});var f=k(e);r=M(f,t),f.forEach(m),this.h()},h:function(){h(e,"class",i="result-icon "+(l[0][l[40]]?"correct":"incorrect")+" svelte-1samlw1"),v(e,E,409,20,12299)},m:function(c,f){Y(c,e,f),a(e,r)},p:function(c,f){f[0]&1&&t!==(t=c[0][c[40]]?"✓":"×")&&oe(r,t),f[0]&1&&i!==(i="result-icon "+(c[0][c[40]]?"correct":"incorrect")+" svelte-1samlw1")&&h(e,"class",i)},d:function(c){c&&m(e)}};return K("SvelteRegisterBlock",{block:s,id:Je.name,type:"if",source:"(409:18) {#if scaleResults[index] !== undefined}",ctx:l}),s}function Ke(l){let e,t,r=l[38]+"",i,s,n,c=l[18](l[8],l[40])+"",f,d,u,y,_=l[0][l[40]]!==void 0&&Je(l);const C={c:function(){e=w("div"),t=w("span"),i=L(r),s=S(),n=w("span"),f=L(c),d=L("Hz"),u=S(),_&&_.c(),y=S(),this.h()},l:function(g){e=p(g,"DIV",{class:!0});var D=k(e);t=p(D,"SPAN",{class:!0});var B=k(t);i=M(B,r),B.forEach(m),s=I(D),n=p(D,"SPAN",{class:!0});var P=k(n);f=M(P,c),d=M(P,"Hz"),P.forEach(m),u=I(D),_&&_.l(D),y=I(D),D.forEach(m),this.h()},h:function(){h(t,"class","note-text svelte-1samlw1"),v(t,E,406,18,12083),h(n,"class","note-frequency svelte-1samlw1"),v(n,E,407,18,12139),h(e,"class","scale-note svelte-1samlw1"),Pe(e,"active",l[40]===l[9]),Pe(e,"completed",l[0][l[40]]!==void 0),v(e,E,405,16,11945)},m:function(g,D){Y(g,e,D),a(e,t),a(t,i),a(e,s),a(e,n),a(n,f),a(n,d),a(e,u),_&&_.m(e,null),a(e,y)},p:function(g,D){D[0]&256&&c!==(c=g[18](g[8],g[40])+"")&&oe(f,c),g[0][g[40]]!==void 0?_?_.p(g,D):(_=Je(g),_.c(),_.m(e,y)):_&&(_.d(1),_=null),D[0]&512&&Pe(e,"active",g[40]===g[9]),D[0]&1&&Pe(e,"completed",g[0][g[40]]!==void 0)},d:function(g){g&&m(e),_&&_.d()}};return K("SvelteRegisterBlock",{block:C,id:Ke.name,type:"each",source:"(405:14) {#each scaleNotes as note, index}",ctx:l}),C}function wt(l){let e,t,r="ドレミファソラシドを歌ってください",i,s,n=Me(l[16]),c=[];for(let d=0;d<n.length;d+=1)c[d]=Ke(at(l,n,d));const f={c:function(){e=w("div"),t=w("h2"),t.textContent=r,i=S(),s=w("div");for(let u=0;u<c.length;u+=1)c[u].c();this.h()},l:function(u){e=p(u,"DIV",{class:!0});var y=k(e);t=p(y,"H2",{class:!0,"data-svelte-h":!0}),ne(t)!=="svelte-9l8glf"&&(t.textContent=r),i=I(y),s=p(y,"DIV",{class:!0});var _=k(s);for(let C=0;C<c.length;C+=1)c[C].l(_);_.forEach(m),y.forEach(m),this.h()},h:function(){h(t,"class","guide-title svelte-1samlw1"),v(t,E,402,12,11796),h(s,"class","scale-guide svelte-1samlw1"),v(s,E,403,12,11855),h(e,"class","guide-content svelte-1samlw1"),v(e,E,401,10,11756)},m:function(u,y){Y(u,e,y),a(e,t),a(e,i),a(e,s);for(let _=0;_<c.length;_+=1)c[_]&&c[_].m(s,null)},p:function(u,y){if(y[0]&328449){n=Me(u[16]);let _;for(_=0;_<n.length;_+=1){const C=at(u,n,_);c[_]?c[_].p(C,y):(c[_]=Ke(C),c[_].c(),c[_].m(s,null))}for(;_<c.length;_+=1)c[_].d(1);c.length=n.length}},d:function(u){u&&m(e),ct(c,u)}};return K("SvelteRegisterBlock",{block:f,id:wt.name,type:"slot",source:'(401:8) <Card variant=\\"default\\" padding=\\"lg\\">',ctx:l}),f}function bt(l){let e,t,r="音量レベル",i,s,n;s=new ut({props:{volume:l[11],height:"20px"},$$inline:!0});const c={c:function(){e=w("div"),t=w("h3"),t.textContent=r,i=S(),pe(s.$$.fragment),this.h()},l:function(d){e=p(d,"DIV",{class:!0});var u=k(e);t=p(u,"H3",{class:!0,"data-svelte-h":!0}),ne(t)!=="svelte-1nc8gri"&&(t.textContent=r),i=I(u),_e(s.$$.fragment,u),u.forEach(m),this.h()},h:function(){h(t,"class","display-title svelte-1samlw1"),v(t,E,425,16,12817),h(e,"class","volume-display"),v(e,E,424,14,12772)},m:function(d,u){Y(d,e,u),a(e,t),a(e,i),ge(s,e,null),n=!0},p:function(d,u){const y={};u[0]&2048&&(y.volume=d[11]),s.$set(y)},i:function(d){n||(ae(s.$$.fragment,d),n=!0)},o:function(d){fe(s.$$.fragment,d),n=!1},d:function(d){d&&m(e),ve(s)}};return K("SvelteRegisterBlock",{block:c,id:bt.name,type:"slot",source:'(424:12) <Card variant=\\"default\\" padding=\\"md\\">',ctx:l}),c}function yt(l){let e,t;e=new ft({props:{frequency:l[12],targetNote:l[16][l[9]],currentNote:l[13],accuracy:0,isDetecting:l[7]},$$inline:!0});const r={c:function(){pe(e.$$.fragment)},l:function(s){_e(e.$$.fragment,s)},m:function(s,n){ge(e,s,n),t=!0},p:function(s,n){const c={};n[0]&4096&&(c.frequency=s[12]),n[0]&512&&(c.targetNote=s[16][s[9]]),n[0]&8192&&(c.currentNote=s[13]),n[0]&128&&(c.isDetecting=s[7]),e.$set(c)},i:function(s){t||(ae(e.$$.fragment,s),t=!0)},o:function(s){fe(e.$$.fragment,s),t=!1},d:function(s){ve(e,s)}};return K("SvelteRegisterBlock",{block:r,id:yt.name,type:"slot",source:'(432:12) <Card variant=\\"default\\" padding=\\"md\\">',ctx:l}),r}function Et(l){let e,t,r="進行状況",i,s,n,c,f=l[16][l[9]]+"",d,u,y=l[9]+1+"",_,C,o,g,D,B,P,R;const O={c:function(){e=w("div"),t=w("h3"),t.textContent=r,i=S(),s=w("div"),n=w("span"),c=L("現在: "),d=L(f),u=L(" ("),_=L(y),C=L("/8)"),o=S(),g=w("span"),D=L("正解: "),B=L(l[2]),P=L("/"),R=L(l[9]),this.h()},l:function(N){e=p(N,"DIV",{class:!0});var V=k(e);t=p(V,"H3",{class:!0,"data-svelte-h":!0}),ne(t)!=="svelte-v1qnd4"&&(t.textContent=r),i=I(V),s=p(V,"DIV",{class:!0});var q=k(s);n=p(q,"SPAN",{});var F=k(n);c=M(F,"現在: "),d=M(F,f),u=M(F," ("),_=M(F,y),C=M(F,"/8)"),F.forEach(m),o=I(q),g=p(q,"SPAN",{});var T=k(g);D=M(T,"正解: "),B=M(T,l[2]),P=M(T,"/"),R=M(T,l[9]),T.forEach(m),q.forEach(m),V.forEach(m),this.h()},h:function(){h(t,"class","progress-title svelte-1samlw1"),v(t,E,446,12,13473),v(n,E,448,14,13567),v(g,E,449,14,13658),h(s,"class","progress-details svelte-1samlw1"),v(s,E,447,12,13522),h(e,"class","progress-info svelte-1samlw1"),v(e,E,445,10,13433)},m:function(N,V){Y(N,e,V),a(e,t),a(e,i),a(e,s),a(s,n),a(n,c),a(n,d),a(n,u),a(n,_),a(n,C),a(s,o),a(s,g),a(g,D),a(g,B),a(g,P),a(g,R)},p:function(N,V){V[0]&512&&f!==(f=N[16][N[9]]+"")&&oe(d,f),V[0]&512&&y!==(y=N[9]+1+"")&&oe(_,y),V[0]&4&&oe(B,N[2]),V[0]&512&&oe(R,N[9])},d:function(N){N&&m(e)}};return K("SvelteRegisterBlock",{block:O,id:Et.name,type:"slot",source:'(445:8) <Card variant=\\"default\\" padding=\\"md\\">',ctx:l}),O}function Ct(l){let e,t,r,i,s,n,c,f="基音再生中",d,u,y,_,C,o,g,D=l[17](l[8])+"",B,P,R,O,j="この音を覚えて「ド」として認識してください",N,V,q,F;const T={c:function(){e=w("div"),t=w("div"),r=Ve("svg"),i=Ve("circle"),s=Ve("polygon"),n=S(),c=w("h2"),c.textContent=f,d=S(),u=w("p"),y=L("基音: "),_=L(l[8]),C=S(),o=w("p"),g=L("周波数: "),B=L(D),P=L("Hz"),R=S(),O=w("p"),O.textContent=j,N=S(),V=w("div"),q=w("div"),F=w("div"),this.h()},l:function($){e=p($,"DIV",{class:!0});var A=k(e);t=p(A,"DIV",{class:!0});var H=k(t);r=De(H,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var G=k(r);i=De(G,"circle",{cx:!0,cy:!0,r:!0}),k(i).forEach(m),s=De(G,"polygon",{points:!0}),k(s).forEach(m),G.forEach(m),H.forEach(m),n=I(A),c=p(A,"H2",{class:!0,"data-svelte-h":!0}),ne(c)!=="svelte-1maueo6"&&(c.textContent=f),d=I(A),u=p(A,"P",{class:!0});var ee=k(u);y=M(ee,"基音: "),_=M(ee,l[8]),ee.forEach(m),C=I(A),o=p(A,"P",{class:!0});var J=k(o);g=M(J,"周波数: "),B=M(J,D),P=M(J,"Hz"),J.forEach(m),R=I(A),O=p(A,"P",{class:!0,"data-svelte-h":!0}),ne(O)!=="svelte-1hcrx2z"&&(O.textContent=j),N=I(A),V=p(A,"DIV",{class:!0});var se=k(V);q=p(se,"DIV",{class:!0});var ie=k(q);F=p(ie,"DIV",{class:!0}),k(F).forEach(m),ie.forEach(m),se.forEach(m),A.forEach(m),this.h()},h:function(){h(i,"cx","12"),h(i,"cy","12"),h(i,"r","10"),v(i,E,377,16,10928),h(s,"points","10,8 16,12 10,16"),v(s,E,378,16,10977),h(r,"width","48"),h(r,"height","48"),h(r,"viewBox","0 0 24 24"),h(r,"fill","none"),h(r,"stroke","currentColor"),h(r,"stroke-width","2"),v(r,E,376,14,10812),h(t,"class","playing-icon svelte-1samlw1"),v(t,E,375,12,10771),h(c,"class","playing-title svelte-1samlw1"),v(c,E,381,12,11066),h(u,"class","playing-note svelte-1samlw1"),v(u,E,382,12,11115),h(o,"class","playing-frequency svelte-1samlw1"),v(o,E,383,12,11177),h(O,"class","playing-instruction svelte-1samlw1"),v(O,E,384,12,11269),h(F,"class","progress-fill svelte-1samlw1"),v(F,E,390,16,11467),h(q,"class","progress-bar svelte-1samlw1"),v(q,E,389,14,11424),h(V,"class","playing-progress svelte-1samlw1"),v(V,E,388,12,11379),h(e,"class","playing-content svelte-1samlw1"),v(e,E,374,10,10729)},m:function($,A){Y($,e,A),a(e,t),a(t,r),a(r,i),a(r,s),a(e,n),a(e,c),a(e,d),a(e,u),a(u,y),a(u,_),a(e,C),a(e,o),a(o,g),a(o,B),a(o,P),a(e,R),a(e,O),a(e,N),a(e,V),a(V,q),a(q,F)},p:function($,A){A[0]&256&&oe(_,$[8]),A[0]&256&&D!==(D=$[17]($[8])+"")&&oe(B,D)},d:function($){$&&m(e)}};return K("SvelteRegisterBlock",{block:T,id:Ct.name,type:"slot",source:'(374:8) <Card variant=\\"success\\" padding=\\"lg\\">',ctx:l}),T}function kt(l){let e;const t={c:function(){e=L("トレーニング開始")},l:function(i){e=M(i,"トレーニング開始")},m:function(i,s){Y(i,e,s)},p:Ne,d:function(i){i&&m(e)}};return K("SvelteRegisterBlock",{block:t,id:kt.name,type:"else",source:"(343:14) {:else}",ctx:l}),t}function Dt(l){let e;const t={c:function(){e=L(l[5])},l:function(i){e=M(i,l[5])},m:function(i,s){Y(i,e,s)},p:function(i,s){s[0]&32&&oe(e,i[5])},d:function(i){i&&m(e)}};return K("SvelteRegisterBlock",{block:t,id:Dt.name,type:"if",source:"(341:14) {#if !isToneLoaded}",ctx:l}),t}function Vt(l){let e;function t(n,c){return n[3]?kt:Dt}let r=t(l),i=r(l);const s={c:function(){i.c(),e=lt()},l:function(c){i.l(c),e=lt()},m:function(c,f){i.m(c,f),Y(c,e,f)},p:function(c,f){r===(r=t(c))&&i?i.p(c,f):(i.d(1),i=r(c),i&&(i.c(),i.m(e.parentNode,e)))},d:function(c){c&&m(e),i.d(c)}};return K("SvelteRegisterBlock",{block:s,id:Vt.name,type:"slot",source:'(340:12) <Button variant=\\"success\\" size=\\"lg\\" fullWidth on:click={startTraining} disabled={!isToneLoaded}>',ctx:l}),s}function Ze(l){let e,t,r,i,s,n=l[4]&&Qe(l);const c={c:function(){e=w("div"),t=w("p"),r=L(l[5]),i=S(),n&&n.c(),this.h()},l:function(d){e=p(d,"DIV",{class:!0});var u=k(e);t=p(u,"P",{class:!0});var y=k(t);r=M(y,l[5]),y.forEach(m),i=I(u),n&&n.l(u),u.forEach(m),this.h()},h:function(){h(t,"class","loading-message svelte-1samlw1"),v(t,E,349,16,9917),h(e,"class","loading-info svelte-1samlw1"),v(e,E,348,14,9874)},m:function(d,u){Y(d,e,u),a(e,t),a(t,r),a(e,i),n&&n.m(e,null),s=!0},p:function(d,u){(!s||u[0]&32)&&oe(r,d[5]),d[4]?n?(n.p(d,u),u[0]&16&&ae(n,1)):(n=Qe(d),n.c(),ae(n,1),n.m(e,null)):n&&(tt(),fe(n,1,1,()=>{n=null}),nt())},i:function(d){s||(ae(n),s=!0)},o:function(d){fe(n),s=!1},d:function(d){d&&m(e),n&&n.d()}};return K("SvelteRegisterBlock",{block:c,id:Ze.name,type:"if",source:"(348:12) {#if !isToneLoaded}",ctx:l}),c}function Qe(l){let e,t,r,i,s,n,c,f,d="または、ページを再読み込みしてみてください",u;n=new Ie({props:{variant:"secondary",size:"sm",$$slots:{default:[Pt]},$$scope:{ctx:l}},$$inline:!0}),n.$on("click",l[19]);const y={c:function(){e=w("p"),t=L("❌ "),r=L(l[4]),i=S(),s=w("div"),pe(n.$$.fragment),c=S(),f=w("p"),f.textContent=d,this.h()},l:function(C){e=p(C,"P",{class:!0});var o=k(e);t=M(o,"❌ "),r=M(o,l[4]),o.forEach(m),i=I(C),s=p(C,"DIV",{class:!0});var g=k(s);_e(n.$$.fragment,g),c=I(g),f=p(g,"P",{class:!0,"data-svelte-h":!0}),ne(f)!=="svelte-1o5h8se"&&(f.textContent=d),g.forEach(m),this.h()},h:function(){h(e,"class","error-message svelte-1samlw1"),v(e,E,353,18,10057),h(f,"class","retry-message svelte-1samlw1"),v(f,E,360,20,10365),h(s,"class","fallback-options svelte-1samlw1"),v(s,E,356,18,10165)},m:function(C,o){Y(C,e,o),a(e,t),a(e,r),Y(C,i,o),Y(C,s,o),ge(n,s,null),a(s,c),a(s,f),u=!0},p:function(C,o){(!u||o[0]&16)&&oe(r,C[4]);const g={};o[1]&2048&&(g.$$scope={dirty:o,ctx:C}),n.$set(g)},i:function(C){u||(ae(n.$$.fragment,C),u=!0)},o:function(C){fe(n.$$.fragment,C),u=!1},d:function(C){C&&(m(e),m(i),m(s)),ve(n)}};return K("SvelteRegisterBlock",{block:y,id:Qe.name,type:"if",source:"(353:16) {#if toneLoadingError}",ctx:l}),y}function Pt(l){let e;const t={c:function(){e=L("シンプル音源で開始")},l:function(i){e=M(i,"シンプル音源で開始")},m:function(i,s){Y(i,e,s)},d:function(i){i&&m(e)}};return K("SvelteRegisterBlock",{block:t,id:Pt.name,type:"slot",source:'(358:20) <Button variant=\\"secondary\\" size=\\"sm\\" on:click={forceSimpleAudio}>',ctx:l}),t}function Bt(l){let e,t,r="トレーニング開始",i,s,n,c,f,d,u,y,_,C="1",o,g,D,B="基音を聞く",P,R,O="ランダムに選ばれた基音をピアノで再生します",j,N,V,q="2",F,T,z,$="連続歌唱",A,H,G="基音を「ド」として、ドレミファソラシドを連続して歌います",ee,J,se,ie="3",ce,re,Z,Ce="自動判定",de,W,Q="歌唱中にリアルタイムで各音階を自動判定します",he,b,U,x;b=new Ie({props:{variant:"success",size:"lg",fullWidth:!0,disabled:!l[3],$$slots:{default:[Vt]},$$scope:{ctx:l}},$$inline:!0}),b.$on("click",l[20]);let X=!l[3]&&Ze(l);const ye={c:function(){e=w("div"),t=w("h2"),t.textContent=r,i=S(),s=w("p"),n=L("基音を聞いた後、その音を「ド」として"),c=w("br"),f=L(`
              ドレミファソラシドを連続して歌ってください`),d=S(),u=w("div"),y=w("div"),_=w("span"),_.textContent=C,o=S(),g=w("div"),D=w("h3"),D.textContent=B,P=S(),R=w("p"),R.textContent=O,j=S(),N=w("div"),V=w("span"),V.textContent=q,F=S(),T=w("div"),z=w("h3"),z.textContent=$,A=S(),H=w("p"),H.textContent=G,ee=S(),J=w("div"),se=w("span"),se.textContent=ie,ce=S(),re=w("div"),Z=w("h3"),Z.textContent=Ce,de=S(),W=w("p"),W.textContent=Q,he=S(),pe(b.$$.fragment),U=S(),X&&X.c(),this.h()},l:function(ue){e=p(ue,"DIV",{class:!0});var le=k(e);t=p(le,"H2",{class:!0,"data-svelte-h":!0}),ne(t)!=="svelte-177yn6"&&(t.textContent=r),i=I(le),s=p(le,"P",{class:!0});var be=k(s);n=M(be,"基音を聞いた後、その音を「ド」として"),c=p(be,"BR",{}),f=M(be,`
              ドレミファソラシドを連続して歌ってください`),be.forEach(m),d=I(le),u=p(le,"DIV",{class:!0});var Ee=k(u);y=p(Ee,"DIV",{class:!0});var Se=k(y);_=p(Se,"SPAN",{class:!0,"data-svelte-h":!0}),ne(_)!=="svelte-1gvrwis"&&(_.textContent=C),o=I(Se),g=p(Se,"DIV",{});var Ae=k(g);D=p(Ae,"H3",{class:!0,"data-svelte-h":!0}),ne(D)!=="svelte-3o2umq"&&(D.textContent=B),P=I(Ae),R=p(Ae,"P",{class:!0,"data-svelte-h":!0}),ne(R)!=="svelte-r15f9m"&&(R.textContent=O),Ae.forEach(m),Se.forEach(m),j=I(Ee),N=p(Ee,"DIV",{class:!0});var Re=k(N);V=p(Re,"SPAN",{class:!0,"data-svelte-h":!0}),ne(V)!=="svelte-1lllrxb"&&(V.textContent=q),F=I(Re),T=p(Re,"DIV",{});var qe=k(T);z=p(qe,"H3",{class:!0,"data-svelte-h":!0}),ne(z)!=="svelte-1lldj7q"&&(z.textContent=$),A=I(qe),H=p(qe,"P",{class:!0,"data-svelte-h":!0}),ne(H)!=="svelte-1n1vdfq"&&(H.textContent=G),qe.forEach(m),Re.forEach(m),ee=I(Ee),J=p(Ee,"DIV",{class:!0});var Te=k(J);se=p(Te,"SPAN",{class:!0,"data-svelte-h":!0}),ne(se)!=="svelte-1swoen2"&&(se.textContent=ie),ce=I(Te),re=p(Te,"DIV",{});var ze=k(re);Z=p(ze,"H3",{class:!0,"data-svelte-h":!0}),ne(Z)!=="svelte-wm6hg7"&&(Z.textContent=Ce),de=I(ze),W=p(ze,"P",{class:!0,"data-svelte-h":!0}),ne(W)!=="svelte-1tyv544"&&(W.textContent=Q),ze.forEach(m),Te.forEach(m),Ee.forEach(m),he=I(le),_e(b.$$.fragment,le),U=I(le),X&&X.l(le),le.forEach(m),this.h()},h:function(){h(t,"class","start-title svelte-1samlw1"),v(t,E,307,12,8547),v(c,E,309,32,8659),h(s,"class","start-description svelte-1samlw1"),v(s,E,308,12,8597),h(_,"class","step-number svelte-1samlw1"),v(_,E,315,16,8830),h(D,"class","svelte-1samlw1"),v(D,E,317,18,8905),h(R,"class","svelte-1samlw1"),v(R,E,318,18,8938),v(g,E,316,16,8881),h(y,"class","instruction-item svelte-1samlw1"),v(y,E,314,14,8783),h(V,"class","step-number svelte-1samlw1"),v(V,E,323,16,9087),h(z,"class","svelte-1samlw1"),v(z,E,325,18,9162),h(H,"class","svelte-1samlw1"),v(H,E,326,18,9194),v(T,E,324,16,9138),h(N,"class","instruction-item svelte-1samlw1"),v(N,E,322,14,9040),h(se,"class","step-number svelte-1samlw1"),v(se,E,331,16,9350),h(Z,"class","svelte-1samlw1"),v(Z,E,333,18,9425),h(W,"class","svelte-1samlw1"),v(W,E,334,18,9457),v(re,E,332,16,9401),h(J,"class","instruction-item svelte-1samlw1"),v(J,E,330,14,9303),h(u,"class","instructions svelte-1samlw1"),v(u,E,313,12,8742),h(e,"class","start-content svelte-1samlw1"),v(e,E,306,10,8507)},m:function(ue,le){Y(ue,e,le),a(e,t),a(e,i),a(e,s),a(s,n),a(s,c),a(s,f),a(e,d),a(e,u),a(u,y),a(y,_),a(y,o),a(y,g),a(g,D),a(g,P),a(g,R),a(u,j),a(u,N),a(N,V),a(N,F),a(N,T),a(T,z),a(T,A),a(T,H),a(u,ee),a(u,J),a(J,se),a(J,ce),a(J,re),a(re,Z),a(re,de),a(re,W),a(e,he),ge(b,e,null),a(e,U),X&&X.m(e,null),x=!0},p:function(ue,le){const be={};le[0]&8&&(be.disabled=!ue[3]),le[0]&40|le[1]&2048&&(be.$$scope={dirty:le,ctx:ue}),b.$set(be),ue[3]?X&&(tt(),fe(X,1,1,()=>{X=null}),nt()):X?(X.p(ue,le),le[0]&8&&ae(X,1)):(X=Ze(ue),X.c(),ae(X,1),X.m(e,null))},i:function(ue){x||(ae(b.$$.fragment,ue),ae(X),x=!0)},o:function(ue){fe(b.$$.fragment,ue),fe(X),x=!1},d:function(ue){ue&&m(e),ve(b),X&&X.d()}};return K("SvelteRegisterBlock",{block:ye,id:Bt.name,type:"slot",source:'(306:8) <Card variant=\\"default\\" padding=\\"lg\\">',ctx:l}),ye}function Nt(l){let e,t,r,i,s,n,c,f,d,u,y,_="ランダム基音モード",C,o,g="10種類の基音からランダムに選択してトレーニング",D,B,P,R;const O=[vt,mt,ht,dt],j=[];function N(q,F){return!q[6]&&!q[7]&&!q[10]?0:q[6]?1:q[7]?2:q[10]?3:-1}~(B=N(l))&&(P=j[B]=O[B](l));const V={c:function(){e=w("div"),t=w("div"),r=w("div"),i=w("div"),s=Ve("svg"),n=Ve("path"),c=Ve("circle"),f=Ve("circle"),d=S(),u=w("div"),y=w("h1"),y.textContent=_,C=S(),o=w("p"),o.textContent=g,D=S(),P&&P.c(),this.h()},l:function(F){e=p(F,"DIV",{class:!0});var T=k(e);t=p(T,"DIV",{class:!0});var z=k(t);r=p(z,"DIV",{class:!0});var $=k(r);i=p($,"DIV",{class:!0});var A=k(i);s=De(A,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var H=k(s);n=De(H,"path",{d:!0}),k(n).forEach(m),c=De(H,"circle",{cx:!0,cy:!0,r:!0}),k(c).forEach(m),f=De(H,"circle",{cx:!0,cy:!0,r:!0}),k(f).forEach(m),H.forEach(m),A.forEach(m),d=I($),u=p($,"DIV",{});var G=k(u);y=p(G,"H1",{class:!0,"data-svelte-h":!0}),ne(y)!=="svelte-4p7mnf"&&(y.textContent=_),C=I(G),o=p(G,"P",{class:!0,"data-svelte-h":!0}),ne(o)!=="svelte-hq31uv"&&(o.textContent=g),G.forEach(m),$.forEach(m),z.forEach(m),D=I(T),P&&P.l(T),T.forEach(m),this.h()},h:function(){h(n,"d","M9 18V5l12-2v13"),v(n,E,290,12,8029),h(c,"cx","6"),h(c,"cy","18"),h(c,"r","3"),v(c,E,291,12,8069),h(f,"cx","18"),h(f,"cy","16"),h(f,"r","3"),v(f,E,292,12,8112),h(s,"width","32"),h(s,"height","32"),h(s,"viewBox","0 0 24 24"),h(s,"fill","none"),h(s,"stroke","currentColor"),h(s,"stroke-width","2"),v(s,E,289,10,7917),h(i,"class","mode-icon svelte-1samlw1"),v(i,E,288,8,7883),h(y,"class","mode-title svelte-1samlw1"),v(y,E,296,10,8200),h(o,"class","mode-description svelte-1samlw1"),v(o,E,297,10,8248),v(u,E,295,8,8184),h(r,"class","mode-header svelte-1samlw1"),v(r,E,287,6,7849),h(t,"class","header svelte-1samlw1"),v(t,E,286,4,7822),h(e,"class","random-training svelte-1samlw1"),v(e,E,284,2,7770)},m:function(F,T){Y(F,e,T),a(e,t),a(t,r),a(r,i),a(i,s),a(s,n),a(s,c),a(s,f),a(r,d),a(r,u),a(u,y),a(u,C),a(u,o),a(e,D),~B&&j[B].m(e,null),R=!0},p:function(F,T){let z=B;B=N(F),B===z?~B&&j[B].p(F,T):(P&&(tt(),fe(j[z],1,1,()=>{j[z]=null}),nt()),~B?(P=j[B],P?P.p(F,T):(P=j[B]=O[B](F),P.c()),ae(P,1),P.m(e,null)):P=null)},i:function(F){R||(ae(P),R=!0)},o:function(F){fe(P),R=!1},d:function(F){F&&m(e),~B&&j[B].d()}};return K("SvelteRegisterBlock",{block:V,id:Nt.name,type:"slot",source:"(284:0) <PageLayout showBackButton={true}>",ctx:l}),V}function Xe(l){let e,t,r;t=new it({props:{showBackButton:!0,$$slots:{default:[Nt]},$$scope:{ctx:l}},$$inline:!0});const i={c:function(){e=S(),pe(t.$$.fragment),this.h()},l:function(n){St("svelte-1nfe5e4",document.head).forEach(m),e=I(n),_e(t.$$.fragment,n),this.h()},h:function(){document.title="ランダム基音モード - 相対音感トレーニング"},m:function(n,c){Y(n,e,c),ge(t,n,c),r=!0},p:function(n,c){const f={};c[0]&65535|c[1]&2048&&(f.$$scope={dirty:c,ctx:n}),t.$set(f)},i:function(n){r||(ae(t.$$.fragment,n),r=!0)},o:function(n){fe(t.$$.fragment,n),r=!1},d:function(n){n&&m(e),ve(t,n)}};return K("SvelteRegisterBlock",{block:i,id:Xe.name,type:"component",source:"",ctx:l}),i}function zt(l,e,t){let r,i,s,n,{$$slots:c={},$$scope:f}=e;et("Page",c,[]);let d=null,u=null,y=!1,_=null,C="オーディオ初期化中...",o=!1,g=0,D=!1,B=!1,P="",R=0,O=[],j=!1,N=0,V=0,q="";const F=["ド","レ","ミ","ファ","ソ","ラ","シ","ド"],T=["Bb3","B3","C4","Db4","D4","Eb4","E4","F4","Gb4","Ab4"],z={Bb3:233.08,B3:246.94,C4:261.63,Db4:277.18,D4:293.66,Eb4:311.13,E4:329.63,F4:349.23,Gb4:369.99,Ab4:415.3},$=[1,9/8,5/4,4/3,3/2,5/3,15/8,2];let A=null,H={};async function G(){try{t(5,C="Web Audio API初期化中..."),console.log("🔄 Web Audio API初期化開始"),typeof window<"u"?(A=new(window.AudioContext||window.webkitAudioContext),console.log("✅ AudioContext作成完了"),console.log("🔧 シンプル音源モードで開始"),o=!0,t(3,y=!0),t(5,C="オーディオ初期化完了")):(console.warn("⚠️ window未定義 - SSR環境"),setTimeout(()=>G(),1e3))}catch(b){console.error("❌ オーディオ初期化エラー:",b),t(4,_=`オーディオエラー: ${b.message}`),t(5,C="エラー"),setTimeout(()=>{console.log("🔧 強制フォールバックモード"),se()},2e3)}}He(()=>{G()}),st(()=>{A&&A.close()});function ee(b){return Math.round(z[b]||0)}function J(b,U){const x=z[b];return x?Math.round(x*$[U]):0}function se(){console.log("🔧 手動でシンプル音源モードに切り替え"),o=!0,t(3,y=!0),t(4,_=null),t(5,C="シンプル音源モード")}function ie(){const b=Math.floor(Math.random()*T.length);return t(8,P=T[b]),P}function ce(){t(9,R=0),t(0,O=[]),t(10,j=!1);const b=ie();re(b)}async function re(b){t(6,D=!0),console.log(`🎵 基音再生: ${b}`);try{const U=ee(b);console.log(`🔊 基音周波数: ${U}Hz`),Z(U),setTimeout(()=>{t(6,D=!1),Ce()},2500)}catch(U){console.error("❌ 基音再生エラー:",U),setTimeout(()=>{t(6,D=!1),Ce()},2500)}}function Z(b){try{A||(console.warn("⚠️ AudioContext未初期化 - 新規作成"),A=new(window.AudioContext||window.webkitAudioContext)),A.state==="suspended"&&A.resume();const U=A.createOscillator(),x=A.createGain();U.connect(x),x.connect(A.destination),U.frequency.setValueAtTime(b,A.currentTime),U.type="triangle",x.gain.setValueAtTime(0,A.currentTime),x.gain.linearRampToValueAtTime(.3,A.currentTime+.1),x.gain.exponentialRampToValueAtTime(.1,A.currentTime+2),x.gain.exponentialRampToValueAtTime(.001,A.currentTime+2.5),U.start(A.currentTime),U.stop(A.currentTime+2.5),console.log(`✅ Web Audio API で ${b}Hz 再生中（triangle波）`)}catch(U){console.error("❌ Web Audio API エラー:",U)}}function Ce(){t(7,B=!0);const b=F.map((x,X)=>J(P,X)),U=setInterval(()=>{if(!B){clearInterval(U);return}t(11,N=40+Math.random()*50);const x=b[R],X=(Math.random()-.5)*40;t(12,V=x+X);const ye=Math.max(0,100-Math.abs(X)*2);if(t(13,q=F[R]),Math.random()>.6){const we=ye>70;t(0,O[R]=we,O),t(9,R++,R),console.log(`${q}: ${ye.toFixed(1)}% 精度, ${we?"正解":"不正解"}`),R>=8&&de()}},300)}function de(){t(7,B=!1),t(10,j=!0)}function W(b){return b>=90?"Excellent":b>=70?"Good":b>=50?"Practice":"Needs Work"}function Q(b){return b>=90?"素晴らしい相対音感です！完璧な演奏でした。":b>=70?"良好な相対音感です。もう少し練習すれば完璧になります。":b>=50?"基本的な相対音感は身についています。継続練習で向上できます。":"相対音感の基礎練習から始めましょう。毎日少しずつ練習することが大切です。"}const he=[];return Object.keys(e).forEach(b=>{!~he.indexOf(b)&&b.slice(0,2)!=="$$"&&b!=="slot"&&Tt.warn(`<Page> was created with unknown prop '${b}'`)}),l.$capture_state=()=>({onMount:He,onDestroy:st,Card:ke,Button:Ie,PageLayout:it,VolumeBar:ut,PitchDisplay:ft,Tone:d,sampler:u,isToneLoaded:y,toneLoadingError:_,loadingStatus:C,useSimpleAudio:o,initializationAttempts:g,isPlaying:D,isDetecting:B,currentBaseNote:P,currentScaleIndex:R,scaleResults:O,showResults:j,currentVolume:N,currentFrequency:V,currentNote:q,scaleNotes:F,baseNotes:T,baseNoteFrequencies:z,scaleRatios:$,audioContext:A,pianoBuffers:H,initializeAudio:G,getBaseNoteFrequency:ee,getScaleFrequency:J,forceSimpleAudio:se,selectRandomBase:ie,startTraining:ce,playBaseNote:re,playSimpleBeep:Z,startDetection:Ce,finishTraining:de,getGrade:W,getFeedback:Q,score:i,feedback:n,grade:s,correctCount:r}),l.$inject_state=b=>{"Tone"in b&&(d=b.Tone),"sampler"in b&&(u=b.sampler),"isToneLoaded"in b&&t(3,y=b.isToneLoaded),"toneLoadingError"in b&&t(4,_=b.toneLoadingError),"loadingStatus"in b&&t(5,C=b.loadingStatus),"useSimpleAudio"in b&&(o=b.useSimpleAudio),"initializationAttempts"in b&&(g=b.initializationAttempts),"isPlaying"in b&&t(6,D=b.isPlaying),"isDetecting"in b&&t(7,B=b.isDetecting),"currentBaseNote"in b&&t(8,P=b.currentBaseNote),"currentScaleIndex"in b&&t(9,R=b.currentScaleIndex),"scaleResults"in b&&t(0,O=b.scaleResults),"showResults"in b&&t(10,j=b.showResults),"currentVolume"in b&&t(11,N=b.currentVolume),"currentFrequency"in b&&t(12,V=b.currentFrequency),"currentNote"in b&&t(13,q=b.currentNote),"audioContext"in b&&(A=b.audioContext),"pianoBuffers"in b&&(H=b.pianoBuffers),"score"in b&&t(1,i=b.score),"feedback"in b&&t(14,n=b.feedback),"grade"in b&&t(15,s=b.grade),"correctCount"in b&&t(2,r=b.correctCount)},e&&"$$inject"in e&&l.$inject_state(e.$$inject),l.$$.update=()=>{l.$$.dirty[0]&1&&t(2,r=O.filter(b=>b).length),l.$$.dirty[0]&4&&t(1,i=Math.round(r/8*100)),l.$$.dirty[0]&2&&t(15,s=W(i)),l.$$.dirty[0]&2&&t(14,n=Q(i))},[O,i,r,y,_,C,D,B,P,R,j,N,V,q,n,s,F,ee,J,se,ce]}class jt extends Ye{constructor(e){super(e),xe(this,e,zt,Xe,$e,{},null,[-1,-1]),K("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:Xe.name})}}export{jt as component};
