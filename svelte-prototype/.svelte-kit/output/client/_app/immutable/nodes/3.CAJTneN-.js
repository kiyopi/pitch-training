import{S as $t,i as te,d as F,s as ee,v as ne,c as oe,a as ie,D as Vt,E as It,b as u,q as mt,r as ht,u as vt,f as E,w as _t,F as se,m as L,x as yt,p as T,y as pt,g as f,z as d,h as _,j as g,k as C,B as ot,A as O,o as k,C as it,G as Pt,e as dt,l as U,t as J,n as at,H as Ft,I as Ct}from"../chunks/Dujr-1LT.js";import"../chunks/B_rl9Jj9.js";import{p as ft}from"../chunks/D9rWHkBz.js";import{P as Rt,B as le,C as gt}from"../chunks/BlOhcc-l.js";const y="src/routes/microphone-test/+page.svelte";function Nt(c){let t,e="マイク準備完了",o,n,s="トレーニング開始ボタンを押してランダム基音モードへ進んでください",a,l,i,h="トレーニング開始",v,m;const b={c:function(){t=k("h3"),t.textContent=e,o=T(),n=k("p"),n.textContent=s,a=T(),l=k("div"),i=k("button"),i.textContent=h,this.h()},l:function(q){t=g(q,"H3",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-11dam81"&&(t.textContent=e),o=L(q),n=g(q,"P",{class:!0,"data-svelte-h":!0}),O(n)!=="svelte-5idwhi"&&(n.textContent=s),a=L(q),l=g(q,"DIV",{class:!0});var p=C(l);i=g(p,"BUTTON",{class:!0,"data-svelte-h":!0}),O(i)!=="svelte-1oiqs6i"&&(i.textContent=h),p.forEach(u),this.h()},h:function(){d(t,"class","ready-title svelte-63ohdq"),_(t,y,276,12,8113),d(n,"class","ready-description svelte-63ohdq"),_(n,y,277,12,8162),d(i,"class","training-start-button enabled svelte-63ohdq"),_(i,y,280,14,8308),d(l,"class","training-start-button-area svelte-63ohdq"),_(l,y,279,12,8253)},m:function(q,p){E(q,t,p),E(q,o,p),E(q,n,p),E(q,a,p),E(q,l,p),f(l,i),v||(m=Ct(i,"click",c[10],!1),v=!0)},p:at,d:function(q){q&&(u(t),u(o),u(n),u(a),u(l)),v=!1,m()}};return F("SvelteRegisterBlock",{block:b,id:Nt.name,type:"else",source:"(275:10) {:else}",ctx:c}),b}function Lt(c){let t,e;function o(v,m){return v[3]==="granted"&&v[4]&&(!v[0]||!v[1])?zt:Tt}let n=o(c),s=n(c);function a(v,m){if(v[3]==="pending")return Gt;if(v[3]==="denied")return jt;if(v[3]==="initial")return Ht}let l=a(c),i=l&&l(c);const h={c:function(){s.c(),t=T(),i&&i.c(),e=Ft()},l:function(m){s.l(m),t=L(m),i&&i.l(m),e=Ft()},m:function(m,b){s.m(m,b),E(m,t,b),i&&i.m(m,b),E(m,e,b)},p:function(m,b){n!==(n=o(m))&&(s.d(1),s=n(m),s&&(s.c(),s.m(t.parentNode,t))),l===(l=a(m))&&i?i.p(m,b):(i&&i.d(1),i=l&&l(m),i&&(i.c(),i.m(e.parentNode,e)))},d:function(m){m&&(u(t),u(e)),s.d(m),i&&i.d(m)}};return F("SvelteRegisterBlock",{block:h,id:Lt.name,type:"if",source:"(249:10) {#if !audioConfirmationComplete}",ctx:c}),h}function Tt(c){let t,e="マイクのテストを開始します",o,n,s="マイクテスト開始ボタンを押してマイクの使用を許可してください";const a={c:function(){t=k("h3"),t.textContent=e,o=T(),n=k("p"),n.textContent=s,this.h()},l:function(i){t=g(i,"H3",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-gfi16f"&&(t.textContent=e),o=L(i),n=g(i,"P",{class:!0,"data-svelte-h":!0}),O(n)!=="svelte-1w19y1h"&&(n.textContent=s),this.h()},h:function(){d(t,"class","instructions-title svelte-63ohdq"),_(t,y,255,14,7250),d(n,"class","instructions-description svelte-63ohdq"),_(n,y,256,14,7314)},m:function(i,h){E(i,t,h),E(i,o,h),E(i,n,h)},d:function(i){i&&(u(t),u(o),u(n))}};return F("SvelteRegisterBlock",{block:a,id:Tt.name,type:"else",source:"(254:12) {:else}",ctx:c}),a}function zt(c){let t,e="「ドー」と発声してください";const o={c:function(){t=k("p"),t.textContent=e,this.h()},l:function(s){t=g(s,"P",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-15d2sx7"&&(t.textContent=e),this.h()},h:function(){d(t,"class","status-text voice-instruction svelte-63ohdq"),_(t,y,252,14,7122)},m:function(s,a){E(s,t,a)},d:function(s){s&&u(t)}};return F("SvelteRegisterBlock",{block:o,id:zt.name,type:"if",source:"(251:12) {#if micPermission === 'granted' && isListening && (!volumeDetected || !frequencyDetected)}",ctx:c}),o}function Ht(c){let t,e,o="マイクテストを開始",n,s;const a={c:function(){t=k("div"),e=k("button"),e.textContent=o,this.h()},l:function(i){t=g(i,"DIV",{class:!0});var h=C(t);e=g(h,"BUTTON",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-caex95"&&(e.textContent=o),h.forEach(u),this.h()},h:function(){d(e,"class","mic-test-button start svelte-63ohdq"),_(e,y,269,16,7887),d(t,"class","mic-test-button-area svelte-63ohdq"),_(t,y,268,14,7836)},m:function(i,h){E(i,t,h),f(t,e),n||(s=Ct(e,"click",c[9],!1),n=!0)},p:at,d:function(i){i&&u(t),n=!1,s()}};return F("SvelteRegisterBlock",{block:a,id:Ht.name,type:"if",source:"(268:50) ",ctx:c}),a}function jt(c){let t,e,o="マイク許可を再試行",n,s;const a={c:function(){t=k("div"),e=k("button"),e.textContent=o,this.h()},l:function(i){t=g(i,"DIV",{class:!0});var h=C(t);e=g(h,"BUTTON",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-1p3n8nt"&&(e.textContent=o),h.forEach(u),this.h()},h:function(){d(e,"class","mic-test-button retry svelte-63ohdq"),_(e,y,263,16,7628),d(t,"class","mic-test-button-area svelte-63ohdq"),_(t,y,262,14,7577)},m:function(i,h){E(i,t,h),f(t,e),n||(s=Ct(e,"click",c[9],!1),n=!0)},p:at,d:function(i){i&&u(t),n=!1,s()}};return F("SvelteRegisterBlock",{block:a,id:jt.name,type:"if",source:"(262:49) ",ctx:c}),a}function Gt(c){let t,e="マイク準備中...";const o={c:function(){t=k("p"),t.textContent=e,this.h()},l:function(s){t=g(s,"P",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-1vb5g92"&&(t.textContent=e),this.h()},h:function(){d(t,"class","status-text svelte-63ohdq"),_(t,y,260,14,7476)},m:function(s,a){E(s,t,a)},p:at,d:function(s){s&&u(t)}};return F("SvelteRegisterBlock",{block:o,id:Gt.name,type:"if",source:"(260:12) {#if micPermission === 'pending'}",ctx:c}),o}function Ot(c){let t;function e(a,l){return a[2]?Nt:Lt}let o=e(c),n=o(c);const s={c:function(){t=k("div"),n.c(),this.h()},l:function(l){t=g(l,"DIV",{class:!0});var i=C(t);n.l(i),i.forEach(u),this.h()},h:function(){d(t,"class","training-mode-content svelte-63ohdq"),_(t,y,247,8,6857)},m:function(l,i){E(l,t,i),n.m(t,null)},p:function(l,i){o===(o=e(l))&&n?n.p(l,i):(n.d(1),n=o(l),n&&(n.c(),n.m(t,null)))},d:function(l){l&&u(t),n.d()}};return F("SvelteRegisterBlock",{block:s,id:Ot.name,type:"slot",source:'(247:6) <Card variant=\\"default\\" padding=\\"lg\\">',ctx:c}),s}function Ut(c){let t;const e={c:function(){t=J(" ")},l:function(n){t=U(n," ")},m:function(n,s){E(n,t,s)},d:function(n){n&&u(t)}};return F("SvelteRegisterBlock",{block:e,id:Ut.name,type:"else",source:"(311:18) {:else}",ctx:c}),e}function Jt(c){let t;const e={c:function(){t=J("マイクテスト開始後に表示されます")},l:function(n){t=U(n,"マイクテスト開始後に表示されます")},m:function(n,s){E(n,t,s)},d:function(n){n&&u(t)}};return F("SvelteRegisterBlock",{block:e,id:Jt.name,type:"if",source:"(309:41) ",ctx:c}),e}function Zt(c){let t;const e={c:function(){t=J("⏳ 声を出して音量を確認してください")},l:function(n){t=U(n,"⏳ 声を出して音量を確認してください")},m:function(n,s){E(n,t,s)},d:function(n){n&&u(t)}};return F("SvelteRegisterBlock",{block:e,id:Zt.name,type:"if",source:"(307:18) {#if !volumeDetected && isListening}",ctx:c}),e}function Kt(c){let t;const e={c:function(){t=J(" ")},l:function(n){t=U(n," ")},m:function(n,s){E(n,t,s)},d:function(n){n&&u(t)}};return F("SvelteRegisterBlock",{block:e,id:Kt.name,type:"else",source:"(331:18) {:else}",ctx:c}),e}function Qt(c){let t;const e={c:function(){t=J("マイクテスト開始後に表示されます")},l:function(n){t=U(n,"マイクテスト開始後に表示されます")},m:function(n,s){E(n,t,s)},d:function(n){n&&u(t)}};return F("SvelteRegisterBlock",{block:e,id:Qt.name,type:"if",source:"(329:41) ",ctx:c}),e}function Wt(c){let t;const e={c:function(){t=J("⏳ 「ド」を発声して音程を確認してください")},l:function(n){t=U(n,"⏳ 「ド」を発声して音程を確認してください")},m:function(n,s){E(n,t,s)},d:function(n){n&&u(t)}};return F("SvelteRegisterBlock",{block:e,id:Wt.name,type:"if",source:"(327:18) {#if !frequencyDetected && isListening}",ctx:c}),e}function Xt(c){let t,e,o,n,s="音量レベル",a,l,i,h,v,m=c[5].toFixed(1)+"",b,A,q,p,V,B,D,x,Z="音程検出",z,S,M,K=c[6].toFixed(1)+"",H,r,w,R,j,Q,I,P;function nt(G,N){return!G[0]&&G[4]?Zt:G[4]?Ut:Jt}let tt=nt(c),W=tt(c);function bt(G,N){return!G[1]&&G[4]?Wt:G[4]?Kt:Qt}let st=bt(c),X=st(c);const qt={c:function(){t=k("div"),e=k("div"),o=k("div"),n=k("h3"),n.textContent=s,a=T(),l=k("div"),i=k("div"),h=T(),v=k("div"),b=J(m),A=J("%"),q=T(),p=k("div"),V=k("span"),W.c(),B=T(),D=k("div"),x=k("h3"),x.textContent=Z,z=T(),S=k("div"),M=k("div"),H=J(K),r=J(" Hz"),w=T(),R=k("div"),j=J(c[7]),Q=T(),I=k("div"),P=k("span"),X.c(),this.h()},l:function(N){t=g(N,"DIV",{class:!0});var Y=C(t);e=g(Y,"DIV",{class:!0});var lt=C(e);o=g(lt,"DIV",{class:!0});var $=C(o);n=g($,"H3",{class:!0,"data-svelte-h":!0}),O(n)!=="svelte-1nc8gri"&&(n.textContent=s),a=L($),l=g($,"DIV",{class:!0});var Dt=C(l);i=g(Dt,"DIV",{class:!0,style:!0}),C(i).forEach(u),Dt.forEach(u),h=L($),v=g($,"DIV",{class:!0});var rt=C(v);b=U(rt,m),A=U(rt,"%"),rt.forEach(u),q=L($),p=g($,"DIV",{class:!0});var Et=C(p);V=g(Et,"SPAN",{class:!0});var wt=C(V);W.l(wt),wt.forEach(u),Et.forEach(u),$.forEach(u),B=L(lt),D=g(lt,"DIV",{class:!0});var et=C(D);x=g(et,"H3",{class:!0,"data-svelte-h":!0}),O(x)!=="svelte-1ofzoy2"&&(x.textContent=Z),z=L(et),S=g(et,"DIV",{class:!0});var ct=C(S);M=g(ct,"DIV",{class:!0});var ut=C(M);H=U(ut,K),r=U(ut," Hz"),ut.forEach(u),w=L(ct),R=g(ct,"DIV",{class:!0});var Bt=C(R);j=U(Bt,c[7]),Bt.forEach(u),ct.forEach(u),Q=L(et),I=g(et,"DIV",{class:!0});var St=C(I);P=g(St,"SPAN",{class:!0});var xt=C(P);X.l(xt),xt.forEach(u),St.forEach(u),et.forEach(u),lt.forEach(u),Y.forEach(u),this.h()},h:function(){d(n,"class","display-title svelte-63ohdq"),_(n,y,299,14,8846),d(i,"class","volume-bar svelte-63ohdq"),Pt(i,"width",c[5]+"%"),_(i,y,301,16,8948),d(l,"class","volume-bar-container svelte-63ohdq"),_(l,y,300,14,8897),d(v,"class","volume-text svelte-63ohdq"),_(v,y,303,14,9046),d(V,"class","status-pending svelte-63ohdq"),_(V,y,305,16,9163),d(p,"class","volume-status svelte-63ohdq"),_(p,y,304,14,9119),d(o,"class","volume-section svelte-63ohdq"),_(o,y,298,12,8803),d(x,"class","display-title svelte-63ohdq"),_(x,y,319,14,9596),d(M,"class","frequency-value svelte-63ohdq"),_(M,y,321,16,9694),d(R,"class","note-value svelte-63ohdq"),_(R,y,322,16,9778),d(S,"class","frequency-display svelte-63ohdq"),_(S,y,320,14,9646),d(P,"class","status-pending svelte-63ohdq"),_(P,y,325,16,9904),d(I,"class","frequency-status svelte-63ohdq"),_(I,y,324,14,9857),d(D,"class","frequency-section"),_(D,y,318,12,9550),d(e,"class","realtime-display svelte-63ohdq"),_(e,y,296,10,8733),d(t,"class","mic-test-content svelte-63ohdq"),_(t,y,292,8,8646)},m:function(N,Y){E(N,t,Y),f(t,e),f(e,o),f(o,n),f(o,a),f(o,l),f(l,i),f(o,h),f(o,v),f(v,b),f(v,A),f(o,q),f(o,p),f(p,V),W.m(V,null),f(e,B),f(e,D),f(D,x),f(D,z),f(D,S),f(S,M),f(M,H),f(M,r),f(S,w),f(S,R),f(R,j),f(D,Q),f(D,I),f(I,P),X.m(P,null)},p:function(N,Y){Y&32&&Pt(i,"width",N[5]+"%"),Y&32&&m!==(m=N[5].toFixed(1)+"")&&dt(b,m),tt!==(tt=nt(N))&&(W.d(1),W=tt(N),W&&(W.c(),W.m(V,null))),Y&64&&K!==(K=N[6].toFixed(1)+"")&&dt(H,K),Y&128&&dt(j,N[7]),st!==(st=bt(N))&&(X.d(1),X=st(N),X&&(X.c(),X.m(P,null)))},d:function(N){N&&u(t),W.d(),X.d()}};return F("SvelteRegisterBlock",{block:qt,id:Xt.name,type:"slot",source:'(292:6) <Card variant=\\"default\\" padding=\\"lg\\">',ctx:c}),qt}function Yt(c){let t,e,o,n,s,a,l,i,h,v,m,b,A="マイクテスト",q,p,V="音感トレーニングを始める前に、マイクの動作を確認します",B,D,x,Z,z,S,M;x=new gt({props:{variant:"default",padding:"lg",$$slots:{default:[Ot]},$$scope:{ctx:c}},$$inline:!0}),S=new gt({props:{variant:"default",padding:"lg",$$slots:{default:[Xt]},$$scope:{ctx:c}},$$inline:!0});const K={c:function(){t=k("div"),e=k("div"),o=k("div"),n=k("div"),s=it("svg"),a=it("path"),l=it("path"),i=it("line"),h=it("line"),v=T(),m=k("div"),b=k("h1"),b.textContent=A,q=T(),p=k("p"),p.textContent=V,B=T(),D=k("div"),pt(x.$$.fragment),Z=T(),z=k("div"),pt(S.$$.fragment),this.h()},l:function(r){t=g(r,"DIV",{class:!0});var w=C(t);e=g(w,"DIV",{class:!0});var R=C(e);o=g(R,"DIV",{class:!0});var j=C(o);n=g(j,"DIV",{class:!0});var Q=C(n);s=ot(Q,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var I=C(s);a=ot(I,"path",{d:!0}),C(a).forEach(u),l=ot(I,"path",{d:!0}),C(l).forEach(u),i=ot(I,"line",{x1:!0,x2:!0,y1:!0,y2:!0}),C(i).forEach(u),h=ot(I,"line",{x1:!0,x2:!0,y1:!0,y2:!0}),C(h).forEach(u),I.forEach(u),Q.forEach(u),v=L(j),m=g(j,"DIV",{});var P=C(m);b=g(P,"H1",{class:!0,"data-svelte-h":!0}),O(b)!=="svelte-z7m4lk"&&(b.textContent=A),q=L(P),p=g(P,"P",{class:!0,"data-svelte-h":!0}),O(p)!=="svelte-1vtv92f"&&(p.textContent=V),P.forEach(u),j.forEach(u),R.forEach(u),B=L(w),D=g(w,"DIV",{class:!0});var nt=C(D);yt(x.$$.fragment,nt),nt.forEach(u),Z=L(w),z=g(w,"DIV",{class:!0});var tt=C(z);yt(S.$$.fragment,tt),tt.forEach(u),w.forEach(u),this.h()},h:function(){d(a,"d","M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"),_(a,y,231,12,6315),d(l,"d","M19 10v2a7 7 0 0 1-14 0v-2"),_(l,y,232,12,6392),d(i,"x1","12"),d(i,"x2","12"),d(i,"y1","19"),d(i,"y2","22"),_(i,y,233,12,6443),d(h,"x1","8"),d(h,"x2","16"),d(h,"y1","22"),d(h,"y2","22"),_(h,y,234,12,6495),d(s,"width","48"),d(s,"height","48"),d(s,"viewBox","0 0 24 24"),d(s,"fill","none"),d(s,"stroke","currentColor"),d(s,"stroke-width","2"),_(s,y,230,10,6203),d(n,"class","mic-icon svelte-63ohdq"),_(n,y,229,8,6170),d(b,"class","mic-test-title svelte-63ohdq"),_(b,y,238,10,6590),d(p,"class","mic-test-description svelte-63ohdq"),_(p,y,239,10,6639),_(m,y,237,8,6574),d(o,"class","mic-test-header svelte-63ohdq"),_(o,y,228,6,6132),d(e,"class","header svelte-63ohdq"),_(e,y,227,4,6105),d(D,"class","training-mode-info svelte-63ohdq"),_(D,y,245,4,6772),d(z,"class","test-section"),_(z,y,290,4,8567),d(t,"class","microphone-test svelte-63ohdq"),_(t,y,225,2,6053)},m:function(r,w){E(r,t,w),f(t,e),f(e,o),f(o,n),f(n,s),f(s,a),f(s,l),f(s,i),f(s,h),f(o,v),f(o,m),f(m,b),f(m,q),f(m,p),f(t,B),f(t,D),_t(x,D,null),f(t,Z),f(t,z),_t(S,z,null),M=!0},p:function(r,w){const R={};w&1048607&&(R.$$scope={dirty:w,ctx:r}),x.$set(R);const j={};w&1048819&&(j.$$scope={dirty:w,ctx:r}),S.$set(j)},i:function(r){M||(vt(x.$$.fragment,r),vt(S.$$.fragment,r),M=!0)},o:function(r){ht(x.$$.fragment,r),ht(S.$$.fragment,r),M=!1},d:function(r){r&&u(t),mt(x),mt(S)}};return F("SvelteRegisterBlock",{block:K,id:Yt.name,type:"slot",source:"(225:0) <PageLayout showBackButton={true}>",ctx:c}),K}function kt(c){let t,e,o;e=new Rt({props:{showBackButton:!0,$$slots:{default:[Yt]},$$scope:{ctx:c}},$$inline:!0});const n={c:function(){t=T(),pt(e.$$.fragment),this.h()},l:function(a){se("svelte-8st1fo",document.head).forEach(u),t=L(a),yt(e.$$.fragment,a),this.h()},h:function(){document.title="マイクテスト - 相対音感トレーニング"},m:function(a,l){E(a,t,l),_t(e,a,l),o=!0},p:function(a,[l]){const i={};l&1048831&&(i.$$scope={dirty:l,ctx:a}),e.$set(i)},i:function(a){o||(vt(e.$$.fragment,a),o=!0)},o:function(a){ht(e.$$.fragment,a),o=!1},d:function(a){a&&u(t),mt(e,a)}};return F("SvelteRegisterBlock",{block:n,id:kt.name,type:"component",source:"",ctx:c}),n}function At(c,t){let e=0;for(let l=0;l<c.length;l++)e+=c[l]*c[l];if(e=Math.sqrt(e/c.length),e<.005)return 0;const o=Math.floor(t/800),n=Math.floor(t/80);let s=0,a=0;for(let l=o;l<=n;l++){let i=0,h=0;for(let v=0;v<c.length-l;v++)i+=c[v]*c[v+l],h+=c[v]*c[v];h>0&&(i=i/Math.sqrt(h),i>s&&(s=i,a=l))}return s>.25?t/a:0}function Mt(c){const e=Math.round(12*Math.log2(c/440)),o=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],n=((e+9)%12+12)%12,s=Math.floor((e+9)/12)+4,a=o[n];return`${a}${s}（${{C:"ド","C#":"ド#",D:"レ","D#":"レ#",E:"ミ",F:"ファ","F#":"ファ#",G:"ソ","G#":"ソ#",A:"ラ","A#":"ラ#",B:"シ"}[a]}${s}）`}function ce(c,t,e){let o;ne(ft,"page"),oe(c,ft,r=>e(16,o=r));let{$$slots:n={},$$scope:s}=t;ie("Page",n,[]);let a="random";Vt(()=>{o.url.searchParams.has("mode")&&(a=o.url.searchParams.get("mode")||"random")});let l="initial",i=!1,h=!1,v=!1,m=!1,b=0,A=0,q="",p=null,V=null,B=null,D=null;const x={random:{name:"ランダム基音モード",description:"10種類の基音からランダムに選択してトレーニング",color:"green",path:"./training/random"},continuous:{name:"連続チャレンジモード",description:"選択した回数だけ連続で実行し、総合評価を確認",color:"orange",path:"./training/continuous"},chromatic:{name:"12音階モード",description:"クロマチックスケールの上行・下行で完全制覇",color:"purple",path:"./training/chromatic"}},Z=x[a]||x.random;async function z(){e(3,l="pending");try{V=await navigator.mediaDevices.getUserMedia({audio:!0}),e(3,l="granted"),p=new(window.AudioContext||window.webkitAudioContext),p.state==="suspended"&&await p.resume(),B=p.createAnalyser(),B.fftSize=2048,B.smoothingTimeConstant=.8,B.minDecibels=-90,B.maxDecibels=-10,p.createMediaStreamSource(V).connect(B),e(4,i=!0),S()}catch{e(3,l="denied")}}function S(){if(!i||!B)return;const r=B.frequencyBinCount,w=new Uint8Array(r);B.getByteFrequencyData(w);let R=0;for(let P=0;P<w.length;P++)R+=w[P]*w[P];const j=Math.sqrt(R/w.length);e(5,b=Math.min(100,j/64*100)),b>15&&e(0,h=!0);const Q=new Float32Array(B.fftSize);B.getFloatTimeDomainData(Q);const I=At(Q,p.sampleRate);I>80&&I<800?(e(6,A=I),e(7,q=Mt(I)),e(1,v=!0)):(e(6,A=0),e(7,q="")),D=requestAnimationFrame(S)}function M(){e(4,i=!1),D&&(cancelAnimationFrame(D),D=null),V&&(V.getTracks().forEach(r=>r.stop()),V=null),p&&p.state!=="closed"&&(p.close(),p=null),B=null}It(()=>{M()});const K=[];Object.keys(t).forEach(r=>{!~K.indexOf(r)&&r.slice(0,2)!=="$$"&&r!=="slot"&&console.warn(`<Page> was created with unknown prop '${r}'`)});const H=()=>window.location.href=Z.path;return c.$capture_state=()=>({onMount:Vt,onDestroy:It,page:ft,Card:gt,Button:le,PageLayout:Rt,mode:a,micPermission:l,isListening:i,volumeDetected:h,frequencyDetected:v,audioConfirmationComplete:m,currentVolume:b,currentFrequency:A,currentNote:q,audioContext:p,mediaStream:V,analyser:B,animationFrame:D,trainingModes:x,selectedMode:Z,requestMicrophone:z,analyzeAudio:S,detectPitch:At,frequencyToNote:Mt,stopListening:M,$page:o}),c.$inject_state=r=>{"mode"in r&&(a=r.mode),"micPermission"in r&&e(3,l=r.micPermission),"isListening"in r&&e(4,i=r.isListening),"volumeDetected"in r&&e(0,h=r.volumeDetected),"frequencyDetected"in r&&e(1,v=r.frequencyDetected),"audioConfirmationComplete"in r&&e(2,m=r.audioConfirmationComplete),"currentVolume"in r&&e(5,b=r.currentVolume),"currentFrequency"in r&&e(6,A=r.currentFrequency),"currentNote"in r&&e(7,q=r.currentNote),"audioContext"in r&&(p=r.audioContext),"mediaStream"in r&&(V=r.mediaStream),"analyser"in r&&(B=r.analyser),"animationFrame"in r&&(D=r.animationFrame)},t&&"$$inject"in t&&c.$inject_state(t.$$inject),c.$$.update=()=>{c.$$.dirty&7&&h&&v&&!m&&e(2,m=!0)},[h,v,m,l,i,b,A,q,Z,z,H]}class fe extends $t{constructor(t){super(t),te(this,t,ce,kt,ee,{}),F("SvelteRegisterComponent",{component:this,tagName:"Page",options:t,id:kt.name})}}export{fe as component};
