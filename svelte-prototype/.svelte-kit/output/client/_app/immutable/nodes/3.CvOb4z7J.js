import{S as ne,i as oe,d as M,s as ie,v as se,c as le,a as ce,D as ht,E as Et,b as v,q as st,r as X,u as K,f as b,w as lt,F as re,m as F,x as ct,p as N,y as rt,g as h,z as m,h as _,j as y,k as B,B as at,A as L,o as p,C as ut,G as It,H as Pt,l as Y,t as Q,n as nt,e as gt,I as vt,J as ft,K as dt}from"../chunks/EvMzC0aQ.js";import{g as ae}from"../chunks/D0QH3NT1.js";import"../chunks/DrEUfQCr.js";import{p as _t}from"../chunks/D4osJ3aY.js";import{P as Mt,B as zt,C as yt}from"../chunks/yXPAb40O.js";import{P as ue,V as Rt}from"../chunks/CmUJIz7r.js";const{console:fe}=ae,g="src/routes/microphone-test/+page.svelte";function Ft(c){let t,n="üé§ „Éû„Ç§„ÇØ„ÉÜ„Çπ„Éà„ÇíÈñãÂßã„Åó„Å¶„Åè„Å†„Åï„ÅÑ",l,e,i="„Éû„Ç§„ÇØË®±ÂèØ„ÇíÂèñÂæó",s,r;const u={c:function(){t=p("div"),t.textContent=n,l=N(),e=p("button"),e.textContent=i,this.h()},l:function(o){t=y(o,"DIV",{class:!0,"data-svelte-h":!0}),L(t)!=="svelte-1trsgl3"&&(t.textContent=n),l=F(o),e=y(o,"BUTTON",{class:!0,"data-svelte-h":!0}),L(e)!=="svelte-1m6icav"&&(e.textContent=i),this.h()},h:function(){m(t,"class","status-indicator pending svelte-ztuqv4"),_(t,g,478,14,14536),m(e,"class","retry-button svelte-ztuqv4"),_(e,g,479,14,14613)},m:function(o,a){b(o,t,a),b(o,l,a),b(o,e,a),s||(r=ft(e,"click",c[11],!1),s=!0)},p:nt,d:function(o){o&&(v(t),v(l),v(e)),s=!1,r()}};return M("SvelteRegisterBlock",{block:u,id:Ft.name,type:"else",source:"(478:12) {:else}",ctx:c}),u}function Nt(c){let t,n="‚ùå „Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„Çπ„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü",l,e,i="„Éû„Ç§„ÇØË®±ÂèØ„ÇíÂÜçË©¶Ë°å",s,r;const u={c:function(){t=p("div"),t.textContent=n,l=N(),e=p("button"),e.textContent=i,this.h()},l:function(o){t=y(o,"DIV",{class:!0,"data-svelte-h":!0}),L(t)!=="svelte-11p6bhs"&&(t.textContent=n),l=F(o),e=y(o,"BUTTON",{class:!0,"data-svelte-h":!0}),L(e)!=="svelte-1co4n23"&&(e.textContent=i),this.h()},h:function(){m(t,"class","status-indicator error svelte-ztuqv4"),_(t,g,473,14,14317),m(e,"class","retry-button svelte-ztuqv4"),_(e,g,474,14,14393)},m:function(o,a){b(o,t,a),b(o,l,a),b(o,e,a),s||(r=ft(e,"click",c[11],!1),s=!0)},p:nt,d:function(o){o&&(v(t),v(l),v(e)),s=!1,r()}};return M("SvelteRegisterBlock",{block:u,id:Nt.name,type:"if",source:"(473:48) ",ctx:c}),u}function Lt(c){let t,n="‚ùå „Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„Çπ„ÅåÊãíÂê¶„Åï„Çå„Åæ„Åó„Åü",l,e,i="„Éû„Ç§„ÇØË®±ÂèØ„ÇíÂÜçË©¶Ë°å",s,r;const u={c:function(){t=p("div"),t.textContent=n,l=N(),e=p("button"),e.textContent=i,this.h()},l:function(o){t=y(o,"DIV",{class:!0,"data-svelte-h":!0}),L(t)!=="svelte-4rewx4"&&(t.textContent=n),l=F(o),e=y(o,"BUTTON",{class:!0,"data-svelte-h":!0}),L(e)!=="svelte-1co4n23"&&(e.textContent=i),this.h()},h:function(){m(t,"class","status-indicator error svelte-ztuqv4"),_(t,g,468,14,14071),m(e,"class","retry-button svelte-ztuqv4"),_(e,g,469,14,14145)},m:function(o,a){b(o,t,a),b(o,l,a),b(o,e,a),s||(r=ft(e,"click",c[11],!1),s=!0)},p:nt,d:function(o){o&&(v(t),v(l),v(e)),s=!1,r()}};return M("SvelteRegisterBlock",{block:u,id:Lt.name,type:"if",source:"(468:49) ",ctx:c}),u}function Tt(c){let t,n="‚úÖ „Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„ÇπË®±ÂèØÊ∏à„Åø",l,e;function i(f,o){if(!f[3]&&!f[4])return Ut;if(!f[3]&&f[4])return Ot;if(f[3])return jt}let s=i(c),r=s&&s(c);const u={c:function(){t=p("div"),t.textContent=n,l=N(),r&&r.c(),e=vt(),this.h()},l:function(o){t=y(o,"DIV",{class:!0,"data-svelte-h":!0}),L(t)!=="svelte-96x1w2"&&(t.textContent=n),l=F(o),r&&r.l(o),e=vt(),this.h()},h:function(){m(t,"class","status-indicator granted svelte-ztuqv4"),_(t,g,453,14,13265)},m:function(o,a){b(o,t,a),b(o,l,a),r&&r.m(o,a),b(o,e,a)},p:function(o,a){s===(s=i(o))&&r?r.p(o,a):(r&&r.d(1),r=s&&s(o),r&&(r.c(),r.m(e.parentNode,e)))},d:function(o){o&&(v(t),v(l),v(e)),r&&r.d(o)}};return M("SvelteRegisterBlock",{block:u,id:Tt.name,type:"if",source:"(453:50) ",ctx:c}),u}function Ht(c){let t,n="‚è≥ „Éû„Ç§„ÇØË®±ÂèØ„ÇíÁ¢∫Ë™ç‰∏≠...";const l={c:function(){t=p("div"),t.textContent=n,this.h()},l:function(i){t=y(i,"DIV",{class:!0,"data-svelte-h":!0}),L(t)!=="svelte-qiomfc"&&(t.textContent=n),this.h()},h:function(){m(t,"class","status-indicator pending svelte-ztuqv4"),_(t,g,451,14,13141)},m:function(i,s){b(i,t,s)},p:nt,d:function(i){i&&v(t)}};return M("SvelteRegisterBlock",{block:l,id:Ht.name,type:"if",source:"(451:12) {#if micPermission === 'pending'}",ctx:c}),l}function jt(c){let t,n="üé§ „É™„Ç¢„É´„Çø„Ç§„É†Ëß£Êûê‰∏≠";const l={c:function(){t=p("div"),t.textContent=n,this.h()},l:function(i){t=y(i,"DIV",{class:!0,"data-svelte-h":!0}),L(t)!=="svelte-bm11qy"&&(t.textContent=n),this.h()},h:function(){m(t,"class","status-indicator success svelte-ztuqv4"),_(t,g,465,16,13930)},m:function(i,s){b(i,t,s)},p:nt,d:function(i){i&&v(t)}};return M("SvelteRegisterBlock",{block:l,id:jt.name,type:"if",source:"(465:36) ",ctx:c}),l}function Ot(c){let t,n="‚ö†Ô∏è Èü≥Â£∞„Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà„Åå„Éñ„É≠„ÉÉ„ÇØ„Åï„Çå„Å¶„ÅÑ„Åæ„Åô",l,e,i="Èü≥Â£∞Ê©üËÉΩ„ÇíÂÜçË©¶Ë°å",s,r;const u={c:function(){t=p("div"),t.textContent=n,l=N(),e=p("button"),e.textContent=i,this.h()},l:function(o){t=y(o,"DIV",{class:!0,"data-svelte-h":!0}),L(t)!=="svelte-rn7aam"&&(t.textContent=n),l=F(o),e=y(o,"BUTTON",{class:!0,"data-svelte-h":!0}),L(e)!=="svelte-hrmonq"&&(e.textContent=i),this.h()},h:function(){m(t,"class","status-indicator warning svelte-ztuqv4"),_(t,g,460,16,13674),m(e,"class","retry-button svelte-ztuqv4"),_(e,g,461,16,13757)},m:function(o,a){b(o,t,a),b(o,l,a),b(o,e,a),s||(r=ft(e,"click",c[12],!1),s=!0)},p:nt,d:function(o){o&&(v(t),v(l),v(e)),s=!1,r()}};return M("SvelteRegisterBlock",{block:u,id:Ot.name,type:"if",source:"(460:60) ",ctx:c}),u}function Ut(c){let t,n="üéµ Èü≥Â£∞Ê©üËÉΩ„ÇíÈñãÂßã„Åó„Å¶„Åè„Å†„Åï„ÅÑ",l,e,i="üé§ „Éû„Ç§„ÇØ„ÉÜ„Çπ„Éà„ÇíÈñãÂßã",s,r;const u={c:function(){t=p("div"),t.textContent=n,l=N(),e=p("button"),e.textContent=i,this.h()},l:function(o){t=y(o,"DIV",{class:!0,"data-svelte-h":!0}),L(t)!=="svelte-13wnluo"&&(t.textContent=n),l=F(o),e=y(o,"BUTTON",{class:!0,"data-svelte-h":!0}),L(e)!=="svelte-4juur8"&&(e.textContent=i),this.h()},h:function(){m(t,"class","status-indicator warning svelte-ztuqv4"),_(t,g,455,16,13396),m(e,"class","retry-button svelte-ztuqv4"),_(e,g,456,16,13473)},m:function(o,a){b(o,t,a),b(o,l,a),b(o,e,a),s||(r=ft(e,"click",c[12],!1),s=!0)},p:nt,d:function(o){o&&(v(t),v(l),v(e)),s=!1,r()}};return M("SvelteRegisterBlock",{block:u,id:Ut.name,type:"if",source:"(455:14) {#if !isListening && !audioContextBlocked}",ctx:c}),u}function pt(c){let t,n,l,e="Èü≥Èáè„É¨„Éô„É´",i,s,r,u,f,o,a,k="Èü≥Á®ãÊ§úÂá∫",S,C,x,H=c[6].toFixed(1)+"",A,D,w,j,q,O,T,U,W,I,P;s=new Rt({props:{volume:c[5],height:"16px",className:"volume-bar-wrapper"},$$inline:!0});let V=!c[1]&&kt(c),E=c[8]>0&&Ct(c);function et(J,z){return J[2]?J[8]<50?Wt:Gt:Jt}let d=et(c),G=d(c),R=c[1]&&!c[2]&&bt(c);const $={c:function(){t=p("div"),n=p("div"),l=p("h3"),l.textContent=e,i=N(),rt(s.$$.fragment),r=N(),u=p("div"),V&&V.c(),f=N(),o=p("div"),a=p("h3"),a.textContent=k,S=N(),C=p("div"),x=p("div"),A=Q(H),D=Q(" Hz"),w=N(),j=p("div"),q=Q(c[7]),O=N(),E&&E.c(),T=N(),U=p("div"),G.c(),W=N(),R&&R.c(),I=vt(),this.h()},l:function(z){t=y(z,"DIV",{class:!0});var Z=B(t);n=y(Z,"DIV",{class:!0});var tt=B(n);l=y(tt,"H3",{class:!0,"data-svelte-h":!0}),L(l)!=="svelte-1nc8gri"&&(l.textContent=e),i=F(tt),ct(s.$$.fragment,tt),r=F(tt),u=y(tt,"DIV",{class:!0});var Bt=B(u);V&&V.l(Bt),Bt.forEach(v),tt.forEach(v),f=F(Z),o=y(Z,"DIV",{class:!0});var ot=B(o);a=y(ot,"H3",{class:!0,"data-svelte-h":!0}),L(a)!=="svelte-1ofzoy2"&&(a.textContent=k),S=F(ot),C=y(ot,"DIV",{class:!0});var it=B(C);x=y(it,"DIV",{class:!0});var mt=B(x);A=Y(mt,H),D=Y(mt," Hz"),mt.forEach(v),w=F(it),j=y(it,"DIV",{class:!0});var Dt=B(j);q=Y(Dt,c[7]),Dt.forEach(v),O=F(it),E&&E.l(it),it.forEach(v),T=F(ot),U=y(ot,"DIV",{class:!0});var wt=B(U);G.l(wt),wt.forEach(v),ot.forEach(v),Z.forEach(v),W=F(z),R&&R.l(z),I=vt(),this.h()},h:function(){m(l,"class","display-title svelte-ztuqv4"),_(l,g,490,16,14975),m(u,"class","volume-status svelte-ztuqv4"),_(u,g,492,16,15126),m(n,"class","volume-section svelte-ztuqv4"),_(n,g,489,14,14930),m(a,"class","display-title svelte-ztuqv4"),_(a,g,501,16,15432),m(x,"class","frequency-value svelte-ztuqv4"),_(x,g,503,18,15534),m(j,"class","note-value svelte-ztuqv4"),_(j,g,504,18,15620),m(C,"class","frequency-display svelte-ztuqv4"),_(C,g,502,16,15484),m(U,"class","frequency-status svelte-ztuqv4"),_(U,g,517,16,16271),m(o,"class","frequency-section"),_(o,g,500,14,15384),m(t,"class","realtime-display svelte-ztuqv4"),_(t,g,487,12,14856)},m:function(z,Z){b(z,t,Z),h(t,n),h(n,l),h(n,i),lt(s,n,null),h(n,r),h(n,u),V&&V.m(u,null),h(t,f),h(t,o),h(o,a),h(o,S),h(o,C),h(C,x),h(x,A),h(x,D),h(C,w),h(C,j),h(j,q),h(C,O),E&&E.m(C,null),h(o,T),h(o,U),G.m(U,null),b(z,W,Z),R&&R.m(z,Z),b(z,I,Z),P=!0},p:function(z,Z){const tt={};Z&32&&(tt.volume=z[5]),s.$set(tt),z[1]?V&&(V.d(1),V=null):V||(V=kt(z),V.c(),V.m(u,null)),(!P||Z&64)&&H!==(H=z[6].toFixed(1)+"")&&gt(A,H),(!P||Z&128)&&gt(q,z[7]),z[8]>0?E?E.p(z,Z):(E=Ct(z),E.c(),E.m(C,null)):E&&(E.d(1),E=null),d!==(d=et(z))&&(G.d(1),G=d(z),G&&(G.c(),G.m(U,null))),z[1]&&!z[2]?R||(R=bt(z),R.c(),R.m(I.parentNode,I)):R&&(R.d(1),R=null)},i:function(z){P||(K(s.$$.fragment,z),P=!0)},o:function(z){X(s.$$.fragment,z),P=!1},d:function(z){z&&(v(t),v(W),v(I)),st(s),V&&V.d(),E&&E.d(),G.d(),R&&R.d(z)}};return M("SvelteRegisterBlock",{block:$,id:pt.name,type:"if",source:"(487:10) {#if micPermission === 'granted' && isListening}",ctx:c}),$}function kt(c){let t,n="‚è≥ Â£∞„ÇíÂá∫„Åó„Å¶Èü≥Èáè„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ";const l={c:function(){t=p("span"),t.textContent=n,this.h()},l:function(i){t=y(i,"SPAN",{class:!0,"data-svelte-h":!0}),L(t)!=="svelte-7eexnn"&&(t.textContent=n),this.h()},h:function(){m(t,"class","status-pending svelte-ztuqv4"),_(t,g,494,20,15214)},m:function(i,s){b(i,t,s)},d:function(i){i&&v(t)}};return M("SvelteRegisterBlock",{block:l,id:kt.name,type:"if",source:"(494:18) {#if !volumeDetected}",ctx:c}),l}function Ct(c){let t,n,l,e,i,s;const r={c:function(){t=p("div"),n=Q("‰ø°È†ºÂ∫¶: "),l=Q(c[8]),e=Q(`%
                      `),i=p("div"),s=p("div"),this.h()},l:function(f){t=y(f,"DIV",{class:!0});var o=B(t);n=Y(o,"‰ø°È†ºÂ∫¶: "),l=Y(o,c[8]),e=Y(o,`%
                      `),i=y(o,"DIV",{class:!0});var a=B(i);s=y(a,"DIV",{class:!0,style:!0}),B(s).forEach(v),a.forEach(v),o.forEach(v),this.h()},h:function(){m(s,"class","confidence-fill svelte-ztuqv4"),dt(s,"width",c[8]+"%"),dt(s,"background-color",c[8]>70?"#10b981":c[8]>40?"#f59e0b":"#ef4444"),_(s,g,509,24,15890),m(i,"class","confidence-bar svelte-ztuqv4"),_(i,g,508,22,15837),m(t,"class","confidence-display svelte-ztuqv4"),_(t,g,506,20,15732)},m:function(f,o){b(f,t,o),h(t,n),h(t,l),h(t,e),h(t,i),h(i,s)},p:function(f,o){o&256&&gt(l,f[8]),o&256&&dt(s,"width",f[8]+"%"),o&256&&dt(s,"background-color",f[8]>70?"#10b981":f[8]>40?"#f59e0b":"#ef4444")},d:function(f){f&&v(t)}};return M("SvelteRegisterBlock",{block:r,id:Ct.name,type:"if",source:"(506:18) {#if detectionConfidence > 0}",ctx:c}),r}function Gt(c){let t,n="‚úÖ Èü≥Á®ãÊ§úÂá∫‰∏≠";const l={c:function(){t=p("span"),t.textContent=n,this.h()},l:function(i){t=y(i,"SPAN",{class:!0,"data-svelte-h":!0}),L(t)!=="svelte-acahk5"&&(t.textContent=n),this.h()},h:function(){m(t,"class","status-success svelte-ztuqv4"),_(t,g,523,20,16596)},m:function(i,s){b(i,t,s)},d:function(i){i&&v(t)}};return M("SvelteRegisterBlock",{block:l,id:Gt.name,type:"else",source:"(523:18) {:else}",ctx:c}),l}function Wt(c){let t,n="‚ö†Ô∏è „Çà„ÇäÊòéÁ¢∫„Å´Áô∫Â£∞„Åó„Å¶„Åè„Å†„Åï„ÅÑ";const l={c:function(){t=p("span"),t.textContent=n,this.h()},l:function(i){t=y(i,"SPAN",{class:!0,"data-svelte-h":!0}),L(t)!=="svelte-lq2kpp"&&(t.textContent=n),this.h()},h:function(){m(t,"class","status-warning svelte-ztuqv4"),_(t,g,521,20,16497)},m:function(i,s){b(i,t,s)},d:function(i){i&&v(t)}};return M("SvelteRegisterBlock",{block:l,id:Wt.name,type:"if",source:"(521:53) ",ctx:c}),l}function Jt(c){let t,n="‚è≥ „Äå„Éâ„Äç„ÇíÁô∫Â£∞„Åó„Å¶Èü≥Á®ã„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ";const l={c:function(){t=p("span"),t.textContent=n,this.h()},l:function(i){t=y(i,"SPAN",{class:!0,"data-svelte-h":!0}),L(t)!=="svelte-lvftl7"&&(t.textContent=n),this.h()},h:function(){m(t,"class","status-pending svelte-ztuqv4"),_(t,g,519,20,16365)},m:function(i,s){b(i,t,s)},d:function(i){i&&v(t)}};return M("SvelteRegisterBlock",{block:l,id:Jt.name,type:"if",source:"(519:18) {#if !frequencyDetected}",ctx:c}),l}function bt(c){let t,n,l,e="„Äå„Éâ„Äç„ÇíÁô∫Â£∞„Åó„Å¶„Åè„Å†„Åï„ÅÑ",i,s,r="‰ªªÊÑè„ÅÆÈ´ò„Åï„Åß„Äå„Éâ„Éº„Äç„Å®Ê≠å„ÅÜ„Çà„ÅÜ„Å´Áô∫Â£∞„Åó„Å¶„Åè„Å†„Åï„ÅÑ";const u={c:function(){t=p("div"),n=p("div"),l=p("h3"),l.textContent=e,i=N(),s=p("p"),s.textContent=r,this.h()},l:function(o){t=y(o,"DIV",{class:!0});var a=B(t);n=y(a,"DIV",{class:!0});var k=B(n);l=y(k,"H3",{class:!0,"data-svelte-h":!0}),L(l)!=="svelte-xe90gt"&&(l.textContent=e),i=F(k),s=y(k,"P",{class:!0,"data-svelte-h":!0}),L(s)!=="svelte-1rtajtc"&&(s.textContent=r),k.forEach(v),a.forEach(v),this.h()},h:function(){m(l,"class","svelte-ztuqv4"),_(l,g,533,18,16912),m(s,"class","svelte-ztuqv4"),_(s,g,534,18,16952),m(n,"class","guidance-content svelte-ztuqv4"),_(n,g,532,16,16863),m(t,"class","guidance svelte-ztuqv4"),_(t,g,531,14,16824)},m:function(o,a){b(o,t,a),h(t,n),h(n,l),h(n,i),h(n,s)},d:function(o){o&&v(t)}};return M("SvelteRegisterBlock",{block:u,id:bt.name,type:"if",source:"(531:12) {#if volumeDetected && !frequencyDetected}",ctx:c}),u}function Zt(c){let t,n,l,e;function i(o,a){return o[0]==="pending"?Ht:o[0]==="granted"?Tt:o[0]==="denied"?Lt:o[0]==="error"?Nt:Ft}let s=i(c),r=s(c),u=c[0]==="granted"&&c[3]&&pt(c);const f={c:function(){t=p("div"),n=p("div"),r.c(),l=N(),u&&u.c(),this.h()},l:function(a){t=y(a,"DIV",{class:!0});var k=B(t);n=y(k,"DIV",{class:!0});var S=B(n);r.l(S),S.forEach(v),l=F(k),u&&u.l(k),k.forEach(v),this.h()},h:function(){m(n,"class","mic-status svelte-ztuqv4"),_(n,g,449,10,13056),m(t,"class","mic-test-content svelte-ztuqv4"),_(t,g,446,8,12977)},m:function(a,k){b(a,t,k),h(t,n),r.m(n,null),h(t,l),u&&u.m(t,null),e=!0},p:function(a,k){s===(s=i(a))&&r?r.p(a,k):(r.d(1),r=s(a),r&&(r.c(),r.m(n,null))),a[0]==="granted"&&a[3]?u?(u.p(a,k),k&9&&K(u,1)):(u=pt(a),u.c(),K(u,1),u.m(t,null)):u&&(It(),X(u,1,1,()=>{u=null}),Pt())},i:function(a){e||(K(u),e=!0)},o:function(a){X(u),e=!1},d:function(a){a&&v(t),r.d(),u&&u.d()}};return M("SvelteRegisterBlock",{block:f,id:Zt.name,type:"slot",source:'(446:6) <Card variant=\\"default\\" padding=\\"lg\\">',ctx:c}),f}function Kt(c){let t,n;t=new zt({props:{variant:"disabled",size:"lg",fullWidth:!0,disabled:!0,$$slots:{default:[Qt]},$$scope:{ctx:c}},$$inline:!0});const l={c:function(){rt(t.$$.fragment)},l:function(i){ct(t.$$.fragment,i)},m:function(i,s){lt(t,i,s),n=!0},p:function(i,s){const r={};s&33554432&&(r.$$scope={dirty:s,ctx:i}),t.$set(r)},i:function(i){n||(K(t.$$.fragment,i),n=!0)},o:function(i){X(t.$$.fragment,i),n=!1},d:function(i){st(t,i)}};return M("SvelteRegisterBlock",{block:l,id:Kt.name,type:"else",source:"(562:10) {:else}",ctx:c}),l}function Yt(c){let t,n;t=new zt({props:{href:c[10].path,variant:"primary",size:"lg",fullWidth:!0,$$slots:{default:[Xt]},$$scope:{ctx:c}},$$inline:!0});const l={c:function(){rt(t.$$.fragment)},l:function(i){ct(t.$$.fragment,i)},m:function(i,s){lt(t,i,s),n=!0},p:function(i,s){const r={};s&33554432&&(r.$$scope={dirty:s,ctx:i}),t.$set(r)},i:function(i){n||(K(t.$$.fragment,i),n=!0)},o:function(i){X(t.$$.fragment,i),n=!1},d:function(i){st(t,i)}};return M("SvelteRegisterBlock",{block:l,id:Yt.name,type:"if",source:"(553:10) {#if startButtonEnabled}",ctx:c}),l}function Qt(c){let t;const n={c:function(){t=Q("„Éû„Ç§„ÇØ„ÉÜ„Çπ„ÉàÂÆå‰∫ÜÂæå„Å´ÈñãÂßã")},l:function(e){t=Y(e,"„Éû„Ç§„ÇØ„ÉÜ„Çπ„ÉàÂÆå‰∫ÜÂæå„Å´ÈñãÂßã")},m:function(e,i){b(e,t,i)},d:function(e){e&&v(t)}};return M("SvelteRegisterBlock",{block:n,id:Qt.name,type:"slot",source:'(563:12) <Button                variant=\\"disabled\\"                size=\\"lg\\"                fullWidth                disabled             >',ctx:c}),n}function Xt(c){let t;const n={c:function(){t=Q("„Éà„É¨„Éº„Éã„É≥„Ç∞ÈñãÂßã")},l:function(e){t=Y(e,"„Éà„É¨„Éº„Éã„É≥„Ç∞ÈñãÂßã")},m:function(e,i){b(e,t,i)},d:function(e){e&&v(t)}};return M("SvelteRegisterBlock",{block:n,id:Xt.name,type:"slot",source:'(554:12) <Button                href={selectedMode.path}                variant=\\"primary\\"                size=\\"lg\\"                fullWidth             >',ctx:c}),n}function $t(c){let t,n,l=c[10].name+"",e,i,s,r=c[10].description+"",u,f,o,a,k;const S=[Yt,Kt],C=[];function x(A,D){return A[9]?0:1}o=x(c),a=C[o]=S[o](c);const H={c:function(){t=p("div"),n=p("h3"),e=Q(l),i=N(),s=p("p"),u=Q(r),f=N(),a.c(),this.h()},l:function(D){t=y(D,"DIV",{class:!0});var w=B(t);n=y(w,"H3",{class:!0});var j=B(n);e=Y(j,l),j.forEach(v),i=F(w),s=y(w,"P",{class:!0});var q=B(s);u=Y(q,r),q.forEach(v),f=F(w),a.l(w),w.forEach(v),this.h()},h:function(){m(n,"class","start-title svelte-ztuqv4"),_(n,g,547,10,17246),m(s,"class","start-description svelte-ztuqv4"),_(s,g,548,10,17305),m(t,"class","start-content svelte-ztuqv4"),_(t,g,546,8,17208)},m:function(D,w){b(D,t,w),h(t,n),h(n,e),h(t,i),h(t,s),h(s,u),h(t,f),C[o].m(t,null),k=!0},p:function(D,w){let j=o;o=x(D),o===j?C[o].p(D,w):(It(),X(C[j],1,1,()=>{C[j]=null}),Pt(),a=C[o],a?a.p(D,w):(a=C[o]=S[o](D),a.c()),K(a,1),a.m(t,null))},i:function(D){k||(K(a),k=!0)},o:function(D){X(a),k=!1},d:function(D){D&&v(t),C[o].d()}};return M("SvelteRegisterBlock",{block:H,id:$t.name,type:"slot",source:'(546:6) <Card variant=\\"default\\" padding=\\"lg\\">',ctx:c}),H}function te(c){let t,n,l,e,i,s,r,u,f,o,a,k,S="„Éû„Ç§„ÇØ„ÉÜ„Çπ„Éà",C,x,H="Èü≥ÊÑü„Éà„É¨„Éº„Éã„É≥„Ç∞„ÇíÂßã„ÇÅ„ÇãÂâç„Å´„ÄÅ„Éû„Ç§„ÇØ„ÅÆÂãï‰Ωú„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åô",A,D,w,j,q,O,T;w=new yt({props:{variant:"default",padding:"lg",$$slots:{default:[Zt]},$$scope:{ctx:c}},$$inline:!0}),O=new yt({props:{variant:"default",padding:"lg",$$slots:{default:[$t]},$$scope:{ctx:c}},$$inline:!0});const U={c:function(){t=p("div"),n=p("div"),l=p("div"),e=p("div"),i=ut("svg"),s=ut("path"),r=ut("path"),u=ut("line"),f=ut("line"),o=N(),a=p("div"),k=p("h1"),k.textContent=S,C=N(),x=p("p"),x.textContent=H,A=N(),D=p("div"),rt(w.$$.fragment),j=N(),q=p("div"),rt(O.$$.fragment),this.h()},l:function(I){t=y(I,"DIV",{class:!0});var P=B(t);n=y(P,"DIV",{class:!0});var V=B(n);l=y(V,"DIV",{class:!0});var E=B(l);e=y(E,"DIV",{class:!0});var et=B(e);i=at(et,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var d=B(i);s=at(d,"path",{d:!0}),B(s).forEach(v),r=at(d,"path",{d:!0}),B(r).forEach(v),u=at(d,"line",{x1:!0,x2:!0,y1:!0,y2:!0}),B(u).forEach(v),f=at(d,"line",{x1:!0,x2:!0,y1:!0,y2:!0}),B(f).forEach(v),d.forEach(v),et.forEach(v),o=F(E),a=y(E,"DIV",{});var G=B(a);k=y(G,"H1",{class:!0,"data-svelte-h":!0}),L(k)!=="svelte-z7m4lk"&&(k.textContent=S),C=F(G),x=y(G,"P",{class:!0,"data-svelte-h":!0}),L(x)!=="svelte-1vtv92f"&&(x.textContent=H),G.forEach(v),E.forEach(v),V.forEach(v),A=F(P),D=y(P,"DIV",{class:!0});var R=B(D);ct(w.$$.fragment,R),R.forEach(v),j=F(P),q=y(P,"DIV",{class:!0});var $=B(q);ct(O.$$.fragment,$),$.forEach(v),P.forEach(v),this.h()},h:function(){m(s,"d","M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"),_(s,g,430,12,12441),m(r,"d","M19 10v2a7 7 0 0 1-14 0v-2"),_(r,g,431,12,12518),m(u,"x1","12"),m(u,"x2","12"),m(u,"y1","19"),m(u,"y2","22"),_(u,g,432,12,12569),m(f,"x1","8"),m(f,"x2","16"),m(f,"y1","22"),m(f,"y2","22"),_(f,g,433,12,12621),m(i,"width","48"),m(i,"height","48"),m(i,"viewBox","0 0 24 24"),m(i,"fill","none"),m(i,"stroke","currentColor"),m(i,"stroke-width","2"),_(i,g,429,10,12329),m(e,"class","mic-icon svelte-ztuqv4"),_(e,g,428,8,12296),m(k,"class","mic-test-title svelte-ztuqv4"),_(k,g,437,10,12716),m(x,"class","mic-test-description svelte-ztuqv4"),_(x,g,438,10,12765),_(a,g,436,8,12700),m(l,"class","mic-test-header svelte-ztuqv4"),_(l,g,427,6,12258),m(n,"class","header svelte-ztuqv4"),_(n,g,426,4,12231),m(D,"class","test-section"),_(D,g,444,4,12898),m(q,"class","start-section"),_(q,g,544,4,17128),m(t,"class","microphone-test svelte-ztuqv4"),_(t,g,424,2,12179)},m:function(I,P){b(I,t,P),h(t,n),h(n,l),h(l,e),h(e,i),h(i,s),h(i,r),h(i,u),h(i,f),h(l,o),h(l,a),h(a,k),h(a,C),h(a,x),h(t,A),h(t,D),lt(w,D,null),h(t,j),h(t,q),lt(O,q,null),T=!0},p:function(I,P){const V={};P&33554943&&(V.$$scope={dirty:P,ctx:I}),w.$set(V);const E={};P&33554944&&(E.$$scope={dirty:P,ctx:I}),O.$set(E)},i:function(I){T||(K(w.$$.fragment,I),K(O.$$.fragment,I),T=!0)},o:function(I){X(w.$$.fragment,I),X(O.$$.fragment,I),T=!1},d:function(I){I&&v(t),st(w),st(O)}};return M("SvelteRegisterBlock",{block:U,id:te.name,type:"slot",source:"(424:0) <PageLayout showBackButton={true}>",ctx:c}),U}function qt(c){let t,n,l;n=new Mt({props:{showBackButton:!0,$$slots:{default:[te]},$$scope:{ctx:c}},$$inline:!0});const e={c:function(){t=N(),rt(n.$$.fragment),this.h()},l:function(s){re("svelte-8st1fo",document.head).forEach(v),t=F(s),ct(n.$$.fragment,s),this.h()},h:function(){document.title="„Éû„Ç§„ÇØ„ÉÜ„Çπ„Éà - Áõ∏ÂØæÈü≥ÊÑü„Éà„É¨„Éº„Éã„É≥„Ç∞"},m:function(s,r){b(s,t,r),lt(n,s,r),l=!0},p:function(s,[r]){const u={};r&33555455&&(u.$$scope={dirty:r,ctx:s}),n.$set(u)},i:function(s){l||(K(n.$$.fragment,s),l=!0)},o:function(s){X(n.$$.fragment,s),l=!1},d:function(s){s&&v(t),st(n,s)}};return M("SvelteRegisterBlock",{block:e,id:qt.name,type:"component",source:"",ctx:c}),e}const St=5;function xt(c){if(c<=0)return"C4Ôºà„Éâ4Ôºâ";const n=Math.round(12*Math.log2(c/440)),l=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],e=((n+9)%12+12)%12,i=Math.floor((n+9)/12)+4,s=l[e];return`${s}${i}Ôºà${{C:"„Éâ","C#":"„Éâ#",D:"„É¨","D#":"„É¨#",E:"„Éü",F:"„Éï„Ç°","F#":"„Éï„Ç°#",G:"„ÇΩ","G#":"„ÇΩ#",A:"„É©","A#":"„É©#",B:"„Ç∑"}[s]}${i}Ôºâ`}function At(c,t){let n=0;for(let o=0;o<c.length;o++)n+=c[o]*c[o];if(n=Math.sqrt(n/c.length),n<.01)return 0;const l=ee(c,t,70),e=Math.floor(t/800),i=Math.floor(t/70);let s=0,r=0,u=0;for(let o=e;o<=i;o++){let a=0,k=0;for(let S=0;S<l.length-o;S++)a+=l[S]*l[S+o],k+=l[S]*l[S];k>0&&(a=a/Math.sqrt(k),a>s?(u=s,s=a,r=o):a>u&&(u=a))}const f=s-u;if(s>.3&&f>.05&&r>0){const o=Math.min(1,s*f*2);return{frequency:t/r,confidence:o}}return{frequency:0,confidence:0}}function ee(c,t,n){const l=1/t,e=1/(n*2*Math.PI),i=e/(e+l),s=new Float32Array(c.length);s[0]=c[0];for(let r=1;r<c.length;r++)s[r]=i*(s[r-1]+c[r]-c[r-1]);return s}function Vt(c){if(c.length===0)return 0;if(c.length===1)return c[0];const t=[...c].sort((s,r)=>s-r),n=t[Math.floor(t.length/2)],l=c.filter(s=>Math.abs(s-n)/n<.1);if(l.length===0)return n;let e=0,i=0;for(let s=0;s<l.length;s++){const r=s+1;e+=l[s]*r,i+=r}return e/i}function de(c,t,n){let l,e;se(_t,"page"),le(c,_t,d=>n(20,e=d));let{$$slots:i={},$$scope:s}=t;ce("Page",i,[]);let r="random";ht(()=>{e.url.searchParams.has("mode")&&(r=e.url.searchParams.get("mode")||"random")});let u="initial",f=!1,o=!1,a=0,k=0,S="",C=!1,x=0,H=!1,A=[];const D={random:{name:"„É©„É≥„ÉÄ„É†Âü∫Èü≥„É¢„Éº„Éâ",description:"10Á®ÆÈ°û„ÅÆÂü∫Èü≥„Åã„Çâ„É©„É≥„ÉÄ„É†„Å´ÈÅ∏Êäû„Åó„Å¶„Éà„É¨„Éº„Éã„É≥„Ç∞",color:"green",path:"./training/random"},continuous:{name:"ÈÄ£Á∂ö„ÉÅ„É£„É¨„É≥„Ç∏„É¢„Éº„Éâ",description:"ÈÅ∏Êäû„Åó„ÅüÂõûÊï∞„Å†„ÅëÈÄ£Á∂ö„ÅßÂÆüË°å„Åó„ÄÅÁ∑èÂêàË©ï‰æ°„ÇíÁ¢∫Ë™ç",color:"orange",path:"./training/continuous"},chromatic:{name:"12Èü≥Èöé„É¢„Éº„Éâ",description:"„ÇØ„É≠„Éû„ÉÅ„ÉÉ„ÇØ„Çπ„Ç±„Éº„É´„ÅÆ‰∏äË°å„Éª‰∏ãË°å„ÅßÂÆåÂÖ®Âà∂Ë¶á",color:"purple",path:"./training/chromatic"}},w=D[r]||D.random;async function j(){console.log("„Éû„Ç§„ÇØË®±ÂèØ„É™„ÇØ„Ç®„Çπ„ÉàÈñãÂßã"),n(0,u="pending");try{const d=await navigator.mediaDevices.getUserMedia({audio:!0});console.log("„Éû„Ç§„ÇØË®±ÂèØÂèñÂæóÊàêÂäü"),n(0,u="granted"),d.getTracks().forEach(G=>G.stop()),console.log("„Éû„Ç§„ÇØË®±ÂèØÂÆå‰∫Ü - „É¶„Éº„Ç∂„Éº„ÇØ„É™„ÉÉ„ÇØ„ÅßAudioContextÈñãÂßã„ÇíÂæÖÊ©ü")}catch(d){console.error("„Éû„Ç§„ÇØË®±ÂèØ„Ç®„É©„Éº:",d),n(0,u="denied")}}let q=null,O=null,T=null,U=null,W=null;async function I(){if(console.log("startListening ÈñãÂßã, micPermission:",u),u!=="granted"){console.log("„Éû„Ç§„ÇØË®±ÂèØ„Åå„ÅÇ„Çä„Åæ„Åõ„Çì");return}if(!q){console.log("AudioContext„Åå‰ΩúÊàê„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì"),n(4,H=!0);return}try{console.log("AudioContext state:",q.state),q.state==="suspended"&&(console.log("AudioContext suspended - attempting resume..."),await q.resume(),console.log("AudioContext resumed, new state:",q.state)),console.log("„Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„ÇπÈñãÂßã..."),O=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}}),O.getTracks().forEach(R=>{R.addEventListener("ended",()=>{console.log("MediaStreamTrack ended - stopping analysis"),V(),n(0,u="error")})}),console.log("„Ç¢„Éä„É©„Ç§„Ç∂„ÉºË®≠ÂÆö‰∏≠..."),T=q.createAnalyser(),T.fftSize=2048,T.smoothingTimeConstant=.8,q.createMediaStreamSource(O).connect(T),console.log("„É°„Éá„Ç£„Ç¢„Çπ„Éà„É™„Éº„É†„ÇΩ„Éº„ÇπÊé•Á∂öÂÆå‰∫Ü");const G=T.frequencyBinCount;U=new Uint8Array(G),console.log("„Éá„Éº„ÇøÈÖçÂàóÊ∫ñÂÇôÂÆå‰∫Ü, bufferLength:",G),n(3,C=!0),console.log("„É™„Ç¢„É´„Çø„Ç§„É†Ëß£ÊûêÈñãÂßã"),P()}catch(d){console.error("„Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„Çπ„Ç®„É©„Éº:",d),console.error("„Ç®„É©„ÉºË©≥Á¥∞:",{name:d.name,message:d.message,code:d.code}),n(0,u="error"),n(4,H=!0)}}function P(){if(!C||!T){console.log("Ëß£ÊûêÂÅúÊ≠¢: isListening=",C,"analyser=",!!T);return}window.firstAnalysisLogged||(console.log("ÂàùÂõûÈü≥Â£∞Ëß£ÊûêÂÆüË°å‰∏≠..."),window.firstAnalysisLogged=!0),T.getByteFrequencyData(U);let d=0;for(let J=0;J<U.length;J++)d+=U[J]*U[J];const G=Math.sqrt(d/U.length);n(5,a=Math.min(100,G/128*100)),a>20&&(f||console.log("Èü≥ÈáèÊ§úÂá∫ÊàêÂäü:",a),n(1,f=!0));const R=new Float32Array(T.fftSize);T.getFloatTimeDomainData(R);const $=At(R,q.sampleRate);if($.frequency>0){A.push($.frequency),A.length>St&&A.shift();const J=Vt(A);n(6,k=J),n(7,S=xt(k)),n(8,x=Math.round($.confidence*100)),k>80&&k<800&&(o||console.log("Âë®Ê≥¢Êï∞Ê§úÂá∫ÊàêÂäü:",k,"Hz",S),n(2,o=!0))}else A=[],n(6,k=0),n(7,S=""),n(8,x=0);W=requestAnimationFrame(P)}function V(){n(3,C=!1),W&&(cancelAnimationFrame(W),W=null),O&&(O.getTracks().forEach(d=>d.stop()),O=null),q&&q.state!=="closed"&&(q.close(),q=null),T=null,U=null}Et(()=>{V()});async function E(){if(console.log("„É¶„Éº„Ç∂„Éº„ÇØ„É™„ÉÉ„ÇØ„ÅßAudioContextÈñãÂßã..."),u!=="granted"){console.log("„Éû„Ç§„ÇØË®±ÂèØ„ÅåÂøÖË¶Å„Åß„Åô");return}try{q=new(window.AudioContext||window.webkitAudioContext),console.log("AudioContext‰ΩúÊàêÂÆå‰∫Ü, state:",q.state),n(4,H=!1),await I()}catch(d){console.error("AudioContextÈñãÂßãÂ§±Êïó:",d),n(4,H=!0)}}ht(()=>{console.log("„Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÂÆå‰∫Ü - „É¶„Éº„Ç∂„ÉºÊìç‰Ωú„ÇíÂæÖÊ©ü‰∏≠"),console.log("ÂàùÊúüÁä∂ÊÖã - micPermission:",u,"isListening:",C,"audioContextBlocked:",H)});const et=[];return Object.keys(t).forEach(d=>{!~et.indexOf(d)&&d.slice(0,2)!=="$$"&&d!=="slot"&&fe.warn(`<Page> was created with unknown prop '${d}'`)}),c.$capture_state=()=>({onMount:ht,onDestroy:Et,page:_t,Card:yt,Button:zt,PageLayout:Mt,VolumeBar:Rt,PitchDisplay:ue,mode:r,micPermission:u,volumeDetected:f,frequencyDetected:o,currentVolume:a,currentFrequency:k,currentNote:S,isListening:C,detectionConfidence:x,audioContextBlocked:H,frequencyHistory:A,HISTORY_SIZE:St,trainingModes:D,selectedMode:w,frequencyToNote:xt,requestMicrophone:j,audioContext:q,mediaStream:O,analyser:T,dataArray:U,animationFrame:W,startListening:I,analyzeAudio:P,detectPitchWithAutocorrelation:At,applyHighPassFilter:ee,smoothFrequency:Vt,stopListening:V,startAudioContextManually:E,startButtonEnabled:l,$page:e}),c.$inject_state=d=>{"mode"in d&&(r=d.mode),"micPermission"in d&&n(0,u=d.micPermission),"volumeDetected"in d&&n(1,f=d.volumeDetected),"frequencyDetected"in d&&n(2,o=d.frequencyDetected),"currentVolume"in d&&n(5,a=d.currentVolume),"currentFrequency"in d&&n(6,k=d.currentFrequency),"currentNote"in d&&n(7,S=d.currentNote),"isListening"in d&&n(3,C=d.isListening),"detectionConfidence"in d&&n(8,x=d.detectionConfidence),"audioContextBlocked"in d&&n(4,H=d.audioContextBlocked),"frequencyHistory"in d&&(A=d.frequencyHistory),"audioContext"in d&&(q=d.audioContext),"mediaStream"in d&&(O=d.mediaStream),"analyser"in d&&(T=d.analyser),"dataArray"in d&&(U=d.dataArray),"animationFrame"in d&&(W=d.animationFrame),"startButtonEnabled"in d&&n(9,l=d.startButtonEnabled)},t&&"$$inject"in t&&c.$inject_state(t.$$inject),c.$$.update=()=>{c.$$.dirty&25&&console.log("Áä∂ÊÖãÂ§âÊõ¥ - micPermission:",u,"isListening:",C,"audioContextBlocked:",H),c.$$.dirty&7&&n(9,l=u==="granted"&&f&&o)},[u,f,o,C,H,a,k,S,x,l,w,j,E]}class pe extends ne{constructor(t){super(t),oe(this,t,de,qt,ie,{}),M("SvelteRegisterComponent",{component:this,tagName:"Page",options:t,id:qt.name})}}export{pe as component};
