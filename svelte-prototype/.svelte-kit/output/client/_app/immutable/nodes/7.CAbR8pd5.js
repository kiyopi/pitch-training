import{S as xe,i as $e,s as et,d as K,n as Be,a as tt,D as Me,b as g,G as x,z as h,f as Q,g as r,h as p,j as w,k,m as I,o as b,p as S,Z as Tt,e as re,O as Ne,A as $,l as F,t as M,E as ot,q as ve,r as fe,u as ae,w as ge,F as Rt,x as pe,y as _e,L as nt,M as st,B as De,C as Ve,J as He,K as it,H as lt}from"../chunks/Dujr-1LT.js";import{g as ut}from"../chunks/D0QH3NT1.js";import"../chunks/B_rl9Jj9.js";import{P as ft,B as Ie,C as Ce}from"../chunks/BlOhcc-l.js";const{console:At}=ut,ze="src/lib/components/VolumeBar.svelte";function Le(o){let e,t,c,i,s,n;const a={c:function(){e=b("div"),t=b("div"),c=b("div"),i=S(),s=b("div"),this.h()},l:function(f){e=w(f,"DIV",{class:!0});var u=k(e);t=w(u,"DIV",{class:!0,style:!0});var y=k(t);c=w(y,"DIV",{class:!0,style:!0}),k(c).forEach(g),y.forEach(g),i=I(u),s=w(u,"DIV",{class:!0,style:!0}),k(s).forEach(g),u.forEach(g),this.h()},h:function(){h(c,"class","volume-bar-fill"),x(c,"position","absolute"),x(c,"top","0"),x(c,"left","0"),x(c,"height","100%"),p(c,ze,52,4,1646),h(t,"class","volume-bar-bg"),x(t,"height",o[1]),x(t,"border-radius","9999px"),x(t,"background-color","#e2e8f0"),x(t,"position","relative"),x(t,"overflow","hidden"),p(t,ze,51,2,1500),h(s,"class","threshold-indicator svelte-13z7ppf"),x(s,"position","absolute"),x(s,"top","0"),x(s,"left",o[0]+"%"),x(s,"width","2px"),x(s,"height",o[1]),x(s,"background-color","#64748b"),x(s,"border-radius","1px"),p(s,ze,60,2,1825),h(e,"class",n="volume-bar-container "+o[2]+" svelte-13z7ppf"),p(e,ze,50,0,1451)},m:function(f,u){Q(f,e,u),r(e,t),r(t,c),o[5](c),r(e,i),r(e,s)},p:function(f,[u]){u&2&&x(t,"height",f[1]),u&1&&x(s,"left",f[0]+"%"),u&2&&x(s,"height",f[1]),u&4&&n!==(n="volume-bar-container "+f[2]+" svelte-13z7ppf")&&h(e,"class",n)},i:Be,o:Be,d:function(f){f&&g(e),o[5](null)}};return K("SvelteRegisterBlock",{block:a,id:Le.name,type:"component",source:"",ctx:o}),a}function qt(o,e,t){let{$$slots:c={},$$scope:i}=e;tt("VolumeBar",c,[]);let{volume:s=0}=e,{threshold:n=30}=e,{height:a="12px"}=e,{className:d=""}=e,f;function u(l){return l<n?"#94a3b8":l<60?"#10b981":l<80?"#f59e0b":"#ef4444"}function y(l){if(f){const v=Math.max(0,Math.min(100,l)),D=u(v);(!window.volumeBarLastUpdate||Math.abs(window.volumeBarLastUpdate-v)>10)&&(console.log("VolumeBar更新:",v.toFixed(1),"%","color:",D),window.volumeBarLastUpdate=v),t(3,f.style.width=`${v}%`,f),t(3,f.style.backgroundColor=D,f)}}Me(()=>{f&&(t(3,f.style.width="0%",f),t(3,f.style.backgroundColor="#94a3b8",f),t(3,f.style.height=a,f),t(3,f.style.borderRadius="9999px",f),t(3,f.style.transition="all 0.1s ease-out",f))});const _=["volume","threshold","height","className"];Object.keys(e).forEach(l=>{!~_.indexOf(l)&&l.slice(0,2)!=="$$"&&l!=="slot"&&At.warn(`<VolumeBar> was created with unknown prop '${l}'`)});function E(l){Tt[l?"unshift":"push"](()=>{f=l,t(3,f)})}return o.$$set=l=>{"volume"in l&&t(4,s=l.volume),"threshold"in l&&t(0,n=l.threshold),"height"in l&&t(1,a=l.height),"className"in l&&t(2,d=l.className)},o.$capture_state=()=>({onMount:Me,volume:s,threshold:n,height:a,className:d,barElement:f,getVolumeColor:u,updateVolumeBar:y}),o.$inject_state=l=>{"volume"in l&&t(4,s=l.volume),"threshold"in l&&t(0,n=l.threshold),"height"in l&&t(1,a=l.height),"className"in l&&t(2,d=l.className),"barElement"in l&&t(3,f=l.barElement)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),o.$$.update=()=>{o.$$.dirty&16&&y(s)},[n,a,d,f,s,E]}class dt extends xe{constructor(e){super(e),$e(this,e,qt,Le,et,{volume:4,threshold:0,height:1,className:2}),K("SvelteRegisterComponent",{component:this,tagName:"VolumeBar",options:e,id:Le.name})}get volume(){throw new Error("<VolumeBar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set volume(e){throw new Error("<VolumeBar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get threshold(){throw new Error("<VolumeBar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set threshold(e){throw new Error("<VolumeBar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get height(){throw new Error("<VolumeBar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set height(e){throw new Error("<VolumeBar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get className(){throw new Error("<VolumeBar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set className(e){throw new Error("<VolumeBar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const me="src/lib/components/PitchDisplay.svelte";function Ge(o){let e,t,c="精度",i,s,n,a,d,f,u,y=We(o[3])+"",_,E,l,v=o[3]>0?"+":"",D,P=o[3].toFixed(1)+"",V,R;const W={c:function(){e=b("div"),t=b("div"),t.textContent=c,i=S(),s=b("div"),n=b("div"),a=S(),d=b("div"),f=S(),u=b("div"),_=M(y),E=S(),l=b("div"),D=M(v),V=M(P),R=M("%"),this.h()},l:function(B){e=w(B,"DIV",{class:!0});var N=k(e);t=w(N,"DIV",{class:!0,"data-svelte-h":!0}),$(t)!=="svelte-4oi8f7"&&(t.textContent=c),i=I(N),s=w(N,"DIV",{class:!0});var A=k(s);n=w(A,"DIV",{class:!0,style:!0}),k(n).forEach(g),a=I(A),d=w(A,"DIV",{class:!0}),k(d).forEach(g),A.forEach(g),f=I(N),u=w(N,"DIV",{class:!0,style:!0});var z=k(u);_=F(z,y),z.forEach(g),E=I(N),l=w(N,"DIV",{class:!0});var T=k(l);D=F(T,v),V=F(T,P),R=F(T,"%"),T.forEach(g),N.forEach(g),this.h()},h:function(){h(t,"class","label svelte-17lpbmi"),p(t,me,70,6,1917),h(n,"class","accuracy-bar svelte-17lpbmi"),x(n,"background-color",Pe(o[3])),x(n,"width",Math.abs(o[3])+"%"),p(n,me,72,8,1996),h(d,"class","accuracy-center svelte-17lpbmi"),p(d,me,73,8,2122),h(s,"class","accuracy-bar-container svelte-17lpbmi"),p(s,me,71,6,1951),h(u,"class","accuracy-text svelte-17lpbmi"),x(u,"color",Pe(o[3])),p(u,me,75,6,2177),h(l,"class","accuracy-value svelte-17lpbmi"),p(l,me,78,6,2307),h(e,"class","accuracy-display svelte-17lpbmi"),p(e,me,69,4,1880)},m:function(B,N){Q(B,e,N),r(e,t),r(e,i),r(e,s),r(s,n),r(s,a),r(s,d),r(e,f),r(e,u),r(u,_),r(e,E),r(e,l),r(l,D),r(l,V),r(l,R)},p:function(B,N){N&8&&x(n,"background-color",Pe(B[3])),N&8&&x(n,"width",Math.abs(B[3])+"%"),N&8&&y!==(y=We(B[3])+"")&&re(_,y),N&8&&x(u,"color",Pe(B[3])),N&8&&v!==(v=B[3]>0?"+":"")&&re(D,v),N&8&&P!==(P=B[3].toFixed(1)+"")&&re(V,P)},d:function(B){B&&g(e)}};return K("SvelteRegisterBlock",{block:W,id:Ge.name,type:"if",source:"(69:2) {#if isDetecting && currentNote}",ctx:o}),W}function Oe(o){let e,t,c,i="目標音程",s,n,a=o[6](o[1])+"",d,f,u,y,_="現在の音程",E,l,v=(o[4]&&o[6](o[2])||"---")+"",D,P,V,R,W="周波数",H,B,N=Ue(o[0])+"",A,z,T,q=o[4]&&o[2]&&Ge(o);const X={c:function(){e=b("div"),t=b("div"),c=b("div"),c.textContent=i,s=S(),n=b("div"),d=M(a),f=S(),u=b("div"),y=b("div"),y.textContent=_,E=S(),l=b("div"),D=M(v),P=S(),V=b("div"),R=b("div"),R.textContent=W,H=S(),B=b("div"),A=M(N),z=S(),q&&q.c(),this.h()},l:function(j){e=w(j,"DIV",{class:!0});var O=k(e);t=w(O,"DIV",{class:!0});var Y=k(t);c=w(Y,"DIV",{class:!0,"data-svelte-h":!0}),$(c)!=="svelte-101q5wq"&&(c.textContent=i),s=I(Y),n=w(Y,"DIV",{class:!0});var U=k(n);d=F(U,a),U.forEach(g),Y.forEach(g),f=I(O),u=w(O,"DIV",{class:!0});var ne=k(u);y=w(ne,"DIV",{class:!0,"data-svelte-h":!0}),$(y)!=="svelte-1p184h3"&&(y.textContent=_),E=I(ne),l=w(ne,"DIV",{class:!0});var ie=k(l);D=F(ie,v),ie.forEach(g),ne.forEach(g),P=I(O),V=w(O,"DIV",{class:!0});var ee=k(V);R=w(ee,"DIV",{class:!0,"data-svelte-h":!0}),$(R)!=="svelte-1iigar3"&&(R.textContent=W),H=I(ee),B=w(ee,"DIV",{class:!0});var ce=k(B);A=F(ce,N),ce.forEach(g),ee.forEach(g),z=I(O),q&&q.l(O),O.forEach(g),this.h()},h:function(){h(c,"class","label svelte-17lpbmi"),p(c,me,49,4,1306),h(n,"class","note-name target svelte-17lpbmi"),p(n,me,50,4,1340),h(t,"class","target-note svelte-17lpbmi"),p(t,me,48,2,1276),h(y,"class","label svelte-17lpbmi"),p(y,me,55,4,1469),h(l,"class","note-name current svelte-17lpbmi"),Ne(l,"detecting",o[4]),p(l,me,56,4,1504),h(u,"class","current-note svelte-17lpbmi"),p(u,me,54,2,1438),h(R,"class","label svelte-17lpbmi"),p(R,me,63,4,1711),h(B,"class","frequency-value svelte-17lpbmi"),p(B,me,64,4,1744),h(V,"class","frequency-display svelte-17lpbmi"),p(V,me,62,2,1675),h(e,"class",T="pitch-display "+o[5]+" svelte-17lpbmi"),p(e,me,46,0,1216)},m:function(j,O){Q(j,e,O),r(e,t),r(t,c),r(t,s),r(t,n),r(n,d),r(e,f),r(e,u),r(u,y),r(u,E),r(u,l),r(l,D),r(e,P),r(e,V),r(V,R),r(V,H),r(V,B),r(B,A),r(e,z),q&&q.m(e,null)},p:function(j,[O]){O&2&&a!==(a=j[6](j[1])+"")&&re(d,a),O&20&&v!==(v=(j[4]&&j[6](j[2])||"---")+"")&&re(D,v),O&16&&Ne(l,"detecting",j[4]),O&1&&N!==(N=Ue(j[0])+"")&&re(A,N),j[4]&&j[2]?q?q.p(j,O):(q=Ge(j),q.c(),q.m(e,null)):q&&(q.d(1),q=null),O&32&&T!==(T="pitch-display "+j[5]+" svelte-17lpbmi")&&h(e,"class",T)},i:Be,o:Be,d:function(j){j&&g(e),q&&q.d()}};return K("SvelteRegisterBlock",{block:X,id:Oe.name,type:"component",source:"",ctx:o}),X}function Pe(o){const e=Math.abs(o);return e<=10?"#10b981":e<=25?"#f59e0b":"#ef4444"}function We(o){const e=Math.abs(o);return e<=10?"素晴らしい！":e<=25?"もう少し！":"調整が必要"}function Ue(o){return o>0?`${o.toFixed(1)} Hz`:"--.- Hz"}function jt(o,e,t){let{$$slots:c={},$$scope:i}=e;tt("PitchDisplay",c,[]);let{frequency:s=0}=e,{targetNote:n="C"}=e,{currentNote:a=""}=e,{accuracy:d=0}=e,{isDetecting:f=!1}=e,{className:u=""}=e;const y={C:"ド","C#":"ド#",Db:"レ♭",D:"レ","D#":"レ#",Eb:"ミ♭",E:"ミ",F:"ファ","F#":"ファ#",Gb:"ソ♭",G:"ソ","G#":"ソ#",Ab:"ラ♭",A:"ラ","A#":"ラ#",Bb:"シ♭",B:"シ"};function _(l){return y[l]||l}const E=["frequency","targetNote","currentNote","accuracy","isDetecting","className"];return Object.keys(e).forEach(l=>{!~E.indexOf(l)&&l.slice(0,2)!=="$$"&&l!=="slot"&&console.warn(`<PitchDisplay> was created with unknown prop '${l}'`)}),o.$$set=l=>{"frequency"in l&&t(0,s=l.frequency),"targetNote"in l&&t(1,n=l.targetNote),"currentNote"in l&&t(2,a=l.currentNote),"accuracy"in l&&t(3,d=l.accuracy),"isDetecting"in l&&t(4,f=l.isDetecting),"className"in l&&t(5,u=l.className)},o.$capture_state=()=>({frequency:s,targetNote:n,currentNote:a,accuracy:d,isDetecting:f,className:u,noteNames:y,getAccuracyColor:Pe,getAccuracyMessage:We,formatFrequency:Ue,formatNoteName:_}),o.$inject_state=l=>{"frequency"in l&&t(0,s=l.frequency),"targetNote"in l&&t(1,n=l.targetNote),"currentNote"in l&&t(2,a=l.currentNote),"accuracy"in l&&t(3,d=l.accuracy),"isDetecting"in l&&t(4,f=l.isDetecting),"className"in l&&t(5,u=l.className)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),[s,n,a,d,f,u,_]}class ht extends xe{constructor(e){super(e),$e(this,e,jt,Oe,et,{frequency:0,targetNote:1,currentNote:2,accuracy:3,isDetecting:4,className:5}),K("SvelteRegisterComponent",{component:this,tagName:"PitchDisplay",options:e,id:Oe.name})}get frequency(){throw new Error("<PitchDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set frequency(e){throw new Error("<PitchDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get targetNote(){throw new Error("<PitchDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set targetNote(e){throw new Error("<PitchDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get currentNote(){throw new Error("<PitchDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set currentNote(e){throw new Error("<PitchDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get accuracy(){throw new Error("<PitchDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set accuracy(e){throw new Error("<PitchDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get isDetecting(){throw new Error("<PitchDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set isDetecting(e){throw new Error("<PitchDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get className(){throw new Error("<PitchDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set className(e){throw new Error("<PitchDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:zt,document:rt}=ut,C="src/routes/training/random/+page.svelte";function at(o,e,t){const c=o.slice();return c[35]=e[t],c[37]=t,c}function ct(o,e,t){const c=o.slice();return c[35]=e[t],c[37]=t,c}function mt(o){let e,t,c;t=new Ce({props:{variant:"default",padding:"lg",$$slots:{default:[bt]},$$scope:{ctx:o}},$$inline:!0});const i={c:function(){e=b("div"),_e(t.$$.fragment),this.h()},l:function(n){e=w(n,"DIV",{class:!0});var a=k(e);pe(t.$$.fragment,a),a.forEach(g),this.h()},h:function(){h(e,"class","results-screen"),p(e,C,570,6,17190)},m:function(n,a){Q(n,e,a),ge(t,e,null),c=!0},p:function(n,a){const d={};a[0]&49159|a[1]&256&&(d.$$scope={dirty:a,ctx:n}),t.$set(d)},i:function(n){c||(ae(t.$$.fragment,n),c=!0)},o:function(n){fe(t.$$.fragment,n),c=!1},d:function(n){n&&g(e),ve(t)}};return K("SvelteRegisterBlock",{block:i,id:mt.name,type:"if",source:"(569:26) ",ctx:o}),i}function vt(o){let e,t,c,i,s,n,a,d,f,u,y;t=new Ce({props:{variant:"default",padding:"lg",$$slots:{default:[yt]},$$scope:{ctx:o}},$$inline:!0}),n=new Ce({props:{variant:"default",padding:"md",$$slots:{default:[Et]},$$scope:{ctx:o}},$$inline:!0}),d=new Ce({props:{variant:"default",padding:"md",$$slots:{default:[Ct]},$$scope:{ctx:o}},$$inline:!0}),u=new Ce({props:{variant:"default",padding:"md",$$slots:{default:[kt]},$$scope:{ctx:o}},$$inline:!0});const _={c:function(){e=b("div"),_e(t.$$.fragment),c=S(),i=b("div"),s=b("div"),_e(n.$$.fragment),a=S(),_e(d.$$.fragment),f=S(),_e(u.$$.fragment),this.h()},l:function(l){e=w(l,"DIV",{class:!0});var v=k(e);pe(t.$$.fragment,v),c=I(v),i=w(v,"DIV",{class:!0});var D=k(i);s=w(D,"DIV",{class:!0});var P=k(s);pe(n.$$.fragment,P),a=I(P),pe(d.$$.fragment,P),P.forEach(g),D.forEach(g),f=I(v),pe(u.$$.fragment,v),v.forEach(g),this.h()},h:function(){h(s,"class","display-grid svelte-1samlw1"),p(s,C,535,10,16017),h(i,"class","realtime-display svelte-1samlw1"),p(i,C,534,8,15976),h(e,"class","detection-screen"),p(e,C,512,6,15003)},m:function(l,v){Q(l,e,v),ge(t,e,null),r(e,c),r(e,i),r(i,s),ge(n,s,null),r(s,a),ge(d,s,null),r(e,f),ge(u,e,null),y=!0},p:function(l,v){const D={};v[0]&769|v[1]&256&&(D.$$scope={dirty:v,ctx:l}),t.$set(D);const P={};v[0]&2048|v[1]&256&&(P.$$scope={dirty:v,ctx:l}),n.$set(P);const V={};v[0]&12928|v[1]&256&&(V.$$scope={dirty:v,ctx:l}),d.$set(V);const R={};v[0]&516|v[1]&256&&(R.$$scope={dirty:v,ctx:l}),u.$set(R)},i:function(l){y||(ae(t.$$.fragment,l),ae(n.$$.fragment,l),ae(d.$$.fragment,l),ae(u.$$.fragment,l),y=!0)},o:function(l){fe(t.$$.fragment,l),fe(n.$$.fragment,l),fe(d.$$.fragment,l),fe(u.$$.fragment,l),y=!1},d:function(l){l&&g(e),ve(t),ve(n),ve(d),ve(u)}};return K("SvelteRegisterBlock",{block:_,id:vt.name,type:"if",source:"(511:26) ",ctx:o}),_}function gt(o){let e,t,c;t=new Ce({props:{variant:"success",padding:"lg",$$slots:{default:[Dt]},$$scope:{ctx:o}},$$inline:!0});const i={c:function(){e=b("div"),_e(t.$$.fragment),this.h()},l:function(n){e=w(n,"DIV",{class:!0});var a=k(e);pe(t.$$.fragment,a),a.forEach(g),this.h()},h:function(){h(e,"class","playing-screen"),p(e,C,486,6,14006)},m:function(n,a){Q(n,e,a),ge(t,e,null),c=!0},p:function(n,a){const d={};a[0]&256|a[1]&256&&(d.$$scope={dirty:a,ctx:n}),t.$set(d)},i:function(n){c||(ae(t.$$.fragment,n),c=!0)},o:function(n){fe(t.$$.fragment,n),c=!1},d:function(n){n&&g(e),ve(t)}};return K("SvelteRegisterBlock",{block:i,id:gt.name,type:"if",source:"(485:24) ",ctx:o}),i}function pt(o){let e,t,c;t=new Ce({props:{variant:"default",padding:"lg",$$slots:{default:[It]},$$scope:{ctx:o}},$$inline:!0});const i={c:function(){e=b("div"),_e(t.$$.fragment),this.h()},l:function(n){e=w(n,"DIV",{class:!0});var a=k(e);pe(t.$$.fragment,a),a.forEach(g),this.h()},h:function(){h(e,"class","start-screen"),p(e,C,418,6,11786)},m:function(n,a){Q(n,e,a),ge(t,e,null),c=!0},p:function(n,a){const d={};a[0]&56|a[1]&256&&(d.$$scope={dirty:a,ctx:n}),t.$set(d)},i:function(n){c||(ae(t.$$.fragment,n),c=!0)},o:function(n){fe(t.$$.fragment,n),c=!1},d:function(n){n&&g(e),ve(t)}};return K("SvelteRegisterBlock",{block:i,id:pt.name,type:"if",source:"(417:4) {#if !isPlaying && !isDetecting && !showResults}",ctx:o}),i}function Je(o){let e,t,c=o[35]+"",i,s,n,a=o[0][o[37]]?"✓":"×",d,f,u;const y={c:function(){e=b("div"),t=b("span"),i=M(c),s=S(),n=b("span"),d=M(a),u=S(),this.h()},l:function(E){e=w(E,"DIV",{class:!0});var l=k(e);t=w(l,"SPAN",{class:!0});var v=k(t);i=F(v,c),v.forEach(g),s=I(l),n=w(l,"SPAN",{class:!0});var D=k(n);d=F(D,a),D.forEach(g),u=I(l),l.forEach(g),this.h()},h:function(){h(t,"class","scale-note-name svelte-1samlw1"),p(t,C,598,20,18244),h(n,"class",f="scale-result-icon "+(o[0][o[37]]?"correct":"incorrect")+" svelte-1samlw1"),p(n,C,599,20,18308),h(e,"class","scale-result svelte-1samlw1"),p(e,C,597,18,18197)},m:function(E,l){Q(E,e,l),r(e,t),r(t,i),r(e,s),r(e,n),r(n,d),r(e,u)},p:function(E,l){l[0]&1&&a!==(a=E[0][E[37]]?"✓":"×")&&re(d,a),l[0]&1&&f!==(f="scale-result-icon "+(E[0][E[37]]?"correct":"incorrect")+" svelte-1samlw1")&&h(n,"class",f)},d:function(E){E&&g(e)}};return K("SvelteRegisterBlock",{block:y,id:Je.name,type:"each",source:"(597:16) {#each scaleNotes as note, index}",ctx:o}),y}function _t(o){let e;const t={c:function(){e=M("もう一度チャレンジ")},l:function(i){e=F(i,"もう一度チャレンジ")},m:function(i,s){Q(i,e,s)},d:function(i){i&&g(e)}};return K("SvelteRegisterBlock",{block:t,id:_t.name,type:"slot",source:'(610:14) <Button variant=\\"success\\" size=\\"lg\\" fullWidth on:click={startTraining}>',ctx:o}),t}function wt(o){let e;const t={c:function(){e=M("結果を保存")},l:function(i){e=F(i,"結果を保存")},m:function(i,s){Q(i,e,s)},d:function(i){i&&g(e)}};return K("SvelteRegisterBlock",{block:t,id:wt.name,type:"slot",source:'(613:14) <Button variant=\\"secondary\\" size=\\"md\\" fullWidth>',ctx:o}),t}function bt(o){let e,t,c="トレーニング結果",i,s,n,a,d,f,u,y="点",_,E,l,v,D,P,V,R,W,H,B,N,A,z,T,q,X="音階別結果",L,j,O,Y,U,ne,ie,ee,ce=He(o[16]),Z=[];for(let de=0;de<ce.length;de+=1)Z[de]=Je(at(o,ce,de));U=new Ie({props:{variant:"success",size:"lg",fullWidth:!0,$$slots:{default:[_t]},$$scope:{ctx:o}},$$inline:!0}),U.$on("click",o[20]),ie=new Ie({props:{variant:"secondary",size:"md",fullWidth:!0,$$slots:{default:[wt]},$$scope:{ctx:o}},$$inline:!0});const Ee={c:function(){e=b("div"),t=b("h2"),t.textContent=c,i=S(),s=b("div"),n=b("div"),a=b("span"),d=M(o[1]),f=S(),u=b("span"),u.textContent=y,E=S(),l=b("div"),v=b("h3"),D=M(o[15]),P=S(),V=b("p"),R=M("8音階中 "),W=M(o[2]),H=M("音階 正解"),B=S(),N=b("p"),A=M(o[14]),z=S(),T=b("div"),q=b("h3"),q.textContent=X,L=S(),j=b("div");for(let m=0;m<Z.length;m+=1)Z[m].c();O=S(),Y=b("div"),_e(U.$$.fragment),ne=S(),_e(ie.$$.fragment),this.h()},l:function(m){e=w(m,"DIV",{class:!0});var G=k(e);t=w(G,"H2",{class:!0,"data-svelte-h":!0}),$(t)!=="svelte-1w4iqdy"&&(t.textContent=c),i=I(G),s=w(G,"DIV",{class:!0});var J=k(s);n=w(J,"DIV",{class:!0});var te=k(n);a=w(te,"SPAN",{class:!0});var oe=k(a);d=F(oe,o[1]),oe.forEach(g),f=I(te),u=w(te,"SPAN",{class:!0,"data-svelte-h":!0}),$(u)!=="svelte-yaz7vv"&&(u.textContent=y),te.forEach(g),E=I(J),l=w(J,"DIV",{class:!0});var he=k(l);v=w(he,"H3",{class:!0});var se=k(v);D=F(se,o[15]),se.forEach(g),P=I(he),V=w(he,"P",{class:!0});var ke=k(V);R=F(ke,"8音階中 "),W=F(ke,o[2]),H=F(ke,"音階 正解"),ke.forEach(g),B=I(he),N=w(he,"P",{class:!0});var be=k(N);A=F(be,o[14]),be.forEach(g),he.forEach(g),J.forEach(g),z=I(G),T=w(G,"DIV",{class:!0});var ue=k(T);q=w(ue,"H3",{class:!0,"data-svelte-h":!0}),$(q)!=="svelte-140f1nw"&&(q.textContent=X),L=I(ue),j=w(ue,"DIV",{class:!0});var le=k(j);for(let ye=0;ye<Z.length;ye+=1)Z[ye].l(le);le.forEach(g),ue.forEach(g),O=I(G),Y=w(G,"DIV",{class:!0});var we=k(Y);pe(U.$$.fragment,we),ne=I(we),pe(ie.$$.fragment,we),we.forEach(g),G.forEach(g),this.h()},h:function(){h(t,"class","results-title svelte-1samlw1"),p(t,C,573,12,17317),h(a,"class","score-value svelte-1samlw1"),p(a,C,578,16,17516),h(u,"class","score-unit svelte-1samlw1"),p(u,C,579,16,17573),h(n,"class",_="score-circle "+o[15].toLowerCase()+" svelte-1samlw1"),p(n,C,577,14,17451),h(v,"class","grade-title svelte-1samlw1"),p(v,C,582,16,17683),h(V,"class","score-description svelte-1samlw1"),p(V,C,583,16,17736),h(N,"class","feedback-message svelte-1samlw1"),p(N,C,586,16,17846),h(l,"class","grade-info svelte-1samlw1"),p(l,C,581,14,17642),h(s,"class","score-display svelte-1samlw1"),p(s,C,576,12,17409),h(q,"class","details-title svelte-1samlw1"),p(q,C,594,14,18050),h(j,"class","scale-results svelte-1samlw1"),p(j,C,595,14,18101),h(T,"class","detailed-results"),p(T,C,593,12,18005),h(Y,"class","action-buttons svelte-1samlw1"),p(Y,C,608,12,18605),h(e,"class","results-content svelte-1samlw1"),p(e,C,572,10,17275)},m:function(m,G){Q(m,e,G),r(e,t),r(e,i),r(e,s),r(s,n),r(n,a),r(a,d),r(n,f),r(n,u),r(s,E),r(s,l),r(l,v),r(v,D),r(l,P),r(l,V),r(V,R),r(V,W),r(V,H),r(l,B),r(l,N),r(N,A),r(e,z),r(e,T),r(T,q),r(T,L),r(T,j);for(let J=0;J<Z.length;J+=1)Z[J]&&Z[J].m(j,null);r(e,O),r(e,Y),ge(U,Y,null),r(Y,ne),ge(ie,Y,null),ee=!0},p:function(m,G){if((!ee||G[0]&2)&&re(d,m[1]),(!ee||G[0]&32768&&_!==(_="score-circle "+m[15].toLowerCase()+" svelte-1samlw1"))&&h(n,"class",_),(!ee||G[0]&32768)&&re(D,m[15]),(!ee||G[0]&4)&&re(W,m[2]),(!ee||G[0]&16384)&&re(A,m[14]),G[0]&65537){ce=He(m[16]);let oe;for(oe=0;oe<ce.length;oe+=1){const he=at(m,ce,oe);Z[oe]?Z[oe].p(he,G):(Z[oe]=Je(he),Z[oe].c(),Z[oe].m(j,null))}for(;oe<Z.length;oe+=1)Z[oe].d(1);Z.length=ce.length}const J={};G[1]&256&&(J.$$scope={dirty:G,ctx:m}),U.$set(J);const te={};G[1]&256&&(te.$$scope={dirty:G,ctx:m}),ie.$set(te)},i:function(m){ee||(ae(U.$$.fragment,m),ae(ie.$$.fragment,m),ee=!0)},o:function(m){fe(U.$$.fragment,m),fe(ie.$$.fragment,m),ee=!1},d:function(m){m&&g(e),it(Z,m),ve(U),ve(ie)}};return K("SvelteRegisterBlock",{block:Ee,id:bt.name,type:"slot",source:'(572:8) <Card variant=\\"default\\" padding=\\"lg\\">',ctx:o}),Ee}function Ke(o){let e,t=o[0][o[37]]?"✓":"×",c,i;const s={c:function(){e=b("span"),c=M(t),this.h()},l:function(a){e=w(a,"SPAN",{class:!0});var d=k(e);c=F(d,t),d.forEach(g),this.h()},h:function(){h(e,"class",i="result-icon "+(o[0][o[37]]?"correct":"incorrect")+" svelte-1samlw1"),p(e,C,523,20,15661)},m:function(a,d){Q(a,e,d),r(e,c)},p:function(a,d){d[0]&1&&t!==(t=a[0][a[37]]?"✓":"×")&&re(c,t),d[0]&1&&i!==(i="result-icon "+(a[0][a[37]]?"correct":"incorrect")+" svelte-1samlw1")&&h(e,"class",i)},d:function(a){a&&g(e)}};return K("SvelteRegisterBlock",{block:s,id:Ke.name,type:"if",source:"(523:18) {#if scaleResults[index] !== undefined}",ctx:o}),s}function Ze(o){let e,t,c=o[35]+"",i,s,n,a=o[18](o[8],o[37])+"",d,f,u,y,_=o[0][o[37]]!==void 0&&Ke(o);const E={c:function(){e=b("div"),t=b("span"),i=M(c),s=S(),n=b("span"),d=M(a),f=M("Hz"),u=S(),_&&_.c(),y=S(),this.h()},l:function(v){e=w(v,"DIV",{class:!0});var D=k(e);t=w(D,"SPAN",{class:!0});var P=k(t);i=F(P,c),P.forEach(g),s=I(D),n=w(D,"SPAN",{class:!0});var V=k(n);d=F(V,a),f=F(V,"Hz"),V.forEach(g),u=I(D),_&&_.l(D),y=I(D),D.forEach(g),this.h()},h:function(){h(t,"class","note-text svelte-1samlw1"),p(t,C,520,18,15445),h(n,"class","note-frequency svelte-1samlw1"),p(n,C,521,18,15501),h(e,"class","scale-note svelte-1samlw1"),Ne(e,"active",o[37]===o[9]),Ne(e,"completed",o[0][o[37]]!==void 0),p(e,C,519,16,15307)},m:function(v,D){Q(v,e,D),r(e,t),r(t,i),r(e,s),r(e,n),r(n,d),r(n,f),r(e,u),_&&_.m(e,null),r(e,y)},p:function(v,D){D[0]&256&&a!==(a=v[18](v[8],v[37])+"")&&re(d,a),v[0][v[37]]!==void 0?_?_.p(v,D):(_=Ke(v),_.c(),_.m(e,y)):_&&(_.d(1),_=null),D[0]&512&&Ne(e,"active",v[37]===v[9]),D[0]&1&&Ne(e,"completed",v[0][v[37]]!==void 0)},d:function(v){v&&g(e),_&&_.d()}};return K("SvelteRegisterBlock",{block:E,id:Ze.name,type:"each",source:"(519:14) {#each scaleNotes as note, index}",ctx:o}),E}function yt(o){let e,t,c="ドレミファソラシドを歌ってください",i,s,n=He(o[16]),a=[];for(let f=0;f<n.length;f+=1)a[f]=Ze(ct(o,n,f));const d={c:function(){e=b("div"),t=b("h2"),t.textContent=c,i=S(),s=b("div");for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l:function(u){e=w(u,"DIV",{class:!0});var y=k(e);t=w(y,"H2",{class:!0,"data-svelte-h":!0}),$(t)!=="svelte-9l8glf"&&(t.textContent=c),i=I(y),s=w(y,"DIV",{class:!0});var _=k(s);for(let E=0;E<a.length;E+=1)a[E].l(_);_.forEach(g),y.forEach(g),this.h()},h:function(){h(t,"class","guide-title svelte-1samlw1"),p(t,C,516,12,15158),h(s,"class","scale-guide svelte-1samlw1"),p(s,C,517,12,15217),h(e,"class","guide-content svelte-1samlw1"),p(e,C,515,10,15118)},m:function(u,y){Q(u,e,y),r(e,t),r(e,i),r(e,s);for(let _=0;_<a.length;_+=1)a[_]&&a[_].m(s,null)},p:function(u,y){if(y[0]&328449){n=He(u[16]);let _;for(_=0;_<n.length;_+=1){const E=ct(u,n,_);a[_]?a[_].p(E,y):(a[_]=Ze(E),a[_].c(),a[_].m(s,null))}for(;_<a.length;_+=1)a[_].d(1);a.length=n.length}},d:function(u){u&&g(e),it(a,u)}};return K("SvelteRegisterBlock",{block:d,id:yt.name,type:"slot",source:'(515:8) <Card variant=\\"default\\" padding=\\"lg\\">',ctx:o}),d}function Et(o){let e,t,c="音量レベル",i,s,n;s=new dt({props:{volume:o[11],height:"20px"},$$inline:!0});const a={c:function(){e=b("div"),t=b("h3"),t.textContent=c,i=S(),_e(s.$$.fragment),this.h()},l:function(f){e=w(f,"DIV",{class:!0});var u=k(e);t=w(u,"H3",{class:!0,"data-svelte-h":!0}),$(t)!=="svelte-1nc8gri"&&(t.textContent=c),i=I(u),pe(s.$$.fragment,u),u.forEach(g),this.h()},h:function(){h(t,"class","display-title svelte-1samlw1"),p(t,C,539,16,16179),h(e,"class","volume-display"),p(e,C,538,14,16134)},m:function(f,u){Q(f,e,u),r(e,t),r(e,i),ge(s,e,null),n=!0},p:function(f,u){const y={};u[0]&2048&&(y.volume=f[11]),s.$set(y)},i:function(f){n||(ae(s.$$.fragment,f),n=!0)},o:function(f){fe(s.$$.fragment,f),n=!1},d:function(f){f&&g(e),ve(s)}};return K("SvelteRegisterBlock",{block:a,id:Et.name,type:"slot",source:'(538:12) <Card variant=\\"default\\" padding=\\"md\\">',ctx:o}),a}function Ct(o){let e,t;e=new ht({props:{frequency:o[12],targetNote:o[16][o[9]],currentNote:o[13],accuracy:0,isDetecting:o[7]},$$inline:!0});const c={c:function(){_e(e.$$.fragment)},l:function(s){pe(e.$$.fragment,s)},m:function(s,n){ge(e,s,n),t=!0},p:function(s,n){const a={};n[0]&4096&&(a.frequency=s[12]),n[0]&512&&(a.targetNote=s[16][s[9]]),n[0]&8192&&(a.currentNote=s[13]),n[0]&128&&(a.isDetecting=s[7]),e.$set(a)},i:function(s){t||(ae(e.$$.fragment,s),t=!0)},o:function(s){fe(e.$$.fragment,s),t=!1},d:function(s){ve(e,s)}};return K("SvelteRegisterBlock",{block:c,id:Ct.name,type:"slot",source:'(546:12) <Card variant=\\"default\\" padding=\\"md\\">',ctx:o}),c}function kt(o){let e,t,c="進行状況",i,s,n,a,d=o[16][o[9]]+"",f,u,y=o[9]+1+"",_,E,l,v,D,P,V,R;const W={c:function(){e=b("div"),t=b("h3"),t.textContent=c,i=S(),s=b("div"),n=b("span"),a=M("現在: "),f=M(d),u=M(" ("),_=M(y),E=M("/8)"),l=S(),v=b("span"),D=M("正解: "),P=M(o[2]),V=M("/"),R=M(o[9]),this.h()},l:function(B){e=w(B,"DIV",{class:!0});var N=k(e);t=w(N,"H3",{class:!0,"data-svelte-h":!0}),$(t)!=="svelte-v1qnd4"&&(t.textContent=c),i=I(N),s=w(N,"DIV",{class:!0});var A=k(s);n=w(A,"SPAN",{});var z=k(n);a=F(z,"現在: "),f=F(z,d),u=F(z," ("),_=F(z,y),E=F(z,"/8)"),z.forEach(g),l=I(A),v=w(A,"SPAN",{});var T=k(v);D=F(T,"正解: "),P=F(T,o[2]),V=F(T,"/"),R=F(T,o[9]),T.forEach(g),A.forEach(g),N.forEach(g),this.h()},h:function(){h(t,"class","progress-title svelte-1samlw1"),p(t,C,560,12,16835),p(n,C,562,14,16929),p(v,C,563,14,17020),h(s,"class","progress-details svelte-1samlw1"),p(s,C,561,12,16884),h(e,"class","progress-info svelte-1samlw1"),p(e,C,559,10,16795)},m:function(B,N){Q(B,e,N),r(e,t),r(e,i),r(e,s),r(s,n),r(n,a),r(n,f),r(n,u),r(n,_),r(n,E),r(s,l),r(s,v),r(v,D),r(v,P),r(v,V),r(v,R)},p:function(B,N){N[0]&512&&d!==(d=B[16][B[9]]+"")&&re(f,d),N[0]&512&&y!==(y=B[9]+1+"")&&re(_,y),N[0]&4&&re(P,B[2]),N[0]&512&&re(R,B[9])},d:function(B){B&&g(e)}};return K("SvelteRegisterBlock",{block:W,id:kt.name,type:"slot",source:'(559:8) <Card variant=\\"default\\" padding=\\"md\\">',ctx:o}),W}function Dt(o){let e,t,c,i,s,n,a,d="基音再生中",f,u,y,_,E,l,v,D=o[17](o[8])+"",P,V,R,W,H="この音を覚えて「ド」として認識してください",B,N,A,z;const T={c:function(){e=b("div"),t=b("div"),c=Ve("svg"),i=Ve("circle"),s=Ve("polygon"),n=S(),a=b("h2"),a.textContent=d,f=S(),u=b("p"),y=M("基音: "),_=M(o[8]),E=S(),l=b("p"),v=M("周波数: "),P=M(D),V=M("Hz"),R=S(),W=b("p"),W.textContent=H,B=S(),N=b("div"),A=b("div"),z=b("div"),this.h()},l:function(X){e=w(X,"DIV",{class:!0});var L=k(e);t=w(L,"DIV",{class:!0});var j=k(t);c=De(j,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var O=k(c);i=De(O,"circle",{cx:!0,cy:!0,r:!0}),k(i).forEach(g),s=De(O,"polygon",{points:!0}),k(s).forEach(g),O.forEach(g),j.forEach(g),n=I(L),a=w(L,"H2",{class:!0,"data-svelte-h":!0}),$(a)!=="svelte-1maueo6"&&(a.textContent=d),f=I(L),u=w(L,"P",{class:!0});var Y=k(u);y=F(Y,"基音: "),_=F(Y,o[8]),Y.forEach(g),E=I(L),l=w(L,"P",{class:!0});var U=k(l);v=F(U,"周波数: "),P=F(U,D),V=F(U,"Hz"),U.forEach(g),R=I(L),W=w(L,"P",{class:!0,"data-svelte-h":!0}),$(W)!=="svelte-1hcrx2z"&&(W.textContent=H),B=I(L),N=w(L,"DIV",{class:!0});var ne=k(N);A=w(ne,"DIV",{class:!0});var ie=k(A);z=w(ie,"DIV",{class:!0}),k(z).forEach(g),ie.forEach(g),ne.forEach(g),L.forEach(g),this.h()},h:function(){h(i,"cx","12"),h(i,"cy","12"),h(i,"r","10"),p(i,C,491,16,14290),h(s,"points","10,8 16,12 10,16"),p(s,C,492,16,14339),h(c,"width","48"),h(c,"height","48"),h(c,"viewBox","0 0 24 24"),h(c,"fill","none"),h(c,"stroke","currentColor"),h(c,"stroke-width","2"),p(c,C,490,14,14174),h(t,"class","playing-icon svelte-1samlw1"),p(t,C,489,12,14133),h(a,"class","playing-title svelte-1samlw1"),p(a,C,495,12,14428),h(u,"class","playing-note svelte-1samlw1"),p(u,C,496,12,14477),h(l,"class","playing-frequency svelte-1samlw1"),p(l,C,497,12,14539),h(W,"class","playing-instruction svelte-1samlw1"),p(W,C,498,12,14631),h(z,"class","progress-fill svelte-1samlw1"),p(z,C,504,16,14829),h(A,"class","progress-bar svelte-1samlw1"),p(A,C,503,14,14786),h(N,"class","playing-progress svelte-1samlw1"),p(N,C,502,12,14741),h(e,"class","playing-content svelte-1samlw1"),p(e,C,488,10,14091)},m:function(X,L){Q(X,e,L),r(e,t),r(t,c),r(c,i),r(c,s),r(e,n),r(e,a),r(e,f),r(e,u),r(u,y),r(u,_),r(e,E),r(e,l),r(l,v),r(l,P),r(l,V),r(e,R),r(e,W),r(e,B),r(e,N),r(N,A),r(A,z)},p:function(X,L){L[0]&256&&re(_,X[8]),L[0]&256&&D!==(D=X[17](X[8])+"")&&re(P,D)},d:function(X){X&&g(e)}};return K("SvelteRegisterBlock",{block:T,id:Dt.name,type:"slot",source:'(488:8) <Card variant=\\"success\\" padding=\\"lg\\">',ctx:o}),T}function Vt(o){let e;const t={c:function(){e=M("トレーニング開始")},l:function(i){e=F(i,"トレーニング開始")},m:function(i,s){Q(i,e,s)},p:Be,d:function(i){i&&g(e)}};return K("SvelteRegisterBlock",{block:t,id:Vt.name,type:"else",source:"(457:14) {:else}",ctx:o}),t}function Nt(o){let e;const t={c:function(){e=M(o[5])},l:function(i){e=F(i,o[5])},m:function(i,s){Q(i,e,s)},p:function(i,s){s[0]&32&&re(e,i[5])},d:function(i){i&&g(e)}};return K("SvelteRegisterBlock",{block:t,id:Nt.name,type:"if",source:"(455:14) {#if !isToneLoaded}",ctx:o}),t}function Pt(o){let e;function t(n,a){return n[3]?Vt:Nt}let c=t(o),i=c(o);const s={c:function(){i.c(),e=lt()},l:function(a){i.l(a),e=lt()},m:function(a,d){i.m(a,d),Q(a,e,d)},p:function(a,d){c===(c=t(a))&&i?i.p(a,d):(i.d(1),i=c(a),i&&(i.c(),i.m(e.parentNode,e)))},d:function(a){a&&g(e),i.d(a)}};return K("SvelteRegisterBlock",{block:s,id:Pt.name,type:"slot",source:'(454:12) <Button variant=\\"success\\" size=\\"lg\\" fullWidth on:click={startTraining} disabled={!isToneLoaded}>',ctx:o}),s}function Qe(o){let e,t,c,i,s,n=o[4]&&Xe(o);const a={c:function(){e=b("div"),t=b("p"),c=M(o[5]),i=S(),n&&n.c(),this.h()},l:function(f){e=w(f,"DIV",{class:!0});var u=k(e);t=w(u,"P",{class:!0});var y=k(t);c=F(y,o[5]),y.forEach(g),i=I(u),n&&n.l(u),u.forEach(g),this.h()},h:function(){h(t,"class","loading-message svelte-1samlw1"),p(t,C,463,16,13279),h(e,"class","loading-info svelte-1samlw1"),p(e,C,462,14,13236)},m:function(f,u){Q(f,e,u),r(e,t),r(t,c),r(e,i),n&&n.m(e,null),s=!0},p:function(f,u){(!s||u[0]&32)&&re(c,f[5]),f[4]?n?(n.p(f,u),u[0]&16&&ae(n,1)):(n=Xe(f),n.c(),ae(n,1),n.m(e,null)):n&&(nt(),fe(n,1,1,()=>{n=null}),st())},i:function(f){s||(ae(n),s=!0)},o:function(f){fe(n),s=!1},d:function(f){f&&g(e),n&&n.d()}};return K("SvelteRegisterBlock",{block:a,id:Qe.name,type:"if",source:"(462:12) {#if !isToneLoaded}",ctx:o}),a}function Xe(o){let e,t,c,i,s,n,a,d,f="または、ページを再読み込みしてみてください",u;n=new Ie({props:{variant:"secondary",size:"sm",$$slots:{default:[Bt]},$$scope:{ctx:o}},$$inline:!0}),n.$on("click",o[19]);const y={c:function(){e=b("p"),t=M("❌ "),c=M(o[4]),i=S(),s=b("div"),_e(n.$$.fragment),a=S(),d=b("p"),d.textContent=f,this.h()},l:function(E){e=w(E,"P",{class:!0});var l=k(e);t=F(l,"❌ "),c=F(l,o[4]),l.forEach(g),i=I(E),s=w(E,"DIV",{class:!0});var v=k(s);pe(n.$$.fragment,v),a=I(v),d=w(v,"P",{class:!0,"data-svelte-h":!0}),$(d)!=="svelte-1o5h8se"&&(d.textContent=f),v.forEach(g),this.h()},h:function(){h(e,"class","error-message svelte-1samlw1"),p(e,C,467,18,13419),h(d,"class","retry-message svelte-1samlw1"),p(d,C,474,20,13727),h(s,"class","fallback-options svelte-1samlw1"),p(s,C,470,18,13527)},m:function(E,l){Q(E,e,l),r(e,t),r(e,c),Q(E,i,l),Q(E,s,l),ge(n,s,null),r(s,a),r(s,d),u=!0},p:function(E,l){(!u||l[0]&16)&&re(c,E[4]);const v={};l[1]&256&&(v.$$scope={dirty:l,ctx:E}),n.$set(v)},i:function(E){u||(ae(n.$$.fragment,E),u=!0)},o:function(E){fe(n.$$.fragment,E),u=!1},d:function(E){E&&(g(e),g(i),g(s)),ve(n)}};return K("SvelteRegisterBlock",{block:y,id:Xe.name,type:"if",source:"(467:16) {#if toneLoadingError}",ctx:o}),y}function Bt(o){let e;const t={c:function(){e=M("シンプル音源で開始")},l:function(i){e=F(i,"シンプル音源で開始")},m:function(i,s){Q(i,e,s)},d:function(i){i&&g(e)}};return K("SvelteRegisterBlock",{block:t,id:Bt.name,type:"slot",source:'(472:20) <Button variant=\\"secondary\\" size=\\"sm\\" on:click={forceSimpleAudio}>',ctx:o}),t}function It(o){let e,t,c="トレーニング開始",i,s,n,a,d,f,u,y,_,E="1",l,v,D,P="基音を聞く",V,R,W="ランダムに選ばれた基音をピアノで再生します",H,B,N,A="2",z,T,q,X="連続歌唱",L,j,O="基音を「ド」として、ドレミファソラシドを連続して歌います",Y,U,ne,ie="3",ee,ce,Z,Ee="自動判定",de,m,G="歌唱中にリアルタイムで各音階を自動判定します",J,te,oe,he;te=new Ie({props:{variant:"success",size:"lg",fullWidth:!0,disabled:!o[3],$$slots:{default:[Pt]},$$scope:{ctx:o}},$$inline:!0}),te.$on("click",o[20]);let se=!o[3]&&Qe(o);const ke={c:function(){e=b("div"),t=b("h2"),t.textContent=c,i=S(),s=b("p"),n=M("基音を聞いた後、その音を「ド」として"),a=b("br"),d=M(`
              ドレミファソラシドを連続して歌ってください`),f=S(),u=b("div"),y=b("div"),_=b("span"),_.textContent=E,l=S(),v=b("div"),D=b("h3"),D.textContent=P,V=S(),R=b("p"),R.textContent=W,H=S(),B=b("div"),N=b("span"),N.textContent=A,z=S(),T=b("div"),q=b("h3"),q.textContent=X,L=S(),j=b("p"),j.textContent=O,Y=S(),U=b("div"),ne=b("span"),ne.textContent=ie,ee=S(),ce=b("div"),Z=b("h3"),Z.textContent=Ee,de=S(),m=b("p"),m.textContent=G,J=S(),_e(te.$$.fragment),oe=S(),se&&se.c(),this.h()},l:function(ue){e=w(ue,"DIV",{class:!0});var le=k(e);t=w(le,"H2",{class:!0,"data-svelte-h":!0}),$(t)!=="svelte-177yn6"&&(t.textContent=c),i=I(le),s=w(le,"P",{class:!0});var we=k(s);n=F(we,"基音を聞いた後、その音を「ド」として"),a=w(we,"BR",{}),d=F(we,`
              ドレミファソラシドを連続して歌ってください`),we.forEach(g),f=I(le),u=w(le,"DIV",{class:!0});var ye=k(u);y=w(ye,"DIV",{class:!0});var Se=k(y);_=w(Se,"SPAN",{class:!0,"data-svelte-h":!0}),$(_)!=="svelte-1gvrwis"&&(_.textContent=E),l=I(Se),v=w(Se,"DIV",{});var Te=k(v);D=w(Te,"H3",{class:!0,"data-svelte-h":!0}),$(D)!=="svelte-3o2umq"&&(D.textContent=P),V=I(Te),R=w(Te,"P",{class:!0,"data-svelte-h":!0}),$(R)!=="svelte-r15f9m"&&(R.textContent=W),Te.forEach(g),Se.forEach(g),H=I(ye),B=w(ye,"DIV",{class:!0});var Re=k(B);N=w(Re,"SPAN",{class:!0,"data-svelte-h":!0}),$(N)!=="svelte-1lllrxb"&&(N.textContent=A),z=I(Re),T=w(Re,"DIV",{});var Ae=k(T);q=w(Ae,"H3",{class:!0,"data-svelte-h":!0}),$(q)!=="svelte-1lldj7q"&&(q.textContent=X),L=I(Ae),j=w(Ae,"P",{class:!0,"data-svelte-h":!0}),$(j)!=="svelte-1n1vdfq"&&(j.textContent=O),Ae.forEach(g),Re.forEach(g),Y=I(ye),U=w(ye,"DIV",{class:!0});var qe=k(U);ne=w(qe,"SPAN",{class:!0,"data-svelte-h":!0}),$(ne)!=="svelte-1swoen2"&&(ne.textContent=ie),ee=I(qe),ce=w(qe,"DIV",{});var je=k(ce);Z=w(je,"H3",{class:!0,"data-svelte-h":!0}),$(Z)!=="svelte-wm6hg7"&&(Z.textContent=Ee),de=I(je),m=w(je,"P",{class:!0,"data-svelte-h":!0}),$(m)!=="svelte-1tyv544"&&(m.textContent=G),je.forEach(g),qe.forEach(g),ye.forEach(g),J=I(le),pe(te.$$.fragment,le),oe=I(le),se&&se.l(le),le.forEach(g),this.h()},h:function(){h(t,"class","start-title svelte-1samlw1"),p(t,C,421,12,11909),p(a,C,423,32,12021),h(s,"class","start-description svelte-1samlw1"),p(s,C,422,12,11959),h(_,"class","step-number svelte-1samlw1"),p(_,C,429,16,12192),h(D,"class","svelte-1samlw1"),p(D,C,431,18,12267),h(R,"class","svelte-1samlw1"),p(R,C,432,18,12300),p(v,C,430,16,12243),h(y,"class","instruction-item svelte-1samlw1"),p(y,C,428,14,12145),h(N,"class","step-number svelte-1samlw1"),p(N,C,437,16,12449),h(q,"class","svelte-1samlw1"),p(q,C,439,18,12524),h(j,"class","svelte-1samlw1"),p(j,C,440,18,12556),p(T,C,438,16,12500),h(B,"class","instruction-item svelte-1samlw1"),p(B,C,436,14,12402),h(ne,"class","step-number svelte-1samlw1"),p(ne,C,445,16,12712),h(Z,"class","svelte-1samlw1"),p(Z,C,447,18,12787),h(m,"class","svelte-1samlw1"),p(m,C,448,18,12819),p(ce,C,446,16,12763),h(U,"class","instruction-item svelte-1samlw1"),p(U,C,444,14,12665),h(u,"class","instructions svelte-1samlw1"),p(u,C,427,12,12104),h(e,"class","start-content svelte-1samlw1"),p(e,C,420,10,11869)},m:function(ue,le){Q(ue,e,le),r(e,t),r(e,i),r(e,s),r(s,n),r(s,a),r(s,d),r(e,f),r(e,u),r(u,y),r(y,_),r(y,l),r(y,v),r(v,D),r(v,V),r(v,R),r(u,H),r(u,B),r(B,N),r(B,z),r(B,T),r(T,q),r(T,L),r(T,j),r(u,Y),r(u,U),r(U,ne),r(U,ee),r(U,ce),r(ce,Z),r(ce,de),r(ce,m),r(e,J),ge(te,e,null),r(e,oe),se&&se.m(e,null),he=!0},p:function(ue,le){const we={};le[0]&8&&(we.disabled=!ue[3]),le[0]&40|le[1]&256&&(we.$$scope={dirty:le,ctx:ue}),te.$set(we),ue[3]?se&&(nt(),fe(se,1,1,()=>{se=null}),st()):se?(se.p(ue,le),le[0]&8&&ae(se,1)):(se=Qe(ue),se.c(),ae(se,1),se.m(e,null))},i:function(ue){he||(ae(te.$$.fragment,ue),ae(se),he=!0)},o:function(ue){fe(te.$$.fragment,ue),fe(se),he=!1},d:function(ue){ue&&g(e),ve(te),se&&se.d()}};return K("SvelteRegisterBlock",{block:ke,id:It.name,type:"slot",source:'(420:8) <Card variant=\\"default\\" padding=\\"lg\\">',ctx:o}),ke}function St(o){let e,t,c,i,s,n,a,d,f,u,y,_="ランダム基音モード",E,l,v="10種類の基音からランダムに選択してトレーニング",D,P,V,R;const W=[pt,gt,vt,mt],H=[];function B(A,z){return!A[6]&&!A[7]&&!A[10]?0:A[6]?1:A[7]?2:A[10]?3:-1}~(P=B(o))&&(V=H[P]=W[P](o));const N={c:function(){e=b("div"),t=b("div"),c=b("div"),i=b("div"),s=Ve("svg"),n=Ve("path"),a=Ve("circle"),d=Ve("circle"),f=S(),u=b("div"),y=b("h1"),y.textContent=_,E=S(),l=b("p"),l.textContent=v,D=S(),V&&V.c(),this.h()},l:function(z){e=w(z,"DIV",{class:!0});var T=k(e);t=w(T,"DIV",{class:!0});var q=k(t);c=w(q,"DIV",{class:!0});var X=k(c);i=w(X,"DIV",{class:!0});var L=k(i);s=De(L,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var j=k(s);n=De(j,"path",{d:!0}),k(n).forEach(g),a=De(j,"circle",{cx:!0,cy:!0,r:!0}),k(a).forEach(g),d=De(j,"circle",{cx:!0,cy:!0,r:!0}),k(d).forEach(g),j.forEach(g),L.forEach(g),f=I(X),u=w(X,"DIV",{});var O=k(u);y=w(O,"H1",{class:!0,"data-svelte-h":!0}),$(y)!=="svelte-4p7mnf"&&(y.textContent=_),E=I(O),l=w(O,"P",{class:!0,"data-svelte-h":!0}),$(l)!=="svelte-hq31uv"&&(l.textContent=v),O.forEach(g),X.forEach(g),q.forEach(g),D=I(T),V&&V.l(T),T.forEach(g),this.h()},h:function(){h(n,"d","M9 18V5l12-2v13"),p(n,C,404,12,11391),h(a,"cx","6"),h(a,"cy","18"),h(a,"r","3"),p(a,C,405,12,11431),h(d,"cx","18"),h(d,"cy","16"),h(d,"r","3"),p(d,C,406,12,11474),h(s,"width","32"),h(s,"height","32"),h(s,"viewBox","0 0 24 24"),h(s,"fill","none"),h(s,"stroke","currentColor"),h(s,"stroke-width","2"),p(s,C,403,10,11279),h(i,"class","mode-icon svelte-1samlw1"),p(i,C,402,8,11245),h(y,"class","mode-title svelte-1samlw1"),p(y,C,410,10,11562),h(l,"class","mode-description svelte-1samlw1"),p(l,C,411,10,11610),p(u,C,409,8,11546),h(c,"class","mode-header svelte-1samlw1"),p(c,C,401,6,11211),h(t,"class","header svelte-1samlw1"),p(t,C,400,4,11184),h(e,"class","random-training svelte-1samlw1"),p(e,C,398,2,11132)},m:function(z,T){Q(z,e,T),r(e,t),r(t,c),r(c,i),r(i,s),r(s,n),r(s,a),r(s,d),r(c,f),r(c,u),r(u,y),r(u,E),r(u,l),r(e,D),~P&&H[P].m(e,null),R=!0},p:function(z,T){let q=P;P=B(z),P===q?~P&&H[P].p(z,T):(V&&(nt(),fe(H[q],1,1,()=>{H[q]=null}),st()),~P?(V=H[P],V?V.p(z,T):(V=H[P]=W[P](z),V.c()),ae(V,1),V.m(e,null)):V=null)},i:function(z){R||(ae(V),R=!0)},o:function(z){fe(V),R=!1},d:function(z){z&&g(e),~P&&H[P].d()}};return K("SvelteRegisterBlock",{block:N,id:St.name,type:"slot",source:"(398:0) <PageLayout showBackButton={true}>",ctx:o}),N}function Ye(o){let e,t,c;t=new ft({props:{showBackButton:!0,$$slots:{default:[St]},$$scope:{ctx:o}},$$inline:!0});const i={c:function(){e=S(),_e(t.$$.fragment),this.h()},l:function(n){Rt("svelte-1nfe5e4",rt.head).forEach(g),e=I(n),pe(t.$$.fragment,n),this.h()},h:function(){rt.title="ランダム基音モード - 相対音感トレーニング"},m:function(n,a){Q(n,e,a),ge(t,n,a),c=!0},p:function(n,a){const d={};a[0]&65535|a[1]&256&&(d.$$scope={dirty:a,ctx:n}),t.$set(d)},i:function(n){c||(ae(t.$$.fragment,n),c=!0)},o:function(n){fe(t.$$.fragment,n),c=!1},d:function(n){n&&g(e),ve(t,n)}};return K("SvelteRegisterBlock",{block:i,id:Ye.name,type:"component",source:"",ctx:o}),i}function Fe(o){try{const e=new(window.AudioContext||window.webkitAudioContext),t=e.createOscillator(),c=e.createGain();t.connect(c),c.connect(e.destination),t.frequency.setValueAtTime(o,e.currentTime),t.type="sine",c.gain.setValueAtTime(.3,e.currentTime),c.gain.exponentialRampToValueAtTime(.01,e.currentTime+2.5),t.start(e.currentTime),t.stop(e.currentTime+2.5),console.log(`シンプル音源で ${o}Hz 再生中`)}catch(e){console.error("シンプル音源エラー:",e)}}function Ft(o,e,t){let c,i,s,n,{$$slots:a={},$$scope:d}=e;tt("Page",a,[]);let f=null,u=null,y=!1,_=null,E="Tone.js読み込み中...",l=!1,v=!1,D=!1,P="",V=0,R=[],W=!1,H=0,B=0,N="";const A=["ド","レ","ミ","ファ","ソ","ラ","シ","ド"],z=["Bb3","B3","C4","Db4","D4","Eb4","E4","F4","Gb4","Ab4"],T={Bb3:233.08,B3:246.94,C4:261.63,Db4:277.18,D4:293.66,Eb4:311.13,E4:329.63,F4:349.23,Gb4:369.99,Ab4:415.3},q=[1,9/8,5/4,4/3,3/2,5/3,15/8,2];async function X(){try{t(5,E="Tone.js CDN読み込み中..."),console.log("🔄 Tone.js初期化開始"),typeof window<"u"&&!window.Tone?(console.log("📥 Tone.js CDN読み込み開始..."),await new Promise((m,G)=>{const J=document.createElement("script");J.src="https://unpkg.com/tone@14.7.77/build/Tone.js",J.async=!0,J.onload=()=>{console.log("✅ Tone.js CDNスクリプト読み込み完了"),window.Tone?(console.log("✅ window.Tone利用可能"),m()):(console.error("❌ window.Toneが未定義"),G(new Error("window.Toneが利用できません")))},J.onerror=te=>{console.error("❌ Tone.js CDN読み込みエラー:",te),G(new Error("Tone.js CDNの読み込みに失敗しました"))},setTimeout(()=>{window.Tone||(console.warn("⚠️ Tone.js CDN読み込みタイムアウト"),G(new Error("Tone.js読み込みタイムアウト")))},5e3),document.head.appendChild(J)}),t(5,E="Tone.js初期化中..."),f=window.Tone,console.log("🎵 Tone.js変数設定完了"),await L()):window.Tone?(console.log("✅ Tone.js既に読み込み済み"),f=window.Tone,await L()):(console.warn("⚠️ window未定義 - SSR環境の可能性"),setTimeout(()=>X(),1e3))}catch(m){console.error("❌ Tone.js初期化エラー:",m),t(4,_=`初期化エラー: ${m.message}`),t(5,E="エラー"),setTimeout(()=>{console.log("🔧 自動フォールバックモード切り替え"),Y()},3e3)}}async function L(){try{if(!f)throw console.error("❌ Tone.js未初期化"),new Error("Tone.js未初期化");if(console.log("🎹 サンプラー設定開始"),t(5,E="AudioContext初期化中..."),console.log(`📊 AudioContext状態: ${f.context.state}`),f.context.state!=="running"){console.log("🔊 AudioContext開始中...");try{await f.start(),console.log("✅ AudioContext開始完了")}catch(m){throw console.error("❌ AudioContext開始失敗:",m),m}}t(5,E="ピアノ音源読み込み中..."),console.log("🎵 Salamander Grand Piano サンプラー作成中..."),await new Promise((m,G)=>{u=new f.Sampler({urls:{C4:"C4.mp3"},baseUrl:"https://tonejs.github.io/audio/salamander/",release:1.5,onload:()=>{console.log("✅ Salamander Grand Piano音源読み込み完了"),t(3,y=!0),t(5,E="読み込み完了"),m()},onerror:J=>{console.error("❌ Salamander Grand Piano音源読み込みエラー:",J),G(new Error("音源読み込み失敗"))}}).toDestination(),console.log("🔗 サンプラーをDestinationに接続完了"),setTimeout(()=>{y||(console.warn("⚠️ ピアノ音源読み込みタイムアウト（3秒）"),G(new Error("音源読み込みタイムアウト")))},3e3)})}catch(m){console.error("❌ サンプラー設定エラー:",m),console.log("🔧 フォールバックモードに切り替え"),l=!0,t(3,y=!0),t(4,_=`音源エラー: ${m.message}（シンプル音源使用）`),t(5,E="シンプル音源で開始")}}Me(()=>{X()}),ot(()=>{u&&u.dispose()});function j(m){return Math.round(T[m]||0)}function O(m,G){const J=T[m];return J?Math.round(J*q[G]):0}function Y(){console.log("🔧 手動でシンプル音源モードに切り替え"),l=!0,t(3,y=!0),t(4,_=null),t(5,E="シンプル音源モード")}function U(){const m=Math.floor(Math.random()*z.length);return t(8,P=z[m]),P}function ne(){t(9,V=0),t(0,R=[]),t(10,W=!1);const m=U();ie(m)}async function ie(m){t(6,v=!0),console.log(`基音再生: ${m} (フォールバック: ${l})`);try{if(l){Fe(j(m)),setTimeout(()=>{t(6,v=!1),ee()},2500);return}if(!y||!u){console.warn("Tone.js または Sampler が未初期化 - フォールバックに切り替え"),l=!0,Fe(j(m)),setTimeout(()=>{t(6,v=!1),ee()},2500);return}f.context.state!=="running"&&await f.start(),u.triggerAttackRelease(m,"2.5"),console.log(`Salamander Grand Piano で ${m} 再生開始`),setTimeout(()=>{t(6,v=!1),ee()},2500)}catch(G){console.error("基音再生エラー:",G),l=!0,Fe(j(m)),setTimeout(()=>{t(6,v=!1),ee()},2500)}}function ee(){t(7,D=!0);const m=A.map((J,te)=>O(P,te)),G=setInterval(()=>{if(!D){clearInterval(G);return}t(11,H=40+Math.random()*50);const J=m[V],te=(Math.random()-.5)*40;t(12,B=J+te);const oe=Math.max(0,100-Math.abs(te)*2);if(t(13,N=A[V]),Math.random()>.6){const he=oe>70;t(0,R[V]=he,R),t(9,V++,V),console.log(`${N}: ${oe.toFixed(1)}% 精度, ${he?"正解":"不正解"}`),V>=8&&ce()}},300)}function ce(){t(7,D=!1),t(10,W=!0)}function Z(m){return m>=90?"Excellent":m>=70?"Good":m>=50?"Practice":"Needs Work"}function Ee(m){return m>=90?"素晴らしい相対音感です！完璧な演奏でした。":m>=70?"良好な相対音感です。もう少し練習すれば完璧になります。":m>=50?"基本的な相対音感は身についています。継続練習で向上できます。":"相対音感の基礎練習から始めましょう。毎日少しずつ練習することが大切です。"}const de=[];return Object.keys(e).forEach(m=>{!~de.indexOf(m)&&m.slice(0,2)!=="$$"&&m!=="slot"&&zt.warn(`<Page> was created with unknown prop '${m}'`)}),o.$capture_state=()=>({onMount:Me,onDestroy:ot,Card:Ce,Button:Ie,PageLayout:ft,VolumeBar:dt,PitchDisplay:ht,Tone:f,sampler:u,isToneLoaded:y,toneLoadingError:_,loadingStatus:E,useSimpleAudio:l,isPlaying:v,isDetecting:D,currentBaseNote:P,currentScaleIndex:V,scaleResults:R,showResults:W,currentVolume:H,currentFrequency:B,currentNote:N,scaleNotes:A,baseNotes:z,baseNoteFrequencies:T,scaleRatios:q,initializeTone:X,setupSampler:L,getBaseNoteFrequency:j,getScaleFrequency:O,forceSimpleAudio:Y,selectRandomBase:U,startTraining:ne,playBaseNote:ie,playSimpleBeep:Fe,startDetection:ee,finishTraining:ce,getGrade:Z,getFeedback:Ee,score:i,feedback:n,grade:s,correctCount:c}),o.$inject_state=m=>{"Tone"in m&&(f=m.Tone),"sampler"in m&&(u=m.sampler),"isToneLoaded"in m&&t(3,y=m.isToneLoaded),"toneLoadingError"in m&&t(4,_=m.toneLoadingError),"loadingStatus"in m&&t(5,E=m.loadingStatus),"useSimpleAudio"in m&&(l=m.useSimpleAudio),"isPlaying"in m&&t(6,v=m.isPlaying),"isDetecting"in m&&t(7,D=m.isDetecting),"currentBaseNote"in m&&t(8,P=m.currentBaseNote),"currentScaleIndex"in m&&t(9,V=m.currentScaleIndex),"scaleResults"in m&&t(0,R=m.scaleResults),"showResults"in m&&t(10,W=m.showResults),"currentVolume"in m&&t(11,H=m.currentVolume),"currentFrequency"in m&&t(12,B=m.currentFrequency),"currentNote"in m&&t(13,N=m.currentNote),"score"in m&&t(1,i=m.score),"feedback"in m&&t(14,n=m.feedback),"grade"in m&&t(15,s=m.grade),"correctCount"in m&&t(2,c=m.correctCount)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),o.$$.update=()=>{o.$$.dirty[0]&1&&t(2,c=R.filter(m=>m).length),o.$$.dirty[0]&4&&t(1,i=Math.round(c/8*100)),o.$$.dirty[0]&2&&t(15,s=Z(i)),o.$$.dirty[0]&2&&t(14,n=Ee(i))},[R,i,c,y,_,E,v,D,P,V,W,H,B,N,n,s,A,j,O,Y,ne]}class Ot extends xe{constructor(e){super(e),$e(this,e,Ft,Ye,et,{},null,[-1,-1]),K("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:Ye.name})}}export{Ot as component};
