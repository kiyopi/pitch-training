import{S as Xt,i as Yt,s as $t,d as L,v as Ue,c as Ke,a as en,H as yt,Z as Ot,b as _,r as Q,u as K,K as qt,L as Vt,f as q,z as y,h as b,j as p,k as I,o as C,J as An,n as Ne,q as ae,w as le,x as ue,y as fe,m as j,p as T,Q as Gt,g as m,M as dt,A as F,R as Fn,e as wt,l as se,t as re,N as Lt,I as Rn,O as tn}from"../chunks/CizCsqwh.js";import{g as nn}from"../chunks/D0QH3NT1.js";import"../chunks/C-w4tHdS.js";import{b as ot,g as ft}from"../chunks/Q2-E1d07.js";import{P as Mt,B as Ht,C as Je}from"../chunks/Yk103YIT.js";import{p as qn}from"../chunks/DVDXTdCN.js";import{a as St,l as Vn,h as Mn,P as on,b as sn,V as Hn}from"../chunks/DQP8t4Dz.js";import{n as kt,s as Dt,t as Et,i as Pt,a as jt,c as Tt,p as It,l as zt,S as On,b as Gn,E as Ut,d as Ln,e as zn,r as Un,f as Kt,u as Kn,g as Jn,h as Qn,o as Zn,j as Wn,k as Xn,m as Yn,q as nt,A as rn,U as cn,T as $n,P as eo,M as an,C as to,v as no,w as oo,x as so}from"../chunks/B7YXzK6c.js";const ro=!1,io=!1,yo=Object.freeze(Object.defineProperty({__proto__:null,prerender:io,ssr:ro},Symbol.toStringTag,{value:"Module"})),{Object:co,console:ao}=nn,V="src/lib/components/TrainingCore.svelte";function Jt(r,t,e){const s=r.slice();return s[71]=t[e],s[73]=e,s}function ln(r){let t,e,s,i,o,c,a,f,l,u,v,g=r[3]&&Bt(r);s=new Je({props:{class:"main-card half-width",$$slots:{default:[Cn]},$$scope:{ctx:r}},$$inline:!0}),o=new Je({props:{class:"main-card half-width",$$slots:{default:[_n]},$$scope:{ctx:r}},$$inline:!0}),a=new Je({props:{class:"main-card",$$slots:{default:[yn]},$$scope:{ctx:r}},$$inline:!0});let w={isActive:r[4]==="granted",trainingPhase:r[11]};u=new sn({props:w,$$inline:!0}),r[38](u),u.$on("pitchUpdate",r[26]),u.$on("error",r[27]);const S={c:function(){g&&g.c(),t=T(),e=C("div"),fe(s.$$.fragment),i=T(),fe(o.$$.fragment),c=T(),fe(a.$$.fragment),f=T(),l=C("div"),fe(u.$$.fragment),this.h()},l:function(d){g&&g.l(d),t=j(d),e=p(d,"DIV",{class:!0});var h=I(e);ue(s.$$.fragment,h),i=j(h),ue(o.$$.fragment,h),h.forEach(_),c=j(d),ue(a.$$.fragment,d),f=j(d),l=p(d,"DIV",{style:!0});var D=I(l);ue(u.$$.fragment,D),D.forEach(_),this.h()},h:function(){y(e,"class","side-by-side-container svelte-pck0fw"),b(e,V,1032,4,33811),dt(l,"display","none"),b(l,V,1100,4,35917)},m:function(d,h){g&&g.m(d,h),q(d,t,h),q(d,e,h),le(s,e,null),m(e,i),le(o,e,null),q(d,c,h),le(a,d,h),q(d,f,h),q(d,l,h),le(u,l,null),v=!0},p:function(d,h){d[3]?g?(g.p(d,h),h[0]&8&&K(g,1)):(g=Bt(d),g.c(),K(g,1),g.m(t.parentNode,t)):g&&(qt(),Q(g,1,1,()=>{g=null}),Vt());const D={};h[0]&3778|h[2]&4096&&(D.$$scope={dirty:h,ctx:d}),s.$set(D);const x={};h[0]&28672|h[2]&4096&&(x.$$scope={dirty:h,ctx:d}),o.$set(x);const G={};h[0]&524545|h[2]&4096&&(G.$$scope={dirty:h,ctx:d}),a.$set(G);const k={};h[0]&16&&(k.isActive=d[4]==="granted"),h[0]&2048&&(k.trainingPhase=d[11]),u.$set(k)},i:function(d){v||(K(g),K(s.$$.fragment,d),K(o.$$.fragment,d),K(a.$$.fragment,d),K(u.$$.fragment,d),v=!0)},o:function(d){Q(g),Q(s.$$.fragment,d),Q(o.$$.fragment,d),Q(a.$$.fragment,d),Q(u.$$.fragment,d),v=!1},d:function(d){d&&(_(t),_(e),_(c),_(f),_(l)),g&&g.d(d),ae(s),ae(o),ae(a,d),r[38](null),ae(u)}};return L("SvelteRegisterBlock",{block:S,id:ln.name,type:"else",source:"(1010:2) {:else}",ctx:r}),S}function un(r){let t,e,s,i;t=new cn({props:{currentScoreData:r[16],intervalData:r[23]||[],consistencyData:r[24]||[],feedbackData:r[17],technicalFeedbackData:r[18]},$$inline:!0}),s=new rn({props:{showRestart:!r[20],showNext:!r[20],showHome:!0},$$inline:!0}),s.$on("restart",r[28]),s.$on("next",r[29]),s.$on("home",r[30]);const o={c:function(){fe(t.$$.fragment),e=T(),fe(s.$$.fragment)},l:function(a){ue(t.$$.fragment,a),e=j(a),ue(s.$$.fragment,a)},m:function(a,f){le(t,a,f),q(a,e,f),le(s,a,f),i=!0},p:function(a,f){const l={};f[0]&65536&&(l.currentScoreData=a[16]),f[0]&131072&&(l.feedbackData=a[17]),f[0]&262144&&(l.technicalFeedbackData=a[18]),t.$set(l);const u={};f[0]&1048576&&(u.showRestart=!a[20]),f[0]&1048576&&(u.showNext=!a[20]),s.$set(u)},i:function(a){i||(K(t.$$.fragment,a),K(s.$$.fragment,a),i=!0)},o:function(a){Q(t.$$.fragment,a),Q(s.$$.fragment,a),i=!1},d:function(a){a&&_(e),ae(t,a),ae(s,a)}};return L("SvelteRegisterBlock",{block:o,id:un.name,type:"if",source:"(991:55) ",ctx:r}),o}function fn(r){let t,e;t=new Je({props:{class:"main-card",$$slots:{default:[Sn]},$$scope:{ctx:r}},$$inline:!0});const s={c:function(){fe(t.$$.fragment)},l:function(o){ue(t.$$.fragment,o)},m:function(o,c){le(t,o,c),e=!0},p:function(o,c){const a={};c[2]&4096&&(a.$$scope={dirty:c,ctx:o}),t.$set(a)},i:function(o){e||(K(t.$$.fragment,o),e=!0)},o:function(o){Q(t.$$.fragment,o),e=!1},d:function(o){ae(t,o)}};return L("SvelteRegisterBlock",{block:s,id:fn.name,type:"if",source:"(979:72) ",ctx:r}),s}function dn(r){let t,e;t=new Je({props:{class:"main-card",$$slots:{default:[kn]},$$scope:{ctx:r}},$$inline:!0});const s={c:function(){fe(t.$$.fragment)},l:function(o){ue(t.$$.fragment,o)},m:function(o,c){le(t,o,c),e=!0},p:function(o,c){const a={};c[2]&4096&&(a.$$scope={dirty:c,ctx:o}),t.$set(a)},i:function(o){e||(K(t.$$.fragment,o),e=!0)},o:function(o){Q(t.$$.fragment,o),e=!1},d:function(o){ae(t,o)}};return L("SvelteRegisterBlock",{block:s,id:dn.name,type:"if",source:"(971:2) {#if microphoneState === 'checking'}",ctx:r}),s}function Bt(r){let t,e;t=new Je({props:{class:"main-card",$$slots:{default:[mn]},$$scope:{ctx:r}},$$inline:!0});const s={c:function(){fe(t.$$.fragment)},l:function(o){ue(t.$$.fragment,o)},m:function(o,c){le(t,o,c),e=!0},p:function(o,c){const a={};c[0]&6291460|c[2]&4096&&(a.$$scope={dirty:c,ctx:o}),t.$set(a)},i:function(o){e||(K(t.$$.fragment,o),e=!0)},o:function(o){Q(t.$$.fragment,o),e=!1},d:function(o){ae(t,o)}};return L("SvelteRegisterBlock",{block:s,id:Bt.name,type:"if",source:"(1014:4) {#if useLocalStorage}",ctx:r}),s}function mn(r){let t,e,s="ğŸ“Š é€²æ—çŠ¶æ³",i,o,c,a,f,l,u,v,g,w,S;const P={c:function(){t=C("div"),e=C("h3"),e.textContent=s,i=T(),o=C("div"),c=C("div"),a=C("div"),f=re("ã‚»ãƒƒã‚·ãƒ§ãƒ³ "),l=re(r[21]),u=re(" / "),v=re(r[2]),g=T(),w=C("div"),S=C("div"),this.h()},l:function(h){t=p(h,"DIV",{class:!0});var D=I(t);e=p(D,"H3",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-r02tv0"&&(e.textContent=s),D.forEach(_),i=j(h),o=p(h,"DIV",{class:!0});var x=I(o);c=p(x,"DIV",{class:!0});var G=I(c);a=p(G,"DIV",{class:!0});var k=I(a);f=se(k,"ã‚»ãƒƒã‚·ãƒ§ãƒ³ "),l=se(k,r[21]),u=se(k," / "),v=se(k,r[2]),k.forEach(_),g=j(G),w=p(G,"DIV",{class:!0});var N=I(w);S=p(N,"DIV",{class:!0,style:!0}),I(S).forEach(_),N.forEach(_),G.forEach(_),x.forEach(_),this.h()},h:function(){y(e,"class","section-title svelte-pck0fw"),b(e,V,1016,10,33336),y(t,"class","card-header svelte-pck0fw"),b(t,V,1015,8,33300),y(a,"class","session-counter svelte-pck0fw"),b(a,V,1020,12,33475),y(S,"class","progress-fill svelte-pck0fw"),dt(S,"width",r[22]+"%"),b(S,V,1024,14,33634),y(w,"class","progress-bar svelte-pck0fw"),b(w,V,1023,12,33593),y(c,"class","progress-info svelte-pck0fw"),b(c,V,1019,10,33435),y(o,"class","card-content svelte-pck0fw"),b(o,V,1018,8,33398)},m:function(h,D){q(h,t,D),m(t,e),q(h,i,D),q(h,o,D),m(o,c),m(c,a),m(a,f),m(a,l),m(a,u),m(a,v),m(c,g),m(c,w),m(w,S)},p:function(h,D){D[0]&2097152&&wt(l,h[21]),D[0]&4&&wt(v,h[2]),D[0]&4194304&&dt(S,"width",h[22]+"%")},d:function(h){h&&(_(t),_(i),_(o))}};return L("SvelteRegisterBlock",{block:P,id:mn.name,type:"slot",source:'(1015:6) <Card class=\\"main-card\\">',ctx:r}),P}function gn(r){let t;const e={c:function(){t=re("ğŸ¹ åŸºéŸ³å†ç”Ÿ")},l:function(i){t=se(i,"ğŸ¹ åŸºéŸ³å†ç”Ÿ")},m:function(i,o){q(i,t,o)},d:function(i){i&&_(t)}};return L("SvelteRegisterBlock",{block:e,id:gn.name,type:"else",source:"(1050:12) {:else}",ctx:r}),e}function hn(r){let t;const e={c:function(){t=re("ğŸ”„ è‡ªå‹•å†ç”Ÿãƒ¢ãƒ¼ãƒ‰")},l:function(i){t=se(i,"ğŸ”„ è‡ªå‹•å†ç”Ÿãƒ¢ãƒ¼ãƒ‰")},m:function(i,o){q(i,t,o)},d:function(i){i&&_(t)}};return L("SvelteRegisterBlock",{block:e,id:hn.name,type:"if",source:"(1048:31) ",ctx:r}),e}function vn(r){let t;const e={c:function(){t=re("â³ èª­ã¿è¾¼ã¿ä¸­...")},l:function(i){t=se(i,"â³ èª­ã¿è¾¼ã¿ä¸­...")},m:function(i,o){q(i,t,o)},d:function(i){i&&_(t)}};return L("SvelteRegisterBlock",{block:e,id:vn.name,type:"if",source:"(1046:39) ",ctx:r}),e}function bn(r){let t;const e={c:function(){t=re("ğŸµ å†ç”Ÿä¸­...")},l:function(i){t=se(i,"ğŸµ å†ç”Ÿä¸­...")},m:function(i,o){q(i,t,o)},d:function(i){i&&_(t)}};return L("SvelteRegisterBlock",{block:e,id:bn.name,type:"if",source:"(1044:12) {#if isPlaying}",ctx:r}),e}function pn(r){let t;function e(c,a){return c[7]?bn:c[6]?vn:c[1]?hn:gn}let s=e(r),i=s(r);const o={c:function(){i.c(),t=Lt()},l:function(a){i.l(a),t=Lt()},m:function(a,f){i.m(a,f),q(a,t,f)},p:function(a,f){s!==(s=e(a))&&(i.d(1),i=s(a),i&&(i.c(),i.m(t.parentNode,t)))},d:function(a){a&&_(t),i.d(a)}};return L("SvelteRegisterBlock",{block:o,id:pn.name,type:"slot",source:`(1039:10) <Button              variant=\\"primary\\"             disabled={isPlaying || isSamplerLoading || (autoPlay && trainingPhase === 'guiding')}             on:click={playBaseNote}           >`,ctx:r}),o}function Cn(r){let t,e,s="ğŸ¹ åŸºéŸ³å†ç”Ÿ",i,o,c,a,f,l,u="ã‚¬ã‚¤ãƒ‰é–‹å§‹ã¾ã§",v,g,w,S,P,d,h,D;c=new Ht({props:{variant:"primary",disabled:r[7]||r[6]||r[1]&&r[11]==="guiding",$$slots:{default:[pn]},$$scope:{ctx:r}},$$inline:!0}),c.$on("click",r[25]),d=new an({props:{size:"20"},$$inline:!0});const x={c:function(){t=C("div"),e=C("h3"),e.textContent=s,i=T(),o=C("div"),fe(c.$$.fragment),a=T(),f=C("div"),l=C("div"),l.textContent=u,v=T(),g=C("div"),w=C("div"),S=T(),P=C("div"),fe(d.$$.fragment),this.h()},l:function(k){t=p(k,"DIV",{class:!0});var N=I(t);e=p(N,"H3",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-syc53b"&&(e.textContent=s),N.forEach(_),i=j(k),o=p(k,"DIV",{class:!0});var M=I(o);ue(c.$$.fragment,M),a=j(M),f=p(M,"DIV",{class:!0});var xe=I(f);l=p(xe,"DIV",{class:!0,"data-svelte-h":!0}),F(l)!=="svelte-1dufnpv"&&(l.textContent=u),v=j(xe),g=p(xe,"DIV",{class:!0});var de=I(g);w=p(de,"DIV",{class:!0,style:!0}),I(w).forEach(_),S=j(de),P=p(de,"DIV",{class:!0});var U=I(P);ue(d.$$.fragment,U),U.forEach(_),de.forEach(_),xe.forEach(_),M.forEach(_),this.h()},h:function(){y(e,"class","section-title svelte-pck0fw"),b(e,V,1035,10,33934),y(t,"class","card-header svelte-pck0fw"),b(t,V,1034,8,33898),y(l,"class","guide-start-label svelte-pck0fw"),b(l,V,1056,12,34583),y(w,"class","guide-progress-fill svelte-pck0fw"),dt(w,"width",r[9]+"%"),b(w,V,1058,14,34684),y(P,"class",h="guide-music-icon "+(r[10]?"glowing":"")+" svelte-pck0fw"),b(P,V,1059,14,34775),y(g,"class","guide-start-bar svelte-pck0fw"),b(g,V,1057,12,34640),y(f,"class","guide-start-bar-container svelte-pck0fw"),b(f,V,1055,10,34531),y(o,"class","card-content svelte-pck0fw"),b(o,V,1037,8,33996)},m:function(k,N){q(k,t,N),m(t,e),q(k,i,N),q(k,o,N),le(c,o,null),m(o,a),m(o,f),m(f,l),m(f,v),m(f,g),m(g,w),m(g,S),m(g,P),le(d,P,null),D=!0},p:function(k,N){const M={};N[0]&2242&&(M.disabled=k[7]||k[6]||k[1]&&k[11]==="guiding"),N[0]&194|N[2]&4096&&(M.$$scope={dirty:N,ctx:k}),c.$set(M),(!D||N[0]&512)&&dt(w,"width",k[9]+"%"),(!D||N[0]&1024&&h!==(h="guide-music-icon "+(k[10]?"glowing":"")+" svelte-pck0fw"))&&y(P,"class",h)},i:function(k){D||(K(c.$$.fragment,k),K(d.$$.fragment,k),D=!0)},o:function(k){Q(c.$$.fragment,k),Q(d.$$.fragment,k),D=!1},d:function(k){k&&(_(t),_(i),_(o)),ae(c),ae(d)}};return L("SvelteRegisterBlock",{block:x,id:Cn.name,type:"slot",source:'(1034:6) <Card class=\\"main-card half-width\\">',ctx:r}),x}function _n(r){let t,e,s="ğŸ¤ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¤œå‡º",i,o,c,a;c=new on({props:{frequency:r[13],note:r[14],volume:r[12],isMuted:!1},$$inline:!0});const f={c:function(){t=C("div"),e=C("h3"),e.textContent=s,i=T(),o=C("div"),fe(c.$$.fragment),this.h()},l:function(u){t=p(u,"DIV",{class:!0});var v=I(t);e=p(v,"H3",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-1vribo5"&&(e.textContent=s),v.forEach(_),i=j(u),o=p(u,"DIV",{class:!0});var g=I(o);ue(c.$$.fragment,g),g.forEach(_),this.h()},h:function(){y(e,"class","section-title svelte-pck0fw"),b(e,V,1070,10,35084),y(t,"class","card-header svelte-pck0fw"),b(t,V,1069,8,35048),y(o,"class","card-content svelte-pck0fw"),b(o,V,1072,8,35150)},m:function(u,v){q(u,t,v),m(t,e),q(u,i,v),q(u,o,v),le(c,o,null),a=!0},p:function(u,v){const g={};v[0]&8192&&(g.frequency=u[13]),v[0]&16384&&(g.note=u[14]),v[0]&4096&&(g.volume=u[12]),c.$set(g)},i:function(u){a||(K(c.$$.fragment,u),a=!0)},o:function(u){Q(c.$$.fragment,u),a=!1},d:function(u){u&&(_(t),_(i),_(o)),ae(c)}};return L("SvelteRegisterBlock",{block:f,id:_n.name,type:"slot",source:'(1069:6) <Card class=\\"main-card half-width\\">',ctx:r}),f}function At(r){let t,e=r[71]+"",s,i,o;const c={c:function(){t=C("div"),s=re(e),i=T(),this.h()},l:function(f){t=p(f,"DIV",{class:!0});var l=I(t);s=se(l,e),i=j(l),l.forEach(_),this.h()},h:function(){var f;y(t,"class",o="scale-item "+(((f=r[8][r[73]])==null?void 0:f.state)||"inactive")+" svelte-pck0fw"),b(t,V,1091,12,35705)},m:function(f,l){q(f,t,l),m(t,s),m(t,i)},p:function(f,l){var u;l[0]&524288&&e!==(e=f[71]+"")&&wt(s,e),l[0]&256&&o!==(o="scale-item "+(((u=f[8][f[73]])==null?void 0:u.state)||"inactive")+" svelte-pck0fw")&&y(t,"class",o)},d:function(f){f&&_(t)}};return L("SvelteRegisterBlock",{block:c,id:At.name,type:"each",source:"(1091:10) {#each currentScale as step, index}",ctx:r}),c}function yn(r){let t,e,s,i=r[0]==="chromatic"?"12":"8",o,c,a,f,l,u=Gt(r[19]),v=[];for(let w=0;w<u.length;w+=1)v[w]=At(Jt(r,u,w));const g={c:function(){t=C("div"),e=C("h3"),s=re("ğŸµ "),o=re(i),c=re("éŸ³éšã‚¬ã‚¤ãƒ‰"),a=T(),f=C("div"),l=C("div");for(let S=0;S<v.length;S+=1)v[S].c();this.h()},l:function(S){t=p(S,"DIV",{class:!0});var P=I(t);e=p(P,"H3",{class:!0});var d=I(e);s=se(d,"ğŸµ "),o=se(d,i),c=se(d,"éŸ³éšã‚¬ã‚¤ãƒ‰"),d.forEach(_),P.forEach(_),a=j(S),f=p(S,"DIV",{class:!0});var h=I(f);l=p(h,"DIV",{class:!0});var D=I(l);for(let x=0;x<v.length;x+=1)v[x].l(D);D.forEach(_),h.forEach(_),this.h()},h:function(){y(e,"class","section-title svelte-pck0fw"),b(e,V,1086,8,35492),y(t,"class","card-header svelte-pck0fw"),b(t,V,1085,6,35458),y(l,"class","scale-guide svelte-pck0fw"),b(l,V,1089,8,35621),y(f,"class","card-content svelte-pck0fw"),b(f,V,1088,6,35586)},m:function(S,P){q(S,t,P),m(t,e),m(e,s),m(e,o),m(e,c),q(S,a,P),q(S,f,P),m(f,l);for(let d=0;d<v.length;d+=1)v[d]&&v[d].m(l,null)},p:function(S,P){if(P[0]&1&&i!==(i=S[0]==="chromatic"?"12":"8")&&wt(o,i),P[0]&524544){u=Gt(S[19]);let d;for(d=0;d<u.length;d+=1){const h=Jt(S,u,d);v[d]?v[d].p(h,P):(v[d]=At(h),v[d].c(),v[d].m(l,null))}for(;d<v.length;d+=1)v[d].d(1);v.length=u.length}},d:function(S){S&&(_(t),_(a),_(f)),Fn(v,S)}};return L("SvelteRegisterBlock",{block:g,id:yn.name,type:"slot",source:'(1085:4) <Card class=\\"main-card\\">',ctx:r}),g}function wn(r){let t;const e={c:function(){t=re("ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹")},l:function(i){t=se(i,"ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹")},m:function(i,o){q(i,t,o)},d:function(i){i&&_(t)}};return L("SvelteRegisterBlock",{block:e,id:wn.name,type:"slot",source:'(985:8) <Button variant=\\"primary\\" on:click={handleBackToHome}>',ctx:r}),e}function Sn(r){let t,e,s="âš ï¸ ãƒã‚¤ã‚¯è¨±å¯ãŒå¿…è¦ã§ã™",i,o,c="ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã‹ã‚‰é–‹å§‹ã—ã¦ãã ã•ã„",a,f,l;f=new Ht({props:{variant:"primary",$$slots:{default:[wn]},$$scope:{ctx:r}},$$inline:!0}),f.$on("click",r[30]);const u={c:function(){t=C("div"),e=C("h3"),e.textContent=s,i=T(),o=C("p"),o.textContent=c,a=T(),fe(f.$$.fragment),this.h()},l:function(g){t=p(g,"DIV",{class:!0});var w=I(t);e=p(w,"H3",{"data-svelte-h":!0}),F(e)!=="svelte-1iz0ljq"&&(e.textContent=s),i=j(w),o=p(w,"P",{"data-svelte-h":!0}),F(o)!=="svelte-13xvrzt"&&(o.textContent=c),a=j(w),ue(f.$$.fragment,w),w.forEach(_),this.h()},h:function(){b(e,V,982,8,32431),b(o,V,983,8,32462),y(t,"class","card-content text-center svelte-pck0fw"),b(t,V,981,6,32384)},m:function(g,w){q(g,t,w),m(t,e),m(t,i),m(t,o),m(t,a),le(f,t,null),l=!0},p:function(g,w){const S={};w[2]&4096&&(S.$$scope={dirty:w,ctx:g}),f.$set(S)},i:function(g){l||(K(f.$$.fragment,g),l=!0)},o:function(g){Q(f.$$.fragment,g),l=!1},d:function(g){g&&_(t),ae(f)}};return L("SvelteRegisterBlock",{block:u,id:Sn.name,type:"slot",source:'(981:4) <Card class=\\"main-card\\">',ctx:r}),u}function kn(r){let t,e,s="â³ ãƒã‚¤ã‚¯åˆæœŸåŒ–ä¸­...",i,o,c="ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„";const a={c:function(){t=C("div"),e=C("h3"),e.textContent=s,i=T(),o=C("p"),o.textContent=c,this.h()},l:function(l){t=p(l,"DIV",{class:!0});var u=I(t);e=p(u,"H3",{"data-svelte-h":!0}),F(e)!=="svelte-1tpl2vf"&&(e.textContent=s),i=j(u),o=p(u,"P",{"data-svelte-h":!0}),F(o)!=="svelte-1vogiv7"&&(o.textContent=c),u.forEach(_),this.h()},h:function(){b(e,V,974,8,32180),b(o,V,975,8,32210),y(t,"class","card-content text-center svelte-pck0fw"),b(t,V,973,6,32133)},m:function(l,u){q(l,t,u),m(t,e),m(t,i),m(t,o)},p:Ne,d:function(l){l&&_(t)}};return L("SvelteRegisterBlock",{block:a,id:kn.name,type:"slot",source:'(973:4) <Card class=\\"main-card\\">',ctx:r}),a}function Ft(r){let t,e,s,i;const o=[dn,fn,un,ln],c=[];function a(l,u){return l[4]==="checking"?0:l[4]==="denied"||l[4]==="error"?1:l[15]&&l[16]?2:3}e=a(r),s=c[e]=o[e](r);const f={c:function(){t=C("div"),s.c(),this.h()},l:function(u){t=p(u,"DIV",{class:!0});var v=I(t);s.l(v),v.forEach(_),this.h()},h:function(){y(t,"class","training-core svelte-pck0fw"),b(t,V,968,0,32006)},m:function(u,v){q(u,t,v),c[e].m(t,null),i=!0},p:function(u,v){let g=e;e=a(u),e===g?c[e].p(u,v):(qt(),Q(c[g],1,1,()=>{c[g]=null}),Vt(),s=c[e],s?s.p(u,v):(s=c[e]=o[e](u),s.c()),K(s,1),s.m(t,null))},i:function(u){i||(K(s),i=!0)},o:function(u){Q(s),i=!1},d:function(u){u&&_(t),c[e].d()}};return L("SvelteRegisterBlock",{block:f,id:Ft.name,type:"component",source:"",ctx:r}),f}function Nt(){const r=/iPhone/.test(navigator.userAgent),t=/iPad/.test(navigator.userAgent),e=/Macintosh/.test(navigator.userAgent)&&"ontouchend"in document;return r||t||e?(console.log("ğŸ”Š [TrainingCore] iOS/iPadOSæ¤œå‡º - éŸ³é‡35dBè¨­å®š"),35):(console.log("ğŸ”Š [TrainingCore] PCæ¤œå‡º - éŸ³é‡-6dBè¨­å®š"),-6)}function Ct(r){return{C4:261.63,Db4:277.18,D4:293.66,Eb4:311.13,E4:329.63,F4:349.23,Gb4:369.99,G4:392,Ab4:415.3,A4:440,Bb4:466.16,B4:493.88,C5:523.25,Db5:554.37,D5:587.33,Eb5:622.25,E5:659.25,F5:698.46,Gb5:739.99,G5:783.99}[r]||261.63}function xt(r,t){return r*([1,1.125,1.25,1.3333333333333333,1.5,1.6666666666666667,1.875,2][t]||1)}function Qt(r,t){return!r||!t||r<=0||t<=0?null:Math.round(1200*Math.log2(r/t))}function Zt(r){if(r===null)return 0;const t=Math.abs(r);return Math.max(0,Math.min(100,100-t/50*100))}function Wt(r){if(!r||r.length===0)return"E";const t=r.map(l=>l.grade),e=t.filter(l=>l==="excellent").length,s=t.filter(l=>l==="good").length,i=t.filter(l=>l==="pass").length,o=t.length,c=e/o,a=(e+s)/o,f=(e+s+i)/o;return c>=.9?"S":c>=.7?"A":a>=.8?"B":f>=.7?"C":f>=.4?"D":"E"}function _t(r){if(!r||r.length===0)return{type:"info",primary:"ãƒ‡ãƒ¼ã‚¿ãªã—",summary:"æ¸¬å®šãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“"};const t=r.filter(c=>c.accuracy!=="notMeasured"),e=t.length>0?Math.round(t.reduce((c,a)=>c+a.accuracy,0)/t.length):0;let s,i,o;return e>=85?(s="excellent",i="ç´ æ™´ã‚‰ã—ã„ç²¾åº¦ã§ã™ï¼",o=`å¹³å‡ç²¾åº¦${e}%ã§å„ªç§€ãªéŸ³æ„Ÿèƒ½åŠ›ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚`):e>=70?(s="improvement",i="è‰¯ã„é€²æ­©ãŒè¦‹ã‚‰ã‚Œã¾ã™",o=`å¹³å‡ç²¾åº¦${e}%ã§ç¢ºå®Ÿã«å‘ä¸Šã—ã¦ã„ã¾ã™ã€‚`):e>=50?(s="practice",i="ç¶™ç¶šç·´ç¿’ã§å‘ä¸Šä¸­",o=`ç¾åœ¨ã®ç²¾åº¦${e}%ã‹ã‚‰æ›´ãªã‚‹å‘ä¸Šã‚’ç›®æŒ‡ã—ã¾ã—ã‚‡ã†ã€‚`):(s="encouragement",i="ç·´ç¿’ã‚’ç¶šã‘ã¾ã—ã‚‡ã†",o="ç¶™ç¶šçš„ãªç·´ç¿’ã§å¿…ãšä¸Šé”ã—ã¾ã™ã€‚"),{type:s,primary:i,summary:o}}function lo(r,t,e){let s,i,o,c,a,f,l,u,v;Ue(kt,"nextBaseNote"),Ke(r,kt,n=>e(48,o=n)),Ue(Dt,"sessionHistory"),Ke(r,Dt,n=>e(49,c=n)),Ue(Et,"trainingProgress"),Ke(r,Et,n=>e(50,a=n)),Ue(Pt,"isCompleted"),Ke(r,Pt,n=>e(20,f=n)),Ue(jt,"nextBaseName"),Ke(r,jt,n=>e(51,l=n)),Ue(Tt,"currentSessionId"),Ke(r,Tt,n=>e(21,u=n)),Ue(It,"progressPercentage"),Ke(r,It,n=>e(22,v=n));let{$$slots:g={},$$scope:w}=t;en("TrainingCore",g,[]);let{mode:S="random"}=t,{autoPlay:P=!1}=t,{sessionCount:d=8}=t,{baseNote:h=null}=t,{direction:D="asc"}=t,{useLocalStorage:x=!0}=t;const G="random-training-progress";let{onSessionComplete:k=null}=t,{onAllComplete:N=null}=t,{onMicrophoneError:M=null}=t;const xe=null,de=[{note:"C4",name:"ãƒ‰ï¼ˆä¸­ï¼‰",frequency:261.63,semitonesFromC:0},{note:"Db4",name:"ãƒ‰#ï¼ˆä¸­ï¼‰",frequency:277.18,semitonesFromC:1},{note:"D4",name:"ãƒ¬ï¼ˆä¸­ï¼‰",frequency:293.66,semitonesFromC:2},{note:"Eb4",name:"ãƒ¬#ï¼ˆä¸­ï¼‰",frequency:311.13,semitonesFromC:3},{note:"E4",name:"ãƒŸï¼ˆä¸­ï¼‰",frequency:329.63,semitonesFromC:4},{note:"F4",name:"ãƒ•ã‚¡ï¼ˆä¸­ï¼‰",frequency:349.23,semitonesFromC:5},{note:"Gb4",name:"ãƒ•ã‚¡#ï¼ˆä¸­ï¼‰",frequency:369.99,semitonesFromC:6},{note:"Ab4",name:"ãƒ©bï¼ˆä¸­ï¼‰",frequency:415.3,semitonesFromC:8},{note:"Bb3",name:"ã‚·bï¼ˆä½ï¼‰",frequency:233.08,semitonesFromC:-2},{note:"B3",name:"ã‚·ï¼ˆä½ï¼‰",frequency:246.94,semitonesFromC:-1}];let U="checking",pe=null,Qe=null,Ve=null,ve=null,Ce=null,W=!1,te=!1,me=[],Fe=0,ie=!1,Y="waiting",Me=0,Re=0,He="ãƒ¼ãƒ¼",X=[],ne=null,ce=!1,qe=null,_e=null,O=null,ye=[],Ze=[],Be=null,be=null,st=null,$=[];yt(async()=>{console.log(`ğŸš€ [TrainingCore] ${S}ãƒ¢ãƒ¼ãƒ‰åˆæœŸåŒ–é–‹å§‹`);try{x&&(await zt(),console.log(`âœ… [TrainingCore] localStorageåˆæœŸåŒ–å®Œäº†: ã‚»ãƒƒã‚·ãƒ§ãƒ³${u}/8`)),at(),await we(),await Se(),Le(),console.log(`âœ… [TrainingCore] ${S}ãƒ¢ãƒ¼ãƒ‰åˆæœŸåŒ–å®Œäº†`)}catch(n){console.error("âŒ [TrainingCore] åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",n),M&&M(n.message)}}),Ot(()=>{Ce&&Ce.dispose()});async function we(){const n=typeof localStorage<"u"&&localStorage.getItem("mic-test-completed")==="true";if(console.log("ğŸ¤ [TrainingCore] ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆå®Œäº†ãƒ•ãƒ©ã‚°:",n),!n){console.log("âš ï¸ [TrainingCore] ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆæœªå®Œäº† - ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ"),M&&M("ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãŒå¿…è¦ã§ã™");return}new URLSearchParams(window.location.search).get("from")==="microphone-test"?(e(4,U="granted"),console.log("âœ… [TrainingCore] ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆçµŒç”±ã§ã‚¢ã‚¯ã‚»ã‚¹ - è¨±å¯æ¸ˆã¿"),await Ge()):(console.log("ğŸ” [TrainingCore] ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹æ¤œå‡º - ãƒã‚¤ã‚¯è¨±å¯çŠ¶æ…‹ç¢ºèª"),await rt())}async function rt(){try{(await navigator.permissions.query({name:"microphone"})).state==="granted"?(console.log("âœ… [TrainingCore] ãƒã‚¤ã‚¯è¨±å¯æ¸ˆã¿æ¤œå‡º - AudioManageråˆæœŸåŒ–å®Ÿè¡Œ"),await Ge()):(e(4,U="denied"),console.log("âš ï¸ [TrainingCore] ãƒã‚¤ã‚¯è¨±å¯ãŒå¿…è¦ã§ã™"))}catch(n){console.error("âŒ [TrainingCore] ãƒã‚¤ã‚¯è¨±å¯ç¢ºèªã‚¨ãƒ©ãƒ¼:",n),e(4,U="error")}}async function Ge(){var n;e(4,U="checking");try{if(console.log("ğŸ¤ [TrainingCore] AudioManagerçµŒç”±ã§ãƒã‚¤ã‚¯è¨±å¯ç¢ºèªé–‹å§‹"),!((n=navigator.mediaDevices)!=null&&n.getUserMedia)){e(4,U="error"),console.error("âŒ [TrainingCore] getUserMediaæœªå¯¾å¿œãƒ–ãƒ©ã‚¦ã‚¶");return}const A=await St.initialize();Qe=A.audioContext,pe=A.mediaStream,Ve=A.sourceNode,console.log("âœ… [TrainingCore] AudioManager ãƒªã‚½ãƒ¼ã‚¹å–å¾—å®Œäº†"),e(4,U="granted"),e(11,Y="waiting"),setTimeout(async()=>{if(ve&&ve.getIsInitialized&&!ve.getIsInitialized())try{console.log("ğŸ™ï¸ [TrainingCore] PitchDetectoråˆæœŸåŒ–é–‹å§‹");const B=/iPad/.test(navigator.userAgent),H=/Macintosh/.test(navigator.userAgent)&&"ontouchend"in document;if(B||H){console.log("ğŸ“± [TrainingCore] iPad/iPadOSæ¤œå‡º - AudioManagerå†åˆæœŸåŒ–");try{await St.initialize(),console.log("âœ… [TrainingCore] AudioManagerå†åˆæœŸåŒ–å®Œäº†")}catch(z){console.warn("âš ï¸ AudioManagerå†åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",z)}}await ve.initialize(),console.log("âœ… [TrainingCore] PitchDetectoråˆæœŸåŒ–å®Œäº†")}catch(B){console.warn("âš ï¸ [TrainingCore] PitchDetectoråˆæœŸåŒ–å¤±æ•—:",B)}},300)}catch(A){console.error("âŒ [TrainingCore] ãƒã‚¤ã‚¯è¨±å¯ã‚¨ãƒ©ãƒ¼:",A),e(4,U=(A==null?void 0:A.name)==="NotAllowedError"?"denied":"error"),M&&M(A.message)}}async function Se(){try{if(typeof window>"u"){console.log("âš ï¸ [TrainingCore] SSRç’°å¢ƒæ¤œå‡º - åŸºéŸ³å†ç”ŸåˆæœŸåŒ–ã‚¹ã‚­ãƒƒãƒ—");return}e(6,W=!0),console.log("ğŸ¹ [TrainingCore] Salamander Grand Piano èª­ã¿è¾¼ã¿é–‹å§‹"),Ce=new On({urls:{C4:"C4.mp3"},baseUrl:`${ot}/audio/piano/`,release:1.5,volume:Nt(),onload:()=>{e(6,W=!1),console.log("âœ… [TrainingCore] Salamander PianoéŸ³æºèª­ã¿è¾¼ã¿å®Œäº†")},onerror:n=>{console.error("âŒ [TrainingCore] Salamander PianoéŸ³æºèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:",n),e(6,W=!1)}}).toDestination(),await Gn(),e(6,W=!1),console.log("âœ… [TrainingCore] Salamander Grand Piano èª­ã¿è¾¼ã¿å®Œäº†")}catch(n){console.error("âŒ [TrainingCore] åŸºéŸ³å†ç”ŸåˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",n),e(6,W=!1)}}async function We(){if(!(te||!Ce||W))try{if(typeof window<"u"&&window.Tone){const B=window.Tone.context||window.Tone.getContext();B&&B.state==="suspended"&&(console.log("ğŸ”„ [TrainingCore] AudioContext suspendedæ¤œå‡º - å†é–‹ä¸­..."),await B.resume(),console.log("âœ… [TrainingCore] AudioContextå†é–‹å®Œäº†")),no.state!=="running"&&(await oo(),console.log("ğŸ”Š [TrainingCore] Tone.js AudioContext é–‹å§‹"))}e(7,te=!0);let n;if(S==="chromatic"&&h)n=de.find(B=>B.note===h)||de[0];else{const B=Math.floor(Math.random()*i.length),H=i[B];n=de.find(z=>z.note===H)||de[0]}const A=Nt();Ce.volume.value=A,console.log(`ğŸ¹ [TrainingCore] åŸºéŸ³å†ç”Ÿ: ${n.note} (${n.name}, ${n.frequency}Hz, ${A}dB)`),Ce.triggerAttackRelease(n.note,2,so(),.7),ke(),setTimeout(()=>{e(7,te=!1)},3e3)}catch(n){console.error("âŒ [TrainingCore] åŸºéŸ³å†ç”Ÿã‚¨ãƒ©ãƒ¼:",n),e(7,te=!1)}}function Le(){e(8,me=s.map(()=>({state:"inactive"}))),console.log(`ğŸµ [TrainingCore] ã‚¬ã‚¤ãƒ‰ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–: ${s.length}éŸ³éš`)}function ke(){e(11,Y="guiding");let n=0;const A=setInterval(()=>{n+=2,e(9,Fe=n),n>=100&&(clearInterval(A),e(10,ie=!0),setTimeout(()=>{it()},2e3))},40)}function it(){console.log("ğŸµ [TrainingCore] ã‚¬ã‚¤ãƒ‰ã‚·ãƒ¼ã‚±ãƒ³ã‚¹é–‹å§‹");let n=0;const A=setInterval(()=>{n<me.length?(e(8,me[n].state="active",me),n++,e(8,me=[...me])):(clearInterval(A),e(11,Y="listening"),ne=Date.now(),X=s.map(B=>({name:B,cents:null,targetFreq:0,detectedFreq:0,diff:0,accuracy:0})),console.log("ğŸ¤ [TrainingCore] ãƒªã‚¹ãƒ‹ãƒ³ã‚°ãƒ•ã‚§ãƒ¼ã‚ºé–‹å§‹"))},500)}async function Xe(){if(!ne)return;const n=Math.round((Date.now()-ne)/1e3),A=h||o,B=l;console.log(`âœ… [TrainingCore] ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†: ${n}ç§’`),$=X.map(H=>({name:H.name,cents:H.cents,targetFreq:H.targetFreq,detectedFreq:H.detectedFreq,diff:H.diff,accuracy:H.accuracy===null?"notMeasured":H.accuracy})),x?await Kt(X,n,A,B)&&(console.log("âœ… [TrainingCore] ã‚»ãƒƒã‚·ãƒ§ãƒ³çµæœä¿å­˜å®Œäº†"),et(),lt(),e(15,ce=!0),k&&k(),f&&N&&N()):(je(A,B),e(15,ce=!0),k&&k())}function De(n){const{frequency:A,note:B,volume:H}=n.detail;e(13,Re=A),e(14,He=B),e(12,Me=H),Y==="listening"&&X.length>0&&(ct(A),Te(A,B))}function ct(n,A){const H=Ct(h||o),z=ze();if(z>=0&&z<X.length){const J=xt(H,z),oe=Qt(n,J);X[z]={name:s[z],cents:oe,targetFreq:J,detectedFreq:n,diff:n-J,accuracy:Zt(oe)},X=[...X],X.filter(Ie=>Ie.cents!==null).length>=s.length&&Xe()}}function ze(){for(let n=0;n<me.length;n++)if(me[n].state==="active")return n;return-1}function Ee(n){console.error("âŒ [TrainingCore] PitchDetectorã‚¨ãƒ©ãƒ¼:",n.detail),M&&M(n.detail.error)}function Ye(){e(15,ce=!1),e(11,Y="waiting"),e(9,Fe=0),e(10,ie=!1),Le()}function $e(){Ye(),P&&!f&&setTimeout(()=>We(),1e3)}function Pe(){ft(`${ot}/`)}function at(){try{_e=new Ut,console.log("[TrainingCore] æ¡ç‚¹ã‚¨ãƒ³ã‚¸ãƒ³åˆæœŸåŒ–å®Œäº†")}catch(n){console.error("[TrainingCore] æ¡ç‚¹ã‚¨ãƒ³ã‚¸ãƒ³åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",n)}}function et(){if(!$||$.length===0){console.warn("[TrainingCore UnifiedScore] noteResultsForDisplay ãŒç©ºã§ã™");return}const n=$.filter(R=>R.accuracy!=="notMeasured").length,A=$.length,B=$.filter(R=>R.accuracy!=="notMeasured"&&typeof R.accuracy=="number").map(R=>R.accuracy),H=B.length>0?Math.round(B.reduce((R,Oe)=>R+Oe,0)/B.length):0,z=h||o,J=Ct(z),oe=$.map(R=>({name:R.name,note:R.note||R.name,frequency:R.targetFreq,detectedFrequency:R.detectedFreq,cents:R.cents,grade:nt.evaluateNote(R.cents),targetFreq:R.targetFreq,diff:R.diff})),ge=a,Ie=(ge==null?void 0:ge.sessionHistory)||[],Ae={timestamp:new Date,baseNote:z,baseFrequency:J,noteResults:oe,measuredNotes:n,accuracy:H,grade:nt.evaluateSession($)},ee=[...Ie,Ae];e(16,qe={mode:S,timestamp:new Date,duration:Math.round((Date.now()-ne)/1e3),totalNotes:A,measuredNotes:n,averageAccuracy:H,baseNote:z,baseFrequency:J,noteResults:oe,distribution:nt.calculateDistribution($),sessionHistory:ee,unifiedGrade:Wt(ee)}),console.log("[TrainingCore UnifiedScore] çµ±åˆæ¡ç‚¹ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆå®Œäº†:",qe)}function je(n,A){const B=nt.calculateAccuracy(X);e(16,qe={mode:S,sessionHistory:[{sessionId:1,grade:nt.evaluateSession(X),accuracy:B,baseNote:n,baseName:A,noteResults:X,completedAt:new Date().toISOString()}],isCompleted:!0,totalSessions:1,targetSessions:1,averageAccuracy:B})}async function lt(){try{if(_e){const n=c||[];for(const[B,H]of n.entries())if(H.noteResults&&H.noteResults.length>0){const z=H.baseFrequency||262;for(const J of H.noteResults)J.detectedFreq&&J.targetFreq&&await _e.analyzePerformance({baseFreq:z,targetFreq:J.targetFreq,detectedFreq:J.detectedFreq,responseTime:2e3,volume:50,harmonicCorrection:null})}const A=_e.generateDetailedReport();e(18,be=tt(A)),e(17,Be=_t($))}else e(17,Be=_t($));console.log("[TrainingCore EnhancedScoring] è¿½åŠ æ¡ç‚¹ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆå®Œäº†")}catch(n){console.error("[TrainingCore EnhancedScoring] ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆã‚¨ãƒ©ãƒ¼:",n),e(17,Be=_t($))}}function tt(n){var ge,Ie;const A=S==="chromatic"?12:8;if((c||[]).length<A||!n)return null;n.improvements;const z=[];let J=0,oe=0;if((ge=n.detailed)!=null&&ge.intervals){const Ae=n.detailed.intervals;if(Ae.totalAnalyses>0){let ee=0,R=0;for(const[Oe,he]of Object.entries(Ae.masteryLevels))he.attempts>0&&(ee+=he.averageAccuracy*he.attempts,R+=he.attempts);J=R>0?ee/R:0}}if((Ie=n.detailed)!=null&&Ie.directions){const Ae=n.detailed.directions;if(Ae.totalAnalyses>0){let ee=0,R=0;for(const[Oe,he]of Object.entries(Ae.masteryData))he.attempts>0&&(ee+=he.averageAccuracy*he.attempts,R+=he.attempts);oe=R>0?ee/R:0}}return z.push({category:"improvements",text:`éŸ³ç¨‹ç²¾åº¦: ${Math.round(J)}%ã€€ï¼ˆéŸ³ã®é«˜ã•ã‚’æ‰ãˆã‚‹æ­£ç¢ºæ€§ã€€ç›®æ¨™åŸºæº–ï¼š70ã€œ85%ï¼‰`}),z.push({category:"improvements",text:`æ–¹å‘æ€§: ${Math.round(oe)}%ã€€ï¼ˆéŸ³ç¨‹ã®ä¸Šä¸‹åˆ¤æ–­ã®ç²¾åº¦ã€€ç›®æ¨™åŸºæº–ï¼š80ã€œ90%ï¼‰`}),{type:"info",primary:"è©³ç´°åˆ†æçµæœ",summary:"éŸ³ç¨‹ç²¾åº¦ãƒ»ä¸€è²«æ€§ãƒ»æ–¹å‘æ€§ã®ç·åˆåˆ†æ",details:z}}function Te(n,A){if(!_e||Y!=="listening")return;const B=ze();if(B<0||B>=X.length)return;const z=Ct(h||o),J=xt(z,B),oe={baseFrequency:z,targetFrequency:J,detectedFrequency:n,detectedNote:A,volume:Me,timestamp:Date.now(),scaleIndex:B,scaleName:s[B]};try{_e.processAttempt(oe)}catch(ge){console.error("[TrainingCore] æ¡ç‚¹ã‚¨ãƒ³ã‚¸ãƒ³ã‚¨ãƒ©ãƒ¼:",ge)}}const mt=["mode","autoPlay","sessionCount","baseNote","direction","useLocalStorage","onSessionComplete","onAllComplete","onMicrophoneError"];co.keys(t).forEach(n=>{!~mt.indexOf(n)&&n.slice(0,2)!=="$$"&&n!=="slot"&&ao.warn(`<TrainingCore> was created with unknown prop '${n}'`)});function ut(n){An[n?"unshift":"push"](()=>{ve=n,e(5,ve)})}return r.$$set=n=>{"mode"in n&&e(0,S=n.mode),"autoPlay"in n&&e(1,P=n.autoPlay),"sessionCount"in n&&e(2,d=n.sessionCount),"baseNote"in n&&e(31,h=n.baseNote),"direction"in n&&e(32,D=n.direction),"useLocalStorage"in n&&e(3,x=n.useLocalStorage),"onSessionComplete"in n&&e(34,k=n.onSessionComplete),"onAllComplete"in n&&e(35,N=n.onAllComplete),"onMicrophoneError"in n&&e(36,M=n.onMicrophoneError)},r.$capture_state=()=>({onMount:yt,onDestroy:Ot,goto:ft,base:ot,page:qn,ChevronRight:to,Music:an,Card:Je,Button:Ht,VolumeBar:Hn,PitchDisplay:eo,PitchDetector:sn,PitchDetectionDisplay:on,PageLayout:Mt,Tone:$n,audioManager:St,harmonicCorrection:Mn,logger:Vn,UnifiedScoreResultFixed:cn,ActionButtons:rn,EvaluationEngine:nt,EnhancedScoringEngine:Ut,trainingProgress:Et,currentSessionId:Tt,nextBaseNote:kt,nextBaseName:jt,isLoading:Yn,storageError:Xn,isCompleted:Pt,sessionHistory:Dt,overallGrade:Wn,overallAccuracy:Zn,progressPercentage:It,remainingSessions:Qn,latestSessionResult:Jn,unifiedScoreData:Kn,loadProgress:zt,saveSessionResult:Kt,resetProgress:Un,createNewProgress:zn,startNewCycleIfCompleted:Ln,mode:S,autoPlay:P,sessionCount:d,baseNote:h,direction:D,useLocalStorage:x,sessionKey:G,onSessionComplete:k,onAllComplete:N,onMicrophoneError:M,onStorageError:xe,baseNotes:de,microphoneState:U,mediaStream:pe,audioContext:Qe,sourceNode:Ve,pitchDetectorComponent:ve,sampler:Ce,isSamplerLoading:W,isPlaying:te,scaleSteps:me,guideStartProgress:Fe,musicIconGlowing:ie,trainingPhase:Y,currentVolume:Me,currentFrequency:Re,detectedNote:He,noteResults:X,sessionStartTime:ne,showScoreResult:ce,currentUnifiedScoreData:qe,scoringEngine:_e,currentScoreData:O,intervalData:ye,consistencyData:Ze,feedbackData:Be,technicalFeedbackData:be,sessionStatistics:st,noteResultsForDisplay:$,initializeMicrophone:we,checkExistingMicrophonePermission:rt,checkMicrophonePermission:Ge,getVolumeForDevice:Nt,initializeBaseNotePlaying:Se,playBaseNote:We,initializeGuideSystem:Le,startGuideAnimation:ke,executeGuideSequence:it,completeSession:Xe,handlePitchUpdate:De,processNoteDetection:ct,getCurrentStepIndex:ze,getFrequencyFromNote:Ct,calculateTargetFrequency:xt,calculateCents:Qt,calculateNoteAccuracy:Zt,handlePitchDetectorError:Ee,handleRestart:Ye,handleNextSession:$e,handleBackToHome:Pe,initializeScoringEngine:at,generateUnifiedScoreData:et,generateStandaloneScoreData:je,generateEnhancedScoringData:lt,calculateUnifiedGrade:Wt,generateFeedbackFromResults:_t,generateTechnicalFeedbackFromEnhancedEngine:tt,updateScoringEngine:Te,currentScale:s,baseNotePool:i,$nextBaseNote:o,$sessionHistory:c,$trainingProgress:a,$isCompleted:f,$nextBaseName:l,$currentSessionId:u,$progressPercentage:v}),r.$inject_state=n=>{"mode"in n&&e(0,S=n.mode),"autoPlay"in n&&e(1,P=n.autoPlay),"sessionCount"in n&&e(2,d=n.sessionCount),"baseNote"in n&&e(31,h=n.baseNote),"direction"in n&&e(32,D=n.direction),"useLocalStorage"in n&&e(3,x=n.useLocalStorage),"onSessionComplete"in n&&e(34,k=n.onSessionComplete),"onAllComplete"in n&&e(35,N=n.onAllComplete),"onMicrophoneError"in n&&e(36,M=n.onMicrophoneError),"microphoneState"in n&&e(4,U=n.microphoneState),"mediaStream"in n&&(pe=n.mediaStream),"audioContext"in n&&(Qe=n.audioContext),"sourceNode"in n&&(Ve=n.sourceNode),"pitchDetectorComponent"in n&&e(5,ve=n.pitchDetectorComponent),"sampler"in n&&(Ce=n.sampler),"isSamplerLoading"in n&&e(6,W=n.isSamplerLoading),"isPlaying"in n&&e(7,te=n.isPlaying),"scaleSteps"in n&&e(8,me=n.scaleSteps),"guideStartProgress"in n&&e(9,Fe=n.guideStartProgress),"musicIconGlowing"in n&&e(10,ie=n.musicIconGlowing),"trainingPhase"in n&&e(11,Y=n.trainingPhase),"currentVolume"in n&&e(12,Me=n.currentVolume),"currentFrequency"in n&&e(13,Re=n.currentFrequency),"detectedNote"in n&&e(14,He=n.detectedNote),"noteResults"in n&&(X=n.noteResults),"sessionStartTime"in n&&(ne=n.sessionStartTime),"showScoreResult"in n&&e(15,ce=n.showScoreResult),"currentUnifiedScoreData"in n&&e(16,qe=n.currentUnifiedScoreData),"scoringEngine"in n&&(_e=n.scoringEngine),"currentScoreData"in n&&(O=n.currentScoreData),"intervalData"in n&&e(23,ye=n.intervalData),"consistencyData"in n&&e(24,Ze=n.consistencyData),"feedbackData"in n&&e(17,Be=n.feedbackData),"technicalFeedbackData"in n&&e(18,be=n.technicalFeedbackData),"sessionStatistics"in n&&(st=n.sessionStatistics),"noteResultsForDisplay"in n&&($=n.noteResultsForDisplay),"currentScale"in n&&e(19,s=n.currentScale),"baseNotePool"in n&&(i=n.baseNotePool)},t&&"$$inject"in t&&r.$inject_state(t.$$inject),r.$$.update=()=>{r.$$.dirty[0]&1|r.$$.dirty[1]&2&&e(19,s=S==="chromatic"?D==="asc"?["ãƒ‰","ãƒ‰#","ãƒ¬","ãƒ¬#","ãƒŸ","ãƒ•ã‚¡","ãƒ•ã‚¡#","ã‚½","ã‚½#","ãƒ©","ãƒ©#","ã‚·"]:["ã‚·","ãƒ©#","ãƒ©","ã‚½#","ã‚½","ãƒ•ã‚¡#","ãƒ•ã‚¡","ãƒŸ","ãƒ¬#","ãƒ¬","ãƒ‰#","ãƒ‰"]:["ãƒ‰","ãƒ¬","ãƒŸ","ãƒ•ã‚¡","ã‚½","ãƒ©","ã‚·","ãƒ‰ï¼ˆé«˜ï¼‰"]),r.$$.dirty[0]&1&&(i=S==="continuous"?["Bb3","B3","C4","Db4","D4","Eb4","E4","F4","Gb4","Ab4"]:["C4","Db4","D4","Eb4","E4","F4","Gb4","Ab4","Bb3","B3"])},[S,P,d,x,U,ve,W,te,me,Fe,ie,Y,Me,Re,He,ce,qe,Be,be,s,f,u,v,ye,Ze,We,De,Ee,Ye,$e,Pe,h,D,G,k,N,M,xe,ut]}class Dn extends Xt{constructor(t){super(t),Yt(this,t,lo,Ft,$t,{mode:0,autoPlay:1,sessionCount:2,baseNote:31,direction:32,useLocalStorage:3,sessionKey:33,onSessionComplete:34,onAllComplete:35,onMicrophoneError:36,onStorageError:37},null,[-1,-1,-1]),L("SvelteRegisterComponent",{component:this,tagName:"TrainingCore",options:t,id:Ft.name})}get mode(){throw new Error("<TrainingCore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set mode(t){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get autoPlay(){throw new Error("<TrainingCore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set autoPlay(t){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get sessionCount(){throw new Error("<TrainingCore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set sessionCount(t){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get baseNote(){throw new Error("<TrainingCore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set baseNote(t){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get direction(){throw new Error("<TrainingCore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set direction(t){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get useLocalStorage(){throw new Error("<TrainingCore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set useLocalStorage(t){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get sessionKey(){return this.$$.ctx[33]}set sessionKey(t){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get onSessionComplete(){throw new Error("<TrainingCore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set onSessionComplete(t){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get onAllComplete(){throw new Error("<TrainingCore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set onAllComplete(t){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get onMicrophoneError(){throw new Error("<TrainingCore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set onMicrophoneError(t){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get onStorageError(){return this.$$.ctx[37]}set onStorageError(t){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:uo}=nn,E="src/routes/training/continuous/+page.svelte";function En(r){let t,e,s="âš¡",i,o,c="èª­ã¿è¾¼ã¿ä¸­...";const a={c:function(){t=C("div"),e=C("div"),e.textContent=s,i=T(),o=C("p"),o.textContent=c,this.h()},l:function(l){t=p(l,"DIV",{class:!0});var u=I(t);e=p(u,"DIV",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-2fq1u0"&&(e.textContent=s),i=j(u),o=p(u,"P",{"data-svelte-h":!0}),F(o)!=="svelte-c7iph6"&&(o.textContent=c),u.forEach(_),this.h()},h:function(){y(e,"class","loading-spinner svelte-14jb1jb"),b(e,E,156,8,4891),b(o,E,157,8,4936),y(t,"class","loading-placeholder svelte-14jb1jb"),b(t,E,155,6,4849)},m:function(l,u){q(l,t,u),m(t,e),m(t,i),m(t,o)},p:Ne,i:Ne,o:Ne,d:function(l){l&&_(t)}};return L("SvelteRegisterBlock",{block:a,id:En.name,type:"if",source:"(154:24) ",ctx:r}),a}function Pn(r){let t,e;t=new Dn({props:{mode:"continuous",autoPlay:!0,sessionCount:8,useLocalStorage:!0,sessionKey:"continuous-training-progress",onMicrophoneError:r[3],onStorageError:Nn,onSessionComplete:xn,onAllComplete:Bn},$$inline:!0});const s={c:function(){fe(t.$$.fragment)},l:function(o){ue(t.$$.fragment,o)},m:function(o,c){le(t,o,c),e=!0},p:Ne,i:function(o){e||(K(t.$$.fragment,o),e=!0)},o:function(o){Q(t.$$.fragment,o),e=!1},d:function(o){ae(t,o)}};return L("SvelteRegisterBlock",{block:s,id:Pn.name,type:"if",source:"(141:63) ",ctx:r}),s}function jn(r){let t,e,s,i,o="âš¡",c,a,f,l="é€£ç¶šãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ¢ãƒ¼ãƒ‰",u,v,g,w,S="ğŸ¯",P,d,h,D="8ã‚»ãƒƒã‚·ãƒ§ãƒ³é€£ç¶š",x,G,k,N,M,xe="ğŸ”¥",de,U,pe,Qe="ä¸­ç´šå‘ã‘é›£æ˜“åº¦",Ve,ve,Ce,W,te,me="ğŸš€",Fe,ie,Y,Me="è‡ªå‹•é€²è¡Œ",Re,He,X,ne,ce,qe="ğŸ¼ ä½¿ç”¨åŸºéŸ³ï¼ˆä¸­ç´šãƒ¬ãƒ™ãƒ«ï¼‰",_e,O,ye,Ze="Bb3",Be,be,st="B3",$,we,rt="Db4",Ge,Se,We="Eb4",Le,ke,it="F#4",Xe,De,ct="G#4",ze,Ee,Ye="Bb4",$e,Pe,at="C#5",et,je,lt="Eb5",tt,Te,mt="F#5",ut,n,A="ğŸ”¥ ãƒãƒ£ãƒ¬ãƒ³ã‚¸é–‹å§‹ï¼",B,H;const z={c:function(){t=C("div"),e=C("div"),s=C("div"),i=C("div"),i.textContent=o,c=T(),a=C("div"),f=C("h2"),f.textContent=l,u=T(),v=C("div"),g=C("div"),w=C("div"),w.textContent=S,P=T(),d=C("div"),h=C("strong"),h.textContent=D,x=C("br"),G=re(`
                  é€”ä¸­ã§æ­¢ã¾ã‚‰ãªã„é›†ä¸­ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°`),k=T(),N=C("div"),M=C("div"),M.textContent=xe,de=T(),U=C("div"),pe=C("strong"),pe.textContent=Qe,Ve=C("br"),ve=re(`
                  ã‚ˆã‚Šé›£ã—ã„åŸºéŸ³ã§ã®æŒ‘æˆ¦`),Ce=T(),W=C("div"),te=C("div"),te.textContent=me,Fe=T(),ie=C("div"),Y=C("strong"),Y.textContent=Me,Re=C("br"),He=re(`
                  ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†å¾Œã«è‡ªå‹•ã§æ¬¡ã¸`),X=T(),ne=C("div"),ce=C("h3"),ce.textContent=qe,_e=T(),O=C("div"),ye=C("span"),ye.textContent=Ze,Be=T(),be=C("span"),be.textContent=st,$=T(),we=C("span"),we.textContent=rt,Ge=T(),Se=C("span"),Se.textContent=We,Le=T(),ke=C("span"),ke.textContent=it,Xe=T(),De=C("span"),De.textContent=ct,ze=T(),Ee=C("span"),Ee.textContent=Ye,$e=T(),Pe=C("span"),Pe.textContent=at,et=T(),je=C("span"),je.textContent=lt,tt=T(),Te=C("span"),Te.textContent=mt,ut=T(),n=C("button"),n.textContent=A,this.h()},l:function(oe){t=p(oe,"DIV",{class:!0});var ge=I(t);e=p(ge,"DIV",{class:!0});var Ie=I(e);s=p(Ie,"DIV",{class:!0});var Ae=I(s);i=p(Ae,"DIV",{class:!0,"data-svelte-h":!0}),F(i)!=="svelte-9b7bld"&&(i.textContent=o),Ae.forEach(_),c=j(Ie),a=p(Ie,"DIV",{class:!0});var ee=I(a);f=p(ee,"H2",{class:!0,"data-svelte-h":!0}),F(f)!=="svelte-1je1qsu"&&(f.textContent=l),u=j(ee),v=p(ee,"DIV",{class:!0});var R=I(v);g=p(R,"DIV",{class:!0});var Oe=I(g);w=p(Oe,"DIV",{class:!0,"data-svelte-h":!0}),F(w)!=="svelte-9nnsxm"&&(w.textContent=S),P=j(Oe),d=p(Oe,"DIV",{class:!0});var he=I(d);h=p(he,"STRONG",{class:!0,"data-svelte-h":!0}),F(h)!=="svelte-uvx9fo"&&(h.textContent=D),x=p(he,"BR",{}),G=se(he,`
                  é€”ä¸­ã§æ­¢ã¾ã‚‰ãªã„é›†ä¸­ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°`),he.forEach(_),Oe.forEach(_),k=j(R),N=p(R,"DIV",{class:!0});var gt=I(N);M=p(gt,"DIV",{class:!0,"data-svelte-h":!0}),F(M)!=="svelte-c6ysz9"&&(M.textContent=xe),de=j(gt),U=p(gt,"DIV",{class:!0});var ht=I(U);pe=p(ht,"STRONG",{class:!0,"data-svelte-h":!0}),F(pe)!=="svelte-1g98qif"&&(pe.textContent=Qe),Ve=p(ht,"BR",{}),ve=se(ht,`
                  ã‚ˆã‚Šé›£ã—ã„åŸºéŸ³ã§ã®æŒ‘æˆ¦`),ht.forEach(_),gt.forEach(_),Ce=j(R),W=p(R,"DIV",{class:!0});var vt=I(W);te=p(vt,"DIV",{class:!0,"data-svelte-h":!0}),F(te)!=="svelte-1ypnhme"&&(te.textContent=me),Fe=j(vt),ie=p(vt,"DIV",{class:!0});var bt=I(ie);Y=p(bt,"STRONG",{class:!0,"data-svelte-h":!0}),F(Y)!=="svelte-1g1wvsb"&&(Y.textContent=Me),Re=p(bt,"BR",{}),He=se(bt,`
                  ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†å¾Œã«è‡ªå‹•ã§æ¬¡ã¸`),bt.forEach(_),vt.forEach(_),R.forEach(_),X=j(ee),ne=p(ee,"DIV",{class:!0});var pt=I(ne);ce=p(pt,"H3",{class:!0,"data-svelte-h":!0}),F(ce)!=="svelte-gsfsbo"&&(ce.textContent=qe),_e=j(pt),O=p(pt,"DIV",{class:!0});var Z=I(O);ye=p(Z,"SPAN",{class:!0,"data-svelte-h":!0}),F(ye)!=="svelte-1cztwaa"&&(ye.textContent=Ze),Be=j(Z),be=p(Z,"SPAN",{class:!0,"data-svelte-h":!0}),F(be)!=="svelte-1npsk0u"&&(be.textContent=st),$=j(Z),we=p(Z,"SPAN",{class:!0,"data-svelte-h":!0}),F(we)!=="svelte-6itt2f"&&(we.textContent=rt),Ge=j(Z),Se=p(Z,"SPAN",{class:!0,"data-svelte-h":!0}),F(Se)!=="svelte-1ke7wry"&&(Se.textContent=We),Le=j(Z),ke=p(Z,"SPAN",{class:!0,"data-svelte-h":!0}),F(ke)!=="svelte-1nmuxhq"&&(ke.textContent=it),Xe=j(Z),De=p(Z,"SPAN",{class:!0,"data-svelte-h":!0}),F(De)!=="svelte-1rndh3b"&&(De.textContent=ct),ze=j(Z),Ee=p(Z,"SPAN",{class:!0,"data-svelte-h":!0}),F(Ee)!=="svelte-1ml1h8x"&&(Ee.textContent=Ye),$e=j(Z),Pe=p(Z,"SPAN",{class:!0,"data-svelte-h":!0}),F(Pe)!=="svelte-1e15m8i"&&(Pe.textContent=at),et=j(Z),je=p(Z,"SPAN",{class:!0,"data-svelte-h":!0}),F(je)!=="svelte-g14k23"&&(je.textContent=lt),tt=j(Z),Te=p(Z,"SPAN",{class:!0,"data-svelte-h":!0}),F(Te)!=="svelte-1ut7nin"&&(Te.textContent=mt),Z.forEach(_),pt.forEach(_),ut=j(ee),n=p(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),F(n)!=="svelte-la0s3j"&&(n.textContent=A),ee.forEach(_),Ie.forEach(_),ge.forEach(_),this.h()},h:function(){y(i,"class","challenge-icon svelte-14jb1jb"),b(i,E,86,12,2397),y(s,"class","challenge-icon-wrapper svelte-14jb1jb"),b(s,E,85,10,2348),y(f,"class","challenge-title svelte-14jb1jb"),b(f,E,90,12,2515),y(w,"class","feature-icon svelte-14jb1jb"),b(w,E,94,16,2674),y(h,"class","svelte-14jb1jb"),b(h,E,96,18,2770),b(x,E,96,43,2795),y(d,"class","feature-text svelte-14jb1jb"),b(d,E,95,16,2725),y(g,"class","feature-item svelte-14jb1jb"),b(g,E,93,14,2631),y(M,"class","feature-icon svelte-14jb1jb"),b(M,E,102,16,2951),y(pe,"class","svelte-14jb1jb"),b(pe,E,104,18,3047),b(Ve,E,104,42,3071),y(U,"class","feature-text svelte-14jb1jb"),b(U,E,103,16,3002),y(N,"class","feature-item svelte-14jb1jb"),b(N,E,101,14,2908),y(te,"class","feature-icon svelte-14jb1jb"),b(te,E,110,16,3222),y(Y,"class","svelte-14jb1jb"),b(Y,E,112,18,3318),b(Re,E,112,39,3339),y(ie,"class","feature-text svelte-14jb1jb"),b(ie,E,111,16,3273),y(W,"class","feature-item svelte-14jb1jb"),b(W,E,109,14,3179),y(v,"class","challenge-features svelte-14jb1jb"),b(v,E,92,12,2584),y(ce,"class","svelte-14jb1jb"),b(ce,E,119,14,3509),y(ye,"class","base-note svelte-14jb1jb"),b(ye,E,121,16,3593),y(be,"class","base-note svelte-14jb1jb"),b(be,E,122,16,3644),y(we,"class","base-note svelte-14jb1jb"),b(we,E,123,16,3694),y(Se,"class","base-note svelte-14jb1jb"),b(Se,E,124,16,3745),y(ke,"class","base-note svelte-14jb1jb"),b(ke,E,125,16,3796),y(De,"class","base-note svelte-14jb1jb"),b(De,E,126,16,3847),y(Ee,"class","base-note svelte-14jb1jb"),b(Ee,E,127,16,3898),y(Pe,"class","base-note svelte-14jb1jb"),b(Pe,E,128,16,3949),y(je,"class","base-note svelte-14jb1jb"),b(je,E,129,16,4e3),y(Te,"class","base-note svelte-14jb1jb"),b(Te,E,130,16,4051),y(O,"class","base-notes-grid svelte-14jb1jb"),b(O,E,120,14,3547),y(ne,"class","difficulty-info svelte-14jb1jb"),b(ne,E,118,12,3465),y(n,"class","start-challenge-button svelte-14jb1jb"),b(n,E,134,12,4151),y(a,"class","challenge-content"),b(a,E,89,10,2471),y(e,"class","challenge-card svelte-14jb1jb"),b(e,E,84,8,2309),y(t,"class","start-screen svelte-14jb1jb"),b(t,E,83,6,2274)},m:function(oe,ge){q(oe,t,ge),m(t,e),m(e,s),m(s,i),m(e,c),m(e,a),m(a,f),m(a,u),m(a,v),m(v,g),m(g,w),m(g,P),m(g,d),m(d,h),m(d,x),m(d,G),m(v,k),m(v,N),m(N,M),m(N,de),m(N,U),m(U,pe),m(U,Ve),m(U,ve),m(v,Ce),m(v,W),m(W,te),m(W,Fe),m(W,ie),m(ie,Y),m(ie,Re),m(ie,He),m(a,X),m(a,ne),m(ne,ce),m(ne,_e),m(ne,O),m(O,ye),m(O,Be),m(O,be),m(O,$),m(O,we),m(O,Ge),m(O,Se),m(O,Le),m(O,ke),m(O,Xe),m(O,De),m(O,ze),m(O,Ee),m(O,$e),m(O,Pe),m(O,et),m(O,je),m(O,tt),m(O,Te),m(a,ut),m(a,n),B||(H=tn(n,"click",r[4],!1,!1,!1),B=!0)},p:Ne,i:Ne,o:Ne,d:function(oe){oe&&_(t),B=!1,H()}};return L("SvelteRegisterBlock",{block:z,id:jn.name,type:"if",source:"(82:62) ",ctx:r}),z}function Tn(r){let t,e,s,i="âš ï¸",o,c,a,f="ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãŒå¿…è¦ã§ã™",l,u,v="é€£ç¶šãƒãƒ£ãƒ¬ãƒ³ã‚¸ã‚’é–‹å§‹ã™ã‚‹å‰ã«ã€ãƒã‚¤ã‚¯ã®å‹•ä½œç¢ºèªã‚’è¡Œã£ã¦ãã ã•ã„ã€‚",g,w,S="ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹",P,d;const h={c:function(){t=C("div"),e=C("div"),s=C("div"),s.textContent=i,o=T(),c=C("div"),a=C("h3"),a.textContent=f,l=T(),u=C("p"),u.textContent=v,g=T(),w=C("button"),w.textContent=S,this.h()},l:function(x){t=p(x,"DIV",{class:!0});var G=I(t);e=p(G,"DIV",{class:!0});var k=I(e);s=p(k,"DIV",{class:!0,"data-svelte-h":!0}),F(s)!=="svelte-dwi5dc"&&(s.textContent=i),o=j(k),c=p(k,"DIV",{class:!0});var N=I(c);a=p(N,"H3",{class:!0,"data-svelte-h":!0}),F(a)!=="svelte-17kvze2"&&(a.textContent=f),l=j(N),u=p(N,"P",{class:!0,"data-svelte-h":!0}),F(u)!=="svelte-t9m3nr"&&(u.textContent=v),g=j(N),w=p(N,"BUTTON",{class:!0,"data-svelte-h":!0}),F(w)!=="svelte-18xr2xp"&&(w.textContent=S),N.forEach(_),k.forEach(_),G.forEach(_),this.h()},h:function(){y(s,"class","warning-icon svelte-14jb1jb"),b(s,E,68,10,1777),y(a,"class","svelte-14jb1jb"),b(a,E,70,12,1864),y(u,"class","svelte-14jb1jb"),b(u,E,71,12,1897),y(w,"class","mic-test-button svelte-14jb1jb"),b(w,E,72,12,1949),y(c,"class","warning-content svelte-14jb1jb"),b(c,E,69,10,1822),y(e,"class","warning-card svelte-14jb1jb"),b(e,E,67,8,1740),y(t,"class","mic-test-required svelte-14jb1jb"),b(t,E,66,6,1700)},m:function(x,G){q(x,t,G),m(t,e),m(e,s),m(e,o),m(e,c),m(c,a),m(c,l),m(c,u),m(c,g),m(c,w),P||(d=tn(w,"click",r[5],!1,!1,!1),P=!0)},p:Ne,i:Ne,o:Ne,d:function(x){x&&_(t),P=!1,d()}};return L("SvelteRegisterBlock",{block:h,id:Tn.name,type:"if",source:"(66:4) {#if isClient && !micTestCompleted}",ctx:r}),h}function In(r){let t,e,s,i="âš¡ é€£ç¶šãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ¢ãƒ¼ãƒ‰",o,c,a="ä¸­ç´šè€…å‘ã‘ï¼šã‚ˆã‚Šé›£ã—ã„åŸºéŸ³ã§8ã‚»ãƒƒã‚·ãƒ§ãƒ³é€£ç¶šæŒ‘æˆ¦",f,l,u,v;const g=[Tn,jn,Pn,En],w=[];function S(d,h){return d[2]&&!d[0]?0:d[2]&&d[0]&&d[1]?1:d[2]&&d[0]&&!d[1]?2:d[2]?-1:3}~(l=S(r))&&(u=w[l]=g[l](r));const P={c:function(){t=C("div"),e=C("div"),s=C("h1"),s.textContent=i,o=T(),c=C("p"),c.textContent=a,f=T(),u&&u.c(),this.h()},l:function(h){t=p(h,"DIV",{class:!0});var D=I(t);e=p(D,"DIV",{class:!0});var x=I(e);s=p(x,"H1",{class:!0,"data-svelte-h":!0}),F(s)!=="svelte-1nub9gt"&&(s.textContent=i),o=j(x),c=p(x,"P",{class:!0,"data-svelte-h":!0}),F(c)!=="svelte-16c1632"&&(c.textContent=a),x.forEach(_),f=j(D),u&&u.l(D),D.forEach(_),this.h()},h:function(){y(s,"class","page-title svelte-14jb1jb"),b(s,E,58,6,1493),y(c,"class","page-description svelte-14jb1jb"),b(c,E,59,6,1540),y(e,"class","page-header svelte-14jb1jb"),b(e,E,57,4,1461),y(t,"class","continuous-training-page svelte-14jb1jb"),b(t,E,54,2,1392)},m:function(h,D){q(h,t,D),m(t,e),m(e,s),m(e,o),m(e,c),m(t,f),~l&&w[l].m(t,null),v=!0},p:function(h,D){let x=l;l=S(h),l===x?~l&&w[l].p(h,D):(u&&(qt(),Q(w[x],1,1,()=>{w[x]=null}),Vt()),~l?(u=w[l],u?u.p(h,D):(u=w[l]=g[l](h),u.c()),K(u,1),u.m(t,null)):u=null)},i:function(h){v||(K(u),v=!0)},o:function(h){Q(u),v=!1},d:function(h){h&&_(t),~l&&w[l].d()}};return L("SvelteRegisterBlock",{block:P,id:In.name,type:"slot",source:"(54:0) <PageLayout showBackButton={true}>",ctx:r}),P}function Rt(r){let t,e,s;e=new Mt({props:{showBackButton:!0,$$slots:{default:[In]},$$scope:{ctx:r}},$$inline:!0});const i={c:function(){t=T(),fe(e.$$.fragment),this.h()},l:function(c){Rn("svelte-13kpo59",document.head).forEach(_),t=j(c),ue(e.$$.fragment,c),this.h()},h:function(){document.title="é€£ç¶šãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ¢ãƒ¼ãƒ‰ - ç›¸å¯¾éŸ³æ„Ÿãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°"},m:function(c,a){q(c,t,a),le(e,c,a),s=!0},p:function(c,[a]){const f={};a&71&&(f.$$scope={dirty:a,ctx:c}),e.$set(f)},i:function(c){s||(K(e.$$.fragment,c),s=!0)},o:function(c){Q(e.$$.fragment,c),s=!1},d:function(c){c&&_(t),ae(e,c)}};return L("SvelteRegisterBlock",{block:i,id:Rt.name,type:"component",source:"",ctx:r}),i}function Nn(r){console.error("ğŸš¨ [ContinuousTraining] ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¨ãƒ©ãƒ¼:",r)}function xn(){console.log("âœ… [ContinuousTraining] ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†")}function Bn(){console.log("ğŸ‰ [ContinuousTraining] 8ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†ï¼")}function fo(r,t,e){let{$$slots:s={},$$scope:i}=t;en("Page",s,[]);let o=!1,c=!1,a=!1;yt(()=>{e(2,a=!0),typeof localStorage<"u"&&(e(0,o=localStorage.getItem("mic-test-completed")==="true"),console.log("ğŸ¤ [ContinuousTraining] ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆå®Œäº†ãƒ•ãƒ©ã‚°:",o))});function f(g){console.error("ğŸš¨ [ContinuousTraining] ãƒã‚¤ã‚¯ãƒ­ãƒ•ã‚©ãƒ³ã‚¨ãƒ©ãƒ¼:",g),ft(`${ot}/microphone-test?mode=continuous`)}function l(){e(1,c=!1)}const u=[];Object.keys(t).forEach(g=>{!~u.indexOf(g)&&g.slice(0,2)!=="$$"&&g!=="slot"&&uo.warn(`<Page> was created with unknown prop '${g}'`)});const v=()=>ft(`${ot}/microphone-test?mode=continuous`);return r.$capture_state=()=>({onMount:yt,goto:ft,base:ot,PageLayout:Mt,TrainingCore:Dn,micTestCompleted:o,showStartScreen:c,isClient:a,handleMicrophoneError:f,handleStorageError:Nn,handleSessionComplete:xn,handleAllComplete:Bn,startChallenge:l}),r.$inject_state=g=>{"micTestCompleted"in g&&e(0,o=g.micTestCompleted),"showStartScreen"in g&&e(1,c=g.showStartScreen),"isClient"in g&&e(2,a=g.isClient)},t&&"$$inject"in t&&r.$inject_state(t.$$inject),[o,c,a,f,l,v]}class wo extends Xt{constructor(t){super(t),Yt(this,t,fo,Rt,$t,{}),L("SvelteRegisterComponent",{component:this,tagName:"Page",options:t,id:Rt.name})}}export{wo as component,yo as universal};
