import{S as Xt,i as Yt,s as $t,d as L,v as Ue,c as Ke,a as en,H as yt,Z as Ot,b as _,r as Q,u as K,K as Rt,L as Vt,f as R,z as y,h as b,j as C,k as I,o as p,J as Bn,n as qe,q as ce,w as le,x as ue,y as fe,m as j,p as T,Q as Gt,g as m,M as dt,A,R as An,e as St,l as se,t as re,N as Lt,I as Fn,O as tn}from"../chunks/CizCsqwh.js";import{g as nn}from"../chunks/D0QH3NT1.js";import"../chunks/C-w4tHdS.js";import{b as ot,g as ft}from"../chunks/ByYRvuZh.js";import{P as Mt,B as Ht,C as Je}from"../chunks/Yk103YIT.js";import{p as Rn}from"../chunks/ClTM2qOk.js";import{a as wt,l as Vn,h as Mn,P as on,b as sn,V as Hn}from"../chunks/DQP8t4Dz.js";import{n as Dt,s as kt,t as Et,i as Pt,a as jt,c as Tt,p as It,l as zt,S as On,b as Gn,E as Ut,d as Ln,e as zn,r as Un,f as Kt,u as Kn,g as Jn,h as Qn,o as Zn,j as Wn,k as Xn,m as Yn,q as nt,A as rn,U as an,T as $n,P as eo,M as cn,C as to,v as no,w as oo,x as so}from"../chunks/ytCVdwWH.js";const ro=!1,io=!1,yo=Object.freeze(Object.defineProperty({__proto__:null,prerender:io,ssr:ro},Symbol.toStringTag,{value:"Module"})),{Object:ao,console:co}=nn,V="src/lib/components/TrainingCore.svelte";function Jt(r,t,e){const s=r.slice();return s[71]=t[e],s[73]=e,s}function ln(r){let t,e,s,i,o,a,c,f,l,u,v,g=r[3]&&xt(r);s=new Je({props:{class:"main-card half-width",$$slots:{default:[pn]},$$scope:{ctx:r}},$$inline:!0}),o=new Je({props:{class:"main-card half-width",$$slots:{default:[_n]},$$scope:{ctx:r}},$$inline:!0}),c=new Je({props:{class:"main-card",$$slots:{default:[yn]},$$scope:{ctx:r}},$$inline:!0});let S={isActive:r[4]==="granted",trainingPhase:r[11]};u=new sn({props:S,$$inline:!0}),r[38](u),u.$on("pitchUpdate",r[26]),u.$on("error",r[27]);const w={c:function(){g&&g.c(),t=T(),e=p("div"),fe(s.$$.fragment),i=T(),fe(o.$$.fragment),a=T(),fe(c.$$.fragment),f=T(),l=p("div"),fe(u.$$.fragment),this.h()},l:function(d){g&&g.l(d),t=j(d),e=C(d,"DIV",{class:!0});var h=I(e);ue(s.$$.fragment,h),i=j(h),ue(o.$$.fragment,h),h.forEach(_),a=j(d),ue(c.$$.fragment,d),f=j(d),l=C(d,"DIV",{style:!0});var k=I(l);ue(u.$$.fragment,k),k.forEach(_),this.h()},h:function(){y(e,"class","side-by-side-container svelte-q662rn"),b(e,V,1032,4,33811),dt(l,"display","none"),b(l,V,1100,4,35917)},m:function(d,h){g&&g.m(d,h),R(d,t,h),R(d,e,h),le(s,e,null),m(e,i),le(o,e,null),R(d,a,h),le(c,d,h),R(d,f,h),R(d,l,h),le(u,l,null),v=!0},p:function(d,h){d[3]?g?(g.p(d,h),h[0]&8&&K(g,1)):(g=xt(d),g.c(),K(g,1),g.m(t.parentNode,t)):g&&(Rt(),Q(g,1,1,()=>{g=null}),Vt());const k={};h[0]&3778|h[2]&4096&&(k.$$scope={dirty:h,ctx:d}),s.$set(k);const N={};h[0]&28672|h[2]&4096&&(N.$$scope={dirty:h,ctx:d}),o.$set(N);const G={};h[0]&524545|h[2]&4096&&(G.$$scope={dirty:h,ctx:d}),c.$set(G);const D={};h[0]&16&&(D.isActive=d[4]==="granted"),h[0]&2048&&(D.trainingPhase=d[11]),u.$set(D)},i:function(d){v||(K(g),K(s.$$.fragment,d),K(o.$$.fragment,d),K(c.$$.fragment,d),K(u.$$.fragment,d),v=!0)},o:function(d){Q(g),Q(s.$$.fragment,d),Q(o.$$.fragment,d),Q(c.$$.fragment,d),Q(u.$$.fragment,d),v=!1},d:function(d){d&&(_(t),_(e),_(a),_(f),_(l)),g&&g.d(d),ce(s),ce(o),ce(c,d),r[38](null),ce(u)}};return L("SvelteRegisterBlock",{block:w,id:ln.name,type:"else",source:"(1010:2) {:else}",ctx:r}),w}function un(r){let t,e,s,i;t=new an({props:{currentScoreData:r[16],intervalData:r[23]||[],consistencyData:r[24]||[],feedbackData:r[17],technicalFeedbackData:r[18]},$$inline:!0}),s=new rn({props:{showRestart:!r[20],showNext:!r[20],showHome:!0},$$inline:!0}),s.$on("restart",r[28]),s.$on("next",r[29]),s.$on("home",r[30]);const o={c:function(){fe(t.$$.fragment),e=T(),fe(s.$$.fragment)},l:function(c){ue(t.$$.fragment,c),e=j(c),ue(s.$$.fragment,c)},m:function(c,f){le(t,c,f),R(c,e,f),le(s,c,f),i=!0},p:function(c,f){const l={};f[0]&65536&&(l.currentScoreData=c[16]),f[0]&131072&&(l.feedbackData=c[17]),f[0]&262144&&(l.technicalFeedbackData=c[18]),t.$set(l);const u={};f[0]&1048576&&(u.showRestart=!c[20]),f[0]&1048576&&(u.showNext=!c[20]),s.$set(u)},i:function(c){i||(K(t.$$.fragment,c),K(s.$$.fragment,c),i=!0)},o:function(c){Q(t.$$.fragment,c),Q(s.$$.fragment,c),i=!1},d:function(c){c&&_(e),ce(t,c),ce(s,c)}};return L("SvelteRegisterBlock",{block:o,id:un.name,type:"if",source:"(991:55) ",ctx:r}),o}function fn(r){let t,e;t=new Je({props:{class:"main-card",$$slots:{default:[wn]},$$scope:{ctx:r}},$$inline:!0});const s={c:function(){fe(t.$$.fragment)},l:function(o){ue(t.$$.fragment,o)},m:function(o,a){le(t,o,a),e=!0},p:function(o,a){const c={};a[2]&4096&&(c.$$scope={dirty:a,ctx:o}),t.$set(c)},i:function(o){e||(K(t.$$.fragment,o),e=!0)},o:function(o){Q(t.$$.fragment,o),e=!1},d:function(o){ce(t,o)}};return L("SvelteRegisterBlock",{block:s,id:fn.name,type:"if",source:"(979:72) ",ctx:r}),s}function dn(r){let t,e;t=new Je({props:{class:"main-card",$$slots:{default:[Dn]},$$scope:{ctx:r}},$$inline:!0});const s={c:function(){fe(t.$$.fragment)},l:function(o){ue(t.$$.fragment,o)},m:function(o,a){le(t,o,a),e=!0},p:function(o,a){const c={};a[2]&4096&&(c.$$scope={dirty:a,ctx:o}),t.$set(c)},i:function(o){e||(K(t.$$.fragment,o),e=!0)},o:function(o){Q(t.$$.fragment,o),e=!1},d:function(o){ce(t,o)}};return L("SvelteRegisterBlock",{block:s,id:dn.name,type:"if",source:"(971:2) {#if microphoneState === 'checking'}",ctx:r}),s}function xt(r){let t,e;t=new Je({props:{class:"main-card",$$slots:{default:[mn]},$$scope:{ctx:r}},$$inline:!0});const s={c:function(){fe(t.$$.fragment)},l:function(o){ue(t.$$.fragment,o)},m:function(o,a){le(t,o,a),e=!0},p:function(o,a){const c={};a[0]&6291460|a[2]&4096&&(c.$$scope={dirty:a,ctx:o}),t.$set(c)},i:function(o){e||(K(t.$$.fragment,o),e=!0)},o:function(o){Q(t.$$.fragment,o),e=!1},d:function(o){ce(t,o)}};return L("SvelteRegisterBlock",{block:s,id:xt.name,type:"if",source:"(1014:4) {#if useLocalStorage}",ctx:r}),s}function mn(r){let t,e,s="ğŸ“Š é€²æ—çŠ¶æ³",i,o,a,c,f,l,u,v,g,S,w;const P={c:function(){t=p("div"),e=p("h3"),e.textContent=s,i=T(),o=p("div"),a=p("div"),c=p("div"),f=re("ã‚»ãƒƒã‚·ãƒ§ãƒ³ "),l=re(r[21]),u=re(" / "),v=re(r[2]),g=T(),S=p("div"),w=p("div"),this.h()},l:function(h){t=C(h,"DIV",{class:!0});var k=I(t);e=C(k,"H3",{class:!0,"data-svelte-h":!0}),A(e)!=="svelte-r02tv0"&&(e.textContent=s),k.forEach(_),i=j(h),o=C(h,"DIV",{class:!0});var N=I(o);a=C(N,"DIV",{class:!0});var G=I(a);c=C(G,"DIV",{class:!0});var D=I(c);f=se(D,"ã‚»ãƒƒã‚·ãƒ§ãƒ³ "),l=se(D,r[21]),u=se(D," / "),v=se(D,r[2]),D.forEach(_),g=j(G),S=C(G,"DIV",{class:!0});var q=I(S);w=C(q,"DIV",{class:!0,style:!0}),I(w).forEach(_),q.forEach(_),G.forEach(_),N.forEach(_),this.h()},h:function(){y(e,"class","section-title svelte-q662rn"),b(e,V,1016,10,33336),y(t,"class","card-header svelte-q662rn"),b(t,V,1015,8,33300),y(c,"class","session-counter svelte-q662rn"),b(c,V,1020,12,33475),y(w,"class","progress-fill svelte-q662rn"),dt(w,"width",r[22]+"%"),b(w,V,1024,14,33634),y(S,"class","progress-bar svelte-q662rn"),b(S,V,1023,12,33593),y(a,"class","progress-info svelte-q662rn"),b(a,V,1019,10,33435),y(o,"class","card-content svelte-q662rn"),b(o,V,1018,8,33398)},m:function(h,k){R(h,t,k),m(t,e),R(h,i,k),R(h,o,k),m(o,a),m(a,c),m(c,f),m(c,l),m(c,u),m(c,v),m(a,g),m(a,S),m(S,w)},p:function(h,k){k[0]&2097152&&St(l,h[21]),k[0]&4&&St(v,h[2]),k[0]&4194304&&dt(w,"width",h[22]+"%")},d:function(h){h&&(_(t),_(i),_(o))}};return L("SvelteRegisterBlock",{block:P,id:mn.name,type:"slot",source:'(1015:6) <Card class=\\"main-card\\">',ctx:r}),P}function gn(r){let t;const e={c:function(){t=re("ğŸ¹ åŸºéŸ³å†ç”Ÿ")},l:function(i){t=se(i,"ğŸ¹ åŸºéŸ³å†ç”Ÿ")},m:function(i,o){R(i,t,o)},d:function(i){i&&_(t)}};return L("SvelteRegisterBlock",{block:e,id:gn.name,type:"else",source:"(1050:12) {:else}",ctx:r}),e}function hn(r){let t;const e={c:function(){t=re("ğŸ”„ è‡ªå‹•å†ç”Ÿãƒ¢ãƒ¼ãƒ‰")},l:function(i){t=se(i,"ğŸ”„ è‡ªå‹•å†ç”Ÿãƒ¢ãƒ¼ãƒ‰")},m:function(i,o){R(i,t,o)},d:function(i){i&&_(t)}};return L("SvelteRegisterBlock",{block:e,id:hn.name,type:"if",source:"(1048:31) ",ctx:r}),e}function vn(r){let t;const e={c:function(){t=re("â³ èª­ã¿è¾¼ã¿ä¸­...")},l:function(i){t=se(i,"â³ èª­ã¿è¾¼ã¿ä¸­...")},m:function(i,o){R(i,t,o)},d:function(i){i&&_(t)}};return L("SvelteRegisterBlock",{block:e,id:vn.name,type:"if",source:"(1046:39) ",ctx:r}),e}function bn(r){let t;const e={c:function(){t=re("ğŸµ å†ç”Ÿä¸­...")},l:function(i){t=se(i,"ğŸµ å†ç”Ÿä¸­...")},m:function(i,o){R(i,t,o)},d:function(i){i&&_(t)}};return L("SvelteRegisterBlock",{block:e,id:bn.name,type:"if",source:"(1044:12) {#if isPlaying}",ctx:r}),e}function Cn(r){let t;function e(a,c){return a[7]?bn:a[6]?vn:a[1]?hn:gn}let s=e(r),i=s(r);const o={c:function(){i.c(),t=Lt()},l:function(c){i.l(c),t=Lt()},m:function(c,f){i.m(c,f),R(c,t,f)},p:function(c,f){s!==(s=e(c))&&(i.d(1),i=s(c),i&&(i.c(),i.m(t.parentNode,t)))},d:function(c){c&&_(t),i.d(c)}};return L("SvelteRegisterBlock",{block:o,id:Cn.name,type:"slot",source:`(1039:10) <Button              variant=\\"primary\\"             disabled={isPlaying || isSamplerLoading || (autoPlay && trainingPhase === 'guiding')}             on:click={playBaseNote}           >`,ctx:r}),o}function pn(r){let t,e,s="ğŸ¹ åŸºéŸ³å†ç”Ÿ",i,o,a,c,f,l,u="ã‚¬ã‚¤ãƒ‰é–‹å§‹ã¾ã§",v,g,S,w,P,d,h,k;a=new Ht({props:{variant:"primary",disabled:r[7]||r[6]||r[1]&&r[11]==="guiding",$$slots:{default:[Cn]},$$scope:{ctx:r}},$$inline:!0}),a.$on("click",r[25]),d=new cn({props:{size:"20"},$$inline:!0});const N={c:function(){t=p("div"),e=p("h3"),e.textContent=s,i=T(),o=p("div"),fe(a.$$.fragment),c=T(),f=p("div"),l=p("div"),l.textContent=u,v=T(),g=p("div"),S=p("div"),w=T(),P=p("div"),fe(d.$$.fragment),this.h()},l:function(D){t=C(D,"DIV",{class:!0});var q=I(t);e=C(q,"H3",{class:!0,"data-svelte-h":!0}),A(e)!=="svelte-syc53b"&&(e.textContent=s),q.forEach(_),i=j(D),o=C(D,"DIV",{class:!0});var M=I(o);ue(a.$$.fragment,M),c=j(M),f=C(M,"DIV",{class:!0});var Ne=I(f);l=C(Ne,"DIV",{class:!0,"data-svelte-h":!0}),A(l)!=="svelte-1dufnpv"&&(l.textContent=u),v=j(Ne),g=C(Ne,"DIV",{class:!0});var de=I(g);S=C(de,"DIV",{class:!0,style:!0}),I(S).forEach(_),w=j(de),P=C(de,"DIV",{class:!0});var U=I(P);ue(d.$$.fragment,U),U.forEach(_),de.forEach(_),Ne.forEach(_),M.forEach(_),this.h()},h:function(){y(e,"class","section-title svelte-q662rn"),b(e,V,1035,10,33934),y(t,"class","card-header svelte-q662rn"),b(t,V,1034,8,33898),y(l,"class","guide-start-label svelte-q662rn"),b(l,V,1056,12,34583),y(S,"class","guide-progress-fill svelte-q662rn"),dt(S,"width",r[9]+"%"),b(S,V,1058,14,34684),y(P,"class",h="guide-music-icon "+(r[10]?"glowing":"")+" svelte-q662rn"),b(P,V,1059,14,34775),y(g,"class","guide-start-bar svelte-q662rn"),b(g,V,1057,12,34640),y(f,"class","guide-start-bar-container svelte-q662rn"),b(f,V,1055,10,34531),y(o,"class","card-content svelte-q662rn"),b(o,V,1037,8,33996)},m:function(D,q){R(D,t,q),m(t,e),R(D,i,q),R(D,o,q),le(a,o,null),m(o,c),m(o,f),m(f,l),m(f,v),m(f,g),m(g,S),m(g,w),m(g,P),le(d,P,null),k=!0},p:function(D,q){const M={};q[0]&2242&&(M.disabled=D[7]||D[6]||D[1]&&D[11]==="guiding"),q[0]&194|q[2]&4096&&(M.$$scope={dirty:q,ctx:D}),a.$set(M),(!k||q[0]&512)&&dt(S,"width",D[9]+"%"),(!k||q[0]&1024&&h!==(h="guide-music-icon "+(D[10]?"glowing":"")+" svelte-q662rn"))&&y(P,"class",h)},i:function(D){k||(K(a.$$.fragment,D),K(d.$$.fragment,D),k=!0)},o:function(D){Q(a.$$.fragment,D),Q(d.$$.fragment,D),k=!1},d:function(D){D&&(_(t),_(i),_(o)),ce(a),ce(d)}};return L("SvelteRegisterBlock",{block:N,id:pn.name,type:"slot",source:'(1034:6) <Card class=\\"main-card half-width\\">',ctx:r}),N}function _n(r){let t,e,s="ğŸ¤ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¤œå‡º",i,o,a,c;a=new on({props:{frequency:r[13],note:r[14],volume:r[12],isMuted:!1},$$inline:!0});const f={c:function(){t=p("div"),e=p("h3"),e.textContent=s,i=T(),o=p("div"),fe(a.$$.fragment),this.h()},l:function(u){t=C(u,"DIV",{class:!0});var v=I(t);e=C(v,"H3",{class:!0,"data-svelte-h":!0}),A(e)!=="svelte-1vribo5"&&(e.textContent=s),v.forEach(_),i=j(u),o=C(u,"DIV",{class:!0});var g=I(o);ue(a.$$.fragment,g),g.forEach(_),this.h()},h:function(){y(e,"class","section-title svelte-q662rn"),b(e,V,1070,10,35084),y(t,"class","card-header svelte-q662rn"),b(t,V,1069,8,35048),y(o,"class","card-content svelte-q662rn"),b(o,V,1072,8,35150)},m:function(u,v){R(u,t,v),m(t,e),R(u,i,v),R(u,o,v),le(a,o,null),c=!0},p:function(u,v){const g={};v[0]&8192&&(g.frequency=u[13]),v[0]&16384&&(g.note=u[14]),v[0]&4096&&(g.volume=u[12]),a.$set(g)},i:function(u){c||(K(a.$$.fragment,u),c=!0)},o:function(u){Q(a.$$.fragment,u),c=!1},d:function(u){u&&(_(t),_(i),_(o)),ce(a)}};return L("SvelteRegisterBlock",{block:f,id:_n.name,type:"slot",source:'(1069:6) <Card class=\\"main-card half-width\\">',ctx:r}),f}function Bt(r){let t,e=r[71]+"",s,i,o;const a={c:function(){t=p("div"),s=re(e),i=T(),this.h()},l:function(f){t=C(f,"DIV",{class:!0});var l=I(t);s=se(l,e),i=j(l),l.forEach(_),this.h()},h:function(){var f;y(t,"class",o="scale-item "+(((f=r[8][r[73]])==null?void 0:f.state)||"inactive")+" svelte-q662rn"),b(t,V,1091,12,35705)},m:function(f,l){R(f,t,l),m(t,s),m(t,i)},p:function(f,l){var u;l[0]&524288&&e!==(e=f[71]+"")&&St(s,e),l[0]&256&&o!==(o="scale-item "+(((u=f[8][f[73]])==null?void 0:u.state)||"inactive")+" svelte-q662rn")&&y(t,"class",o)},d:function(f){f&&_(t)}};return L("SvelteRegisterBlock",{block:a,id:Bt.name,type:"each",source:"(1091:10) {#each currentScale as step, index}",ctx:r}),a}function yn(r){let t,e,s,i=r[0]==="chromatic"?"12":"8",o,a,c,f,l,u=Gt(r[19]),v=[];for(let S=0;S<u.length;S+=1)v[S]=Bt(Jt(r,u,S));const g={c:function(){t=p("div"),e=p("h3"),s=re("ğŸµ "),o=re(i),a=re("éŸ³éšã‚¬ã‚¤ãƒ‰"),c=T(),f=p("div"),l=p("div");for(let w=0;w<v.length;w+=1)v[w].c();this.h()},l:function(w){t=C(w,"DIV",{class:!0});var P=I(t);e=C(P,"H3",{class:!0});var d=I(e);s=se(d,"ğŸµ "),o=se(d,i),a=se(d,"éŸ³éšã‚¬ã‚¤ãƒ‰"),d.forEach(_),P.forEach(_),c=j(w),f=C(w,"DIV",{class:!0});var h=I(f);l=C(h,"DIV",{class:!0});var k=I(l);for(let N=0;N<v.length;N+=1)v[N].l(k);k.forEach(_),h.forEach(_),this.h()},h:function(){y(e,"class","section-title svelte-q662rn"),b(e,V,1086,8,35492),y(t,"class","card-header svelte-q662rn"),b(t,V,1085,6,35458),y(l,"class","scale-guide svelte-q662rn"),b(l,V,1089,8,35621),y(f,"class","card-content svelte-q662rn"),b(f,V,1088,6,35586)},m:function(w,P){R(w,t,P),m(t,e),m(e,s),m(e,o),m(e,a),R(w,c,P),R(w,f,P),m(f,l);for(let d=0;d<v.length;d+=1)v[d]&&v[d].m(l,null)},p:function(w,P){if(P[0]&1&&i!==(i=w[0]==="chromatic"?"12":"8")&&St(o,i),P[0]&524544){u=Gt(w[19]);let d;for(d=0;d<u.length;d+=1){const h=Jt(w,u,d);v[d]?v[d].p(h,P):(v[d]=Bt(h),v[d].c(),v[d].m(l,null))}for(;d<v.length;d+=1)v[d].d(1);v.length=u.length}},d:function(w){w&&(_(t),_(c),_(f)),An(v,w)}};return L("SvelteRegisterBlock",{block:g,id:yn.name,type:"slot",source:'(1085:4) <Card class=\\"main-card\\">',ctx:r}),g}function Sn(r){let t;const e={c:function(){t=re("ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹")},l:function(i){t=se(i,"ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹")},m:function(i,o){R(i,t,o)},d:function(i){i&&_(t)}};return L("SvelteRegisterBlock",{block:e,id:Sn.name,type:"slot",source:'(985:8) <Button variant=\\"primary\\" on:click={handleBackToHome}>',ctx:r}),e}function wn(r){let t,e,s="âš ï¸ ãƒã‚¤ã‚¯è¨±å¯ãŒå¿…è¦ã§ã™",i,o,a="ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã‹ã‚‰é–‹å§‹ã—ã¦ãã ã•ã„",c,f,l;f=new Ht({props:{variant:"primary",$$slots:{default:[Sn]},$$scope:{ctx:r}},$$inline:!0}),f.$on("click",r[30]);const u={c:function(){t=p("div"),e=p("h3"),e.textContent=s,i=T(),o=p("p"),o.textContent=a,c=T(),fe(f.$$.fragment),this.h()},l:function(g){t=C(g,"DIV",{class:!0});var S=I(t);e=C(S,"H3",{"data-svelte-h":!0}),A(e)!=="svelte-1iz0ljq"&&(e.textContent=s),i=j(S),o=C(S,"P",{"data-svelte-h":!0}),A(o)!=="svelte-13xvrzt"&&(o.textContent=a),c=j(S),ue(f.$$.fragment,S),S.forEach(_),this.h()},h:function(){b(e,V,982,8,32431),b(o,V,983,8,32462),y(t,"class","card-content text-center svelte-q662rn"),b(t,V,981,6,32384)},m:function(g,S){R(g,t,S),m(t,e),m(t,i),m(t,o),m(t,c),le(f,t,null),l=!0},p:function(g,S){const w={};S[2]&4096&&(w.$$scope={dirty:S,ctx:g}),f.$set(w)},i:function(g){l||(K(f.$$.fragment,g),l=!0)},o:function(g){Q(f.$$.fragment,g),l=!1},d:function(g){g&&_(t),ce(f)}};return L("SvelteRegisterBlock",{block:u,id:wn.name,type:"slot",source:'(981:4) <Card class=\\"main-card\\">',ctx:r}),u}function Dn(r){let t,e,s="â³ ãƒã‚¤ã‚¯åˆæœŸåŒ–ä¸­...",i,o,a="ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„";const c={c:function(){t=p("div"),e=p("h3"),e.textContent=s,i=T(),o=p("p"),o.textContent=a,this.h()},l:function(l){t=C(l,"DIV",{class:!0});var u=I(t);e=C(u,"H3",{"data-svelte-h":!0}),A(e)!=="svelte-1tpl2vf"&&(e.textContent=s),i=j(u),o=C(u,"P",{"data-svelte-h":!0}),A(o)!=="svelte-1vogiv7"&&(o.textContent=a),u.forEach(_),this.h()},h:function(){b(e,V,974,8,32180),b(o,V,975,8,32210),y(t,"class","card-content text-center svelte-q662rn"),b(t,V,973,6,32133)},m:function(l,u){R(l,t,u),m(t,e),m(t,i),m(t,o)},p:qe,d:function(l){l&&_(t)}};return L("SvelteRegisterBlock",{block:c,id:Dn.name,type:"slot",source:'(973:4) <Card class=\\"main-card\\">',ctx:r}),c}function At(r){let t,e,s,i;const o=[dn,fn,un,ln],a=[];function c(l,u){return l[4]==="checking"?0:l[4]==="denied"||l[4]==="error"?1:l[15]&&l[16]?2:3}e=c(r),s=a[e]=o[e](r);const f={c:function(){t=p("div"),s.c(),this.h()},l:function(u){t=C(u,"DIV",{class:!0});var v=I(t);s.l(v),v.forEach(_),this.h()},h:function(){y(t,"class","training-core svelte-q662rn"),b(t,V,968,0,32006)},m:function(u,v){R(u,t,v),a[e].m(t,null),i=!0},p:function(u,v){let g=e;e=c(u),e===g?a[e].p(u,v):(Rt(),Q(a[g],1,1,()=>{a[g]=null}),Vt(),s=a[e],s?s.p(u,v):(s=a[e]=o[e](u),s.c()),K(s,1),s.m(t,null))},i:function(u){i||(K(s),i=!0)},o:function(u){Q(s),i=!1},d:function(u){u&&_(t),a[e].d()}};return L("SvelteRegisterBlock",{block:f,id:At.name,type:"component",source:"",ctx:r}),f}function qt(){const r=/iPhone/.test(navigator.userAgent),t=/iPad/.test(navigator.userAgent),e=/Macintosh/.test(navigator.userAgent)&&"ontouchend"in document;return r||t||e?(console.log("ğŸ”Š [TrainingCore] iOS/iPadOSæ¤œå‡º - éŸ³é‡35dBè¨­å®š"),35):(console.log("ğŸ”Š [TrainingCore] PCæ¤œå‡º - éŸ³é‡-6dBè¨­å®š"),-6)}function pt(r){return{C4:261.63,Db4:277.18,D4:293.66,Eb4:311.13,E4:329.63,F4:349.23,Gb4:369.99,G4:392,Ab4:415.3,A4:440,Bb4:466.16,B4:493.88,C5:523.25,Db5:554.37,D5:587.33,Eb5:622.25,E5:659.25,F5:698.46,Gb5:739.99,G5:783.99}[r]||261.63}function Nt(r,t){return r*([1,1.125,1.25,1.3333333333333333,1.5,1.6666666666666667,1.875,2][t]||1)}function Qt(r,t){return!r||!t||r<=0||t<=0?null:Math.round(1200*Math.log2(r/t))}function Zt(r){if(r===null)return 0;const t=Math.abs(r);return Math.max(0,Math.min(100,100-t/50*100))}function Wt(r){if(!r||r.length===0)return"E";const t=r.map(l=>l.grade),e=t.filter(l=>l==="excellent").length,s=t.filter(l=>l==="good").length,i=t.filter(l=>l==="pass").length,o=t.length,a=e/o,c=(e+s)/o,f=(e+s+i)/o;return a>=.9?"S":a>=.7?"A":c>=.8?"B":f>=.7?"C":f>=.4?"D":"E"}function _t(r){if(!r||r.length===0)return{type:"info",primary:"ãƒ‡ãƒ¼ã‚¿ãªã—",summary:"æ¸¬å®šãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“"};const t=r.filter(a=>a.accuracy!=="notMeasured"),e=t.length>0?Math.round(t.reduce((a,c)=>a+c.accuracy,0)/t.length):0;let s,i,o;return e>=85?(s="excellent",i="ç´ æ™´ã‚‰ã—ã„ç²¾åº¦ã§ã™ï¼",o=`å¹³å‡ç²¾åº¦${e}%ã§å„ªç§€ãªéŸ³æ„Ÿèƒ½åŠ›ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚`):e>=70?(s="improvement",i="è‰¯ã„é€²æ­©ãŒè¦‹ã‚‰ã‚Œã¾ã™",o=`å¹³å‡ç²¾åº¦${e}%ã§ç¢ºå®Ÿã«å‘ä¸Šã—ã¦ã„ã¾ã™ã€‚`):e>=50?(s="practice",i="ç¶™ç¶šç·´ç¿’ã§å‘ä¸Šä¸­",o=`ç¾åœ¨ã®ç²¾åº¦${e}%ã‹ã‚‰æ›´ãªã‚‹å‘ä¸Šã‚’ç›®æŒ‡ã—ã¾ã—ã‚‡ã†ã€‚`):(s="encouragement",i="ç·´ç¿’ã‚’ç¶šã‘ã¾ã—ã‚‡ã†",o="ç¶™ç¶šçš„ãªç·´ç¿’ã§å¿…ãšä¸Šé”ã—ã¾ã™ã€‚"),{type:s,primary:i,summary:o}}function lo(r,t,e){let s,i,o,a,c,f,l,u,v;Ue(Dt,"nextBaseNote"),Ke(r,Dt,n=>e(48,o=n)),Ue(kt,"sessionHistory"),Ke(r,kt,n=>e(49,a=n)),Ue(Et,"trainingProgress"),Ke(r,Et,n=>e(50,c=n)),Ue(Pt,"isCompleted"),Ke(r,Pt,n=>e(20,f=n)),Ue(jt,"nextBaseName"),Ke(r,jt,n=>e(51,l=n)),Ue(Tt,"currentSessionId"),Ke(r,Tt,n=>e(21,u=n)),Ue(It,"progressPercentage"),Ke(r,It,n=>e(22,v=n));let{$$slots:g={},$$scope:S}=t;en("TrainingCore",g,[]);let{mode:w="random"}=t,{autoPlay:P=!1}=t,{sessionCount:d=8}=t,{baseNote:h=null}=t,{direction:k="asc"}=t,{useLocalStorage:N=!0}=t;const G="random-training-progress";let{onSessionComplete:D=null}=t,{onAllComplete:q=null}=t,{onMicrophoneError:M=null}=t;const Ne=null,de=[{note:"C4",name:"ãƒ‰ï¼ˆä¸­ï¼‰",frequency:261.63,semitonesFromC:0},{note:"Db4",name:"ãƒ‰#ï¼ˆä¸­ï¼‰",frequency:277.18,semitonesFromC:1},{note:"D4",name:"ãƒ¬ï¼ˆä¸­ï¼‰",frequency:293.66,semitonesFromC:2},{note:"Eb4",name:"ãƒ¬#ï¼ˆä¸­ï¼‰",frequency:311.13,semitonesFromC:3},{note:"E4",name:"ãƒŸï¼ˆä¸­ï¼‰",frequency:329.63,semitonesFromC:4},{note:"F4",name:"ãƒ•ã‚¡ï¼ˆä¸­ï¼‰",frequency:349.23,semitonesFromC:5},{note:"Gb4",name:"ãƒ•ã‚¡#ï¼ˆä¸­ï¼‰",frequency:369.99,semitonesFromC:6},{note:"Ab4",name:"ãƒ©bï¼ˆä¸­ï¼‰",frequency:415.3,semitonesFromC:8},{note:"Bb3",name:"ã‚·bï¼ˆä½ï¼‰",frequency:233.08,semitonesFromC:-2},{note:"B3",name:"ã‚·ï¼ˆä½ï¼‰",frequency:246.94,semitonesFromC:-1}];let U="checking",Ce=null,Qe=null,Ve=null,ve=null,pe=null,W=!1,te=!1,me=[],Ae=0,ie=!1,Y="waiting",Me=0,Fe=0,He="ãƒ¼ãƒ¼",X=[],ne=null,ae=!1,Re=null,_e=null,O=null,ye=[],Ze=[],xe=null,be=null,st=null,$=[];yt(async()=>{console.log(`ğŸš€ [TrainingCore] ${w}ãƒ¢ãƒ¼ãƒ‰åˆæœŸåŒ–é–‹å§‹`);try{N&&(await zt(),console.log(`âœ… [TrainingCore] localStorageåˆæœŸåŒ–å®Œäº†: ã‚»ãƒƒã‚·ãƒ§ãƒ³${u}/8`)),ct(),await Se(),await we(),Le(),console.log(`âœ… [TrainingCore] ${w}ãƒ¢ãƒ¼ãƒ‰åˆæœŸåŒ–å®Œäº†`)}catch(n){console.error("âŒ [TrainingCore] åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",n),M&&M(n.message)}}),Ot(()=>{pe&&pe.dispose()});async function Se(){const n=typeof localStorage<"u"&&localStorage.getItem("mic-test-completed")==="true";if(console.log("ğŸ¤ [TrainingCore] ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆå®Œäº†ãƒ•ãƒ©ã‚°:",n),!n){console.log("âš ï¸ [TrainingCore] ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆæœªå®Œäº† - ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ"),M&&M("ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãŒå¿…è¦ã§ã™");return}new URLSearchParams(window.location.search).get("from")==="microphone-test"?(e(4,U="granted"),console.log("âœ… [TrainingCore] ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆçµŒç”±ã§ã‚¢ã‚¯ã‚»ã‚¹ - è¨±å¯æ¸ˆã¿"),await Ge()):(console.log("ğŸ” [TrainingCore] ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹æ¤œå‡º - ãƒã‚¤ã‚¯è¨±å¯çŠ¶æ…‹ç¢ºèª"),await rt())}async function rt(){try{(await navigator.permissions.query({name:"microphone"})).state==="granted"?(console.log("âœ… [TrainingCore] ãƒã‚¤ã‚¯è¨±å¯æ¸ˆã¿æ¤œå‡º - AudioManageråˆæœŸåŒ–å®Ÿè¡Œ"),await Ge()):(e(4,U="denied"),console.log("âš ï¸ [TrainingCore] ãƒã‚¤ã‚¯è¨±å¯ãŒå¿…è¦ã§ã™"))}catch(n){console.error("âŒ [TrainingCore] ãƒã‚¤ã‚¯è¨±å¯ç¢ºèªã‚¨ãƒ©ãƒ¼:",n),e(4,U="error")}}async function Ge(){var n;e(4,U="checking");try{if(console.log("ğŸ¤ [TrainingCore] AudioManagerçµŒç”±ã§ãƒã‚¤ã‚¯è¨±å¯ç¢ºèªé–‹å§‹"),!((n=navigator.mediaDevices)!=null&&n.getUserMedia)){e(4,U="error"),console.error("âŒ [TrainingCore] getUserMediaæœªå¯¾å¿œãƒ–ãƒ©ã‚¦ã‚¶");return}const B=await wt.initialize();Qe=B.audioContext,Ce=B.mediaStream,Ve=B.sourceNode,console.log("âœ… [TrainingCore] AudioManager ãƒªã‚½ãƒ¼ã‚¹å–å¾—å®Œäº†"),e(4,U="granted"),e(11,Y="waiting"),setTimeout(async()=>{if(ve&&ve.getIsInitialized&&!ve.getIsInitialized())try{console.log("ğŸ™ï¸ [TrainingCore] PitchDetectoråˆæœŸåŒ–é–‹å§‹");const x=/iPad/.test(navigator.userAgent),H=/Macintosh/.test(navigator.userAgent)&&"ontouchend"in document;if(x||H){console.log("ğŸ“± [TrainingCore] iPad/iPadOSæ¤œå‡º - AudioManagerå†åˆæœŸåŒ–");try{await wt.initialize(),console.log("âœ… [TrainingCore] AudioManagerå†åˆæœŸåŒ–å®Œäº†")}catch(z){console.warn("âš ï¸ AudioManagerå†åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",z)}}await ve.initialize(),console.log("âœ… [TrainingCore] PitchDetectoråˆæœŸåŒ–å®Œäº†")}catch(x){console.warn("âš ï¸ [TrainingCore] PitchDetectoråˆæœŸåŒ–å¤±æ•—:",x)}},300)}catch(B){console.error("âŒ [TrainingCore] ãƒã‚¤ã‚¯è¨±å¯ã‚¨ãƒ©ãƒ¼:",B),e(4,U=(B==null?void 0:B.name)==="NotAllowedError"?"denied":"error"),M&&M(B.message)}}async function we(){try{if(typeof window>"u"){console.log("âš ï¸ [TrainingCore] SSRç’°å¢ƒæ¤œå‡º - åŸºéŸ³å†ç”ŸåˆæœŸåŒ–ã‚¹ã‚­ãƒƒãƒ—");return}e(6,W=!0),console.log("ğŸ¹ [TrainingCore] Salamander Grand Piano èª­ã¿è¾¼ã¿é–‹å§‹"),pe=new On({urls:{C4:"C4.mp3"},baseUrl:`${ot}/audio/piano/`,release:1.5,volume:qt(),onload:()=>{e(6,W=!1),console.log("âœ… [TrainingCore] Salamander PianoéŸ³æºèª­ã¿è¾¼ã¿å®Œäº†")},onerror:n=>{console.error("âŒ [TrainingCore] Salamander PianoéŸ³æºèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:",n),e(6,W=!1)}}).toDestination(),await Gn(),e(6,W=!1),console.log("âœ… [TrainingCore] Salamander Grand Piano èª­ã¿è¾¼ã¿å®Œäº†")}catch(n){console.error("âŒ [TrainingCore] åŸºéŸ³å†ç”ŸåˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",n),e(6,W=!1)}}async function We(){if(!(te||!pe||W))try{if(typeof window<"u"&&window.Tone){const x=window.Tone.context||window.Tone.getContext();x&&x.state==="suspended"&&(console.log("ğŸ”„ [TrainingCore] AudioContext suspendedæ¤œå‡º - å†é–‹ä¸­..."),await x.resume(),console.log("âœ… [TrainingCore] AudioContextå†é–‹å®Œäº†")),no.state!=="running"&&(await oo(),console.log("ğŸ”Š [TrainingCore] Tone.js AudioContext é–‹å§‹"))}e(7,te=!0);let n;if(w==="chromatic"&&h)n=de.find(x=>x.note===h)||de[0];else{const x=Math.floor(Math.random()*i.length),H=i[x];n=de.find(z=>z.note===H)||de[0]}const B=qt();pe.volume.value=B,console.log(`ğŸ¹ [TrainingCore] åŸºéŸ³å†ç”Ÿ: ${n.note} (${n.name}, ${n.frequency}Hz, ${B}dB)`),pe.triggerAttackRelease(n.note,2,so(),.7),De(),setTimeout(()=>{e(7,te=!1)},3e3)}catch(n){console.error("âŒ [TrainingCore] åŸºéŸ³å†ç”Ÿã‚¨ãƒ©ãƒ¼:",n),e(7,te=!1)}}function Le(){e(8,me=s.map(()=>({state:"inactive"}))),console.log(`ğŸµ [TrainingCore] ã‚¬ã‚¤ãƒ‰ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–: ${s.length}éŸ³éš`)}function De(){e(11,Y="guiding");let n=0;const B=setInterval(()=>{n+=2,e(9,Ae=n),n>=100&&(clearInterval(B),e(10,ie=!0),setTimeout(()=>{it()},2e3))},40)}function it(){console.log("ğŸµ [TrainingCore] ã‚¬ã‚¤ãƒ‰ã‚·ãƒ¼ã‚±ãƒ³ã‚¹é–‹å§‹");let n=0;const B=setInterval(()=>{n<me.length?(e(8,me[n].state="active",me),n++,e(8,me=[...me])):(clearInterval(B),e(11,Y="listening"),ne=Date.now(),X=s.map(x=>({name:x,cents:null,targetFreq:0,detectedFreq:0,diff:0,accuracy:0})),console.log("ğŸ¤ [TrainingCore] ãƒªã‚¹ãƒ‹ãƒ³ã‚°ãƒ•ã‚§ãƒ¼ã‚ºé–‹å§‹"))},500)}async function Xe(){if(!ne)return;const n=Math.round((Date.now()-ne)/1e3),B=h||o,x=l;console.log(`âœ… [TrainingCore] ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†: ${n}ç§’`),$=X.map(H=>({name:H.name,cents:H.cents,targetFreq:H.targetFreq,detectedFreq:H.detectedFreq,diff:H.diff,accuracy:H.accuracy===null?"notMeasured":H.accuracy})),N?await Kt(X,n,B,x)&&(console.log("âœ… [TrainingCore] ã‚»ãƒƒã‚·ãƒ§ãƒ³çµæœä¿å­˜å®Œäº†"),et(),lt(),e(15,ae=!0),D&&D(),f&&q&&q()):(je(B,x),e(15,ae=!0),D&&D())}function ke(n){const{frequency:B,note:x,volume:H}=n.detail;e(13,Fe=B),e(14,He=x),e(12,Me=H),Y==="listening"&&X.length>0&&(at(B),Te(B,x))}function at(n,B){const H=pt(h||o),z=ze();if(z>=0&&z<X.length){const J=Nt(H,z),oe=Qt(n,J);X[z]={name:s[z],cents:oe,targetFreq:J,detectedFreq:n,diff:n-J,accuracy:Zt(oe)},X=[...X],X.filter(Ie=>Ie.cents!==null).length>=s.length&&Xe()}}function ze(){for(let n=0;n<me.length;n++)if(me[n].state==="active")return n;return-1}function Ee(n){console.error("âŒ [TrainingCore] PitchDetectorã‚¨ãƒ©ãƒ¼:",n.detail),M&&M(n.detail.error)}function Ye(){e(15,ae=!1),e(11,Y="waiting"),e(9,Ae=0),e(10,ie=!1),Le()}function $e(){Ye(),P&&!f&&setTimeout(()=>We(),1e3)}function Pe(){ft(`${ot}/`)}function ct(){try{_e=new Ut,console.log("[TrainingCore] æ¡ç‚¹ã‚¨ãƒ³ã‚¸ãƒ³åˆæœŸåŒ–å®Œäº†")}catch(n){console.error("[TrainingCore] æ¡ç‚¹ã‚¨ãƒ³ã‚¸ãƒ³åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",n)}}function et(){if(!$||$.length===0){console.warn("[TrainingCore UnifiedScore] noteResultsForDisplay ãŒç©ºã§ã™");return}const n=$.filter(F=>F.accuracy!=="notMeasured").length,B=$.length,x=$.filter(F=>F.accuracy!=="notMeasured"&&typeof F.accuracy=="number").map(F=>F.accuracy),H=x.length>0?Math.round(x.reduce((F,Oe)=>F+Oe,0)/x.length):0,z=h||o,J=pt(z),oe=$.map(F=>({name:F.name,note:F.note||F.name,frequency:F.targetFreq,detectedFrequency:F.detectedFreq,cents:F.cents,grade:nt.evaluateNote(F.cents),targetFreq:F.targetFreq,diff:F.diff})),ge=c,Ie=(ge==null?void 0:ge.sessionHistory)||[],Be={timestamp:new Date,baseNote:z,baseFrequency:J,noteResults:oe,measuredNotes:n,accuracy:H,grade:nt.evaluateSession($)},ee=[...Ie,Be];e(16,Re={mode:w,timestamp:new Date,duration:Math.round((Date.now()-ne)/1e3),totalNotes:B,measuredNotes:n,averageAccuracy:H,baseNote:z,baseFrequency:J,noteResults:oe,distribution:nt.calculateDistribution($),sessionHistory:ee,unifiedGrade:Wt(ee)}),console.log("[TrainingCore UnifiedScore] çµ±åˆæ¡ç‚¹ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆå®Œäº†:",Re)}function je(n,B){const x=nt.calculateAccuracy(X);e(16,Re={mode:w,sessionHistory:[{sessionId:1,grade:nt.evaluateSession(X),accuracy:x,baseNote:n,baseName:B,noteResults:X,completedAt:new Date().toISOString()}],isCompleted:!0,totalSessions:1,targetSessions:1,averageAccuracy:x})}async function lt(){try{if(_e){const n=a||[];for(const[x,H]of n.entries())if(H.noteResults&&H.noteResults.length>0){const z=H.baseFrequency||262;for(const J of H.noteResults)J.detectedFreq&&J.targetFreq&&await _e.analyzePerformance({baseFreq:z,targetFreq:J.targetFreq,detectedFreq:J.detectedFreq,responseTime:2e3,volume:50,harmonicCorrection:null})}const B=_e.generateDetailedReport();e(18,be=tt(B)),e(17,xe=_t($))}else e(17,xe=_t($));console.log("[TrainingCore EnhancedScoring] è¿½åŠ æ¡ç‚¹ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆå®Œäº†")}catch(n){console.error("[TrainingCore EnhancedScoring] ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆã‚¨ãƒ©ãƒ¼:",n),e(17,xe=_t($))}}function tt(n){var ge,Ie;const B=w==="chromatic"?12:8;if((a||[]).length<B||!n)return null;n.improvements;const z=[];let J=0,oe=0;if((ge=n.detailed)!=null&&ge.intervals){const Be=n.detailed.intervals;if(Be.totalAnalyses>0){let ee=0,F=0;for(const[Oe,he]of Object.entries(Be.masteryLevels))he.attempts>0&&(ee+=he.averageAccuracy*he.attempts,F+=he.attempts);J=F>0?ee/F:0}}if((Ie=n.detailed)!=null&&Ie.directions){const Be=n.detailed.directions;if(Be.totalAnalyses>0){let ee=0,F=0;for(const[Oe,he]of Object.entries(Be.masteryData))he.attempts>0&&(ee+=he.averageAccuracy*he.attempts,F+=he.attempts);oe=F>0?ee/F:0}}return z.push({category:"improvements",text:`éŸ³ç¨‹ç²¾åº¦: ${Math.round(J)}%ã€€ï¼ˆéŸ³ã®é«˜ã•ã‚’æ‰ãˆã‚‹æ­£ç¢ºæ€§ã€€ç›®æ¨™åŸºæº–ï¼š70ã€œ85%ï¼‰`}),z.push({category:"improvements",text:`æ–¹å‘æ€§: ${Math.round(oe)}%ã€€ï¼ˆéŸ³ç¨‹ã®ä¸Šä¸‹åˆ¤æ–­ã®ç²¾åº¦ã€€ç›®æ¨™åŸºæº–ï¼š80ã€œ90%ï¼‰`}),{type:"info",primary:"è©³ç´°åˆ†æçµæœ",summary:"éŸ³ç¨‹ç²¾åº¦ãƒ»ä¸€è²«æ€§ãƒ»æ–¹å‘æ€§ã®ç·åˆåˆ†æ",details:z}}function Te(n,B){if(!_e||Y!=="listening")return;const x=ze();if(x<0||x>=X.length)return;const z=pt(h||o),J=Nt(z,x),oe={baseFrequency:z,targetFrequency:J,detectedFrequency:n,detectedNote:B,volume:Me,timestamp:Date.now(),scaleIndex:x,scaleName:s[x]};try{_e.processAttempt(oe)}catch(ge){console.error("[TrainingCore] æ¡ç‚¹ã‚¨ãƒ³ã‚¸ãƒ³ã‚¨ãƒ©ãƒ¼:",ge)}}const mt=["mode","autoPlay","sessionCount","baseNote","direction","useLocalStorage","onSessionComplete","onAllComplete","onMicrophoneError"];ao.keys(t).forEach(n=>{!~mt.indexOf(n)&&n.slice(0,2)!=="$$"&&n!=="slot"&&co.warn(`<TrainingCore> was created with unknown prop '${n}'`)});function ut(n){Bn[n?"unshift":"push"](()=>{ve=n,e(5,ve)})}return r.$$set=n=>{"mode"in n&&e(0,w=n.mode),"autoPlay"in n&&e(1,P=n.autoPlay),"sessionCount"in n&&e(2,d=n.sessionCount),"baseNote"in n&&e(31,h=n.baseNote),"direction"in n&&e(32,k=n.direction),"useLocalStorage"in n&&e(3,N=n.useLocalStorage),"onSessionComplete"in n&&e(34,D=n.onSessionComplete),"onAllComplete"in n&&e(35,q=n.onAllComplete),"onMicrophoneError"in n&&e(36,M=n.onMicrophoneError)},r.$capture_state=()=>({onMount:yt,onDestroy:Ot,goto:ft,base:ot,page:Rn,ChevronRight:to,Music:cn,Card:Je,Button:Ht,VolumeBar:Hn,PitchDisplay:eo,PitchDetector:sn,PitchDetectionDisplay:on,PageLayout:Mt,Tone:$n,audioManager:wt,harmonicCorrection:Mn,logger:Vn,UnifiedScoreResultFixed:an,ActionButtons:rn,EvaluationEngine:nt,EnhancedScoringEngine:Ut,trainingProgress:Et,currentSessionId:Tt,nextBaseNote:Dt,nextBaseName:jt,isLoading:Yn,storageError:Xn,isCompleted:Pt,sessionHistory:kt,overallGrade:Wn,overallAccuracy:Zn,progressPercentage:It,remainingSessions:Qn,latestSessionResult:Jn,unifiedScoreData:Kn,loadProgress:zt,saveSessionResult:Kt,resetProgress:Un,createNewProgress:zn,startNewCycleIfCompleted:Ln,mode:w,autoPlay:P,sessionCount:d,baseNote:h,direction:k,useLocalStorage:N,sessionKey:G,onSessionComplete:D,onAllComplete:q,onMicrophoneError:M,onStorageError:Ne,baseNotes:de,microphoneState:U,mediaStream:Ce,audioContext:Qe,sourceNode:Ve,pitchDetectorComponent:ve,sampler:pe,isSamplerLoading:W,isPlaying:te,scaleSteps:me,guideStartProgress:Ae,musicIconGlowing:ie,trainingPhase:Y,currentVolume:Me,currentFrequency:Fe,detectedNote:He,noteResults:X,sessionStartTime:ne,showScoreResult:ae,currentUnifiedScoreData:Re,scoringEngine:_e,currentScoreData:O,intervalData:ye,consistencyData:Ze,feedbackData:xe,technicalFeedbackData:be,sessionStatistics:st,noteResultsForDisplay:$,initializeMicrophone:Se,checkExistingMicrophonePermission:rt,checkMicrophonePermission:Ge,getVolumeForDevice:qt,initializeBaseNotePlaying:we,playBaseNote:We,initializeGuideSystem:Le,startGuideAnimation:De,executeGuideSequence:it,completeSession:Xe,handlePitchUpdate:ke,processNoteDetection:at,getCurrentStepIndex:ze,getFrequencyFromNote:pt,calculateTargetFrequency:Nt,calculateCents:Qt,calculateNoteAccuracy:Zt,handlePitchDetectorError:Ee,handleRestart:Ye,handleNextSession:$e,handleBackToHome:Pe,initializeScoringEngine:ct,generateUnifiedScoreData:et,generateStandaloneScoreData:je,generateEnhancedScoringData:lt,calculateUnifiedGrade:Wt,generateFeedbackFromResults:_t,generateTechnicalFeedbackFromEnhancedEngine:tt,updateScoringEngine:Te,currentScale:s,baseNotePool:i,$nextBaseNote:o,$sessionHistory:a,$trainingProgress:c,$isCompleted:f,$nextBaseName:l,$currentSessionId:u,$progressPercentage:v}),r.$inject_state=n=>{"mode"in n&&e(0,w=n.mode),"autoPlay"in n&&e(1,P=n.autoPlay),"sessionCount"in n&&e(2,d=n.sessionCount),"baseNote"in n&&e(31,h=n.baseNote),"direction"in n&&e(32,k=n.direction),"useLocalStorage"in n&&e(3,N=n.useLocalStorage),"onSessionComplete"in n&&e(34,D=n.onSessionComplete),"onAllComplete"in n&&e(35,q=n.onAllComplete),"onMicrophoneError"in n&&e(36,M=n.onMicrophoneError),"microphoneState"in n&&e(4,U=n.microphoneState),"mediaStream"in n&&(Ce=n.mediaStream),"audioContext"in n&&(Qe=n.audioContext),"sourceNode"in n&&(Ve=n.sourceNode),"pitchDetectorComponent"in n&&e(5,ve=n.pitchDetectorComponent),"sampler"in n&&(pe=n.sampler),"isSamplerLoading"in n&&e(6,W=n.isSamplerLoading),"isPlaying"in n&&e(7,te=n.isPlaying),"scaleSteps"in n&&e(8,me=n.scaleSteps),"guideStartProgress"in n&&e(9,Ae=n.guideStartProgress),"musicIconGlowing"in n&&e(10,ie=n.musicIconGlowing),"trainingPhase"in n&&e(11,Y=n.trainingPhase),"currentVolume"in n&&e(12,Me=n.currentVolume),"currentFrequency"in n&&e(13,Fe=n.currentFrequency),"detectedNote"in n&&e(14,He=n.detectedNote),"noteResults"in n&&(X=n.noteResults),"sessionStartTime"in n&&(ne=n.sessionStartTime),"showScoreResult"in n&&e(15,ae=n.showScoreResult),"currentUnifiedScoreData"in n&&e(16,Re=n.currentUnifiedScoreData),"scoringEngine"in n&&(_e=n.scoringEngine),"currentScoreData"in n&&(O=n.currentScoreData),"intervalData"in n&&e(23,ye=n.intervalData),"consistencyData"in n&&e(24,Ze=n.consistencyData),"feedbackData"in n&&e(17,xe=n.feedbackData),"technicalFeedbackData"in n&&e(18,be=n.technicalFeedbackData),"sessionStatistics"in n&&(st=n.sessionStatistics),"noteResultsForDisplay"in n&&($=n.noteResultsForDisplay),"currentScale"in n&&e(19,s=n.currentScale),"baseNotePool"in n&&(i=n.baseNotePool)},t&&"$$inject"in t&&r.$inject_state(t.$$inject),r.$$.update=()=>{r.$$.dirty[0]&1|r.$$.dirty[1]&2&&e(19,s=w==="chromatic"?k==="asc"?["ãƒ‰","ãƒ‰#","ãƒ¬","ãƒ¬#","ãƒŸ","ãƒ•ã‚¡","ãƒ•ã‚¡#","ã‚½","ã‚½#","ãƒ©","ãƒ©#","ã‚·"]:["ã‚·","ãƒ©#","ãƒ©","ã‚½#","ã‚½","ãƒ•ã‚¡#","ãƒ•ã‚¡","ãƒŸ","ãƒ¬#","ãƒ¬","ãƒ‰#","ãƒ‰"]:["ãƒ‰","ãƒ¬","ãƒŸ","ãƒ•ã‚¡","ã‚½","ãƒ©","ã‚·","ãƒ‰ï¼ˆé«˜ï¼‰"]),r.$$.dirty[0]&1&&(i=w==="continuous"?["Bb3","B3","C4","Db4","D4","Eb4","E4","F4","Gb4","Ab4"]:["C4","Db4","D4","Eb4","E4","F4","Gb4","Ab4","Bb3","B3"])},[w,P,d,N,U,ve,W,te,me,Ae,ie,Y,Me,Fe,He,ae,Re,xe,be,s,f,u,v,ye,Ze,We,ke,Ee,Ye,$e,Pe,h,k,G,D,q,M,Ne,ut]}class kn extends Xt{constructor(t){super(t),Yt(this,t,lo,At,$t,{mode:0,autoPlay:1,sessionCount:2,baseNote:31,direction:32,useLocalStorage:3,sessionKey:33,onSessionComplete:34,onAllComplete:35,onMicrophoneError:36,onStorageError:37},null,[-1,-1,-1]),L("SvelteRegisterComponent",{component:this,tagName:"TrainingCore",options:t,id:At.name})}get mode(){throw new Error("<TrainingCore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set mode(t){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get autoPlay(){throw new Error("<TrainingCore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set autoPlay(t){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get sessionCount(){throw new Error("<TrainingCore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set sessionCount(t){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get baseNote(){throw new Error("<TrainingCore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set baseNote(t){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get direction(){throw new Error("<TrainingCore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set direction(t){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get useLocalStorage(){throw new Error("<TrainingCore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set useLocalStorage(t){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get sessionKey(){return this.$$.ctx[33]}set sessionKey(t){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get onSessionComplete(){throw new Error("<TrainingCore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set onSessionComplete(t){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get onAllComplete(){throw new Error("<TrainingCore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set onAllComplete(t){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get onMicrophoneError(){throw new Error("<TrainingCore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set onMicrophoneError(t){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get onStorageError(){return this.$$.ctx[37]}set onStorageError(t){throw new Error("<TrainingCore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:uo}=nn,E="src/routes/training/continuous/+page.svelte";function En(r){let t,e,s="âš¡",i,o,a="èª­ã¿è¾¼ã¿ä¸­...";const c={c:function(){t=p("div"),e=p("div"),e.textContent=s,i=T(),o=p("p"),o.textContent=a,this.h()},l:function(l){t=C(l,"DIV",{class:!0});var u=I(t);e=C(u,"DIV",{class:!0,"data-svelte-h":!0}),A(e)!=="svelte-2fq1u0"&&(e.textContent=s),i=j(u),o=C(u,"P",{"data-svelte-h":!0}),A(o)!=="svelte-c7iph6"&&(o.textContent=a),u.forEach(_),this.h()},h:function(){y(e,"class","loading-spinner svelte-14jb1jb"),b(e,E,156,8,4891),b(o,E,157,8,4936),y(t,"class","loading-placeholder svelte-14jb1jb"),b(t,E,155,6,4849)},m:function(l,u){R(l,t,u),m(t,e),m(t,i),m(t,o)},p:qe,i:qe,o:qe,d:function(l){l&&_(t)}};return L("SvelteRegisterBlock",{block:c,id:En.name,type:"if",source:"(154:24) ",ctx:r}),c}function Pn(r){let t,e;t=new kn({props:{mode:"continuous",autoPlay:!0,sessionCount:8,useLocalStorage:!0,sessionKey:"continuous-training-progress",onMicrophoneError:r[3],onStorageError:qn,onSessionComplete:Nn,onAllComplete:xn},$$inline:!0});const s={c:function(){fe(t.$$.fragment)},l:function(o){ue(t.$$.fragment,o)},m:function(o,a){le(t,o,a),e=!0},p:qe,i:function(o){e||(K(t.$$.fragment,o),e=!0)},o:function(o){Q(t.$$.fragment,o),e=!1},d:function(o){ce(t,o)}};return L("SvelteRegisterBlock",{block:s,id:Pn.name,type:"if",source:"(141:63) ",ctx:r}),s}function jn(r){let t,e,s,i,o="âš¡",a,c,f,l="é€£ç¶šãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ¢ãƒ¼ãƒ‰",u,v,g,S,w="ğŸ¯",P,d,h,k="8ã‚»ãƒƒã‚·ãƒ§ãƒ³é€£ç¶š",N,G,D,q,M,Ne="ğŸ”¥",de,U,Ce,Qe="ä¸­ç´šå‘ã‘é›£æ˜“åº¦",Ve,ve,pe,W,te,me="ğŸš€",Ae,ie,Y,Me="è‡ªå‹•é€²è¡Œ",Fe,He,X,ne,ae,Re="ğŸ¼ ä½¿ç”¨åŸºéŸ³ï¼ˆä¸­ç´šãƒ¬ãƒ™ãƒ«ï¼‰",_e,O,ye,Ze="Bb3",xe,be,st="B3",$,Se,rt="Db4",Ge,we,We="Eb4",Le,De,it="F#4",Xe,ke,at="G#4",ze,Ee,Ye="Bb4",$e,Pe,ct="C#5",et,je,lt="Eb5",tt,Te,mt="F#5",ut,n,B="ğŸ”¥ ãƒãƒ£ãƒ¬ãƒ³ã‚¸é–‹å§‹ï¼",x,H;const z={c:function(){t=p("div"),e=p("div"),s=p("div"),i=p("div"),i.textContent=o,a=T(),c=p("div"),f=p("h2"),f.textContent=l,u=T(),v=p("div"),g=p("div"),S=p("div"),S.textContent=w,P=T(),d=p("div"),h=p("strong"),h.textContent=k,N=p("br"),G=re(`
                  é€”ä¸­ã§æ­¢ã¾ã‚‰ãªã„é›†ä¸­ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°`),D=T(),q=p("div"),M=p("div"),M.textContent=Ne,de=T(),U=p("div"),Ce=p("strong"),Ce.textContent=Qe,Ve=p("br"),ve=re(`
                  ã‚ˆã‚Šé›£ã—ã„åŸºéŸ³ã§ã®æŒ‘æˆ¦`),pe=T(),W=p("div"),te=p("div"),te.textContent=me,Ae=T(),ie=p("div"),Y=p("strong"),Y.textContent=Me,Fe=p("br"),He=re(`
                  ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†å¾Œã«è‡ªå‹•ã§æ¬¡ã¸`),X=T(),ne=p("div"),ae=p("h3"),ae.textContent=Re,_e=T(),O=p("div"),ye=p("span"),ye.textContent=Ze,xe=T(),be=p("span"),be.textContent=st,$=T(),Se=p("span"),Se.textContent=rt,Ge=T(),we=p("span"),we.textContent=We,Le=T(),De=p("span"),De.textContent=it,Xe=T(),ke=p("span"),ke.textContent=at,ze=T(),Ee=p("span"),Ee.textContent=Ye,$e=T(),Pe=p("span"),Pe.textContent=ct,et=T(),je=p("span"),je.textContent=lt,tt=T(),Te=p("span"),Te.textContent=mt,ut=T(),n=p("button"),n.textContent=B,this.h()},l:function(oe){t=C(oe,"DIV",{class:!0});var ge=I(t);e=C(ge,"DIV",{class:!0});var Ie=I(e);s=C(Ie,"DIV",{class:!0});var Be=I(s);i=C(Be,"DIV",{class:!0,"data-svelte-h":!0}),A(i)!=="svelte-9b7bld"&&(i.textContent=o),Be.forEach(_),a=j(Ie),c=C(Ie,"DIV",{class:!0});var ee=I(c);f=C(ee,"H2",{class:!0,"data-svelte-h":!0}),A(f)!=="svelte-1je1qsu"&&(f.textContent=l),u=j(ee),v=C(ee,"DIV",{class:!0});var F=I(v);g=C(F,"DIV",{class:!0});var Oe=I(g);S=C(Oe,"DIV",{class:!0,"data-svelte-h":!0}),A(S)!=="svelte-9nnsxm"&&(S.textContent=w),P=j(Oe),d=C(Oe,"DIV",{class:!0});var he=I(d);h=C(he,"STRONG",{class:!0,"data-svelte-h":!0}),A(h)!=="svelte-uvx9fo"&&(h.textContent=k),N=C(he,"BR",{}),G=se(he,`
                  é€”ä¸­ã§æ­¢ã¾ã‚‰ãªã„é›†ä¸­ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°`),he.forEach(_),Oe.forEach(_),D=j(F),q=C(F,"DIV",{class:!0});var gt=I(q);M=C(gt,"DIV",{class:!0,"data-svelte-h":!0}),A(M)!=="svelte-c6ysz9"&&(M.textContent=Ne),de=j(gt),U=C(gt,"DIV",{class:!0});var ht=I(U);Ce=C(ht,"STRONG",{class:!0,"data-svelte-h":!0}),A(Ce)!=="svelte-1g98qif"&&(Ce.textContent=Qe),Ve=C(ht,"BR",{}),ve=se(ht,`
                  ã‚ˆã‚Šé›£ã—ã„åŸºéŸ³ã§ã®æŒ‘æˆ¦`),ht.forEach(_),gt.forEach(_),pe=j(F),W=C(F,"DIV",{class:!0});var vt=I(W);te=C(vt,"DIV",{class:!0,"data-svelte-h":!0}),A(te)!=="svelte-1ypnhme"&&(te.textContent=me),Ae=j(vt),ie=C(vt,"DIV",{class:!0});var bt=I(ie);Y=C(bt,"STRONG",{class:!0,"data-svelte-h":!0}),A(Y)!=="svelte-1g1wvsb"&&(Y.textContent=Me),Fe=C(bt,"BR",{}),He=se(bt,`
                  ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†å¾Œã«è‡ªå‹•ã§æ¬¡ã¸`),bt.forEach(_),vt.forEach(_),F.forEach(_),X=j(ee),ne=C(ee,"DIV",{class:!0});var Ct=I(ne);ae=C(Ct,"H3",{class:!0,"data-svelte-h":!0}),A(ae)!=="svelte-gsfsbo"&&(ae.textContent=Re),_e=j(Ct),O=C(Ct,"DIV",{class:!0});var Z=I(O);ye=C(Z,"SPAN",{class:!0,"data-svelte-h":!0}),A(ye)!=="svelte-1cztwaa"&&(ye.textContent=Ze),xe=j(Z),be=C(Z,"SPAN",{class:!0,"data-svelte-h":!0}),A(be)!=="svelte-1npsk0u"&&(be.textContent=st),$=j(Z),Se=C(Z,"SPAN",{class:!0,"data-svelte-h":!0}),A(Se)!=="svelte-6itt2f"&&(Se.textContent=rt),Ge=j(Z),we=C(Z,"SPAN",{class:!0,"data-svelte-h":!0}),A(we)!=="svelte-1ke7wry"&&(we.textContent=We),Le=j(Z),De=C(Z,"SPAN",{class:!0,"data-svelte-h":!0}),A(De)!=="svelte-1nmuxhq"&&(De.textContent=it),Xe=j(Z),ke=C(Z,"SPAN",{class:!0,"data-svelte-h":!0}),A(ke)!=="svelte-1rndh3b"&&(ke.textContent=at),ze=j(Z),Ee=C(Z,"SPAN",{class:!0,"data-svelte-h":!0}),A(Ee)!=="svelte-1ml1h8x"&&(Ee.textContent=Ye),$e=j(Z),Pe=C(Z,"SPAN",{class:!0,"data-svelte-h":!0}),A(Pe)!=="svelte-1e15m8i"&&(Pe.textContent=ct),et=j(Z),je=C(Z,"SPAN",{class:!0,"data-svelte-h":!0}),A(je)!=="svelte-g14k23"&&(je.textContent=lt),tt=j(Z),Te=C(Z,"SPAN",{class:!0,"data-svelte-h":!0}),A(Te)!=="svelte-1ut7nin"&&(Te.textContent=mt),Z.forEach(_),Ct.forEach(_),ut=j(ee),n=C(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),A(n)!=="svelte-la0s3j"&&(n.textContent=B),ee.forEach(_),Ie.forEach(_),ge.forEach(_),this.h()},h:function(){y(i,"class","challenge-icon svelte-14jb1jb"),b(i,E,86,12,2397),y(s,"class","challenge-icon-wrapper svelte-14jb1jb"),b(s,E,85,10,2348),y(f,"class","challenge-title svelte-14jb1jb"),b(f,E,90,12,2515),y(S,"class","feature-icon svelte-14jb1jb"),b(S,E,94,16,2674),y(h,"class","svelte-14jb1jb"),b(h,E,96,18,2770),b(N,E,96,43,2795),y(d,"class","feature-text svelte-14jb1jb"),b(d,E,95,16,2725),y(g,"class","feature-item svelte-14jb1jb"),b(g,E,93,14,2631),y(M,"class","feature-icon svelte-14jb1jb"),b(M,E,102,16,2951),y(Ce,"class","svelte-14jb1jb"),b(Ce,E,104,18,3047),b(Ve,E,104,42,3071),y(U,"class","feature-text svelte-14jb1jb"),b(U,E,103,16,3002),y(q,"class","feature-item svelte-14jb1jb"),b(q,E,101,14,2908),y(te,"class","feature-icon svelte-14jb1jb"),b(te,E,110,16,3222),y(Y,"class","svelte-14jb1jb"),b(Y,E,112,18,3318),b(Fe,E,112,39,3339),y(ie,"class","feature-text svelte-14jb1jb"),b(ie,E,111,16,3273),y(W,"class","feature-item svelte-14jb1jb"),b(W,E,109,14,3179),y(v,"class","challenge-features svelte-14jb1jb"),b(v,E,92,12,2584),y(ae,"class","svelte-14jb1jb"),b(ae,E,119,14,3509),y(ye,"class","base-note svelte-14jb1jb"),b(ye,E,121,16,3593),y(be,"class","base-note svelte-14jb1jb"),b(be,E,122,16,3644),y(Se,"class","base-note svelte-14jb1jb"),b(Se,E,123,16,3694),y(we,"class","base-note svelte-14jb1jb"),b(we,E,124,16,3745),y(De,"class","base-note svelte-14jb1jb"),b(De,E,125,16,3796),y(ke,"class","base-note svelte-14jb1jb"),b(ke,E,126,16,3847),y(Ee,"class","base-note svelte-14jb1jb"),b(Ee,E,127,16,3898),y(Pe,"class","base-note svelte-14jb1jb"),b(Pe,E,128,16,3949),y(je,"class","base-note svelte-14jb1jb"),b(je,E,129,16,4e3),y(Te,"class","base-note svelte-14jb1jb"),b(Te,E,130,16,4051),y(O,"class","base-notes-grid svelte-14jb1jb"),b(O,E,120,14,3547),y(ne,"class","difficulty-info svelte-14jb1jb"),b(ne,E,118,12,3465),y(n,"class","start-challenge-button svelte-14jb1jb"),b(n,E,134,12,4151),y(c,"class","challenge-content"),b(c,E,89,10,2471),y(e,"class","challenge-card svelte-14jb1jb"),b(e,E,84,8,2309),y(t,"class","start-screen svelte-14jb1jb"),b(t,E,83,6,2274)},m:function(oe,ge){R(oe,t,ge),m(t,e),m(e,s),m(s,i),m(e,a),m(e,c),m(c,f),m(c,u),m(c,v),m(v,g),m(g,S),m(g,P),m(g,d),m(d,h),m(d,N),m(d,G),m(v,D),m(v,q),m(q,M),m(q,de),m(q,U),m(U,Ce),m(U,Ve),m(U,ve),m(v,pe),m(v,W),m(W,te),m(W,Ae),m(W,ie),m(ie,Y),m(ie,Fe),m(ie,He),m(c,X),m(c,ne),m(ne,ae),m(ne,_e),m(ne,O),m(O,ye),m(O,xe),m(O,be),m(O,$),m(O,Se),m(O,Ge),m(O,we),m(O,Le),m(O,De),m(O,Xe),m(O,ke),m(O,ze),m(O,Ee),m(O,$e),m(O,Pe),m(O,et),m(O,je),m(O,tt),m(O,Te),m(c,ut),m(c,n),x||(H=tn(n,"click",r[4],!1,!1,!1),x=!0)},p:qe,i:qe,o:qe,d:function(oe){oe&&_(t),x=!1,H()}};return L("SvelteRegisterBlock",{block:z,id:jn.name,type:"if",source:"(82:62) ",ctx:r}),z}function Tn(r){let t,e,s,i="âš ï¸",o,a,c,f="ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãŒå¿…è¦ã§ã™",l,u,v="é€£ç¶šãƒãƒ£ãƒ¬ãƒ³ã‚¸ã‚’é–‹å§‹ã™ã‚‹å‰ã«ã€ãƒã‚¤ã‚¯ã®å‹•ä½œç¢ºèªã‚’è¡Œã£ã¦ãã ã•ã„ã€‚",g,S,w="ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹",P,d;const h={c:function(){t=p("div"),e=p("div"),s=p("div"),s.textContent=i,o=T(),a=p("div"),c=p("h3"),c.textContent=f,l=T(),u=p("p"),u.textContent=v,g=T(),S=p("button"),S.textContent=w,this.h()},l:function(N){t=C(N,"DIV",{class:!0});var G=I(t);e=C(G,"DIV",{class:!0});var D=I(e);s=C(D,"DIV",{class:!0,"data-svelte-h":!0}),A(s)!=="svelte-dwi5dc"&&(s.textContent=i),o=j(D),a=C(D,"DIV",{class:!0});var q=I(a);c=C(q,"H3",{class:!0,"data-svelte-h":!0}),A(c)!=="svelte-17kvze2"&&(c.textContent=f),l=j(q),u=C(q,"P",{class:!0,"data-svelte-h":!0}),A(u)!=="svelte-t9m3nr"&&(u.textContent=v),g=j(q),S=C(q,"BUTTON",{class:!0,"data-svelte-h":!0}),A(S)!=="svelte-18xr2xp"&&(S.textContent=w),q.forEach(_),D.forEach(_),G.forEach(_),this.h()},h:function(){y(s,"class","warning-icon svelte-14jb1jb"),b(s,E,68,10,1777),y(c,"class","svelte-14jb1jb"),b(c,E,70,12,1864),y(u,"class","svelte-14jb1jb"),b(u,E,71,12,1897),y(S,"class","mic-test-button svelte-14jb1jb"),b(S,E,72,12,1949),y(a,"class","warning-content svelte-14jb1jb"),b(a,E,69,10,1822),y(e,"class","warning-card svelte-14jb1jb"),b(e,E,67,8,1740),y(t,"class","mic-test-required svelte-14jb1jb"),b(t,E,66,6,1700)},m:function(N,G){R(N,t,G),m(t,e),m(e,s),m(e,o),m(e,a),m(a,c),m(a,l),m(a,u),m(a,g),m(a,S),P||(d=tn(S,"click",r[5],!1,!1,!1),P=!0)},p:qe,i:qe,o:qe,d:function(N){N&&_(t),P=!1,d()}};return L("SvelteRegisterBlock",{block:h,id:Tn.name,type:"if",source:"(66:4) {#if isClient && !micTestCompleted}",ctx:r}),h}function In(r){let t,e,s,i="âš¡ é€£ç¶šãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ¢ãƒ¼ãƒ‰",o,a,c="ä¸­ç´šè€…å‘ã‘ï¼šã‚ˆã‚Šé›£ã—ã„åŸºéŸ³ã§8ã‚»ãƒƒã‚·ãƒ§ãƒ³é€£ç¶šæŒ‘æˆ¦",f,l,u,v;const g=[Tn,jn,Pn,En],S=[];function w(d,h){return d[2]&&!d[0]?0:d[2]&&d[0]&&d[1]?1:d[2]&&d[0]&&!d[1]?2:d[2]?-1:3}~(l=w(r))&&(u=S[l]=g[l](r));const P={c:function(){t=p("div"),e=p("div"),s=p("h1"),s.textContent=i,o=T(),a=p("p"),a.textContent=c,f=T(),u&&u.c(),this.h()},l:function(h){t=C(h,"DIV",{class:!0});var k=I(t);e=C(k,"DIV",{class:!0});var N=I(e);s=C(N,"H1",{class:!0,"data-svelte-h":!0}),A(s)!=="svelte-1nub9gt"&&(s.textContent=i),o=j(N),a=C(N,"P",{class:!0,"data-svelte-h":!0}),A(a)!=="svelte-16c1632"&&(a.textContent=c),N.forEach(_),f=j(k),u&&u.l(k),k.forEach(_),this.h()},h:function(){y(s,"class","page-title svelte-14jb1jb"),b(s,E,58,6,1493),y(a,"class","page-description svelte-14jb1jb"),b(a,E,59,6,1540),y(e,"class","page-header svelte-14jb1jb"),b(e,E,57,4,1461),y(t,"class","continuous-training-page svelte-14jb1jb"),b(t,E,54,2,1392)},m:function(h,k){R(h,t,k),m(t,e),m(e,s),m(e,o),m(e,a),m(t,f),~l&&S[l].m(t,null),v=!0},p:function(h,k){let N=l;l=w(h),l===N?~l&&S[l].p(h,k):(u&&(Rt(),Q(S[N],1,1,()=>{S[N]=null}),Vt()),~l?(u=S[l],u?u.p(h,k):(u=S[l]=g[l](h),u.c()),K(u,1),u.m(t,null)):u=null)},i:function(h){v||(K(u),v=!0)},o:function(h){Q(u),v=!1},d:function(h){h&&_(t),~l&&S[l].d()}};return L("SvelteRegisterBlock",{block:P,id:In.name,type:"slot",source:"(54:0) <PageLayout showBackButton={true}>",ctx:r}),P}function Ft(r){let t,e,s;e=new Mt({props:{showBackButton:!0,$$slots:{default:[In]},$$scope:{ctx:r}},$$inline:!0});const i={c:function(){t=T(),fe(e.$$.fragment),this.h()},l:function(a){Fn("svelte-13kpo59",document.head).forEach(_),t=j(a),ue(e.$$.fragment,a),this.h()},h:function(){document.title="é€£ç¶šãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ¢ãƒ¼ãƒ‰ - ç›¸å¯¾éŸ³æ„Ÿãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°"},m:function(a,c){R(a,t,c),le(e,a,c),s=!0},p:function(a,[c]){const f={};c&71&&(f.$$scope={dirty:c,ctx:a}),e.$set(f)},i:function(a){s||(K(e.$$.fragment,a),s=!0)},o:function(a){Q(e.$$.fragment,a),s=!1},d:function(a){a&&_(t),ce(e,a)}};return L("SvelteRegisterBlock",{block:i,id:Ft.name,type:"component",source:"",ctx:r}),i}function qn(r){console.error("ğŸš¨ [ContinuousTraining] ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¨ãƒ©ãƒ¼:",r)}function Nn(){console.log("âœ… [ContinuousTraining] ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†")}function xn(){console.log("ğŸ‰ [ContinuousTraining] 8ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†ï¼")}function fo(r,t,e){let{$$slots:s={},$$scope:i}=t;en("Page",s,[]);let o=!1,a=!1,c=!1;yt(()=>{e(2,c=!0),typeof localStorage<"u"&&(e(0,o=localStorage.getItem("mic-test-completed")==="true"),console.log("ğŸ¤ [ContinuousTraining] ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆå®Œäº†ãƒ•ãƒ©ã‚°:",o))});function f(g){console.error("ğŸš¨ [ContinuousTraining] ãƒã‚¤ã‚¯ãƒ­ãƒ•ã‚©ãƒ³ã‚¨ãƒ©ãƒ¼:",g),ft(`${ot}/microphone-test?mode=continuous`)}function l(){e(1,a=!1)}const u=[];Object.keys(t).forEach(g=>{!~u.indexOf(g)&&g.slice(0,2)!=="$$"&&g!=="slot"&&uo.warn(`<Page> was created with unknown prop '${g}'`)});const v=()=>ft(`${ot}/microphone-test?mode=continuous`);return r.$capture_state=()=>({onMount:yt,goto:ft,base:ot,PageLayout:Mt,TrainingCore:kn,micTestCompleted:o,showStartScreen:a,isClient:c,handleMicrophoneError:f,handleStorageError:qn,handleSessionComplete:Nn,handleAllComplete:xn,startChallenge:l}),r.$inject_state=g=>{"micTestCompleted"in g&&e(0,o=g.micTestCompleted),"showStartScreen"in g&&e(1,a=g.showStartScreen),"isClient"in g&&e(2,c=g.isClient)},t&&"$$inject"in t&&r.$inject_state(t.$$inject),[o,a,c,f,l,v]}class So extends Xt{constructor(t){super(t),Yt(this,t,fo,Ft,$t,{}),L("SvelteRegisterComponent",{component:this,tagName:"Page",options:t,id:Ft.name})}}export{So as component,yo as universal};
