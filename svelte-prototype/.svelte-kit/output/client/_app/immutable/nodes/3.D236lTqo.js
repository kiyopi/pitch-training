import{S as Re,i as ze,s as Fe,d,C as ge,m as Te,o as be,b as I,D as Ce,I as Ge,h as P,E as we,k as D,F as Me,l as Ke,M as Ue,c as i,y as u,K as Qe,e as h,f as E,G as U,j as _,R as Le,Q as Ze,L as He,a as le,T as _e,A as z,g as L,t as O,r as Oe,n as Ie}from"../chunks/BJp-dNlk.js";import"../chunks/IHki7fMi.js";import{p as Je}from"../chunks/c94MDw9J.js";import{g as We,b as Xe}from"../chunks/C3d2KJZ2.js";import{P as Ye,C as et}from"../chunks/DZHPMXgl.js";import{a as ue,P as tt,b as st}from"../chunks/OKYWahzq.js";const nt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,{document:qe}=nt;function lt(n){let e,t="ãƒã‚¤ã‚¯ã®ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã—ã¾ã™",p,s,a="ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆé–‹å§‹ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãƒã‚¤ã‚¯ã®ä½¿ç”¨ã‚’è¨±å¯ã—ã¦ãã ã•ã„",l,m;function C(o,T){if(o[0]==="pending")return rt;if(o[0]==="denied")return at;if(o[0]==="initial")return it}let w=C(n),r=w&&w(n);return{c(){e=_("h3"),e.textContent=t,p=D(),s=_("p"),s.textContent=a,l=D(),r&&r.c(),m=Oe(),this.h()},l(o){e=h(o,"H3",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-gfi16f"&&(e.textContent=t),p=P(o),s=h(o,"P",{class:!0,"data-svelte-h":!0}),U(s)!=="svelte-1w19y1h"&&(s.textContent=a),l=P(o),r&&r.l(o),m=Oe(),this.h()},h(){u(e,"class","instructions-title svelte-prem1"),u(s,"class","instructions-description svelte-prem1")},m(o,T){I(o,e,T),I(o,p,T),I(o,s,T),I(o,l,T),r&&r.m(o,T),I(o,m,T)},p(o,T){w===(w=C(o))&&r?r.p(o,T):(r&&r.d(1),r=w&&w(o),r&&(r.c(),r.m(m.parentNode,m)))},d(o){o&&(d(e),d(p),d(s),d(l),d(m)),r&&r.d(o)}}}function ot(n){let e,t="ãƒã‚¤ã‚¯æº–å‚™å®Œäº†",p,s,a="éŸ³é‡ã‚’èª¿æ•´ã—ã¦ã‹ã‚‰ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’é–‹å§‹ã—ã¦ãã ã•ã„",l,m,C,w,r,o=n[9]&&(n[9].isIOS||n[8].includes("ãã®ä»–")),T,M,c,g,V,S,R,F,A,q,Y="-20dB",K,B,J,k,$="+10dB",G,x,Q=n[7]?"å†ç”Ÿä¸­...":"ãƒ‰(C4)ã‚’å†ç”Ÿ",j,re,f,b,W,X=n[6].toFixed(1)+"",ce,de,ye,Z,te,Se="0.1x",ke,H,Pe,se,xe="10.0x",pe,ne,ee,Ve="ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–‹å§‹",De,Be,N=o&&je(n);return{c(){e=_("h3"),e.textContent=t,p=D(),s=_("p"),s.textContent=a,l=D(),m=_("div"),C=_("span"),w=O(n[8]),r=D(),N&&N.c(),T=D(),M=_("div"),c=_("div"),g=_("label"),V=O("åŸºéŸ³éŸ³é‡: "),S=O(n[5]),R=O("dB"),F=D(),A=_("div"),q=_("span"),q.textContent=Y,K=D(),B=_("input"),J=D(),k=_("span"),k.textContent=$,G=D(),x=_("button"),j=O(Q),re=D(),f=_("div"),b=_("label"),W=O("ãƒã‚¤ã‚¯æ„Ÿåº¦: "),ce=O(X),de=O("x"),ye=D(),Z=_("div"),te=_("span"),te.textContent=Se,ke=D(),H=_("input"),Pe=D(),se=_("span"),se.textContent=xe,pe=D(),ne=_("div"),ee=_("button"),ee.textContent=Ve,this.h()},l(v){e=h(v,"H3",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-11dam81"&&(e.textContent=t),p=P(v),s=h(v,"P",{class:!0,"data-svelte-h":!0}),U(s)!=="svelte-1pr7rqg"&&(s.textContent=a),l=P(v),m=h(v,"DIV",{class:!0});var y=E(m);C=h(y,"SPAN",{class:!0});var Ae=E(C);w=L(Ae,n[8]),Ae.forEach(d),y.forEach(d),r=P(v),N&&N.l(v),T=P(v),M=h(v,"DIV",{class:!0});var me=E(M);c=h(me,"DIV",{class:!0});var oe=E(c);g=h(oe,"LABEL",{class:!0});var fe=E(g);V=L(fe,"åŸºéŸ³éŸ³é‡: "),S=L(fe,n[5]),R=L(fe,"dB"),fe.forEach(d),F=P(oe),A=h(oe,"DIV",{class:!0});var ie=E(A);q=h(ie,"SPAN",{class:!0,"data-svelte-h":!0}),U(q)!=="svelte-5u5ai6"&&(q.textContent=Y),K=P(ie),B=h(ie,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),J=P(ie),k=h(ie,"SPAN",{class:!0,"data-svelte-h":!0}),U(k)!=="svelte-ptz1f5"&&(k.textContent=$),ie.forEach(d),G=P(oe),x=h(oe,"BUTTON",{class:!0});var $e=E(x);j=L($e,Q),$e.forEach(d),oe.forEach(d),re=P(me),f=h(me,"DIV",{class:!0});var ve=E(f);b=h(ve,"LABEL",{class:!0});var he=E(b);W=L(he,"ãƒã‚¤ã‚¯æ„Ÿåº¦: "),ce=L(he,X),de=L(he,"x"),he.forEach(d),ye=P(ve),Z=h(ve,"DIV",{class:!0});var ae=E(Z);te=h(ae,"SPAN",{class:!0,"data-svelte-h":!0}),U(te)!=="svelte-1m4xt2o"&&(te.textContent=Se),ke=P(ae),H=h(ae,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Pe=P(ae),se=h(ae,"SPAN",{class:!0,"data-svelte-h":!0}),U(se)!=="svelte-1jlarki"&&(se.textContent=xe),ae.forEach(d),ve.forEach(d),me.forEach(d),pe=P(v),ne=h(v,"DIV",{class:!0});var Ne=E(ne);ee=h(Ne,"BUTTON",{class:!0,"data-svelte-h":!0}),U(ee)!=="svelte-kae9rs"&&(ee.textContent=Ve),Ne.forEach(d),this.h()},h(){u(e,"class","ready-title svelte-prem1"),u(s,"class","ready-description svelte-prem1"),u(C,"class","device-label svelte-prem1"),u(m,"class","device-info svelte-prem1"),u(g,"class","volume-label svelte-prem1"),u(q,"class","slider-min svelte-prem1"),u(B,"type","range"),u(B,"min","-20"),u(B,"max","10"),u(B,"step","1"),u(B,"class","volume-slider svelte-prem1"),u(k,"class","slider-max svelte-prem1"),u(A,"class","volume-slider-container svelte-prem1"),u(x,"class","base-tone-test-button svelte-prem1"),x.disabled=n[7],u(c,"class","volume-control-section svelte-prem1"),u(b,"class","volume-label svelte-prem1"),u(te,"class","slider-min svelte-prem1"),u(H,"type","range"),u(H,"min","0.1"),u(H,"max","10.0"),u(H,"step","0.1"),u(H,"class","volume-slider svelte-prem1"),u(se,"class","slider-max svelte-prem1"),u(Z,"class","volume-slider-container svelte-prem1"),u(f,"class","volume-control-section svelte-prem1"),u(M,"class","volume-controls svelte-prem1"),u(ee,"class","training-start-button enabled svelte-prem1"),u(ne,"class","training-start-button-area svelte-prem1")},m(v,y){I(v,e,y),I(v,p,y),I(v,s,y),I(v,l,y),I(v,m,y),i(m,C),i(C,w),I(v,r,y),N&&N.m(v,y),I(v,T,y),I(v,M,y),i(M,c),i(c,g),i(g,V),i(g,S),i(g,R),i(c,F),i(c,A),i(A,q),i(A,K),i(A,B),_e(B,n[5]),i(A,J),i(A,k),i(c,G),i(c,x),i(x,j),i(M,re),i(M,f),i(f,b),i(b,W),i(b,ce),i(b,de),i(f,ye),i(f,Z),i(Z,te),i(Z,ke),i(Z,H),_e(H,n[6]),i(Z,Pe),i(Z,se),I(v,pe,y),I(v,ne,y),i(ne,ee),De||(Be=[z(B,"change",n[20]),z(B,"input",n[20]),z(B,"input",n[14]),z(x,"click",n[15]),z(H,"change",n[21]),z(H,"input",n[21]),z(H,"input",n[16]),z(ee,"click",n[11])],De=!0)},p(v,y){y&256&&le(w,v[8]),y&768&&(o=v[9]&&(v[9].isIOS||v[8].includes("ãã®ä»–"))),o?N?N.p(v,y):(N=je(v),N.c(),N.m(T.parentNode,T)):N&&(N.d(1),N=null),y&32&&le(S,v[5]),y&32&&_e(B,v[5]),y&128&&Q!==(Q=v[7]?"å†ç”Ÿä¸­...":"ãƒ‰(C4)ã‚’å†ç”Ÿ")&&le(j,Q),y&128&&(x.disabled=v[7]),y&64&&X!==(X=v[6].toFixed(1)+"")&&le(ce,X),y&64&&_e(H,v[6])},d(v){v&&(d(e),d(p),d(s),d(l),d(m),d(r),d(T),d(M),d(pe),d(ne)),N&&N.d(v),De=!1,He(Be)}}}function it(n){let e,t,p="ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹",s,a;return{c(){e=_("div"),t=_("button"),t.textContent=p,this.h()},l(l){e=h(l,"DIV",{class:!0});var m=E(e);t=h(m,"BUTTON",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-caex95"&&(t.textContent=p),m.forEach(d),this.h()},h(){u(t,"class","mic-test-button start svelte-prem1"),u(e,"class","mic-test-button-area svelte-prem1")},m(l,m){I(l,e,m),i(e,t),s||(a=z(t,"click",n[10]),s=!0)},p:Ie,d(l){l&&d(e),s=!1,a()}}}function at(n){let e,t,p="ãƒã‚¤ã‚¯è¨±å¯ã‚’å†è©¦è¡Œ",s,a;return{c(){e=_("div"),t=_("button"),t.textContent=p,this.h()},l(l){e=h(l,"DIV",{class:!0});var m=E(e);t=h(m,"BUTTON",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-1p3n8nt"&&(t.textContent=p),m.forEach(d),this.h()},h(){u(t,"class","mic-test-button retry svelte-prem1"),u(e,"class","mic-test-button-area svelte-prem1")},m(l,m){I(l,e,m),i(e,t),s||(a=z(t,"click",n[10]),s=!0)},p:Ie,d(l){l&&d(e),s=!1,a()}}}function rt(n){let e,t="ãƒã‚¤ã‚¯æº–å‚™ä¸­...";return{c(){e=_("p"),e.textContent=t,this.h()},l(p){e=h(p,"P",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-1vb5g92"&&(e.textContent=t),this.h()},h(){u(e,"class","status-text svelte-prem1")},m(p,s){I(p,e,s)},p:Ie,d(p){p&&d(e)}}}function je(n){var B,J;let e,t,p=n[9].isIOS?`${n[9].deviceType}å°‚ç”¨è¨­å®š`:"é«˜æ„Ÿåº¦è¨­å®šï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰",s,a,l,m,C="é«˜æ„Ÿåº¦è¨­å®š",w,r,o="è¶…é«˜æ„Ÿåº¦è¨­å®š",T,M,c,g,V=((B=n[9])==null?void 0:B.divisor)+"",S,R,F=((J=n[9])==null?void 0:J.gainCompensation)+"",A,q,Y,K;return{c(){e=_("div"),t=_("h4"),s=O(p),a=D(),l=_("div"),m=_("button"),m.textContent=C,w=D(),r=_("button"),r.textContent=o,T=D(),M=_("div"),c=_("small"),g=O("ä»•æ§˜æ›¸æº–æ‹ : divisor="),S=O(V),R=O(", gain="),A=O(F),q=O("x"),this.h()},l(k){e=h(k,"DIV",{class:!0});var $=E(e);t=h($,"H4",{class:!0});var G=E(t);s=L(G,p),G.forEach(d),a=P($),l=h($,"DIV",{class:!0});var x=E(l);m=h(x,"BUTTON",{class:!0,"data-svelte-h":!0}),U(m)!=="svelte-1skmm1s"&&(m.textContent=C),w=P(x),r=h(x,"BUTTON",{class:!0,"data-svelte-h":!0}),U(r)!=="svelte-1lgelbb"&&(r.textContent=o),x.forEach(d),T=P($),M=h($,"DIV",{class:!0});var Q=E(M);c=h(Q,"SMALL",{class:!0});var j=E(c);g=L(j,"ä»•æ§˜æ›¸æº–æ‹ : divisor="),S=L(j,V),R=L(j,", gain="),A=L(j,F),q=L(j,"x"),j.forEach(d),Q.forEach(d),$.forEach(d),this.h()},h(){u(t,"class","preset-title svelte-prem1"),u(m,"class","preset-button svelte-prem1"),u(r,"class","preset-button svelte-prem1"),u(l,"class","preset-buttons svelte-prem1"),u(c,"class","svelte-prem1"),u(M,"class","preset-specs svelte-prem1"),u(e,"class","preset-section svelte-prem1")},m(k,$){I(k,e,$),i(e,t),i(t,s),i(e,a),i(e,l),i(l,m),i(l,w),i(l,r),i(e,T),i(e,M),i(M,c),i(c,g),i(c,S),i(c,R),i(c,A),i(c,q),Y||(K=[z(m,"click",n[18]),z(r,"click",n[19])],Y=!0)},p(k,$){var G,x;$&512&&p!==(p=k[9].isIOS?`${k[9].deviceType}å°‚ç”¨è¨­å®š`:"é«˜æ„Ÿåº¦è¨­å®šï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰")&&le(s,p),$&512&&V!==(V=((G=k[9])==null?void 0:G.divisor)+"")&&le(S,V),$&512&&F!==(F=((x=k[9])==null?void 0:x.gainCompensation)+"")&&le(A,F)},d(k){k&&d(e),Y=!1,He(K)}}}function ct(n){let e;function t(a,l){return a[0]==="granted"?ot:lt}let p=t(n),s=p(n);return{c(){e=_("div"),s.c(),this.h()},l(a){e=h(a,"DIV",{class:!0});var l=E(e);s.l(l),l.forEach(d),this.h()},h(){u(e,"class","training-mode-content svelte-prem1")},m(a,l){I(a,e,l),s.m(e,null)},p(a,l){p===(p=t(a))&&s?s.p(a,l):(s.d(1),s=p(a),s&&(s.c(),s.m(e,null)))},d(a){a&&d(e),s.d()}}}function ut(n){let e,t,p='<div class="mic-test-header svelte-prem1"><div class="mic-icon svelte-prem1"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" x2="12" y1="19" y2="22"></line><line x1="8" x2="16" y1="22" y2="22"></line></svg></div> <div><h1 class="mic-test-title svelte-prem1">ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆ</h1> <p class="mic-test-description svelte-prem1">éŸ³æ„Ÿãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’å§‹ã‚ã‚‹å‰ã«ã€ãƒã‚¤ã‚¯ã®å‹•ä½œã‚’ç¢ºèªã—ã¾ã™</p></div></div>',s,a,l,m,C,w,r,o,T;l=new et({props:{variant:"default",padding:"lg",$$slots:{default:[ct]},$$scope:{ctx:n}}}),C=new tt({props:{frequency:n[2],note:n[3],volume:n[1],isMuted:n[0]!=="granted",muteMessage:"ãƒã‚¤ã‚¯è¨±å¯å¾Œã«é–‹å§‹"}});let M={isActive:n[0]==="granted",className:"pitch-detector-content",debugMode:!1};return o=new st({props:M}),n[22](o),o.$on("pitchUpdate",n[12]),o.$on("stateChange",pt),o.$on("error",n[13]),{c(){e=_("div"),t=_("div"),t.innerHTML=p,s=D(),a=_("div"),Me(l.$$.fragment),m=D(),Me(C.$$.fragment),w=D(),r=_("div"),Me(o.$$.fragment),this.h()},l(c){e=h(c,"DIV",{class:!0});var g=E(e);t=h(g,"DIV",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-4qcd63"&&(t.innerHTML=p),s=P(g),a=h(g,"DIV",{class:!0});var V=E(a);we(l.$$.fragment,V),V.forEach(d),m=P(g),we(C.$$.fragment,g),w=P(g),r=h(g,"DIV",{style:!0});var S=E(r);we(o.$$.fragment,S),S.forEach(d),g.forEach(d),this.h()},h(){u(t,"class","header svelte-prem1"),u(a,"class","training-mode-info svelte-prem1"),Qe(r,"display","none"),u(e,"class","microphone-test svelte-prem1")},m(c,g){I(c,e,g),i(e,t),i(e,s),i(e,a),Ce(l,a,null),i(e,m),Ce(C,e,null),i(e,w),i(e,r),Ce(o,r,null),T=!0},p(c,g){const V={};g&1073742817&&(V.$$scope={dirty:g,ctx:c}),l.$set(V);const S={};g&4&&(S.frequency=c[2]),g&8&&(S.note=c[3]),g&2&&(S.volume=c[1]),g&1&&(S.isMuted=c[0]!=="granted"),C.$set(S);const R={};g&1&&(R.isActive=c[0]==="granted"),o.$set(R)},i(c){T||(be(l.$$.fragment,c),be(C.$$.fragment,c),be(o.$$.fragment,c),T=!0)},o(c){Te(l.$$.fragment,c),Te(C.$$.fragment,c),Te(o.$$.fragment,c),T=!1},d(c){c&&d(e),ge(l),ge(C),n[22](null),ge(o)}}}function dt(n){let e,t,p;return t=new Ye({props:{showBackButton:!0,$$slots:{default:[ut]},$$scope:{ctx:n}}}),{c(){e=D(),Me(t.$$.fragment),this.h()},l(s){Ge("svelte-8st1fo",qe.head).forEach(d),e=P(s),we(t.$$.fragment,s),this.h()},h(){qe.title="ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆ - ç›¸å¯¾éŸ³æ„Ÿãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°"},m(s,a){I(s,e,a),Ce(t,s,a),p=!0},p(s,[a]){const l={};a&1073742847&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){p||(be(t.$$.fragment,s),p=!0)},o(s){Te(t.$$.fragment,s),p=!1},d(s){s&&d(e),ge(t,s)}}}function pt(n){}async function Ee(){if(typeof window<"u"&&window.Tone){const n=window.Tone.context||window.Tone.getContext();if(n&&n.state==="suspended")return console.log("ğŸ”„ [MicTest] AudioContext suspendedæ¤œå‡º - å†é–‹ä¸­..."),await n.resume(),console.log("âœ… [MicTest] AudioContextå†é–‹å®Œäº†"),!0}return!1}function mt(n,e,t){let p;Ke(n,Je,f=>t(25,p=f));let s="random";Ue(()=>{p.url.searchParams.has("mode")&&(s=p.url.searchParams.get("mode")||"random")});let a="initial",l=0,m=0,C="ãƒ¼ãƒ¼",w=null,r=0,o=1,T=null,M=!1,c="",g=null;Ue(()=>{t(9,g=ue.getPlatformSpecs()),t(8,c=`${g.deviceType}æ¤œå‡º`),t(5,r=-6),console.log(`ğŸ” [MicTest] ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±: ${c}`,navigator.userAgent),console.log(`ğŸ” [MicTest] ã‚¿ãƒƒãƒã‚µãƒãƒ¼ãƒˆ: ${"ontouchend"in document}`),console.log(`ğŸ“Š [MicTest] ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ä»•æ§˜é©ç”¨: divisor=${g.divisor}, gain=${g.gainCompensation}`)});const V={random:{name:"ãƒ©ãƒ³ãƒ€ãƒ åŸºéŸ³ãƒ¢ãƒ¼ãƒ‰",description:"10ç¨®é¡ã®åŸºéŸ³ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«é¸æŠã—ã¦ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°",color:"green",path:"/training/random"},continuous:{name:"é€£ç¶šãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ¢ãƒ¼ãƒ‰",description:"é¸æŠã—ãŸå›æ•°ã ã‘é€£ç¶šã§å®Ÿè¡Œã—ã€ç·åˆè©•ä¾¡ã‚’ç¢ºèª",color:"orange",path:"/training/continuous"},chromatic:{name:"12éŸ³éšãƒ¢ãƒ¼ãƒ‰",description:"ã‚¯ãƒ­ãƒãƒãƒƒã‚¯ã‚¹ã‚±ãƒ¼ãƒ«ã®ä¸Šè¡Œãƒ»ä¸‹è¡Œã§å®Œå…¨åˆ¶è¦‡",color:"purple",path:"/training/chromatic"}},S=V[s]||V.random;async function R(){var f;t(0,a="pending");try{if(console.log("ğŸ¤ [MicTest] ãƒã‚¤ã‚¯è¨±å¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆé–‹å§‹"),!((f=navigator.mediaDevices)!=null&&f.getUserMedia)){t(0,a="denied"),console.error("âŒ [MicTest] getUserMediaãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“");return}const b=await ue.initialize();if(console.log("âœ… [MicTest] AudioManager ãƒªã‚½ãƒ¼ã‚¹å–å¾—å®Œäº†"),b.mediaStream&&b.audioContext)t(0,a="granted"),console.log("âœ… [MicTest] ãƒã‚¤ã‚¯è¨±å¯å®Œäº†"),await Ee(),await $(),setTimeout(async()=>{w&&(console.log("ğŸ™ï¸ [MicTest] PitchDetectoråˆæœŸåŒ–é–‹å§‹"),await Ee(),await w.initialize(),console.log("âœ… [MicTest] PitchDetectoråˆæœŸåŒ–å®Œäº†"),console.log("ğŸ¯ [MicTest] PitchDetector isActiveãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã§è‡ªå‹•æ¤œå‡ºé–‹å§‹"))},1e3);else throw new Error("ãƒªã‚½ãƒ¼ã‚¹å–å¾—å¤±æ•—")}catch(b){console.error("âŒ [MicTest] ãƒã‚¤ã‚¯è¨±å¯ã‚¨ãƒ©ãƒ¼:",b),t(0,a=((b==null?void 0:b.name)==="NotAllowedError","denied"))}}function F(){console.log("ğŸš€ [MicTest] ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–‹å§‹ - ãƒ©ãƒ³ãƒ€ãƒ åŸºéŸ³ãƒ¢ãƒ¼ãƒ‰ã¸é·ç§»"),localStorage.setItem("mic-test-completed","true"),console.log("âœ… [MicTest] ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆå®Œäº†ãƒ•ãƒ©ã‚°ã‚’ä¿å­˜"),We(`${Xe}${S.path}?from=microphone-test`)}function A(f){const{frequency:b,note:W,volume:X,rawVolume:ce,clarity:de}=f.detail;t(2,m=b),t(3,C=W),t(1,l=X)}function q(f){console.error("âŒ [MicTest] PitchDetectorã‚¨ãƒ©ãƒ¼:",f.detail);const{error:b,reason:W,recovery:X}=f.detail;W==="mediastream_ended"&&X==="restart_required"&&(console.log("ğŸ”„ [MicTest] MediaStreamçµ‚äº†æ¤œå‡º - è‡ªå‹•å¾©æ—§é–‹å§‹"),t(0,a="initial"),t(1,l=0),t(2,m=0),t(3,C="ãƒ¼ãƒ¼"),console.log("âš ï¸ [MicTest] ãƒã‚¤ã‚¯å†è¨±å¯ãŒå¿…è¦ã§ã™"))}async function Y(){try{if(console.log("ğŸ¹ [MicTest] åŸºéŸ³ãƒ†ã‚¹ãƒˆåˆæœŸåŒ–é–‹å§‹"),typeof window<"u"){if(!window.Tone){console.log("ğŸ“¦ [MicTest] Tone.jså‹•çš„èª­ã¿è¾¼ã¿é–‹å§‹");const f=document.createElement("script");f.src="https://unpkg.com/tone@latest/build/Tone.js",document.head.appendChild(f),await new Promise((b,W)=>{f.onload=b,f.onerror=W}),console.log("âœ… [MicTest] Tone.jsèª­ã¿è¾¼ã¿å®Œäº†")}await window.Tone.start(),T=new window.Tone.Sampler({urls:{C4:"C4.mp3"},baseUrl:"https://tonejs.github.io/audio/salamander/",release:1.5,onload:()=>{console.log("âœ… [MicTest] åŸºéŸ³ã‚µãƒ³ãƒ—ãƒ©ãƒ¼èª­ã¿è¾¼ã¿å®Œäº†")},onerror:f=>{console.error("âŒ [MicTest] åŸºéŸ³ã‚µãƒ³ãƒ—ãƒ©ãƒ¼èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:",f)}}).toDestination(),K()}else console.warn("âš ï¸ [MicTest] windowæœªå®šç¾© - åŸºéŸ³ãƒ†ã‚¹ãƒˆç„¡åŠ¹")}catch(f){console.error("âŒ [MicTest] åŸºéŸ³ãƒ†ã‚¹ãƒˆåˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",f)}}function K(){T&&(T.volume.value=r,console.log(`ğŸ”Š [MicTest] åŸºéŸ³éŸ³é‡è¨­å®š: ${r}dB`))}async function B(){if(!(!T||M))try{t(7,M=!0),console.log("ğŸµ [MicTest] åŸºéŸ³å†ç”Ÿé–‹å§‹: C4"),await Ee()&&console.log("ğŸ”Š [MicTest] AudioContextå†é–‹å¾Œã«åŸºéŸ³å†ç”Ÿå®Ÿè¡Œ"),await T.triggerAttackRelease("C4",2,window.Tone.now(),.7),setTimeout(()=>{t(7,M=!1),console.log("âœ… [MicTest] åŸºéŸ³å†ç”Ÿå®Œäº†")},2e3)}catch(f){console.error("âŒ [MicTest] åŸºéŸ³å†ç”Ÿã‚¨ãƒ©ãƒ¼:",f),t(7,M=!1)}}function J(){try{ue.setSensitivity(o),console.log(`ğŸ¤ [MicTest] ãƒã‚¤ã‚¯æ„Ÿåº¦æ›´æ–°å®Œäº†: ${o}x`)}catch(f){console.error("âŒ [MicTest] ãƒã‚¤ã‚¯æ„Ÿåº¦èª¿æ•´ã‚¨ãƒ©ãƒ¼:",f)}}function k(f){const b=ue.getPlatformSpecs();switch(f){case"ipad-high":t(5,r=3),t(6,o=b.gainCompensation*2);break;case"ipad-extreme":t(5,r=7),t(6,o=b.gainCompensation*4);break;default:return}K(),J(),console.log(`ğŸ¯ [MicTest] ${f} ãƒ—ãƒªã‚»ãƒƒãƒˆé©ç”¨: åŸºéŸ³${r}dB, ãƒã‚¤ã‚¯${o}x`),console.log(`ğŸ“Š [MicTest] ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ä»•æ§˜: divisor=${b.divisor}, gainCompensation=${b.gainCompensation}, ãƒ‡ãƒã‚¤ã‚¹=${b.deviceType}`)}async function $(){await Y();try{t(6,o=ue.getSensitivity()),console.log(`ğŸ¤ [MicTest] ç¾åœ¨ã®ãƒã‚¤ã‚¯æ„Ÿåº¦å–å¾—: ${o}x`)}catch(f){console.warn("âš ï¸ [MicTest] ãƒã‚¤ã‚¯æ„Ÿåº¦å–å¾—ã‚¨ãƒ©ãƒ¼:",f)}}const G=()=>k("ipad-high"),x=()=>k("ipad-extreme");function Q(){r=Le(this.value),t(5,r)}function j(){o=Le(this.value),t(6,o)}function re(f){Ze[f?"unshift":"push"](()=>{w=f,t(4,w)})}return[a,l,m,C,w,r,o,M,c,g,R,F,A,q,K,B,J,k,G,x,Q,j,re]}class bt extends Re{constructor(e){super(),ze(this,e,mt,dt,Fe,{})}}export{bt as component};
