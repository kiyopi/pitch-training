import{S as nt,i as st,s as ot,d as Z,n as Te,a as lt,D as He,b as h,G as te,z as m,f as K,g as a,h as p,j as w,k as C,m as S,o as b,p as I,Z as qt,e as le,O as Pe,A as $,l as M,t as F,E as rt,q as ge,r as oe,u as ne,w as pe,F as zt,x as _e,y as we,L as Oe,M as Ue,B as Ve,C as Be,J as Le,K as ut,H as Ge}from"../chunks/Dujr-1LT.js";import{g as ft}from"../chunks/D0QH3NT1.js";import"../chunks/B_rl9Jj9.js";import{P as dt,B as Se,C as Ce}from"../chunks/BlOhcc-l.js";const{console:Mt}=ft,Fe="src/lib/components/VolumeBar.svelte";function We(o){let e,t,r,i,n,s;const c={c:function(){e=b("div"),t=b("div"),r=b("div"),i=I(),n=b("div"),this.h()},l:function(u){e=w(u,"DIV",{class:!0});var f=C(e);t=w(f,"DIV",{class:!0,style:!0});var y=C(t);r=w(y,"DIV",{class:!0,style:!0}),C(r).forEach(h),y.forEach(h),i=S(f),n=w(f,"DIV",{class:!0,style:!0}),C(n).forEach(h),f.forEach(h),this.h()},h:function(){m(r,"class","volume-bar-fill"),te(r,"position","absolute"),te(r,"top","0"),te(r,"left","0"),te(r,"height","100%"),p(r,Fe,52,4,1646),m(t,"class","volume-bar-bg"),te(t,"height",o[1]),te(t,"border-radius","9999px"),te(t,"background-color","#e2e8f0"),te(t,"position","relative"),te(t,"overflow","hidden"),p(t,Fe,51,2,1500),m(n,"class","threshold-indicator svelte-13z7ppf"),te(n,"position","absolute"),te(n,"top","0"),te(n,"left",o[0]+"%"),te(n,"width","2px"),te(n,"height",o[1]),te(n,"background-color","#64748b"),te(n,"border-radius","1px"),p(n,Fe,60,2,1825),m(e,"class",s="volume-bar-container "+o[2]+" svelte-13z7ppf"),p(e,Fe,50,0,1451)},m:function(u,f){K(u,e,f),a(e,t),a(t,r),o[5](r),a(e,i),a(e,n)},p:function(u,[f]){f&2&&te(t,"height",u[1]),f&1&&te(n,"left",u[0]+"%"),f&2&&te(n,"height",u[1]),f&4&&s!==(s="volume-bar-container "+u[2]+" svelte-13z7ppf")&&m(e,"class",s)},i:Te,o:Te,d:function(u){u&&h(e),o[5](null)}};return Z("SvelteRegisterBlock",{block:c,id:We.name,type:"component",source:"",ctx:o}),c}function Ft(o,e,t){let{$$slots:r={},$$scope:i}=e;lt("VolumeBar",r,[]);let{volume:n=0}=e,{threshold:s=30}=e,{height:c="12px"}=e,{className:d=""}=e,u;function f(l){return l<s?"#94a3b8":l<60?"#10b981":l<80?"#f59e0b":"#ef4444"}function y(l){if(u){const v=Math.max(0,Math.min(100,l)),D=f(v);(!window.volumeBarLastUpdate||Math.abs(window.volumeBarLastUpdate-v)>10)&&(console.log("VolumeBar更新:",v.toFixed(1),"%","color:",D),window.volumeBarLastUpdate=v),t(3,u.style.width=`${v}%`,u),t(3,u.style.backgroundColor=D,u)}}He(()=>{u&&(t(3,u.style.width="0%",u),t(3,u.style.backgroundColor="#94a3b8",u),t(3,u.style.height=c,u),t(3,u.style.borderRadius="9999px",u),t(3,u.style.transition="all 0.1s ease-out",u))});const _=["volume","threshold","height","className"];Object.keys(e).forEach(l=>{!~_.indexOf(l)&&l.slice(0,2)!=="$$"&&l!=="slot"&&Mt.warn(`<VolumeBar> was created with unknown prop '${l}'`)});function E(l){qt[l?"unshift":"push"](()=>{u=l,t(3,u)})}return o.$$set=l=>{"volume"in l&&t(4,n=l.volume),"threshold"in l&&t(0,s=l.threshold),"height"in l&&t(1,c=l.height),"className"in l&&t(2,d=l.className)},o.$capture_state=()=>({onMount:He,volume:n,threshold:s,height:c,className:d,barElement:u,getVolumeColor:f,updateVolumeBar:y}),o.$inject_state=l=>{"volume"in l&&t(4,n=l.volume),"threshold"in l&&t(0,s=l.threshold),"height"in l&&t(1,c=l.height),"className"in l&&t(2,d=l.className),"barElement"in l&&t(3,u=l.barElement)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),o.$$.update=()=>{o.$$.dirty&16&&y(n)},[s,c,d,u,n,E]}class mt extends nt{constructor(e){super(e),st(this,e,Ft,We,ot,{volume:4,threshold:0,height:1,className:2}),Z("SvelteRegisterComponent",{component:this,tagName:"VolumeBar",options:e,id:We.name})}get volume(){throw new Error("<VolumeBar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set volume(e){throw new Error("<VolumeBar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get threshold(){throw new Error("<VolumeBar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set threshold(e){throw new Error("<VolumeBar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get height(){throw new Error("<VolumeBar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set height(e){throw new Error("<VolumeBar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get className(){throw new Error("<VolumeBar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set className(e){throw new Error("<VolumeBar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const he="src/lib/components/PitchDisplay.svelte";function Je(o){let e,t,r="精度",i,n,s,c,d,u,f,y=Ze(o[3])+"",_,E,l,v=o[3]>0?"+":"",D,N=o[3].toFixed(1)+"",V,R;const J={c:function(){e=b("div"),t=b("div"),t.textContent=r,i=I(),n=b("div"),s=b("div"),c=I(),d=b("div"),u=I(),f=b("div"),_=F(y),E=I(),l=b("div"),D=F(v),V=F(N),R=F("%"),this.h()},l:function(P){e=w(P,"DIV",{class:!0});var B=C(e);t=w(B,"DIV",{class:!0,"data-svelte-h":!0}),$(t)!=="svelte-4oi8f7"&&(t.textContent=r),i=S(B),n=w(B,"DIV",{class:!0});var A=C(n);s=w(A,"DIV",{class:!0,style:!0}),C(s).forEach(h),c=S(A),d=w(A,"DIV",{class:!0}),C(d).forEach(h),A.forEach(h),u=S(B),f=w(B,"DIV",{class:!0,style:!0});var z=C(f);_=M(z,y),z.forEach(h),E=S(B),l=w(B,"DIV",{class:!0});var T=C(l);D=M(T,v),V=M(T,N),R=M(T,"%"),T.forEach(h),B.forEach(h),this.h()},h:function(){m(t,"class","label svelte-17lpbmi"),p(t,he,70,6,1917),m(s,"class","accuracy-bar svelte-17lpbmi"),te(s,"background-color",Ie(o[3])),te(s,"width",Math.abs(o[3])+"%"),p(s,he,72,8,1996),m(d,"class","accuracy-center svelte-17lpbmi"),p(d,he,73,8,2122),m(n,"class","accuracy-bar-container svelte-17lpbmi"),p(n,he,71,6,1951),m(f,"class","accuracy-text svelte-17lpbmi"),te(f,"color",Ie(o[3])),p(f,he,75,6,2177),m(l,"class","accuracy-value svelte-17lpbmi"),p(l,he,78,6,2307),m(e,"class","accuracy-display svelte-17lpbmi"),p(e,he,69,4,1880)},m:function(P,B){K(P,e,B),a(e,t),a(e,i),a(e,n),a(n,s),a(n,c),a(n,d),a(e,u),a(e,f),a(f,_),a(e,E),a(e,l),a(l,D),a(l,V),a(l,R)},p:function(P,B){B&8&&te(s,"background-color",Ie(P[3])),B&8&&te(s,"width",Math.abs(P[3])+"%"),B&8&&y!==(y=Ze(P[3])+"")&&le(_,y),B&8&&te(f,"color",Ie(P[3])),B&8&&v!==(v=P[3]>0?"+":"")&&le(D,v),B&8&&N!==(N=P[3].toFixed(1)+"")&&le(V,N)},d:function(P){P&&h(e)}};return Z("SvelteRegisterBlock",{block:J,id:Je.name,type:"if",source:"(69:2) {#if isDetecting && currentNote}",ctx:o}),J}function Ke(o){let e,t,r,i="目標音程",n,s,c=o[6](o[1])+"",d,u,f,y,_="現在の音程",E,l,v=(o[4]&&o[6](o[2])||"---")+"",D,N,V,R,J="周波数",H,P,B=Qe(o[0])+"",A,z,T,j=o[4]&&o[2]&&Je(o);const x={c:function(){e=b("div"),t=b("div"),r=b("div"),r.textContent=i,n=I(),s=b("div"),d=F(c),u=I(),f=b("div"),y=b("div"),y.textContent=_,E=I(),l=b("div"),D=F(v),N=I(),V=b("div"),R=b("div"),R.textContent=J,H=I(),P=b("div"),A=F(B),z=I(),j&&j.c(),this.h()},l:function(q){e=w(q,"DIV",{class:!0});var O=C(e);t=w(O,"DIV",{class:!0});var ee=C(t);r=w(ee,"DIV",{class:!0,"data-svelte-h":!0}),$(r)!=="svelte-101q5wq"&&(r.textContent=i),n=S(ee),s=w(ee,"DIV",{class:!0});var X=C(s);d=M(X,c),X.forEach(h),ee.forEach(h),u=S(O),f=w(O,"DIV",{class:!0});var se=C(f);y=w(se,"DIV",{class:!0,"data-svelte-h":!0}),$(y)!=="svelte-1p184h3"&&(y.textContent=_),E=S(se),l=w(se,"DIV",{class:!0});var ie=C(l);D=M(ie,v),ie.forEach(h),se.forEach(h),N=S(O),V=w(O,"DIV",{class:!0});var re=C(V);R=w(re,"DIV",{class:!0,"data-svelte-h":!0}),$(R)!=="svelte-1iigar3"&&(R.textContent=J),H=S(re),P=w(re,"DIV",{class:!0});var ce=C(P);A=M(ce,B),ce.forEach(h),re.forEach(h),z=S(O),j&&j.l(O),O.forEach(h),this.h()},h:function(){m(r,"class","label svelte-17lpbmi"),p(r,he,49,4,1306),m(s,"class","note-name target svelte-17lpbmi"),p(s,he,50,4,1340),m(t,"class","target-note svelte-17lpbmi"),p(t,he,48,2,1276),m(y,"class","label svelte-17lpbmi"),p(y,he,55,4,1469),m(l,"class","note-name current svelte-17lpbmi"),Pe(l,"detecting",o[4]),p(l,he,56,4,1504),m(f,"class","current-note svelte-17lpbmi"),p(f,he,54,2,1438),m(R,"class","label svelte-17lpbmi"),p(R,he,63,4,1711),m(P,"class","frequency-value svelte-17lpbmi"),p(P,he,64,4,1744),m(V,"class","frequency-display svelte-17lpbmi"),p(V,he,62,2,1675),m(e,"class",T="pitch-display "+o[5]+" svelte-17lpbmi"),p(e,he,46,0,1216)},m:function(q,O){K(q,e,O),a(e,t),a(t,r),a(t,n),a(t,s),a(s,d),a(e,u),a(e,f),a(f,y),a(f,E),a(f,l),a(l,D),a(e,N),a(e,V),a(V,R),a(V,H),a(V,P),a(P,A),a(e,z),j&&j.m(e,null)},p:function(q,[O]){O&2&&c!==(c=q[6](q[1])+"")&&le(d,c),O&20&&v!==(v=(q[4]&&q[6](q[2])||"---")+"")&&le(D,v),O&16&&Pe(l,"detecting",q[4]),O&1&&B!==(B=Qe(q[0])+"")&&le(A,B),q[4]&&q[2]?j?j.p(q,O):(j=Je(q),j.c(),j.m(e,null)):j&&(j.d(1),j=null),O&32&&T!==(T="pitch-display "+q[5]+" svelte-17lpbmi")&&m(e,"class",T)},i:Te,o:Te,d:function(q){q&&h(e),j&&j.d()}};return Z("SvelteRegisterBlock",{block:x,id:Ke.name,type:"component",source:"",ctx:o}),x}function Ie(o){const e=Math.abs(o);return e<=10?"#10b981":e<=25?"#f59e0b":"#ef4444"}function Ze(o){const e=Math.abs(o);return e<=10?"素晴らしい！":e<=25?"もう少し！":"調整が必要"}function Qe(o){return o>0?`${o.toFixed(1)} Hz`:"--.- Hz"}function Ht(o,e,t){let{$$slots:r={},$$scope:i}=e;lt("PitchDisplay",r,[]);let{frequency:n=0}=e,{targetNote:s="C"}=e,{currentNote:c=""}=e,{accuracy:d=0}=e,{isDetecting:u=!1}=e,{className:f=""}=e;const y={C:"ド","C#":"ド#",Db:"レ♭",D:"レ","D#":"レ#",Eb:"ミ♭",E:"ミ",F:"ファ","F#":"ファ#",Gb:"ソ♭",G:"ソ","G#":"ソ#",Ab:"ラ♭",A:"ラ","A#":"ラ#",Bb:"シ♭",B:"シ"};function _(l){return y[l]||l}const E=["frequency","targetNote","currentNote","accuracy","isDetecting","className"];return Object.keys(e).forEach(l=>{!~E.indexOf(l)&&l.slice(0,2)!=="$$"&&l!=="slot"&&console.warn(`<PitchDisplay> was created with unknown prop '${l}'`)}),o.$$set=l=>{"frequency"in l&&t(0,n=l.frequency),"targetNote"in l&&t(1,s=l.targetNote),"currentNote"in l&&t(2,c=l.currentNote),"accuracy"in l&&t(3,d=l.accuracy),"isDetecting"in l&&t(4,u=l.isDetecting),"className"in l&&t(5,f=l.className)},o.$capture_state=()=>({frequency:n,targetNote:s,currentNote:c,accuracy:d,isDetecting:u,className:f,noteNames:y,getAccuracyColor:Ie,getAccuracyMessage:Ze,formatFrequency:Qe,formatNoteName:_}),o.$inject_state=l=>{"frequency"in l&&t(0,n=l.frequency),"targetNote"in l&&t(1,s=l.targetNote),"currentNote"in l&&t(2,c=l.currentNote),"accuracy"in l&&t(3,d=l.accuracy),"isDetecting"in l&&t(4,u=l.isDetecting),"className"in l&&t(5,f=l.className)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),[n,s,c,d,u,f,_]}class ht extends nt{constructor(e){super(e),st(this,e,Ht,Ke,ot,{frequency:0,targetNote:1,currentNote:2,accuracy:3,isDetecting:4,className:5}),Z("SvelteRegisterComponent",{component:this,tagName:"PitchDisplay",options:e,id:Ke.name})}get frequency(){throw new Error("<PitchDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set frequency(e){throw new Error("<PitchDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get targetNote(){throw new Error("<PitchDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set targetNote(e){throw new Error("<PitchDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get currentNote(){throw new Error("<PitchDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set currentNote(e){throw new Error("<PitchDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get accuracy(){throw new Error("<PitchDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set accuracy(e){throw new Error("<PitchDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get isDetecting(){throw new Error("<PitchDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set isDetecting(e){throw new Error("<PitchDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get className(){throw new Error("<PitchDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set className(e){throw new Error("<PitchDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{Object:Lt,console:Gt,document:ct}=ft,k="src/routes/training/random/+page.svelte";function at(o,e,t){const r=o.slice();return r[36]=e[t],r[38]=t,r}function it(o,e,t){const r=o.slice();return r[36]=e[t],r[38]=t,r}function vt(o){let e,t,r;t=new Ce({props:{variant:"default",padding:"lg",$$slots:{default:[yt]},$$scope:{ctx:o}},$$inline:!0});const i={c:function(){e=b("div"),we(t.$$.fragment),this.h()},l:function(s){e=w(s,"DIV",{class:!0});var c=C(e);_e(t.$$.fragment,c),c.forEach(h),this.h()},h:function(){m(e,"class","results-screen"),p(e,k,641,6,20015)},m:function(s,c){K(s,e,c),pe(t,e,null),r=!0},p:function(s,c){const d={};c[0]&98311|c[1]&512&&(d.$$scope={dirty:c,ctx:s}),t.$set(d)},i:function(s){r||(ne(t.$$.fragment,s),r=!0)},o:function(s){oe(t.$$.fragment,s),r=!1},d:function(s){s&&h(e),ge(t)}};return Z("SvelteRegisterBlock",{block:i,id:vt.name,type:"if",source:"(640:26) ",ctx:o}),i}function gt(o){let e,t,r,i,n,s,c,d,u,f,y;t=new Ce({props:{variant:"default",padding:"lg",$$slots:{default:[Et]},$$scope:{ctx:o}},$$inline:!0}),s=new Ce({props:{variant:"default",padding:"md",$$slots:{default:[kt]},$$scope:{ctx:o}},$$inline:!0}),d=new Ce({props:{variant:"default",padding:"md",$$slots:{default:[Ct]},$$scope:{ctx:o}},$$inline:!0}),f=new Ce({props:{variant:"default",padding:"md",$$slots:{default:[Dt]},$$scope:{ctx:o}},$$inline:!0});const _={c:function(){e=b("div"),we(t.$$.fragment),r=I(),i=b("div"),n=b("div"),we(s.$$.fragment),c=I(),we(d.$$.fragment),u=I(),we(f.$$.fragment),this.h()},l:function(l){e=w(l,"DIV",{class:!0});var v=C(e);_e(t.$$.fragment,v),r=S(v),i=w(v,"DIV",{class:!0});var D=C(i);n=w(D,"DIV",{class:!0});var N=C(n);_e(s.$$.fragment,N),c=S(N),_e(d.$$.fragment,N),N.forEach(h),D.forEach(h),u=S(v),_e(f.$$.fragment,v),v.forEach(h),this.h()},h:function(){m(n,"class","display-grid svelte-1samlw1"),p(n,k,606,10,18842),m(i,"class","realtime-display svelte-1samlw1"),p(i,k,605,8,18801),m(e,"class","detection-screen"),p(e,k,583,6,17828)},m:function(l,v){K(l,e,v),pe(t,e,null),a(e,r),a(e,i),a(i,n),pe(s,n,null),a(n,c),pe(d,n,null),a(e,u),pe(f,e,null),y=!0},p:function(l,v){const D={};v[0]&1537|v[1]&512&&(D.$$scope={dirty:v,ctx:l}),t.$set(D);const N={};v[0]&4096|v[1]&512&&(N.$$scope={dirty:v,ctx:l}),s.$set(N);const V={};v[0]&25856|v[1]&512&&(V.$$scope={dirty:v,ctx:l}),d.$set(V);const R={};v[0]&1028|v[1]&512&&(R.$$scope={dirty:v,ctx:l}),f.$set(R)},i:function(l){y||(ne(t.$$.fragment,l),ne(s.$$.fragment,l),ne(d.$$.fragment,l),ne(f.$$.fragment,l),y=!0)},o:function(l){oe(t.$$.fragment,l),oe(s.$$.fragment,l),oe(d.$$.fragment,l),oe(f.$$.fragment,l),y=!1},d:function(l){l&&h(e),ge(t),ge(s),ge(d),ge(f)}};return Z("SvelteRegisterBlock",{block:_,id:gt.name,type:"if",source:"(582:26) ",ctx:o}),_}function pt(o){let e,t,r;t=new Ce({props:{variant:"success",padding:"lg",$$slots:{default:[Vt]},$$scope:{ctx:o}},$$inline:!0});const i={c:function(){e=b("div"),we(t.$$.fragment),this.h()},l:function(s){e=w(s,"DIV",{class:!0});var c=C(e);_e(t.$$.fragment,c),c.forEach(h),this.h()},h:function(){m(e,"class","playing-screen"),p(e,k,557,6,16831)},m:function(s,c){K(s,e,c),pe(t,e,null),r=!0},p:function(s,c){const d={};c[0]&512|c[1]&512&&(d.$$scope={dirty:c,ctx:s}),t.$set(d)},i:function(s){r||(ne(t.$$.fragment,s),r=!0)},o:function(s){oe(t.$$.fragment,s),r=!1},d:function(s){s&&h(e),ge(t)}};return Z("SvelteRegisterBlock",{block:i,id:pt.name,type:"if",source:"(556:24) ",ctx:o}),i}function _t(o){let e,t,r;t=new Ce({props:{variant:"default",padding:"lg",$$slots:{default:[At]},$$scope:{ctx:o}},$$inline:!0});const i={c:function(){e=b("div"),we(t.$$.fragment),this.h()},l:function(s){e=w(s,"DIV",{class:!0});var c=C(e);_e(t.$$.fragment,c),c.forEach(h),this.h()},h:function(){m(e,"class","start-screen"),p(e,k,477,6,14030)},m:function(s,c){K(s,e,c),pe(t,e,null),r=!0},p:function(s,c){const d={};c[0]&120|c[1]&512&&(d.$$scope={dirty:c,ctx:s}),t.$set(d)},i:function(s){r||(ne(t.$$.fragment,s),r=!0)},o:function(s){oe(t.$$.fragment,s),r=!1},d:function(s){s&&h(e),ge(t)}};return Z("SvelteRegisterBlock",{block:i,id:_t.name,type:"if",source:"(476:4) {#if !isPlaying && !isDetecting && !showResults}",ctx:o}),i}function Xe(o){let e,t,r=o[36]+"",i,n,s,c=o[0][o[38]]?"✓":"×",d,u,f;const y={c:function(){e=b("div"),t=b("span"),i=F(r),n=I(),s=b("span"),d=F(c),f=I(),this.h()},l:function(E){e=w(E,"DIV",{class:!0});var l=C(e);t=w(l,"SPAN",{class:!0});var v=C(t);i=M(v,r),v.forEach(h),n=S(l),s=w(l,"SPAN",{class:!0});var D=C(s);d=M(D,c),D.forEach(h),f=S(l),l.forEach(h),this.h()},h:function(){m(t,"class","scale-note-name svelte-1samlw1"),p(t,k,669,20,21069),m(s,"class",u="scale-result-icon "+(o[0][o[38]]?"correct":"incorrect")+" svelte-1samlw1"),p(s,k,670,20,21133),m(e,"class","scale-result svelte-1samlw1"),p(e,k,668,18,21022)},m:function(E,l){K(E,e,l),a(e,t),a(t,i),a(e,n),a(e,s),a(s,d),a(e,f)},p:function(E,l){l[0]&1&&c!==(c=E[0][E[38]]?"✓":"×")&&le(d,c),l[0]&1&&u!==(u="scale-result-icon "+(E[0][E[38]]?"correct":"incorrect")+" svelte-1samlw1")&&m(s,"class",u)},d:function(E){E&&h(e)}};return Z("SvelteRegisterBlock",{block:y,id:Xe.name,type:"each",source:"(668:16) {#each scaleNotes as note, index}",ctx:o}),y}function wt(o){let e;const t={c:function(){e=F("もう一度チャレンジ")},l:function(i){e=M(i,"もう一度チャレンジ")},m:function(i,n){K(i,e,n)},d:function(i){i&&h(e)}};return Z("SvelteRegisterBlock",{block:t,id:wt.name,type:"slot",source:'(681:14) <Button variant=\\"success\\" size=\\"lg\\" fullWidth on:click={startTraining}>',ctx:o}),t}function bt(o){let e;const t={c:function(){e=F("結果を保存")},l:function(i){e=M(i,"結果を保存")},m:function(i,n){K(i,e,n)},d:function(i){i&&h(e)}};return Z("SvelteRegisterBlock",{block:t,id:bt.name,type:"slot",source:'(684:14) <Button variant=\\"secondary\\" size=\\"md\\" fullWidth>',ctx:o}),t}function yt(o){let e,t,r="トレーニング結果",i,n,s,c,d,u,f,y="点",_,E,l,v,D,N,V,R,J,H,P,B,A,z,T,j,x="音階別結果",L,q,O,ee,X,se,ie,re,ce=Le(o[17]),Y=[];for(let ue=0;ue<ce.length;ue+=1)Y[ue]=Xe(at(o,ce,ue));X=new Se({props:{variant:"success",size:"lg",fullWidth:!0,$$slots:{default:[wt]},$$scope:{ctx:o}},$$inline:!0}),X.$on("click",o[22]),ie=new Se({props:{variant:"secondary",size:"md",fullWidth:!0,$$slots:{default:[bt]},$$scope:{ctx:o}},$$inline:!0});const Ee={c:function(){e=b("div"),t=b("h2"),t.textContent=r,i=I(),n=b("div"),s=b("div"),c=b("span"),d=F(o[1]),u=I(),f=b("span"),f.textContent=y,E=I(),l=b("div"),v=b("h3"),D=F(o[16]),N=I(),V=b("p"),R=F("8音階中 "),J=F(o[2]),H=F("音階 正解"),P=I(),B=b("p"),A=F(o[15]),z=I(),T=b("div"),j=b("h3"),j.textContent=x,L=I(),q=b("div");for(let U=0;U<Y.length;U+=1)Y[U].c();O=I(),ee=b("div"),we(X.$$.fragment),se=I(),we(ie.$$.fragment),this.h()},l:function(U){e=w(U,"DIV",{class:!0});var g=C(e);t=w(g,"H2",{class:!0,"data-svelte-h":!0}),$(t)!=="svelte-1w4iqdy"&&(t.textContent=r),i=S(g),n=w(g,"DIV",{class:!0});var Q=C(n);s=w(Q,"DIV",{class:!0});var W=C(s);c=w(W,"SPAN",{class:!0});var G=C(c);d=M(G,o[1]),G.forEach(h),u=S(W),f=w(W,"SPAN",{class:!0,"data-svelte-h":!0}),$(f)!=="svelte-yaz7vv"&&(f.textContent=y),W.forEach(h),E=S(Q),l=w(Q,"DIV",{class:!0});var ae=C(l);v=w(ae,"H3",{class:!0});var be=C(v);D=M(be,o[16]),be.forEach(h),N=S(ae),V=w(ae,"P",{class:!0});var fe=C(V);R=M(fe,"8音階中 "),J=M(fe,o[2]),H=M(fe,"音階 正解"),fe.forEach(h),P=S(ae),B=w(ae,"P",{class:!0});var ye=C(B);A=M(ye,o[15]),ye.forEach(h),ae.forEach(h),Q.forEach(h),z=S(g),T=w(g,"DIV",{class:!0});var De=C(T);j=w(De,"H3",{class:!0,"data-svelte-h":!0}),$(j)!=="svelte-140f1nw"&&(j.textContent=x),L=S(De),q=w(De,"DIV",{class:!0});var ve=C(q);for(let me=0;me<Y.length;me+=1)Y[me].l(ve);ve.forEach(h),De.forEach(h),O=S(g),ee=w(g,"DIV",{class:!0});var de=C(ee);_e(X.$$.fragment,de),se=S(de),_e(ie.$$.fragment,de),de.forEach(h),g.forEach(h),this.h()},h:function(){m(t,"class","results-title svelte-1samlw1"),p(t,k,644,12,20142),m(c,"class","score-value svelte-1samlw1"),p(c,k,649,16,20341),m(f,"class","score-unit svelte-1samlw1"),p(f,k,650,16,20398),m(s,"class",_="score-circle "+o[16].toLowerCase()+" svelte-1samlw1"),p(s,k,648,14,20276),m(v,"class","grade-title svelte-1samlw1"),p(v,k,653,16,20508),m(V,"class","score-description svelte-1samlw1"),p(V,k,654,16,20561),m(B,"class","feedback-message svelte-1samlw1"),p(B,k,657,16,20671),m(l,"class","grade-info svelte-1samlw1"),p(l,k,652,14,20467),m(n,"class","score-display svelte-1samlw1"),p(n,k,647,12,20234),m(j,"class","details-title svelte-1samlw1"),p(j,k,665,14,20875),m(q,"class","scale-results svelte-1samlw1"),p(q,k,666,14,20926),m(T,"class","detailed-results"),p(T,k,664,12,20830),m(ee,"class","action-buttons svelte-1samlw1"),p(ee,k,679,12,21430),m(e,"class","results-content svelte-1samlw1"),p(e,k,643,10,20100)},m:function(U,g){K(U,e,g),a(e,t),a(e,i),a(e,n),a(n,s),a(s,c),a(c,d),a(s,u),a(s,f),a(n,E),a(n,l),a(l,v),a(v,D),a(l,N),a(l,V),a(V,R),a(V,J),a(V,H),a(l,P),a(l,B),a(B,A),a(e,z),a(e,T),a(T,j),a(T,L),a(T,q);for(let Q=0;Q<Y.length;Q+=1)Y[Q]&&Y[Q].m(q,null);a(e,O),a(e,ee),pe(X,ee,null),a(ee,se),pe(ie,ee,null),re=!0},p:function(U,g){if((!re||g[0]&2)&&le(d,U[1]),(!re||g[0]&65536&&_!==(_="score-circle "+U[16].toLowerCase()+" svelte-1samlw1"))&&m(s,"class",_),(!re||g[0]&65536)&&le(D,U[16]),(!re||g[0]&4)&&le(J,U[2]),(!re||g[0]&32768)&&le(A,U[15]),g[0]&131073){ce=Le(U[17]);let G;for(G=0;G<ce.length;G+=1){const ae=at(U,ce,G);Y[G]?Y[G].p(ae,g):(Y[G]=Xe(ae),Y[G].c(),Y[G].m(q,null))}for(;G<Y.length;G+=1)Y[G].d(1);Y.length=ce.length}const Q={};g[1]&512&&(Q.$$scope={dirty:g,ctx:U}),X.$set(Q);const W={};g[1]&512&&(W.$$scope={dirty:g,ctx:U}),ie.$set(W)},i:function(U){re||(ne(X.$$.fragment,U),ne(ie.$$.fragment,U),re=!0)},o:function(U){oe(X.$$.fragment,U),oe(ie.$$.fragment,U),re=!1},d:function(U){U&&h(e),ut(Y,U),ge(X),ge(ie)}};return Z("SvelteRegisterBlock",{block:Ee,id:yt.name,type:"slot",source:'(643:8) <Card variant=\\"default\\" padding=\\"lg\\">',ctx:o}),Ee}function Ye(o){let e,t=o[0][o[38]]?"✓":"×",r,i;const n={c:function(){e=b("span"),r=F(t),this.h()},l:function(c){e=w(c,"SPAN",{class:!0});var d=C(e);r=M(d,t),d.forEach(h),this.h()},h:function(){m(e,"class",i="result-icon "+(o[0][o[38]]?"correct":"incorrect")+" svelte-1samlw1"),p(e,k,594,20,18486)},m:function(c,d){K(c,e,d),a(e,r)},p:function(c,d){d[0]&1&&t!==(t=c[0][c[38]]?"✓":"×")&&le(r,t),d[0]&1&&i!==(i="result-icon "+(c[0][c[38]]?"correct":"incorrect")+" svelte-1samlw1")&&m(e,"class",i)},d:function(c){c&&h(e)}};return Z("SvelteRegisterBlock",{block:n,id:Ye.name,type:"if",source:"(594:18) {#if scaleResults[index] !== undefined}",ctx:o}),n}function xe(o){let e,t,r=o[36]+"",i,n,s,c=o[19](o[9],o[38])+"",d,u,f,y,_=o[0][o[38]]!==void 0&&Ye(o);const E={c:function(){e=b("div"),t=b("span"),i=F(r),n=I(),s=b("span"),d=F(c),u=F("Hz"),f=I(),_&&_.c(),y=I(),this.h()},l:function(v){e=w(v,"DIV",{class:!0});var D=C(e);t=w(D,"SPAN",{class:!0});var N=C(t);i=M(N,r),N.forEach(h),n=S(D),s=w(D,"SPAN",{class:!0});var V=C(s);d=M(V,c),u=M(V,"Hz"),V.forEach(h),f=S(D),_&&_.l(D),y=S(D),D.forEach(h),this.h()},h:function(){m(t,"class","note-text svelte-1samlw1"),p(t,k,591,18,18270),m(s,"class","note-frequency svelte-1samlw1"),p(s,k,592,18,18326),m(e,"class","scale-note svelte-1samlw1"),Pe(e,"active",o[38]===o[10]),Pe(e,"completed",o[0][o[38]]!==void 0),p(e,k,590,16,18132)},m:function(v,D){K(v,e,D),a(e,t),a(t,i),a(e,n),a(e,s),a(s,d),a(s,u),a(e,f),_&&_.m(e,null),a(e,y)},p:function(v,D){D[0]&512&&c!==(c=v[19](v[9],v[38])+"")&&le(d,c),v[0][v[38]]!==void 0?_?_.p(v,D):(_=Ye(v),_.c(),_.m(e,y)):_&&(_.d(1),_=null),D[0]&1024&&Pe(e,"active",v[38]===v[10]),D[0]&1&&Pe(e,"completed",v[0][v[38]]!==void 0)},d:function(v){v&&h(e),_&&_.d()}};return Z("SvelteRegisterBlock",{block:E,id:xe.name,type:"each",source:"(590:14) {#each scaleNotes as note, index}",ctx:o}),E}function Et(o){let e,t,r="ドレミファソラシドを歌ってください",i,n,s=Le(o[17]),c=[];for(let u=0;u<s.length;u+=1)c[u]=xe(it(o,s,u));const d={c:function(){e=b("div"),t=b("h2"),t.textContent=r,i=I(),n=b("div");for(let f=0;f<c.length;f+=1)c[f].c();this.h()},l:function(f){e=w(f,"DIV",{class:!0});var y=C(e);t=w(y,"H2",{class:!0,"data-svelte-h":!0}),$(t)!=="svelte-9l8glf"&&(t.textContent=r),i=S(y),n=w(y,"DIV",{class:!0});var _=C(n);for(let E=0;E<c.length;E+=1)c[E].l(_);_.forEach(h),y.forEach(h),this.h()},h:function(){m(t,"class","guide-title svelte-1samlw1"),p(t,k,587,12,17983),m(n,"class","scale-guide svelte-1samlw1"),p(n,k,588,12,18042),m(e,"class","guide-content svelte-1samlw1"),p(e,k,586,10,17943)},m:function(f,y){K(f,e,y),a(e,t),a(e,i),a(e,n);for(let _=0;_<c.length;_+=1)c[_]&&c[_].m(n,null)},p:function(f,y){if(y[0]&656897){s=Le(f[17]);let _;for(_=0;_<s.length;_+=1){const E=it(f,s,_);c[_]?c[_].p(E,y):(c[_]=xe(E),c[_].c(),c[_].m(n,null))}for(;_<c.length;_+=1)c[_].d(1);c.length=s.length}},d:function(f){f&&h(e),ut(c,f)}};return Z("SvelteRegisterBlock",{block:d,id:Et.name,type:"slot",source:'(586:8) <Card variant=\\"default\\" padding=\\"lg\\">',ctx:o}),d}function kt(o){let e,t,r="音量レベル",i,n,s;n=new mt({props:{volume:o[12],height:"20px"},$$inline:!0});const c={c:function(){e=b("div"),t=b("h3"),t.textContent=r,i=I(),we(n.$$.fragment),this.h()},l:function(u){e=w(u,"DIV",{class:!0});var f=C(e);t=w(f,"H3",{class:!0,"data-svelte-h":!0}),$(t)!=="svelte-1nc8gri"&&(t.textContent=r),i=S(f),_e(n.$$.fragment,f),f.forEach(h),this.h()},h:function(){m(t,"class","display-title svelte-1samlw1"),p(t,k,610,16,19004),m(e,"class","volume-display"),p(e,k,609,14,18959)},m:function(u,f){K(u,e,f),a(e,t),a(e,i),pe(n,e,null),s=!0},p:function(u,f){const y={};f[0]&4096&&(y.volume=u[12]),n.$set(y)},i:function(u){s||(ne(n.$$.fragment,u),s=!0)},o:function(u){oe(n.$$.fragment,u),s=!1},d:function(u){u&&h(e),ge(n)}};return Z("SvelteRegisterBlock",{block:c,id:kt.name,type:"slot",source:'(609:12) <Card variant=\\"default\\" padding=\\"md\\">',ctx:o}),c}function Ct(o){let e,t;e=new ht({props:{frequency:o[13],targetNote:o[17][o[10]],currentNote:o[14],accuracy:0,isDetecting:o[8]},$$inline:!0});const r={c:function(){we(e.$$.fragment)},l:function(n){_e(e.$$.fragment,n)},m:function(n,s){pe(e,n,s),t=!0},p:function(n,s){const c={};s[0]&8192&&(c.frequency=n[13]),s[0]&1024&&(c.targetNote=n[17][n[10]]),s[0]&16384&&(c.currentNote=n[14]),s[0]&256&&(c.isDetecting=n[8]),e.$set(c)},i:function(n){t||(ne(e.$$.fragment,n),t=!0)},o:function(n){oe(e.$$.fragment,n),t=!1},d:function(n){ge(e,n)}};return Z("SvelteRegisterBlock",{block:r,id:Ct.name,type:"slot",source:'(617:12) <Card variant=\\"default\\" padding=\\"md\\">',ctx:o}),r}function Dt(o){let e,t,r="進行状況",i,n,s,c,d=o[17][o[10]]+"",u,f,y=o[10]+1+"",_,E,l,v,D,N,V,R;const J={c:function(){e=b("div"),t=b("h3"),t.textContent=r,i=I(),n=b("div"),s=b("span"),c=F("現在: "),u=F(d),f=F(" ("),_=F(y),E=F("/8)"),l=I(),v=b("span"),D=F("正解: "),N=F(o[2]),V=F("/"),R=F(o[10]),this.h()},l:function(P){e=w(P,"DIV",{class:!0});var B=C(e);t=w(B,"H3",{class:!0,"data-svelte-h":!0}),$(t)!=="svelte-v1qnd4"&&(t.textContent=r),i=S(B),n=w(B,"DIV",{class:!0});var A=C(n);s=w(A,"SPAN",{});var z=C(s);c=M(z,"現在: "),u=M(z,d),f=M(z," ("),_=M(z,y),E=M(z,"/8)"),z.forEach(h),l=S(A),v=w(A,"SPAN",{});var T=C(v);D=M(T,"正解: "),N=M(T,o[2]),V=M(T,"/"),R=M(T,o[10]),T.forEach(h),A.forEach(h),B.forEach(h),this.h()},h:function(){m(t,"class","progress-title svelte-1samlw1"),p(t,k,631,12,19660),p(s,k,633,14,19754),p(v,k,634,14,19845),m(n,"class","progress-details svelte-1samlw1"),p(n,k,632,12,19709),m(e,"class","progress-info svelte-1samlw1"),p(e,k,630,10,19620)},m:function(P,B){K(P,e,B),a(e,t),a(e,i),a(e,n),a(n,s),a(s,c),a(s,u),a(s,f),a(s,_),a(s,E),a(n,l),a(n,v),a(v,D),a(v,N),a(v,V),a(v,R)},p:function(P,B){B[0]&1024&&d!==(d=P[17][P[10]]+"")&&le(u,d),B[0]&1024&&y!==(y=P[10]+1+"")&&le(_,y),B[0]&4&&le(N,P[2]),B[0]&1024&&le(R,P[10])},d:function(P){P&&h(e)}};return Z("SvelteRegisterBlock",{block:J,id:Dt.name,type:"slot",source:'(630:8) <Card variant=\\"default\\" padding=\\"md\\">',ctx:o}),J}function Vt(o){let e,t,r,i,n,s,c,d="基音再生中",u,f,y,_,E,l,v,D=o[18](o[9])+"",N,V,R,J,H="この音を覚えて「ド」として認識してください",P,B,A,z;const T={c:function(){e=b("div"),t=b("div"),r=Be("svg"),i=Be("circle"),n=Be("polygon"),s=I(),c=b("h2"),c.textContent=d,u=I(),f=b("p"),y=F("基音: "),_=F(o[9]),E=I(),l=b("p"),v=F("周波数: "),N=F(D),V=F("Hz"),R=I(),J=b("p"),J.textContent=H,P=I(),B=b("div"),A=b("div"),z=b("div"),this.h()},l:function(x){e=w(x,"DIV",{class:!0});var L=C(e);t=w(L,"DIV",{class:!0});var q=C(t);r=Ve(q,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var O=C(r);i=Ve(O,"circle",{cx:!0,cy:!0,r:!0}),C(i).forEach(h),n=Ve(O,"polygon",{points:!0}),C(n).forEach(h),O.forEach(h),q.forEach(h),s=S(L),c=w(L,"H2",{class:!0,"data-svelte-h":!0}),$(c)!=="svelte-1maueo6"&&(c.textContent=d),u=S(L),f=w(L,"P",{class:!0});var ee=C(f);y=M(ee,"基音: "),_=M(ee,o[9]),ee.forEach(h),E=S(L),l=w(L,"P",{class:!0});var X=C(l);v=M(X,"周波数: "),N=M(X,D),V=M(X,"Hz"),X.forEach(h),R=S(L),J=w(L,"P",{class:!0,"data-svelte-h":!0}),$(J)!=="svelte-1hcrx2z"&&(J.textContent=H),P=S(L),B=w(L,"DIV",{class:!0});var se=C(B);A=w(se,"DIV",{class:!0});var ie=C(A);z=w(ie,"DIV",{class:!0}),C(z).forEach(h),ie.forEach(h),se.forEach(h),L.forEach(h),this.h()},h:function(){m(i,"cx","12"),m(i,"cy","12"),m(i,"r","10"),p(i,k,562,16,17115),m(n,"points","10,8 16,12 10,16"),p(n,k,563,16,17164),m(r,"width","48"),m(r,"height","48"),m(r,"viewBox","0 0 24 24"),m(r,"fill","none"),m(r,"stroke","currentColor"),m(r,"stroke-width","2"),p(r,k,561,14,16999),m(t,"class","playing-icon svelte-1samlw1"),p(t,k,560,12,16958),m(c,"class","playing-title svelte-1samlw1"),p(c,k,566,12,17253),m(f,"class","playing-note svelte-1samlw1"),p(f,k,567,12,17302),m(l,"class","playing-frequency svelte-1samlw1"),p(l,k,568,12,17364),m(J,"class","playing-instruction svelte-1samlw1"),p(J,k,569,12,17456),m(z,"class","progress-fill svelte-1samlw1"),p(z,k,575,16,17654),m(A,"class","progress-bar svelte-1samlw1"),p(A,k,574,14,17611),m(B,"class","playing-progress svelte-1samlw1"),p(B,k,573,12,17566),m(e,"class","playing-content svelte-1samlw1"),p(e,k,559,10,16916)},m:function(x,L){K(x,e,L),a(e,t),a(t,r),a(r,i),a(r,n),a(e,s),a(e,c),a(e,u),a(e,f),a(f,y),a(f,_),a(e,E),a(e,l),a(l,v),a(l,N),a(l,V),a(e,R),a(e,J),a(e,P),a(e,B),a(B,A),a(A,z)},p:function(x,L){L[0]&512&&le(_,x[9]),L[0]&512&&D!==(D=x[18](x[9])+"")&&le(N,D)},d:function(x){x&&h(e)}};return Z("SvelteRegisterBlock",{block:T,id:Vt.name,type:"slot",source:'(559:8) <Card variant=\\"success\\" padding=\\"lg\\">',ctx:o}),T}function Bt(o){let e,t,r,i;e=new Se({props:{variant:"success",size:"lg",fullWidth:!0,disabled:!o[4],$$slots:{default:[It]},$$scope:{ctx:o}},$$inline:!0}),e.$on("click",o[22]);let n=!o[4]&&$e(o);const s={c:function(){we(e.$$.fragment),t=I(),n&&n.c(),r=Ge()},l:function(d){_e(e.$$.fragment,d),t=S(d),n&&n.l(d),r=Ge()},m:function(d,u){pe(e,d,u),K(d,t,u),n&&n.m(d,u),K(d,r,u),i=!0},p:function(d,u){const f={};u[0]&16&&(f.disabled=!d[4]),u[0]&80|u[1]&512&&(f.$$scope={dirty:u,ctx:d}),e.$set(f),d[4]?n&&(Oe(),oe(n,1,1,()=>{n=null}),Ue()):n?(n.p(d,u),u[0]&16&&ne(n,1)):(n=$e(d),n.c(),ne(n,1),n.m(r.parentNode,r))},i:function(d){i||(ne(e.$$.fragment,d),ne(n),i=!0)},o:function(d){oe(e.$$.fragment,d),oe(n),i=!1},d:function(d){d&&(h(t),h(r)),ge(e,d),n&&n.d(d)}};return Z("SvelteRegisterBlock",{block:s,id:Bt.name,type:"else",source:"(523:12) {:else}",ctx:o}),s}function Nt(o){let e,t,r,i,n="ブラウザの制限により、音声を使用するには手動での有効化が必要です",s;e=new Se({props:{variant:"primary",size:"lg",fullWidth:!0,$$slots:{default:[Rt]},$$scope:{ctx:o}},$$inline:!0}),e.$on("click",o[20]);const c={c:function(){we(e.$$.fragment),t=I(),r=b("div"),i=b("p"),i.textContent=n,this.h()},l:function(u){_e(e.$$.fragment,u),t=S(u),r=w(u,"DIV",{class:!0});var f=C(r);i=w(f,"P",{class:!0,"data-svelte-h":!0}),$(i)!=="svelte-y6f8ft"&&(i.textContent=n),f.forEach(h),this.h()},h:function(){m(i,"class","loading-message svelte-1samlw1"),p(i,k,518,16,15523),m(r,"class","loading-info svelte-1samlw1"),p(r,k,517,14,15480)},m:function(u,f){pe(e,u,f),K(u,t,f),K(u,r,f),a(r,i),s=!0},p:function(u,f){const y={};f[1]&512&&(y.$$scope={dirty:f,ctx:u}),e.$set(y)},i:function(u){s||(ne(e.$$.fragment,u),s=!0)},o:function(u){oe(e.$$.fragment,u),s=!1},d:function(u){u&&(h(t),h(r)),ge(e,u)}};return Z("SvelteRegisterBlock",{block:c,id:Nt.name,type:"if",source:"(514:12) {#if !isToneLoaded && Tone && Tone.context && Tone.context.state === 'suspended'}",ctx:o}),c}function Pt(o){let e;const t={c:function(){e=F("トレーニング開始")},l:function(i){e=M(i,"トレーニング開始")},m:function(i,n){K(i,e,n)},p:Te,d:function(i){i&&h(e)}};return Z("SvelteRegisterBlock",{block:t,id:Pt.name,type:"else",source:"(527:16) {:else}",ctx:o}),t}function St(o){let e;const t={c:function(){e=F(o[6])},l:function(i){e=M(i,o[6])},m:function(i,n){K(i,e,n)},p:function(i,n){n[0]&64&&le(e,i[6])},d:function(i){i&&h(e)}};return Z("SvelteRegisterBlock",{block:t,id:St.name,type:"if",source:"(525:16) {#if !isToneLoaded}",ctx:o}),t}function It(o){let e;function t(s,c){return s[4]?Pt:St}let r=t(o),i=r(o);const n={c:function(){i.c(),e=Ge()},l:function(c){i.l(c),e=Ge()},m:function(c,d){i.m(c,d),K(c,e,d)},p:function(c,d){r===(r=t(c))&&i?i.p(c,d):(i.d(1),i=r(c),i&&(i.c(),i.m(e.parentNode,e)))},d:function(c){c&&h(e),i.d(c)}};return Z("SvelteRegisterBlock",{block:n,id:It.name,type:"slot",source:'(524:14) <Button variant=\\"success\\" size=\\"lg\\" fullWidth on:click={startTraining} disabled={!isToneLoaded}>',ctx:o}),n}function $e(o){let e,t,r,i,n,s=o[5]&&et(o);const c={c:function(){e=b("div"),t=b("p"),r=F(o[6]),i=I(),s&&s.c(),this.h()},l:function(u){e=w(u,"DIV",{class:!0});var f=C(e);t=w(f,"P",{class:!0});var y=C(t);r=M(y,o[6]),y.forEach(h),i=S(f),s&&s.l(f),f.forEach(h),this.h()},h:function(){m(t,"class","loading-message svelte-1samlw1"),p(t,k,533,18,16052),m(e,"class","loading-info svelte-1samlw1"),p(e,k,532,16,16007)},m:function(u,f){K(u,e,f),a(e,t),a(t,r),a(e,i),s&&s.m(e,null),n=!0},p:function(u,f){(!n||f[0]&64)&&le(r,u[6]),u[5]?s?(s.p(u,f),f[0]&32&&ne(s,1)):(s=et(u),s.c(),ne(s,1),s.m(e,null)):s&&(Oe(),oe(s,1,1,()=>{s=null}),Ue())},i:function(u){n||(ne(s),n=!0)},o:function(u){oe(s),n=!1},d:function(u){u&&h(e),s&&s.d()}};return Z("SvelteRegisterBlock",{block:c,id:$e.name,type:"if",source:"(532:14) {#if !isToneLoaded}",ctx:o}),c}function et(o){let e,t,r,i,n,s,c,d,u="または、ページを再読み込みしてみてください",f;s=new Se({props:{variant:"secondary",size:"sm",$$slots:{default:[Tt]},$$scope:{ctx:o}},$$inline:!0}),s.$on("click",o[21]);const y={c:function(){e=b("p"),t=F("❌ "),r=F(o[5]),i=I(),n=b("div"),we(s.$$.fragment),c=I(),d=b("p"),d.textContent=u,this.h()},l:function(E){e=w(E,"P",{class:!0});var l=C(e);t=M(l,"❌ "),r=M(l,o[5]),l.forEach(h),i=S(E),n=w(E,"DIV",{class:!0});var v=C(n);_e(s.$$.fragment,v),c=S(v),d=w(v,"P",{class:!0,"data-svelte-h":!0}),$(d)!=="svelte-16tfsji"&&(d.textContent=u),v.forEach(h),this.h()},h:function(){m(e,"class","error-message svelte-1samlw1"),p(e,k,537,20,16200),m(d,"class","retry-message svelte-1samlw1"),p(d,k,544,22,16522),m(n,"class","fallback-options svelte-1samlw1"),p(n,k,540,20,16314)},m:function(E,l){K(E,e,l),a(e,t),a(e,r),K(E,i,l),K(E,n,l),pe(s,n,null),a(n,c),a(n,d),f=!0},p:function(E,l){(!f||l[0]&32)&&le(r,E[5]);const v={};l[1]&512&&(v.$$scope={dirty:l,ctx:E}),s.$set(v)},i:function(E){f||(ne(s.$$.fragment,E),f=!0)},o:function(E){oe(s.$$.fragment,E),f=!1},d:function(E){E&&(h(e),h(i),h(n)),ge(s)}};return Z("SvelteRegisterBlock",{block:y,id:et.name,type:"if",source:"(537:18) {#if toneLoadingError}",ctx:o}),y}function Tt(o){let e;const t={c:function(){e=F("シンプル音源で開始")},l:function(i){e=M(i,"シンプル音源で開始")},m:function(i,n){K(i,e,n)},d:function(i){i&&h(e)}};return Z("SvelteRegisterBlock",{block:t,id:Tt.name,type:"slot",source:'(542:22) <Button variant=\\"secondary\\" size=\\"sm\\" on:click={forceSimpleAudio}>',ctx:o}),t}function Rt(o){let e;const t={c:function(){e=F("🔊 音声を有効化（クリックしてください）")},l:function(i){e=M(i,"🔊 音声を有効化（クリックしてください）")},m:function(i,n){K(i,e,n)},d:function(i){i&&h(e)}};return Z("SvelteRegisterBlock",{block:t,id:Rt.name,type:"slot",source:'(515:14) <Button variant=\\"primary\\" size=\\"lg\\" fullWidth on:click={handleManualAudioStart}>',ctx:o}),t}function At(o){let e,t,r="トレーニング開始",i,n,s,c,d,u,f,y,_,E="1",l,v,D,N="基音を聞く",V,R,J="ランダムに選ばれた基音をピアノで再生します",H,P,B,A="2",z,T,j,x="連続歌唱",L,q,O="基音を「ド」として、ドレミファソラシドを連続して歌います",ee,X,se,ie="3",re,ce,Y,Ee="自動判定",ue,U,g="歌唱中にリアルタイムで各音階を自動判定します",Q,W,G,ae;const be=[Nt,Bt],fe=[];function ye(ve,de){return!ve[4]&&ve[3]&&ve[3].context&&ve[3].context.state==="suspended"?0:1}W=ye(o),G=fe[W]=be[W](o);const De={c:function(){e=b("div"),t=b("h2"),t.textContent=r,i=I(),n=b("p"),s=F("基音を聞いた後、その音を「ド」として"),c=b("br"),d=F(`
              ドレミファソラシドを連続して歌ってください`),u=I(),f=b("div"),y=b("div"),_=b("span"),_.textContent=E,l=I(),v=b("div"),D=b("h3"),D.textContent=N,V=I(),R=b("p"),R.textContent=J,H=I(),P=b("div"),B=b("span"),B.textContent=A,z=I(),T=b("div"),j=b("h3"),j.textContent=x,L=I(),q=b("p"),q.textContent=O,ee=I(),X=b("div"),se=b("span"),se.textContent=ie,re=I(),ce=b("div"),Y=b("h3"),Y.textContent=Ee,ue=I(),U=b("p"),U.textContent=g,Q=I(),G.c(),this.h()},l:function(de){e=w(de,"DIV",{class:!0});var me=C(e);t=w(me,"H2",{class:!0,"data-svelte-h":!0}),$(t)!=="svelte-177yn6"&&(t.textContent=r),i=S(me),n=w(me,"P",{class:!0});var ke=C(n);s=M(ke,"基音を聞いた後、その音を「ド」として"),c=w(ke,"BR",{}),d=M(ke,`
              ドレミファソラシドを連続して歌ってください`),ke.forEach(h),u=S(me),f=w(me,"DIV",{class:!0});var Ne=C(f);y=w(Ne,"DIV",{class:!0});var Re=C(y);_=w(Re,"SPAN",{class:!0,"data-svelte-h":!0}),$(_)!=="svelte-1gvrwis"&&(_.textContent=E),l=S(Re),v=w(Re,"DIV",{});var Ae=C(v);D=w(Ae,"H3",{class:!0,"data-svelte-h":!0}),$(D)!=="svelte-3o2umq"&&(D.textContent=N),V=S(Ae),R=w(Ae,"P",{class:!0,"data-svelte-h":!0}),$(R)!=="svelte-r15f9m"&&(R.textContent=J),Ae.forEach(h),Re.forEach(h),H=S(Ne),P=w(Ne,"DIV",{class:!0});var je=C(P);B=w(je,"SPAN",{class:!0,"data-svelte-h":!0}),$(B)!=="svelte-1lllrxb"&&(B.textContent=A),z=S(je),T=w(je,"DIV",{});var qe=C(T);j=w(qe,"H3",{class:!0,"data-svelte-h":!0}),$(j)!=="svelte-1lldj7q"&&(j.textContent=x),L=S(qe),q=w(qe,"P",{class:!0,"data-svelte-h":!0}),$(q)!=="svelte-1n1vdfq"&&(q.textContent=O),qe.forEach(h),je.forEach(h),ee=S(Ne),X=w(Ne,"DIV",{class:!0});var ze=C(X);se=w(ze,"SPAN",{class:!0,"data-svelte-h":!0}),$(se)!=="svelte-1swoen2"&&(se.textContent=ie),re=S(ze),ce=w(ze,"DIV",{});var Me=C(ce);Y=w(Me,"H3",{class:!0,"data-svelte-h":!0}),$(Y)!=="svelte-wm6hg7"&&(Y.textContent=Ee),ue=S(Me),U=w(Me,"P",{class:!0,"data-svelte-h":!0}),$(U)!=="svelte-1tyv544"&&(U.textContent=g),Me.forEach(h),ze.forEach(h),Ne.forEach(h),Q=S(me),G.l(me),me.forEach(h),this.h()},h:function(){m(t,"class","start-title svelte-1samlw1"),p(t,k,480,12,14153),p(c,k,482,32,14265),m(n,"class","start-description svelte-1samlw1"),p(n,k,481,12,14203),m(_,"class","step-number svelte-1samlw1"),p(_,k,488,16,14436),m(D,"class","svelte-1samlw1"),p(D,k,490,18,14511),m(R,"class","svelte-1samlw1"),p(R,k,491,18,14544),p(v,k,489,16,14487),m(y,"class","instruction-item svelte-1samlw1"),p(y,k,487,14,14389),m(B,"class","step-number svelte-1samlw1"),p(B,k,496,16,14693),m(j,"class","svelte-1samlw1"),p(j,k,498,18,14768),m(q,"class","svelte-1samlw1"),p(q,k,499,18,14800),p(T,k,497,16,14744),m(P,"class","instruction-item svelte-1samlw1"),p(P,k,495,14,14646),m(se,"class","step-number svelte-1samlw1"),p(se,k,504,16,14956),m(Y,"class","svelte-1samlw1"),p(Y,k,506,18,15031),m(U,"class","svelte-1samlw1"),p(U,k,507,18,15063),p(ce,k,505,16,15007),m(X,"class","instruction-item svelte-1samlw1"),p(X,k,503,14,14909),m(f,"class","instructions svelte-1samlw1"),p(f,k,486,12,14348),m(e,"class","start-content svelte-1samlw1"),p(e,k,479,10,14113)},m:function(de,me){K(de,e,me),a(e,t),a(e,i),a(e,n),a(n,s),a(n,c),a(n,d),a(e,u),a(e,f),a(f,y),a(y,_),a(y,l),a(y,v),a(v,D),a(v,V),a(v,R),a(f,H),a(f,P),a(P,B),a(P,z),a(P,T),a(T,j),a(T,L),a(T,q),a(f,ee),a(f,X),a(X,se),a(X,re),a(X,ce),a(ce,Y),a(ce,ue),a(ce,U),a(e,Q),fe[W].m(e,null),ae=!0},p:function(de,me){let ke=W;W=ye(de),W===ke?fe[W].p(de,me):(Oe(),oe(fe[ke],1,1,()=>{fe[ke]=null}),Ue(),G=fe[W],G?G.p(de,me):(G=fe[W]=be[W](de),G.c()),ne(G,1),G.m(e,null))},i:function(de){ae||(ne(G),ae=!0)},o:function(de){oe(G),ae=!1},d:function(de){de&&h(e),fe[W].d()}};return Z("SvelteRegisterBlock",{block:De,id:At.name,type:"slot",source:'(479:8) <Card variant=\\"default\\" padding=\\"lg\\">',ctx:o}),De}function jt(o){let e,t,r,i,n,s,c,d,u,f,y,_="ランダム基音モード",E,l,v="10種類の基音からランダムに選択してトレーニング",D,N,V,R;const J=[_t,pt,gt,vt],H=[];function P(A,z){return!A[7]&&!A[8]&&!A[11]?0:A[7]?1:A[8]?2:A[11]?3:-1}~(N=P(o))&&(V=H[N]=J[N](o));const B={c:function(){e=b("div"),t=b("div"),r=b("div"),i=b("div"),n=Be("svg"),s=Be("path"),c=Be("circle"),d=Be("circle"),u=I(),f=b("div"),y=b("h1"),y.textContent=_,E=I(),l=b("p"),l.textContent=v,D=I(),V&&V.c(),this.h()},l:function(z){e=w(z,"DIV",{class:!0});var T=C(e);t=w(T,"DIV",{class:!0});var j=C(t);r=w(j,"DIV",{class:!0});var x=C(r);i=w(x,"DIV",{class:!0});var L=C(i);n=Ve(L,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var q=C(n);s=Ve(q,"path",{d:!0}),C(s).forEach(h),c=Ve(q,"circle",{cx:!0,cy:!0,r:!0}),C(c).forEach(h),d=Ve(q,"circle",{cx:!0,cy:!0,r:!0}),C(d).forEach(h),q.forEach(h),L.forEach(h),u=S(x),f=w(x,"DIV",{});var O=C(f);y=w(O,"H1",{class:!0,"data-svelte-h":!0}),$(y)!=="svelte-4p7mnf"&&(y.textContent=_),E=S(O),l=w(O,"P",{class:!0,"data-svelte-h":!0}),$(l)!=="svelte-hq31uv"&&(l.textContent=v),O.forEach(h),x.forEach(h),j.forEach(h),D=S(T),V&&V.l(T),T.forEach(h),this.h()},h:function(){m(s,"d","M9 18V5l12-2v13"),p(s,k,463,12,13635),m(c,"cx","6"),m(c,"cy","18"),m(c,"r","3"),p(c,k,464,12,13675),m(d,"cx","18"),m(d,"cy","16"),m(d,"r","3"),p(d,k,465,12,13718),m(n,"width","32"),m(n,"height","32"),m(n,"viewBox","0 0 24 24"),m(n,"fill","none"),m(n,"stroke","currentColor"),m(n,"stroke-width","2"),p(n,k,462,10,13523),m(i,"class","mode-icon svelte-1samlw1"),p(i,k,461,8,13489),m(y,"class","mode-title svelte-1samlw1"),p(y,k,469,10,13806),m(l,"class","mode-description svelte-1samlw1"),p(l,k,470,10,13854),p(f,k,468,8,13790),m(r,"class","mode-header svelte-1samlw1"),p(r,k,460,6,13455),m(t,"class","header svelte-1samlw1"),p(t,k,459,4,13428),m(e,"class","random-training svelte-1samlw1"),p(e,k,457,2,13376)},m:function(z,T){K(z,e,T),a(e,t),a(t,r),a(r,i),a(i,n),a(n,s),a(n,c),a(n,d),a(r,u),a(r,f),a(f,y),a(f,E),a(f,l),a(e,D),~N&&H[N].m(e,null),R=!0},p:function(z,T){let j=N;N=P(z),N===j?~N&&H[N].p(z,T):(V&&(Oe(),oe(H[j],1,1,()=>{H[j]=null}),Ue()),~N?(V=H[N],V?V.p(z,T):(V=H[N]=J[N](z),V.c()),ne(V,1),V.m(e,null)):V=null)},i:function(z){R||(ne(V),R=!0)},o:function(z){oe(V),R=!1},d:function(z){z&&h(e),~N&&H[N].d()}};return Z("SvelteRegisterBlock",{block:B,id:jt.name,type:"slot",source:"(457:0) <PageLayout showBackButton={true}>",ctx:o}),B}function tt(o){let e,t,r;t=new dt({props:{showBackButton:!0,$$slots:{default:[jt]},$$scope:{ctx:o}},$$inline:!0});const i={c:function(){e=I(),we(t.$$.fragment),this.h()},l:function(s){zt("svelte-1nfe5e4",ct.head).forEach(h),e=S(s),_e(t.$$.fragment,s),this.h()},h:function(){ct.title="ランダム基音モード - 相対音感トレーニング"},m:function(s,c){K(s,e,c),pe(t,s,c),r=!0},p:function(s,c){const d={};c[0]&131071|c[1]&512&&(d.$$scope={dirty:c,ctx:s}),t.$set(d)},i:function(s){r||(ne(t.$$.fragment,s),r=!0)},o:function(s){oe(t.$$.fragment,s),r=!1},d:function(s){s&&h(e),ge(t,s)}};return Z("SvelteRegisterBlock",{block:i,id:tt.name,type:"component",source:"",ctx:o}),i}function Ot(o){try{const e=new(window.AudioContext||window.webkitAudioContext),t=e.createOscillator(),r=e.createGain();t.connect(r),r.connect(e.destination),t.frequency.setValueAtTime(o,e.currentTime),t.type="sine",r.gain.setValueAtTime(.3,e.currentTime),r.gain.exponentialRampToValueAtTime(.01,e.currentTime+2.5),t.start(e.currentTime),t.stop(e.currentTime+2.5),console.log(`シンプル音源で ${o}Hz 再生中`)}catch(e){console.error("シンプル音源エラー:",e)}}function Ut(o,e,t){let r,i,n,s,{$$slots:c={},$$scope:d}=e;lt("Page",c,[]);let u=null,f=null,y=!1,_=null,E="Tone.js読み込み中...",l=!1,v=!1,D=!1,N="",V=0,R=[],J=!1,H=0,P=0,B="";const A=["ド","レ","ミ","ファ","ソ","ラ","シ","ド"],z=["Bb3","B3","C4","Db4","D4","Eb4","E4","F4","Gb4","Ab4"],T={Bb3:233.08,B3:246.94,C4:261.63,Db4:277.18,D4:293.66,Eb4:311.13,E4:329.63,F4:349.23,Gb4:369.99,Ab4:415.3},j=[1,9/8,5/4,4/3,3/2,5/3,15/8,2];async function x(){try{t(6,E="Tone.js CDN読み込み中..."),console.log("🔄 Tone.js初期化開始（ピアノ音源必須モード）"),typeof window<"u"&&!window.Tone?(console.log("📥 Tone.js CDN読み込み開始..."),await new Promise((g,Q)=>{const W=document.createElement("script");W.src="https://unpkg.com/tone@14.7.77/build/Tone.js",W.async=!0,W.onload=()=>{console.log("✅ Tone.js CDNスクリプト読み込み完了"),window.Tone?(console.log("✅ window.Tone利用可能"),g()):(console.error("❌ window.Toneが未定義"),Q(new Error("window.Toneが利用できません")))},W.onerror=G=>{console.error("❌ Tone.js CDN読み込みエラー:",G),Q(new Error("Tone.js CDNの読み込みに失敗しました"))},setTimeout(()=>{window.Tone||(console.warn("⚠️ Tone.js CDN読み込みタイムアウト"),Q(new Error("Tone.js読み込みタイムアウト")))},5e3),document.head.appendChild(W)}),t(6,E="Tone.js初期化中..."),t(3,u=window.Tone),console.log("🎵 Tone.js変数設定完了"),await L()):window.Tone?(console.log("✅ Tone.js既に読み込み済み"),t(3,u=window.Tone),await L()):(console.warn("⚠️ window未定義 - SSR環境の可能性"),setTimeout(()=>x(),1e3))}catch(g){console.error("❌ Tone.js初期化エラー:",g),t(5,_=`初期化エラー: ${g.message}`),t(6,E="エラー"),setTimeout(()=>{console.log("🔧 自動フォールバックモード切り替え"),X()},3e3)}}async function L(){try{if(!window.Tone)throw console.error("❌ window.Tone が利用できません"),new Error("Tone.js未読み込み");if(t(3,u=window.Tone),!u)throw console.error("❌ Tone.js未初期化"),new Error("Tone.js未初期化");if(console.log("🎹 サンプラー設定開始"),t(6,E="AudioContext初期化中..."),console.log(`📊 AudioContext状態: ${u.context.state}`),u.context.state!=="running"){console.log("🔊 AudioContext開始中..."),t(6,E="AudioContext手動開始が必要です");return}t(6,E="ローカルピアノ音源読み込み中..."),console.log("🎵 ローカル Salamander Grand Piano サンプラー作成中...");const g={Bb3:"Bb3.mp3",B3:"B3.mp3",C4:"C4.mp3",Db4:"Db4.mp3",D4:"D4.mp3",Eb4:"Eb4.mp3",E4:"E4.mp3",F4:"F4.mp3",Gb4:"Gb4.mp3",Ab4:"Ab4.mp3"};await new Promise((Q,W)=>{console.log("🔍 BASE_URL確認:","./"),console.log("🔍 完全baseUrl:","./audio/piano/");const G=".//audio/piano/";console.log("🔍 最終pianoBaseUrl:",G),f=new u.Sampler({urls:g,baseUrl:G,release:1.5,onload:()=>{console.log("✅ ローカル Salamander Grand Piano音源読み込み完了"),console.log("🎹 読み込み済み音源:",Object.keys(g)),t(4,y=!0),t(6,E="読み込み完了"),Q()},onerror:ae=>{console.error("❌ ローカル Salamander Grand Piano音源読み込みエラー:",ae),console.error("🔍 デバッグ情報 - baseUrl:","/audio/piano/"),console.error("🔍 デバッグ情報 - urls:",g),W(new Error("ローカル音源読み込み失敗"))}}).toDestination(),console.log("🔗 サンプラーをDestinationに接続完了"),console.log("🧪 個別音源ファイルテスト開始...");for(const[ae,be]of Object.entries(g)){const fe=`${G}${be}`;console.log(`🎵 テスト: ${ae} -> ${fe}`),fetch(fe,{method:"HEAD"}).then(ye=>{ye.ok?console.log(`✅ 音源ファイル確認成功: ${fe}`):console.error(`❌ 音源ファイル確認失敗: ${fe} (${ye.status})`)}).catch(ye=>{console.error(`❌ 音源ファイルアクセスエラー: ${fe}`,ye)})}setTimeout(()=>{y||(console.warn("⚠️ ローカルピアノ音源読み込みタイムアウト（5秒）"),W(new Error("ローカル音源読み込みタイムアウト")))},5e3)})}catch(g){console.error("❌ サンプラー設定エラー:",g),console.log("🔧 サンプラー再試行を試みます"),t(5,_=`音源エラー: ${g.message} - 再試行中...`),t(6,E="音源読み込み再試行中..."),setTimeout(async()=>{try{console.log("🔄 サンプラー再試行開始"),await L()}catch(Q){console.error("❌ 再試行も失敗:",Q),console.log("🚨 ピアノ音源必須モード - フォールバック無効"),t(5,_=`❌ ピアノ音源読み込み失敗: ${Q.message}`),t(6,E="ピアノ音源読み込み失敗 - ページを再読み込みしてください"),l=!1,t(4,y=!1)}},3e3)}}He(()=>{console.log("🚀 onMount実行 - Tone.js強制初期化開始"),x()}),rt(()=>{f&&f.dispose()});function q(g){return Math.round(T[g]||0)}function O(g,Q){const W=T[g];return W?Math.round(W*j[Q]):0}async function ee(){console.log("🔊 手動AudioContext開始実行");try{u&&u.context&&u.context.state==="suspended"&&(await u.start(),console.log("✅ AudioContext手動開始完了"),await L())}catch(g){console.error("❌ 手動AudioContext開始失敗:",g),t(5,_=`AudioContext開始失敗: ${g.message}`)}}function X(){console.log("🔧 手動でシンプル音源モードに切り替え"),l=!0,t(4,y=!0),t(5,_=null),t(6,E="シンプル音源モード")}function se(){const g=Math.floor(Math.random()*z.length);return t(9,N=z[g]),N}function ie(){t(10,V=0),t(0,R=[]),t(11,J=!1);const g=se();re(g)}async function re(g){t(7,v=!0),console.log(`🎹 ピアノ基音再生: ${g} (Tone.js読み込み状態: ${y})`);try{if(!y||!f){console.error("❌ Tone.js または Sampler が未初期化 - 再生不可"),alert("ピアノ音源が読み込まれていません。ページを再読み込みしてください。"),t(7,v=!1);return}u.context.state!=="running"&&await u.start(),f.triggerAttackRelease(g,"2.5"),console.log(`Salamander Grand Piano で ${g} 再生開始`),setTimeout(()=>{t(7,v=!1),ce()},2500)}catch(Q){console.error("❌ ピアノ音源再生エラー:",Q),alert(`ピアノ音源再生に失敗しました: ${Q.message}`),t(7,v=!1)}}function ce(){t(8,D=!0);const g=A.map((W,G)=>O(N,G)),Q=setInterval(()=>{if(!D){clearInterval(Q);return}t(12,H=40+Math.random()*50);const W=g[V],G=(Math.random()-.5)*40;t(13,P=W+G);const ae=Math.max(0,100-Math.abs(G)*2);if(t(14,B=A[V]),Math.random()>.6){const be=ae>70;t(0,R[V]=be,R),t(10,V++,V),console.log(`${B}: ${ae.toFixed(1)}% 精度, ${be?"正解":"不正解"}`),V>=8&&Y()}},300)}function Y(){t(8,D=!1),t(11,J=!0)}function Ee(g){return g>=90?"Excellent":g>=70?"Good":g>=50?"Practice":"Needs Work"}function ue(g){return g>=90?"素晴らしい相対音感です！完璧な演奏でした。":g>=70?"良好な相対音感です。もう少し練習すれば完璧になります。":g>=50?"基本的な相対音感は身についています。継続練習で向上できます。":"相対音感の基礎練習から始めましょう。毎日少しずつ練習することが大切です。"}const U=[];return Lt.keys(e).forEach(g=>{!~U.indexOf(g)&&g.slice(0,2)!=="$$"&&g!=="slot"&&Gt.warn(`<Page> was created with unknown prop '${g}'`)}),o.$capture_state=()=>({onMount:He,onDestroy:rt,Card:Ce,Button:Se,PageLayout:dt,VolumeBar:mt,PitchDisplay:ht,Tone:u,sampler:f,isToneLoaded:y,toneLoadingError:_,loadingStatus:E,useSimpleAudio:l,isPlaying:v,isDetecting:D,currentBaseNote:N,currentScaleIndex:V,scaleResults:R,showResults:J,currentVolume:H,currentFrequency:P,currentNote:B,scaleNotes:A,baseNotes:z,baseNoteFrequencies:T,scaleRatios:j,initializeTone:x,setupSampler:L,getBaseNoteFrequency:q,getScaleFrequency:O,handleManualAudioStart:ee,forceSimpleAudio:X,selectRandomBase:se,startTraining:ie,playBaseNote:re,playSimpleBeep:Ot,startDetection:ce,finishTraining:Y,getGrade:Ee,getFeedback:ue,score:i,feedback:s,grade:n,correctCount:r}),o.$inject_state=g=>{"Tone"in g&&t(3,u=g.Tone),"sampler"in g&&(f=g.sampler),"isToneLoaded"in g&&t(4,y=g.isToneLoaded),"toneLoadingError"in g&&t(5,_=g.toneLoadingError),"loadingStatus"in g&&t(6,E=g.loadingStatus),"useSimpleAudio"in g&&(l=g.useSimpleAudio),"isPlaying"in g&&t(7,v=g.isPlaying),"isDetecting"in g&&t(8,D=g.isDetecting),"currentBaseNote"in g&&t(9,N=g.currentBaseNote),"currentScaleIndex"in g&&t(10,V=g.currentScaleIndex),"scaleResults"in g&&t(0,R=g.scaleResults),"showResults"in g&&t(11,J=g.showResults),"currentVolume"in g&&t(12,H=g.currentVolume),"currentFrequency"in g&&t(13,P=g.currentFrequency),"currentNote"in g&&t(14,B=g.currentNote),"score"in g&&t(1,i=g.score),"feedback"in g&&t(15,s=g.feedback),"grade"in g&&t(16,n=g.grade),"correctCount"in g&&t(2,r=g.correctCount)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),o.$$.update=()=>{o.$$.dirty[0]&1&&t(2,r=R.filter(g=>g).length),o.$$.dirty[0]&4&&t(1,i=Math.round(r/8*100)),o.$$.dirty[0]&2&&t(16,n=Ee(i)),o.$$.dirty[0]&2&&t(15,s=ue(i))},[R,i,r,u,y,_,E,v,D,N,V,J,H,P,B,s,n,A,q,O,ee,X,ie]}class Qt extends nt{constructor(e){super(e),st(this,e,Ut,tt,ot,{},null,[-1,-1]),Z("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:tt.name})}}export{Qt as component};
