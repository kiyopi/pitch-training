import{S as ne,i as oe,d as M,s as ie,v as le,c as se,a as ce,D as ht,E as Et,b as v,q as lt,r as X,u as K,f as b,w as st,F as re,m as R,x as ct,p as F,y as rt,g as h,z as m,h as _,j as y,k as z,B as at,A as N,o as p,C as ut,G as At,H as Pt,l as Y,t as Q,n as nt,e as gt,I as vt,J as ft,K as dt}from"../chunks/EvMzC0aQ.js";import{g as ae}from"../chunks/D0QH3NT1.js";import"../chunks/DrEUfQCr.js";import{p as _t}from"../chunks/DXvGbpwH.js";import{P as Mt,B as zt,C as yt}from"../chunks/yXPAb40O.js";import{P as ue,V as Rt}from"../chunks/CmUJIz7r.js";const{console:fe}=ae,g="src/routes/microphone-test/+page.svelte";function Ft(c){let t,n="üé§ „Éû„Ç§„ÇØ„ÉÜ„Çπ„Éà„ÇíÈñãÂßã„Åó„Å¶„Åè„Å†„Åï„ÅÑ",s,e,i="„Éû„Ç§„ÇØË®±ÂèØ„ÇíÂèñÂæó",l,r;const u={c:function(){t=p("div"),t.textContent=n,s=F(),e=p("button"),e.textContent=i,this.h()},l:function(o){t=y(o,"DIV",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-1trsgl3"&&(t.textContent=n),s=R(o),e=y(o,"BUTTON",{class:!0,"data-svelte-h":!0}),N(e)!=="svelte-1m6icav"&&(e.textContent=i),this.h()},h:function(){m(t,"class","status-indicator pending svelte-ztuqv4"),_(t,g,456,14,13774),m(e,"class","retry-button svelte-ztuqv4"),_(e,g,457,14,13851)},m:function(o,a){b(o,t,a),b(o,s,a),b(o,e,a),l||(r=ft(e,"click",c[11],!1),l=!0)},p:nt,d:function(o){o&&(v(t),v(s),v(e)),l=!1,r()}};return M("SvelteRegisterBlock",{block:u,id:Ft.name,type:"else",source:"(456:12) {:else}",ctx:c}),u}function Nt(c){let t,n="‚ùå „Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„Çπ„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü",s,e,i="„Éû„Ç§„ÇØË®±ÂèØ„ÇíÂÜçË©¶Ë°å",l,r;const u={c:function(){t=p("div"),t.textContent=n,s=F(),e=p("button"),e.textContent=i,this.h()},l:function(o){t=y(o,"DIV",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-11p6bhs"&&(t.textContent=n),s=R(o),e=y(o,"BUTTON",{class:!0,"data-svelte-h":!0}),N(e)!=="svelte-1co4n23"&&(e.textContent=i),this.h()},h:function(){m(t,"class","status-indicator error svelte-ztuqv4"),_(t,g,451,14,13555),m(e,"class","retry-button svelte-ztuqv4"),_(e,g,452,14,13631)},m:function(o,a){b(o,t,a),b(o,s,a),b(o,e,a),l||(r=ft(e,"click",c[11],!1),l=!0)},p:nt,d:function(o){o&&(v(t),v(s),v(e)),l=!1,r()}};return M("SvelteRegisterBlock",{block:u,id:Nt.name,type:"if",source:"(451:48) ",ctx:c}),u}function Lt(c){let t,n="‚ùå „Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„Çπ„ÅåÊãíÂê¶„Åï„Çå„Åæ„Åó„Åü",s,e,i="„Éû„Ç§„ÇØË®±ÂèØ„ÇíÂÜçË©¶Ë°å",l,r;const u={c:function(){t=p("div"),t.textContent=n,s=F(),e=p("button"),e.textContent=i,this.h()},l:function(o){t=y(o,"DIV",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-4rewx4"&&(t.textContent=n),s=R(o),e=y(o,"BUTTON",{class:!0,"data-svelte-h":!0}),N(e)!=="svelte-1co4n23"&&(e.textContent=i),this.h()},h:function(){m(t,"class","status-indicator error svelte-ztuqv4"),_(t,g,446,14,13309),m(e,"class","retry-button svelte-ztuqv4"),_(e,g,447,14,13383)},m:function(o,a){b(o,t,a),b(o,s,a),b(o,e,a),l||(r=ft(e,"click",c[11],!1),l=!0)},p:nt,d:function(o){o&&(v(t),v(s),v(e)),l=!1,r()}};return M("SvelteRegisterBlock",{block:u,id:Lt.name,type:"if",source:"(446:49) ",ctx:c}),u}function Tt(c){let t,n="‚úÖ „Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„ÇπË®±ÂèØÊ∏à„Åø",s,e;function i(f,o){if(!f[3]&&!f[4])return Ut;if(!f[3]&&f[4])return Ot;if(f[3])return jt}let l=i(c),r=l&&l(c);const u={c:function(){t=p("div"),t.textContent=n,s=F(),r&&r.c(),e=vt(),this.h()},l:function(o){t=y(o,"DIV",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-96x1w2"&&(t.textContent=n),s=R(o),r&&r.l(o),e=vt(),this.h()},h:function(){m(t,"class","status-indicator granted svelte-ztuqv4"),_(t,g,431,14,12503)},m:function(o,a){b(o,t,a),b(o,s,a),r&&r.m(o,a),b(o,e,a)},p:function(o,a){l===(l=i(o))&&r?r.p(o,a):(r&&r.d(1),r=l&&l(o),r&&(r.c(),r.m(e.parentNode,e)))},d:function(o){o&&(v(t),v(s),v(e)),r&&r.d(o)}};return M("SvelteRegisterBlock",{block:u,id:Tt.name,type:"if",source:"(431:50) ",ctx:c}),u}function Ht(c){let t,n="‚è≥ „Éû„Ç§„ÇØË®±ÂèØ„ÇíÁ¢∫Ë™ç‰∏≠...";const s={c:function(){t=p("div"),t.textContent=n,this.h()},l:function(i){t=y(i,"DIV",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-qiomfc"&&(t.textContent=n),this.h()},h:function(){m(t,"class","status-indicator pending svelte-ztuqv4"),_(t,g,429,14,12379)},m:function(i,l){b(i,t,l)},p:nt,d:function(i){i&&v(t)}};return M("SvelteRegisterBlock",{block:s,id:Ht.name,type:"if",source:"(429:12) {#if micPermission === 'pending'}",ctx:c}),s}function jt(c){let t,n="üé§ „É™„Ç¢„É´„Çø„Ç§„É†Ëß£Êûê‰∏≠";const s={c:function(){t=p("div"),t.textContent=n,this.h()},l:function(i){t=y(i,"DIV",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-bm11qy"&&(t.textContent=n),this.h()},h:function(){m(t,"class","status-indicator success svelte-ztuqv4"),_(t,g,443,16,13168)},m:function(i,l){b(i,t,l)},p:nt,d:function(i){i&&v(t)}};return M("SvelteRegisterBlock",{block:s,id:jt.name,type:"if",source:"(443:36) ",ctx:c}),s}function Ot(c){let t,n="‚ö†Ô∏è Èü≥Â£∞„Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà„Åå„Éñ„É≠„ÉÉ„ÇØ„Åï„Çå„Å¶„ÅÑ„Åæ„Åô",s,e,i="Èü≥Â£∞Ê©üËÉΩ„ÇíÂÜçË©¶Ë°å",l,r;const u={c:function(){t=p("div"),t.textContent=n,s=F(),e=p("button"),e.textContent=i,this.h()},l:function(o){t=y(o,"DIV",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-rn7aam"&&(t.textContent=n),s=R(o),e=y(o,"BUTTON",{class:!0,"data-svelte-h":!0}),N(e)!=="svelte-hrmonq"&&(e.textContent=i),this.h()},h:function(){m(t,"class","status-indicator warning svelte-ztuqv4"),_(t,g,438,16,12912),m(e,"class","retry-button svelte-ztuqv4"),_(e,g,439,16,12995)},m:function(o,a){b(o,t,a),b(o,s,a),b(o,e,a),l||(r=ft(e,"click",c[12],!1),l=!0)},p:nt,d:function(o){o&&(v(t),v(s),v(e)),l=!1,r()}};return M("SvelteRegisterBlock",{block:u,id:Ot.name,type:"if",source:"(438:60) ",ctx:c}),u}function Ut(c){let t,n="üéµ Èü≥Â£∞Ê©üËÉΩ„ÇíÈñãÂßã„Åó„Å¶„Åè„Å†„Åï„ÅÑ",s,e,i="üé§ „Éû„Ç§„ÇØ„ÉÜ„Çπ„Éà„ÇíÈñãÂßã",l,r;const u={c:function(){t=p("div"),t.textContent=n,s=F(),e=p("button"),e.textContent=i,this.h()},l:function(o){t=y(o,"DIV",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-13wnluo"&&(t.textContent=n),s=R(o),e=y(o,"BUTTON",{class:!0,"data-svelte-h":!0}),N(e)!=="svelte-4juur8"&&(e.textContent=i),this.h()},h:function(){m(t,"class","status-indicator warning svelte-ztuqv4"),_(t,g,433,16,12634),m(e,"class","retry-button svelte-ztuqv4"),_(e,g,434,16,12711)},m:function(o,a){b(o,t,a),b(o,s,a),b(o,e,a),l||(r=ft(e,"click",c[12],!1),l=!0)},p:nt,d:function(o){o&&(v(t),v(s),v(e)),l=!1,r()}};return M("SvelteRegisterBlock",{block:u,id:Ut.name,type:"if",source:"(433:14) {#if !isListening && !audioContextBlocked}",ctx:c}),u}function pt(c){let t,n,s,e="Èü≥Èáè„É¨„Éô„É´",i,l,r,u,f,o,a,k="Èü≥Á®ãÊ§úÂá∫",S,C,x,U=c[6].toFixed(1)+"",V,B,w,T,D,G,L,H,W,I,A;l=new Rt({props:{volume:c[5],height:"16px",className:"volume-bar-wrapper"},$$inline:!0});let P=!c[1]&&kt(c),E=c[8]>0&&Ct(c);function et(J,q){return J[2]?J[8]<50?Wt:Gt:Jt}let d=et(c),j=d(c),O=c[1]&&!c[2]&&bt(c);const $={c:function(){t=p("div"),n=p("div"),s=p("h3"),s.textContent=e,i=F(),rt(l.$$.fragment),r=F(),u=p("div"),P&&P.c(),f=F(),o=p("div"),a=p("h3"),a.textContent=k,S=F(),C=p("div"),x=p("div"),V=Q(U),B=Q(" Hz"),w=F(),T=p("div"),D=Q(c[7]),G=F(),E&&E.c(),L=F(),H=p("div"),j.c(),W=F(),O&&O.c(),I=vt(),this.h()},l:function(q){t=y(q,"DIV",{class:!0});var Z=z(t);n=y(Z,"DIV",{class:!0});var tt=z(n);s=y(tt,"H3",{class:!0,"data-svelte-h":!0}),N(s)!=="svelte-1nc8gri"&&(s.textContent=e),i=R(tt),ct(l.$$.fragment,tt),r=R(tt),u=y(tt,"DIV",{class:!0});var Bt=z(u);P&&P.l(Bt),Bt.forEach(v),tt.forEach(v),f=R(Z),o=y(Z,"DIV",{class:!0});var ot=z(o);a=y(ot,"H3",{class:!0,"data-svelte-h":!0}),N(a)!=="svelte-1ofzoy2"&&(a.textContent=k),S=R(ot),C=y(ot,"DIV",{class:!0});var it=z(C);x=y(it,"DIV",{class:!0});var mt=z(x);V=Y(mt,U),B=Y(mt," Hz"),mt.forEach(v),w=R(it),T=y(it,"DIV",{class:!0});var Dt=z(T);D=Y(Dt,c[7]),Dt.forEach(v),G=R(it),E&&E.l(it),it.forEach(v),L=R(ot),H=y(ot,"DIV",{class:!0});var wt=z(H);j.l(wt),wt.forEach(v),ot.forEach(v),Z.forEach(v),W=R(q),O&&O.l(q),I=vt(),this.h()},h:function(){m(s,"class","display-title svelte-ztuqv4"),_(s,g,468,16,14213),m(u,"class","volume-status svelte-ztuqv4"),_(u,g,470,16,14364),m(n,"class","volume-section svelte-ztuqv4"),_(n,g,467,14,14168),m(a,"class","display-title svelte-ztuqv4"),_(a,g,479,16,14670),m(x,"class","frequency-value svelte-ztuqv4"),_(x,g,481,18,14772),m(T,"class","note-value svelte-ztuqv4"),_(T,g,482,18,14858),m(C,"class","frequency-display svelte-ztuqv4"),_(C,g,480,16,14722),m(H,"class","frequency-status svelte-ztuqv4"),_(H,g,495,16,15509),m(o,"class","frequency-section"),_(o,g,478,14,14622),m(t,"class","realtime-display svelte-ztuqv4"),_(t,g,465,12,14094)},m:function(q,Z){b(q,t,Z),h(t,n),h(n,s),h(n,i),st(l,n,null),h(n,r),h(n,u),P&&P.m(u,null),h(t,f),h(t,o),h(o,a),h(o,S),h(o,C),h(C,x),h(x,V),h(x,B),h(C,w),h(C,T),h(T,D),h(C,G),E&&E.m(C,null),h(o,L),h(o,H),j.m(H,null),b(q,W,Z),O&&O.m(q,Z),b(q,I,Z),A=!0},p:function(q,Z){const tt={};Z&32&&(tt.volume=q[5]),l.$set(tt),q[1]?P&&(P.d(1),P=null):P||(P=kt(q),P.c(),P.m(u,null)),(!A||Z&64)&&U!==(U=q[6].toFixed(1)+"")&&gt(V,U),(!A||Z&128)&&gt(D,q[7]),q[8]>0?E?E.p(q,Z):(E=Ct(q),E.c(),E.m(C,null)):E&&(E.d(1),E=null),d!==(d=et(q))&&(j.d(1),j=d(q),j&&(j.c(),j.m(H,null))),q[1]&&!q[2]?O||(O=bt(q),O.c(),O.m(I.parentNode,I)):O&&(O.d(1),O=null)},i:function(q){A||(K(l.$$.fragment,q),A=!0)},o:function(q){X(l.$$.fragment,q),A=!1},d:function(q){q&&(v(t),v(W),v(I)),lt(l),P&&P.d(),E&&E.d(),j.d(),O&&O.d(q)}};return M("SvelteRegisterBlock",{block:$,id:pt.name,type:"if",source:"(465:10) {#if micPermission === 'granted' && isListening}",ctx:c}),$}function kt(c){let t,n="‚è≥ Â£∞„ÇíÂá∫„Åó„Å¶Èü≥Èáè„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ";const s={c:function(){t=p("span"),t.textContent=n,this.h()},l:function(i){t=y(i,"SPAN",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-7eexnn"&&(t.textContent=n),this.h()},h:function(){m(t,"class","status-pending svelte-ztuqv4"),_(t,g,472,20,14452)},m:function(i,l){b(i,t,l)},d:function(i){i&&v(t)}};return M("SvelteRegisterBlock",{block:s,id:kt.name,type:"if",source:"(472:18) {#if !volumeDetected}",ctx:c}),s}function Ct(c){let t,n,s,e,i,l;const r={c:function(){t=p("div"),n=Q("‰ø°È†ºÂ∫¶: "),s=Q(c[8]),e=Q(`%
                      `),i=p("div"),l=p("div"),this.h()},l:function(f){t=y(f,"DIV",{class:!0});var o=z(t);n=Y(o,"‰ø°È†ºÂ∫¶: "),s=Y(o,c[8]),e=Y(o,`%
                      `),i=y(o,"DIV",{class:!0});var a=z(i);l=y(a,"DIV",{class:!0,style:!0}),z(l).forEach(v),a.forEach(v),o.forEach(v),this.h()},h:function(){m(l,"class","confidence-fill svelte-ztuqv4"),dt(l,"width",c[8]+"%"),dt(l,"background-color",c[8]>70?"#10b981":c[8]>40?"#f59e0b":"#ef4444"),_(l,g,487,24,15128),m(i,"class","confidence-bar svelte-ztuqv4"),_(i,g,486,22,15075),m(t,"class","confidence-display svelte-ztuqv4"),_(t,g,484,20,14970)},m:function(f,o){b(f,t,o),h(t,n),h(t,s),h(t,e),h(t,i),h(i,l)},p:function(f,o){o&256&&gt(s,f[8]),o&256&&dt(l,"width",f[8]+"%"),o&256&&dt(l,"background-color",f[8]>70?"#10b981":f[8]>40?"#f59e0b":"#ef4444")},d:function(f){f&&v(t)}};return M("SvelteRegisterBlock",{block:r,id:Ct.name,type:"if",source:"(484:18) {#if detectionConfidence > 0}",ctx:c}),r}function Gt(c){let t,n="‚úÖ Èü≥Á®ãÊ§úÂá∫‰∏≠";const s={c:function(){t=p("span"),t.textContent=n,this.h()},l:function(i){t=y(i,"SPAN",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-acahk5"&&(t.textContent=n),this.h()},h:function(){m(t,"class","status-success svelte-ztuqv4"),_(t,g,501,20,15834)},m:function(i,l){b(i,t,l)},d:function(i){i&&v(t)}};return M("SvelteRegisterBlock",{block:s,id:Gt.name,type:"else",source:"(501:18) {:else}",ctx:c}),s}function Wt(c){let t,n="‚ö†Ô∏è „Çà„ÇäÊòéÁ¢∫„Å´Áô∫Â£∞„Åó„Å¶„Åè„Å†„Åï„ÅÑ";const s={c:function(){t=p("span"),t.textContent=n,this.h()},l:function(i){t=y(i,"SPAN",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-lq2kpp"&&(t.textContent=n),this.h()},h:function(){m(t,"class","status-warning svelte-ztuqv4"),_(t,g,499,20,15735)},m:function(i,l){b(i,t,l)},d:function(i){i&&v(t)}};return M("SvelteRegisterBlock",{block:s,id:Wt.name,type:"if",source:"(499:53) ",ctx:c}),s}function Jt(c){let t,n="‚è≥ „Äå„Éâ„Äç„ÇíÁô∫Â£∞„Åó„Å¶Èü≥Á®ã„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ";const s={c:function(){t=p("span"),t.textContent=n,this.h()},l:function(i){t=y(i,"SPAN",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-lvftl7"&&(t.textContent=n),this.h()},h:function(){m(t,"class","status-pending svelte-ztuqv4"),_(t,g,497,20,15603)},m:function(i,l){b(i,t,l)},d:function(i){i&&v(t)}};return M("SvelteRegisterBlock",{block:s,id:Jt.name,type:"if",source:"(497:18) {#if !frequencyDetected}",ctx:c}),s}function bt(c){let t,n,s,e="„Äå„Éâ„Äç„ÇíÁô∫Â£∞„Åó„Å¶„Åè„Å†„Åï„ÅÑ",i,l,r="‰ªªÊÑè„ÅÆÈ´ò„Åï„Åß„Äå„Éâ„Éº„Äç„Å®Ê≠å„ÅÜ„Çà„ÅÜ„Å´Áô∫Â£∞„Åó„Å¶„Åè„Å†„Åï„ÅÑ";const u={c:function(){t=p("div"),n=p("div"),s=p("h3"),s.textContent=e,i=F(),l=p("p"),l.textContent=r,this.h()},l:function(o){t=y(o,"DIV",{class:!0});var a=z(t);n=y(a,"DIV",{class:!0});var k=z(n);s=y(k,"H3",{class:!0,"data-svelte-h":!0}),N(s)!=="svelte-xe90gt"&&(s.textContent=e),i=R(k),l=y(k,"P",{class:!0,"data-svelte-h":!0}),N(l)!=="svelte-1rtajtc"&&(l.textContent=r),k.forEach(v),a.forEach(v),this.h()},h:function(){m(s,"class","svelte-ztuqv4"),_(s,g,511,18,16150),m(l,"class","svelte-ztuqv4"),_(l,g,512,18,16190),m(n,"class","guidance-content svelte-ztuqv4"),_(n,g,510,16,16101),m(t,"class","guidance svelte-ztuqv4"),_(t,g,509,14,16062)},m:function(o,a){b(o,t,a),h(t,n),h(n,s),h(n,i),h(n,l)},d:function(o){o&&v(t)}};return M("SvelteRegisterBlock",{block:u,id:bt.name,type:"if",source:"(509:12) {#if volumeDetected && !frequencyDetected}",ctx:c}),u}function Zt(c){let t,n,s,e;function i(o,a){return o[0]==="pending"?Ht:o[0]==="granted"?Tt:o[0]==="denied"?Lt:o[0]==="error"?Nt:Ft}let l=i(c),r=l(c),u=c[0]==="granted"&&c[3]&&pt(c);const f={c:function(){t=p("div"),n=p("div"),r.c(),s=F(),u&&u.c(),this.h()},l:function(a){t=y(a,"DIV",{class:!0});var k=z(t);n=y(k,"DIV",{class:!0});var S=z(n);r.l(S),S.forEach(v),s=R(k),u&&u.l(k),k.forEach(v),this.h()},h:function(){m(n,"class","mic-status svelte-ztuqv4"),_(n,g,427,10,12294),m(t,"class","mic-test-content svelte-ztuqv4"),_(t,g,424,8,12215)},m:function(a,k){b(a,t,k),h(t,n),r.m(n,null),h(t,s),u&&u.m(t,null),e=!0},p:function(a,k){l===(l=i(a))&&r?r.p(a,k):(r.d(1),r=l(a),r&&(r.c(),r.m(n,null))),a[0]==="granted"&&a[3]?u?(u.p(a,k),k&9&&K(u,1)):(u=pt(a),u.c(),K(u,1),u.m(t,null)):u&&(At(),X(u,1,1,()=>{u=null}),Pt())},i:function(a){e||(K(u),e=!0)},o:function(a){X(u),e=!1},d:function(a){a&&v(t),r.d(),u&&u.d()}};return M("SvelteRegisterBlock",{block:f,id:Zt.name,type:"slot",source:'(424:6) <Card variant=\\"default\\" padding=\\"lg\\">',ctx:c}),f}function Kt(c){let t,n;t=new zt({props:{variant:"disabled",size:"lg",fullWidth:!0,disabled:!0,$$slots:{default:[Qt]},$$scope:{ctx:c}},$$inline:!0});const s={c:function(){rt(t.$$.fragment)},l:function(i){ct(t.$$.fragment,i)},m:function(i,l){st(t,i,l),n=!0},p:function(i,l){const r={};l&33554432&&(r.$$scope={dirty:l,ctx:i}),t.$set(r)},i:function(i){n||(K(t.$$.fragment,i),n=!0)},o:function(i){X(t.$$.fragment,i),n=!1},d:function(i){lt(t,i)}};return M("SvelteRegisterBlock",{block:s,id:Kt.name,type:"else",source:"(540:10) {:else}",ctx:c}),s}function Yt(c){let t,n;t=new zt({props:{href:c[10].path,variant:"primary",size:"lg",fullWidth:!0,$$slots:{default:[Xt]},$$scope:{ctx:c}},$$inline:!0});const s={c:function(){rt(t.$$.fragment)},l:function(i){ct(t.$$.fragment,i)},m:function(i,l){st(t,i,l),n=!0},p:function(i,l){const r={};l&33554432&&(r.$$scope={dirty:l,ctx:i}),t.$set(r)},i:function(i){n||(K(t.$$.fragment,i),n=!0)},o:function(i){X(t.$$.fragment,i),n=!1},d:function(i){lt(t,i)}};return M("SvelteRegisterBlock",{block:s,id:Yt.name,type:"if",source:"(531:10) {#if startButtonEnabled}",ctx:c}),s}function Qt(c){let t;const n={c:function(){t=Q("„Éû„Ç§„ÇØ„ÉÜ„Çπ„ÉàÂÆå‰∫ÜÂæå„Å´ÈñãÂßã")},l:function(e){t=Y(e,"„Éû„Ç§„ÇØ„ÉÜ„Çπ„ÉàÂÆå‰∫ÜÂæå„Å´ÈñãÂßã")},m:function(e,i){b(e,t,i)},d:function(e){e&&v(t)}};return M("SvelteRegisterBlock",{block:n,id:Qt.name,type:"slot",source:'(541:12) <Button                variant=\\"disabled\\"                size=\\"lg\\"                fullWidth                disabled             >',ctx:c}),n}function Xt(c){let t;const n={c:function(){t=Q("„Éà„É¨„Éº„Éã„É≥„Ç∞ÈñãÂßã")},l:function(e){t=Y(e,"„Éà„É¨„Éº„Éã„É≥„Ç∞ÈñãÂßã")},m:function(e,i){b(e,t,i)},d:function(e){e&&v(t)}};return M("SvelteRegisterBlock",{block:n,id:Xt.name,type:"slot",source:'(532:12) <Button                href={selectedMode.path}                variant=\\"primary\\"                size=\\"lg\\"                fullWidth             >',ctx:c}),n}function $t(c){let t,n,s=c[10].name+"",e,i,l,r=c[10].description+"",u,f,o,a,k;const S=[Yt,Kt],C=[];function x(V,B){return V[9]?0:1}o=x(c),a=C[o]=S[o](c);const U={c:function(){t=p("div"),n=p("h3"),e=Q(s),i=F(),l=p("p"),u=Q(r),f=F(),a.c(),this.h()},l:function(B){t=y(B,"DIV",{class:!0});var w=z(t);n=y(w,"H3",{class:!0});var T=z(n);e=Y(T,s),T.forEach(v),i=R(w),l=y(w,"P",{class:!0});var D=z(l);u=Y(D,r),D.forEach(v),f=R(w),a.l(w),w.forEach(v),this.h()},h:function(){m(n,"class","start-title svelte-ztuqv4"),_(n,g,525,10,16484),m(l,"class","start-description svelte-ztuqv4"),_(l,g,526,10,16543),m(t,"class","start-content svelte-ztuqv4"),_(t,g,524,8,16446)},m:function(B,w){b(B,t,w),h(t,n),h(n,e),h(t,i),h(t,l),h(l,u),h(t,f),C[o].m(t,null),k=!0},p:function(B,w){let T=o;o=x(B),o===T?C[o].p(B,w):(At(),X(C[T],1,1,()=>{C[T]=null}),Pt(),a=C[o],a?a.p(B,w):(a=C[o]=S[o](B),a.c()),K(a,1),a.m(t,null))},i:function(B){k||(K(a),k=!0)},o:function(B){X(a),k=!1},d:function(B){B&&v(t),C[o].d()}};return M("SvelteRegisterBlock",{block:U,id:$t.name,type:"slot",source:'(524:6) <Card variant=\\"default\\" padding=\\"lg\\">',ctx:c}),U}function te(c){let t,n,s,e,i,l,r,u,f,o,a,k,S="„Éû„Ç§„ÇØ„ÉÜ„Çπ„Éà",C,x,U="Èü≥ÊÑü„Éà„É¨„Éº„Éã„É≥„Ç∞„ÇíÂßã„ÇÅ„ÇãÂâç„Å´„ÄÅ„Éû„Ç§„ÇØ„ÅÆÂãï‰Ωú„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åô",V,B,w,T,D,G,L;w=new yt({props:{variant:"default",padding:"lg",$$slots:{default:[Zt]},$$scope:{ctx:c}},$$inline:!0}),G=new yt({props:{variant:"default",padding:"lg",$$slots:{default:[$t]},$$scope:{ctx:c}},$$inline:!0});const H={c:function(){t=p("div"),n=p("div"),s=p("div"),e=p("div"),i=ut("svg"),l=ut("path"),r=ut("path"),u=ut("line"),f=ut("line"),o=F(),a=p("div"),k=p("h1"),k.textContent=S,C=F(),x=p("p"),x.textContent=U,V=F(),B=p("div"),rt(w.$$.fragment),T=F(),D=p("div"),rt(G.$$.fragment),this.h()},l:function(I){t=y(I,"DIV",{class:!0});var A=z(t);n=y(A,"DIV",{class:!0});var P=z(n);s=y(P,"DIV",{class:!0});var E=z(s);e=y(E,"DIV",{class:!0});var et=z(e);i=at(et,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var d=z(i);l=at(d,"path",{d:!0}),z(l).forEach(v),r=at(d,"path",{d:!0}),z(r).forEach(v),u=at(d,"line",{x1:!0,x2:!0,y1:!0,y2:!0}),z(u).forEach(v),f=at(d,"line",{x1:!0,x2:!0,y1:!0,y2:!0}),z(f).forEach(v),d.forEach(v),et.forEach(v),o=R(E),a=y(E,"DIV",{});var j=z(a);k=y(j,"H1",{class:!0,"data-svelte-h":!0}),N(k)!=="svelte-z7m4lk"&&(k.textContent=S),C=R(j),x=y(j,"P",{class:!0,"data-svelte-h":!0}),N(x)!=="svelte-1vtv92f"&&(x.textContent=U),j.forEach(v),E.forEach(v),P.forEach(v),V=R(A),B=y(A,"DIV",{class:!0});var O=z(B);ct(w.$$.fragment,O),O.forEach(v),T=R(A),D=y(A,"DIV",{class:!0});var $=z(D);ct(G.$$.fragment,$),$.forEach(v),A.forEach(v),this.h()},h:function(){m(l,"d","M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"),_(l,g,408,12,11679),m(r,"d","M19 10v2a7 7 0 0 1-14 0v-2"),_(r,g,409,12,11756),m(u,"x1","12"),m(u,"x2","12"),m(u,"y1","19"),m(u,"y2","22"),_(u,g,410,12,11807),m(f,"x1","8"),m(f,"x2","16"),m(f,"y1","22"),m(f,"y2","22"),_(f,g,411,12,11859),m(i,"width","48"),m(i,"height","48"),m(i,"viewBox","0 0 24 24"),m(i,"fill","none"),m(i,"stroke","currentColor"),m(i,"stroke-width","2"),_(i,g,407,10,11567),m(e,"class","mic-icon svelte-ztuqv4"),_(e,g,406,8,11534),m(k,"class","mic-test-title svelte-ztuqv4"),_(k,g,415,10,11954),m(x,"class","mic-test-description svelte-ztuqv4"),_(x,g,416,10,12003),_(a,g,414,8,11938),m(s,"class","mic-test-header svelte-ztuqv4"),_(s,g,405,6,11496),m(n,"class","header svelte-ztuqv4"),_(n,g,404,4,11469),m(B,"class","test-section"),_(B,g,422,4,12136),m(D,"class","start-section"),_(D,g,522,4,16366),m(t,"class","microphone-test svelte-ztuqv4"),_(t,g,402,2,11417)},m:function(I,A){b(I,t,A),h(t,n),h(n,s),h(s,e),h(e,i),h(i,l),h(i,r),h(i,u),h(i,f),h(s,o),h(s,a),h(a,k),h(a,C),h(a,x),h(t,V),h(t,B),st(w,B,null),h(t,T),h(t,D),st(G,D,null),L=!0},p:function(I,A){const P={};A&33554943&&(P.$$scope={dirty:A,ctx:I}),w.$set(P);const E={};A&33554944&&(E.$$scope={dirty:A,ctx:I}),G.$set(E)},i:function(I){L||(K(w.$$.fragment,I),K(G.$$.fragment,I),L=!0)},o:function(I){X(w.$$.fragment,I),X(G.$$.fragment,I),L=!1},d:function(I){I&&v(t),lt(w),lt(G)}};return M("SvelteRegisterBlock",{block:H,id:te.name,type:"slot",source:"(402:0) <PageLayout showBackButton={true}>",ctx:c}),H}function qt(c){let t,n,s;n=new Mt({props:{showBackButton:!0,$$slots:{default:[te]},$$scope:{ctx:c}},$$inline:!0});const e={c:function(){t=F(),rt(n.$$.fragment),this.h()},l:function(l){re("svelte-8st1fo",document.head).forEach(v),t=R(l),ct(n.$$.fragment,l),this.h()},h:function(){document.title="„Éû„Ç§„ÇØ„ÉÜ„Çπ„Éà - Áõ∏ÂØæÈü≥ÊÑü„Éà„É¨„Éº„Éã„É≥„Ç∞"},m:function(l,r){b(l,t,r),st(n,l,r),s=!0},p:function(l,[r]){const u={};r&33555455&&(u.$$scope={dirty:r,ctx:l}),n.$set(u)},i:function(l){s||(K(n.$$.fragment,l),s=!0)},o:function(l){X(n.$$.fragment,l),s=!1},d:function(l){l&&v(t),lt(n,l)}};return M("SvelteRegisterBlock",{block:e,id:qt.name,type:"component",source:"",ctx:c}),e}const St=5;function xt(c){if(c<=0)return"C4Ôºà„Éâ4Ôºâ";const n=Math.round(12*Math.log2(c/440)),s=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],e=((n+9)%12+12)%12,i=Math.floor((n+9)/12)+4,l=s[e];return`${l}${i}Ôºà${{C:"„Éâ","C#":"„Éâ#",D:"„É¨","D#":"„É¨#",E:"„Éü",F:"„Éï„Ç°","F#":"„Éï„Ç°#",G:"„ÇΩ","G#":"„ÇΩ#",A:"„É©","A#":"„É©#",B:"„Ç∑"}[l]}${i}Ôºâ`}function Vt(c,t){let n=0;for(let o=0;o<c.length;o++)n+=c[o]*c[o];if(n=Math.sqrt(n/c.length),n<.01)return 0;const s=ee(c,t,70),e=Math.floor(t/800),i=Math.floor(t/70);let l=0,r=0,u=0;for(let o=e;o<=i;o++){let a=0,k=0;for(let S=0;S<s.length-o;S++)a+=s[S]*s[S+o],k+=s[S]*s[S];k>0&&(a=a/Math.sqrt(k),a>l?(u=l,l=a,r=o):a>u&&(u=a))}const f=l-u;if(l>.3&&f>.05&&r>0){const o=Math.min(1,l*f*2);return{frequency:t/r,confidence:o}}return{frequency:0,confidence:0}}function ee(c,t,n){const s=1/t,e=1/(n*2*Math.PI),i=e/(e+s),l=new Float32Array(c.length);l[0]=c[0];for(let r=1;r<c.length;r++)l[r]=i*(l[r-1]+c[r]-c[r-1]);return l}function It(c){if(c.length===0)return 0;if(c.length===1)return c[0];const t=[...c].sort((l,r)=>l-r),n=t[Math.floor(t.length/2)],s=c.filter(l=>Math.abs(l-n)/n<.1);if(s.length===0)return n;let e=0,i=0;for(let l=0;l<s.length;l++){const r=l+1;e+=s[l]*r,i+=r}return e/i}function de(c,t,n){let s,e;le(_t,"page"),se(c,_t,d=>n(20,e=d));let{$$slots:i={},$$scope:l}=t;ce("Page",i,[]);let r="random";ht(()=>{e.url.searchParams.has("mode")&&(r=e.url.searchParams.get("mode")||"random")});let u="initial",f=!1,o=!1,a=0,k=0,S="",C=!1,x=0,U=!1,V=[];const B={random:{name:"„É©„É≥„ÉÄ„É†Âü∫Èü≥„É¢„Éº„Éâ",description:"10Á®ÆÈ°û„ÅÆÂü∫Èü≥„Åã„Çâ„É©„É≥„ÉÄ„É†„Å´ÈÅ∏Êäû„Åó„Å¶„Éà„É¨„Éº„Éã„É≥„Ç∞",color:"green",path:"./training/random"},continuous:{name:"ÈÄ£Á∂ö„ÉÅ„É£„É¨„É≥„Ç∏„É¢„Éº„Éâ",description:"ÈÅ∏Êäû„Åó„ÅüÂõûÊï∞„Å†„ÅëÈÄ£Á∂ö„ÅßÂÆüË°å„Åó„ÄÅÁ∑èÂêàË©ï‰æ°„ÇíÁ¢∫Ë™ç",color:"orange",path:"./training/continuous"},chromatic:{name:"12Èü≥Èöé„É¢„Éº„Éâ",description:"„ÇØ„É≠„Éû„ÉÅ„ÉÉ„ÇØ„Çπ„Ç±„Éº„É´„ÅÆ‰∏äË°å„Éª‰∏ãË°å„ÅßÂÆåÂÖ®Âà∂Ë¶á",color:"purple",path:"./training/chromatic"}},w=B[r]||B.random;async function T(){console.log("„Éû„Ç§„ÇØË®±ÂèØ„É™„ÇØ„Ç®„Çπ„ÉàÈñãÂßã"),n(0,u="pending");try{const d=await navigator.mediaDevices.getUserMedia({audio:!0});console.log("„Éû„Ç§„ÇØË®±ÂèØÂèñÂæóÊàêÂäü"),n(0,u="granted"),d.getTracks().forEach(j=>j.stop()),console.log("„Éû„Ç§„ÇØË®±ÂèØÂÆå‰∫Ü - „É¶„Éº„Ç∂„Éº„ÇØ„É™„ÉÉ„ÇØ„ÅßAudioContextÈñãÂßã„ÇíÂæÖÊ©ü")}catch(d){console.error("„Éû„Ç§„ÇØË®±ÂèØ„Ç®„É©„Éº:",d),n(0,u="denied")}}let D=null,G=null,L=null,H=null,W=null;async function I(){if(console.log("startListening ÈñãÂßã, micPermission:",u),u!=="granted"){console.log("„Éû„Ç§„ÇØË®±ÂèØ„Åå„ÅÇ„Çä„Åæ„Åõ„Çì");return}if(!D){console.log("AudioContext„Åå‰ΩúÊàê„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì"),n(4,U=!0);return}try{console.log("AudioContext state:",D.state),console.log("„Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„ÇπÈñãÂßã..."),G=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}}),console.log("„Ç¢„Éä„É©„Ç§„Ç∂„ÉºË®≠ÂÆö‰∏≠..."),L=D.createAnalyser(),L.fftSize=2048,L.smoothingTimeConstant=.8,D.createMediaStreamSource(G).connect(L),console.log("„É°„Éá„Ç£„Ç¢„Çπ„Éà„É™„Éº„É†„ÇΩ„Éº„ÇπÊé•Á∂öÂÆå‰∫Ü");const j=L.frequencyBinCount;H=new Uint8Array(j),console.log("„Éá„Éº„ÇøÈÖçÂàóÊ∫ñÂÇôÂÆå‰∫Ü, bufferLength:",j),n(3,C=!0),console.log("„É™„Ç¢„É´„Çø„Ç§„É†Ëß£ÊûêÈñãÂßã"),A()}catch(d){console.error("„Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„Çπ„Ç®„É©„Éº:",d),n(0,u="error")}}function A(){if(!C||!L){console.log("Ëß£ÊûêÂÅúÊ≠¢: isListening=",C,"analyser=",!!L);return}window.firstAnalysisLogged||(console.log("ÂàùÂõûÈü≥Â£∞Ëß£ÊûêÂÆüË°å‰∏≠..."),window.firstAnalysisLogged=!0),L.getByteFrequencyData(H);let d=0;for(let J=0;J<H.length;J++)d+=H[J]*H[J];const j=Math.sqrt(d/H.length);n(5,a=Math.min(100,j/128*100)),a>20&&(f||console.log("Èü≥ÈáèÊ§úÂá∫ÊàêÂäü:",a),n(1,f=!0));const O=new Float32Array(L.fftSize);L.getFloatTimeDomainData(O);const $=Vt(O,D.sampleRate);if($.frequency>0){V.push($.frequency),V.length>St&&V.shift();const J=It(V);n(6,k=J),n(7,S=xt(k)),n(8,x=Math.round($.confidence*100)),k>80&&k<800&&(o||console.log("Âë®Ê≥¢Êï∞Ê§úÂá∫ÊàêÂäü:",k,"Hz",S),n(2,o=!0))}else V=[],n(6,k=0),n(7,S=""),n(8,x=0);W=requestAnimationFrame(A)}function P(){n(3,C=!1),W&&(cancelAnimationFrame(W),W=null),G&&(G.getTracks().forEach(d=>d.stop()),G=null),D&&D.state!=="closed"&&(D.close(),D=null),L=null,H=null}Et(()=>{P()});async function E(){if(console.log("„É¶„Éº„Ç∂„Éº„ÇØ„É™„ÉÉ„ÇØ„ÅßAudioContextÈñãÂßã..."),u!=="granted"){console.log("„Éû„Ç§„ÇØË®±ÂèØ„ÅåÂøÖË¶Å„Åß„Åô");return}try{D=new(window.AudioContext||window.webkitAudioContext),console.log("AudioContext‰ΩúÊàêÂÆå‰∫Ü, state:",D.state),n(4,U=!1),await I()}catch(d){console.error("AudioContextÈñãÂßãÂ§±Êïó:",d),n(4,U=!0)}}ht(()=>{console.log("„Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÂÆå‰∫Ü - „É¶„Éº„Ç∂„ÉºÊìç‰Ωú„ÇíÂæÖÊ©ü‰∏≠"),console.log("ÂàùÊúüÁä∂ÊÖã - micPermission:",u,"isListening:",C,"audioContextBlocked:",U)});const et=[];return Object.keys(t).forEach(d=>{!~et.indexOf(d)&&d.slice(0,2)!=="$$"&&d!=="slot"&&fe.warn(`<Page> was created with unknown prop '${d}'`)}),c.$capture_state=()=>({onMount:ht,onDestroy:Et,page:_t,Card:yt,Button:zt,PageLayout:Mt,VolumeBar:Rt,PitchDisplay:ue,mode:r,micPermission:u,volumeDetected:f,frequencyDetected:o,currentVolume:a,currentFrequency:k,currentNote:S,isListening:C,detectionConfidence:x,audioContextBlocked:U,frequencyHistory:V,HISTORY_SIZE:St,trainingModes:B,selectedMode:w,frequencyToNote:xt,requestMicrophone:T,audioContext:D,mediaStream:G,analyser:L,dataArray:H,animationFrame:W,startListening:I,analyzeAudio:A,detectPitchWithAutocorrelation:Vt,applyHighPassFilter:ee,smoothFrequency:It,stopListening:P,startAudioContextManually:E,startButtonEnabled:s,$page:e}),c.$inject_state=d=>{"mode"in d&&(r=d.mode),"micPermission"in d&&n(0,u=d.micPermission),"volumeDetected"in d&&n(1,f=d.volumeDetected),"frequencyDetected"in d&&n(2,o=d.frequencyDetected),"currentVolume"in d&&n(5,a=d.currentVolume),"currentFrequency"in d&&n(6,k=d.currentFrequency),"currentNote"in d&&n(7,S=d.currentNote),"isListening"in d&&n(3,C=d.isListening),"detectionConfidence"in d&&n(8,x=d.detectionConfidence),"audioContextBlocked"in d&&n(4,U=d.audioContextBlocked),"frequencyHistory"in d&&(V=d.frequencyHistory),"audioContext"in d&&(D=d.audioContext),"mediaStream"in d&&(G=d.mediaStream),"analyser"in d&&(L=d.analyser),"dataArray"in d&&(H=d.dataArray),"animationFrame"in d&&(W=d.animationFrame),"startButtonEnabled"in d&&n(9,s=d.startButtonEnabled)},t&&"$$inject"in t&&c.$inject_state(t.$$inject),c.$$.update=()=>{c.$$.dirty&25&&console.log("Áä∂ÊÖãÂ§âÊõ¥ - micPermission:",u,"isListening:",C,"audioContextBlocked:",U),c.$$.dirty&7&&n(9,s=u==="granted"&&f&&o)},[u,f,o,C,U,a,k,S,x,s,w,T,E]}class pe extends ne{constructor(t){super(t),oe(this,t,de,qt,ie,{}),M("SvelteRegisterComponent",{component:this,tagName:"Page",options:t,id:qt.name})}}export{pe as component};
