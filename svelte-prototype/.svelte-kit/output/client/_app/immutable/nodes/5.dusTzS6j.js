import{S as zt,i as wt,s as Ht,n as St,d as o,L as Ot,z as ht,a as z,b as Ie,c as e,A as At,y as a,I as Rt,h as d,e as s,f as i,G as O,g,k as f,j as n,t as S,M as Gt,K as st,H as jt}from"../chunks/BJp-dNlk.js";import{e as Nt}from"../chunks/D6YF6ztN.js";import"../chunks/IHki7fMi.js";import{E as Lt}from"../chunks/BAUHSjtu.js";function It(r,l,t){const v=r.slice();return v[12]=l[t],v[14]=t,v}function Mt(r){let l;return{c(){l=S("🧪 全テスト実行")},l(t){l=g(t,"🧪 全テスト実行")},m(t,v){Ie(t,l,v)},d(t){t&&o(l)}}}function Bt(r){let l;return{c(){l=S("🔄 テスト実行中...")},l(t){l=g(t,"🔄 テスト実行中...")},m(t,v){Ie(t,l,v)},d(t){t&&o(l)}}}function Pt(r){let l,t,v,m=r[1].name+"",_,c,u,b,h,x,I=r[4]+1+"",P,D,A=r[6].length+"",p;return{c(){l=n("section"),t=n("h3"),v=S("📊 実行中: "),_=S(m),c=f(),u=n("div"),b=n("div"),h=f(),x=n("p"),P=S(I),D=S(" / "),p=S(A),this.h()},l(k){l=s(k,"SECTION",{class:!0});var C=i(l);t=s(C,"H3",{class:!0});var V=i(t);v=g(V,"📊 実行中: "),_=g(V,m),V.forEach(o),c=d(C),u=s(C,"DIV",{class:!0});var w=i(u);b=s(w,"DIV",{class:!0,style:!0}),i(b).forEach(o),w.forEach(o),h=d(C),x=s(C,"P",{});var J=i(x);P=g(J,I),D=g(J," / "),p=g(J,A),J.forEach(o),C.forEach(o),this.h()},h(){a(t,"class","svelte-19llkxn"),a(b,"class","progress-bar svelte-19llkxn"),st(b,"width",(r[4]+1)/r[6].length*100+"%"),a(u,"class","progress svelte-19llkxn"),a(l,"class","current-test svelte-19llkxn")},m(k,C){Ie(k,l,C),e(l,t),e(t,v),e(t,_),e(l,c),e(l,u),e(u,b),e(l,h),e(l,x),e(x,P),e(x,D),e(x,p)},p(k,C){C&2&&m!==(m=k[1].name+"")&&z(_,m),C&16&&st(b,"width",(k[4]+1)/k[6].length*100+"%"),C&16&&I!==(I=k[4]+1+"")&&z(P,I)},d(k){k&&o(l)}}}function Dt(r){let l,t,v="📋 テスト結果",m,_=Nt(r[2]),c=[];for(let u=0;u<_.length;u+=1)c[u]=yt(It(r,_,u));return{c(){l=n("section"),t=n("h2"),t.textContent=v,m=f();for(let u=0;u<c.length;u+=1)c[u].c();this.h()},l(u){l=s(u,"SECTION",{class:!0});var b=i(l);t=s(b,"H2",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-s3709x"&&(t.textContent=v),m=d(b);for(let h=0;h<c.length;h+=1)c[h].l(b);b.forEach(o),this.h()},h(){a(t,"class","svelte-19llkxn"),a(l,"class","results svelte-19llkxn")},m(u,b){Ie(u,l,b),e(l,t),e(l,m);for(let h=0;h<c.length;h+=1)c[h]&&c[h].m(l,null)},p(u,b){if(b&4){_=Nt(u[2]);let h;for(h=0;h<_.length;h+=1){const x=It(u,_,h);c[h]?c[h].p(x,b):(c[h]=yt(x),c[h].c(),c[h].m(l,null))}for(;h<c.length;h+=1)c[h].d(1);c.length=_.length}},d(u){u&&o(l),jt(c,u)}}}function Ut(r){let l,t,v,m,_=r[12].result.score.total+"",c,u,b,h=r[12].result.score.grade+"",x,I,P,D,A,p="音程精度:",k,C,V=r[12].result.score.components.pitchAccuracy+"",w,J,B,L,H,Y="認識速度:",le,G,M=r[12].result.score.components.recognitionSpeed+"",se,Q,T,q,y,F="音程習得度:",N,E,U=r[12].result.score.components.intervalMastery+"",W,X,$,ce,ee,he="方向性精度:",pe,_e,qe=r[12].result.score.components.directionAccuracy+"",de,Ae,Ye,ke,ie,Oe="一貫性:",Re,Pe,ve=r[12].result.score.components.consistency===0?"データ不足":`${r[12].result.score.components.consistency}%`,me,Ze,ne,ae,Ge="💬 フィードバック",je,De,Fe=r[12].result.feedback.primary+"",Z,Ne,$e,xe,re,Ve="期待値:",et,ze=r[12].expected+"",Ce,K=r[12].result.feedback.detailed&&Vt(r);return{c(){l=n("div"),t=n("div"),v=n("div"),m=n("span"),c=S(_),u=f(),b=n("span"),x=S(h),I=f(),P=n("div"),D=n("div"),A=n("span"),A.textContent=p,k=f(),C=n("span"),w=S(V),J=S("%"),B=f(),L=n("div"),H=n("span"),H.textContent=Y,le=f(),G=n("span"),se=S(M),Q=S("%"),T=f(),q=n("div"),y=n("span"),y.textContent=F,N=f(),E=n("span"),W=S(U),X=S("%"),$=f(),ce=n("div"),ee=n("span"),ee.textContent=he,pe=f(),_e=n("span"),de=S(qe),Ae=S("%"),Ye=f(),ke=n("div"),ie=n("span"),ie.textContent=Oe,Re=f(),Pe=n("span"),me=S(ve),Ze=f(),ne=n("div"),ae=n("h4"),ae.textContent=Ge,je=f(),De=n("p"),Z=S(Fe),Ne=f(),K&&K.c(),$e=f(),xe=n("div"),re=n("strong"),re.textContent=Ve,et=f(),Ce=S(ze),this.h()},l(R){l=s(R,"DIV",{class:!0});var j=i(l);t=s(j,"DIV",{class:!0});var Le=i(t);v=s(Le,"DIV",{class:!0});var fe=i(v);m=s(fe,"SPAN",{class:!0,style:!0});var ye=i(m);c=g(ye,_),ye.forEach(o),u=d(fe),b=s(fe,"SPAN",{class:!0,style:!0});var nt=i(b);x=g(nt,h),nt.forEach(o),fe.forEach(o),I=d(Le),P=s(Le,"DIV",{class:!0});var ue=i(P);D=s(ue,"DIV",{class:!0});var be=i(D);A=s(be,"SPAN",{class:!0,"data-svelte-h":!0}),O(A)!=="svelte-146tyqf"&&(A.textContent=p),k=d(be),C=s(be,"SPAN",{class:!0});var we=i(C);w=g(we,V),J=g(we,"%"),we.forEach(o),be.forEach(o),B=d(ue),L=s(ue,"DIV",{class:!0});var He=i(L);H=s(He,"SPAN",{class:!0,"data-svelte-h":!0}),O(H)!=="svelte-sqw889"&&(H.textContent=Y),le=d(He),G=s(He,"SPAN",{class:!0});var We=i(G);se=g(We,M),Q=g(We,"%"),We.forEach(o),He.forEach(o),T=d(ue),q=s(ue,"DIV",{class:!0});var Me=i(q);y=s(Me,"SPAN",{class:!0,"data-svelte-h":!0}),O(y)!=="svelte-1uo5o5u"&&(y.textContent=F),N=d(Me),E=s(Me,"SPAN",{class:!0});var Ee=i(E);W=g(Ee,U),X=g(Ee,"%"),Ee.forEach(o),Me.forEach(o),$=d(ue),ce=s(ue,"DIV",{class:!0});var ge=i(ce);ee=s(ge,"SPAN",{class:!0,"data-svelte-h":!0}),O(ee)!=="svelte-vuo93o"&&(ee.textContent=he),pe=d(ge),_e=s(ge,"SPAN",{class:!0});var tt=i(_e);de=g(tt,qe),Ae=g(tt,"%"),tt.forEach(o),ge.forEach(o),Ye=d(ue),ke=s(ue,"DIV",{class:!0});var Be=i(ke);ie=s(Be,"SPAN",{class:!0,"data-svelte-h":!0}),O(ie)!=="svelte-z9t95r"&&(ie.textContent=Oe),Re=d(Be),Pe=s(Be,"SPAN",{class:!0});var Te=i(Pe);me=g(Te,ve),Te.forEach(o),Be.forEach(o),ue.forEach(o),Le.forEach(o),Ze=d(j),ne=s(j,"DIV",{class:!0});var Se=i(ne);ae=s(Se,"H4",{class:!0,"data-svelte-h":!0}),O(ae)!=="svelte-1svoycg"&&(ae.textContent=Ge),je=d(Se),De=s(Se,"P",{class:!0});var Xe=i(De);Z=g(Xe,Fe),Xe.forEach(o),Ne=d(Se),K&&K.l(Se),Se.forEach(o),$e=d(j),xe=s(j,"DIV",{class:!0});var Ue=i(xe);re=s(Ue,"STRONG",{"data-svelte-h":!0}),O(re)!=="svelte-1ri8yc2"&&(re.textContent=Ve),et=d(Ue),Ce=g(Ue,ze),Ue.forEach(o),j.forEach(o),this.h()},h(){a(m,"class","score-value svelte-19llkxn"),st(m,"color",qt(r[12].result.score.total)),a(b,"class","grade svelte-19llkxn"),st(b,"color",Ft(r[12].result.score.grade)),a(v,"class","total-score svelte-19llkxn"),a(A,"class","label svelte-19llkxn"),a(C,"class","value svelte-19llkxn"),a(D,"class","component svelte-19llkxn"),a(H,"class","label svelte-19llkxn"),a(G,"class","value svelte-19llkxn"),a(L,"class","component svelte-19llkxn"),a(y,"class","label svelte-19llkxn"),a(E,"class","value svelte-19llkxn"),a(q,"class","component svelte-19llkxn"),a(ee,"class","label svelte-19llkxn"),a(_e,"class","value svelte-19llkxn"),a(ce,"class","component svelte-19llkxn"),a(ie,"class","label svelte-19llkxn"),a(Pe,"class","value svelte-19llkxn"),a(ke,"class","component svelte-19llkxn"),a(P,"class","component-scores svelte-19llkxn"),a(t,"class","score-display svelte-19llkxn"),a(ae,"class","svelte-19llkxn"),a(De,"class","primary-feedback svelte-19llkxn"),a(ne,"class","feedback svelte-19llkxn"),a(xe,"class","expectation svelte-19llkxn"),a(l,"class","result-content svelte-19llkxn")},m(R,j){Ie(R,l,j),e(l,t),e(t,v),e(v,m),e(m,c),e(v,u),e(v,b),e(b,x),e(t,I),e(t,P),e(P,D),e(D,A),e(D,k),e(D,C),e(C,w),e(C,J),e(P,B),e(P,L),e(L,H),e(L,le),e(L,G),e(G,se),e(G,Q),e(P,T),e(P,q),e(q,y),e(q,N),e(q,E),e(E,W),e(E,X),e(P,$),e(P,ce),e(ce,ee),e(ce,pe),e(ce,_e),e(_e,de),e(_e,Ae),e(P,Ye),e(P,ke),e(ke,ie),e(ke,Re),e(ke,Pe),e(Pe,me),e(l,Ze),e(l,ne),e(ne,ae),e(ne,je),e(ne,De),e(De,Z),e(ne,Ne),K&&K.m(ne,null),e(l,$e),e(l,xe),e(xe,re),e(xe,et),e(xe,Ce)},p(R,j){j&4&&_!==(_=R[12].result.score.total+"")&&z(c,_),j&4&&st(m,"color",qt(R[12].result.score.total)),j&4&&h!==(h=R[12].result.score.grade+"")&&z(x,h),j&4&&st(b,"color",Ft(R[12].result.score.grade)),j&4&&V!==(V=R[12].result.score.components.pitchAccuracy+"")&&z(w,V),j&4&&M!==(M=R[12].result.score.components.recognitionSpeed+"")&&z(se,M),j&4&&U!==(U=R[12].result.score.components.intervalMastery+"")&&z(W,U),j&4&&qe!==(qe=R[12].result.score.components.directionAccuracy+"")&&z(de,qe),j&4&&ve!==(ve=R[12].result.score.components.consistency===0?"データ不足":`${R[12].result.score.components.consistency}%`)&&z(me,ve),j&4&&Fe!==(Fe=R[12].result.feedback.primary+"")&&z(Z,Fe),R[12].result.feedback.detailed?K?K.p(R,j):(K=Vt(R),K.c(),K.m(ne,null)):K&&(K.d(1),K=null),j&4&&ze!==(ze=R[12].expected+"")&&z(Ce,ze)},d(R){R&&o(l),K&&K.d()}}}function Kt(r){let l,t,v=r[12].error+"",m;return{c(){l=n("div"),t=S("❌ エラー: "),m=S(v),this.h()},l(_){l=s(_,"DIV",{class:!0});var c=i(l);t=g(c,"❌ エラー: "),m=g(c,v),c.forEach(o),this.h()},h(){a(l,"class","error svelte-19llkxn")},m(_,c){Ie(_,l,c),e(l,t),e(l,m)},p(_,c){c&4&&v!==(v=_[12].error+"")&&z(m,v)},d(_){_&&o(l)}}}function Vt(r){let l,t,v,m="音程:",_,c=r[12].result.feedback.detailed.interval+"",u,b,h,x,I="方向性:",P,D=r[12].result.feedback.detailed.direction+"",A,p,k,C,V="一貫性:",w,J=r[12].result.feedback.detailed.consistency+"",B,L,H,Y,le="速度:",G,M=r[12].result.feedback.detailed.speed+"",se;return{c(){l=n("div"),t=n("div"),v=n("strong"),v.textContent=m,_=f(),u=S(c),b=f(),h=n("div"),x=n("strong"),x.textContent=I,P=f(),A=S(D),p=f(),k=n("div"),C=n("strong"),C.textContent=V,w=f(),B=S(J),L=f(),H=n("div"),Y=n("strong"),Y.textContent=le,G=f(),se=S(M),this.h()},l(Q){l=s(Q,"DIV",{class:!0});var T=i(l);t=s(T,"DIV",{class:!0});var q=i(t);v=s(q,"STRONG",{"data-svelte-h":!0}),O(v)!=="svelte-677z0q"&&(v.textContent=m),_=d(q),u=g(q,c),q.forEach(o),b=d(T),h=s(T,"DIV",{class:!0});var y=i(h);x=s(y,"STRONG",{"data-svelte-h":!0}),O(x)!=="svelte-8yvkz3"&&(x.textContent=I),P=d(y),A=g(y,D),y.forEach(o),p=d(T),k=s(T,"DIV",{class:!0});var F=i(k);C=s(F,"STRONG",{"data-svelte-h":!0}),O(C)!=="svelte-x7tjto"&&(C.textContent=V),w=d(F),B=g(F,J),F.forEach(o),L=d(T),H=s(T,"DIV",{class:!0});var N=i(H);Y=s(N,"STRONG",{"data-svelte-h":!0}),O(Y)!=="svelte-xkjonl"&&(Y.textContent=le),G=d(N),se=g(N,M),N.forEach(o),T.forEach(o),this.h()},h(){a(t,"class","feedback-item svelte-19llkxn"),a(h,"class","feedback-item svelte-19llkxn"),a(k,"class","feedback-item svelte-19llkxn"),a(H,"class","feedback-item svelte-19llkxn"),a(l,"class","detailed-feedback svelte-19llkxn")},m(Q,T){Ie(Q,l,T),e(l,t),e(t,v),e(t,_),e(t,u),e(l,b),e(l,h),e(h,x),e(h,P),e(h,A),e(l,p),e(l,k),e(k,C),e(k,w),e(k,B),e(l,L),e(l,H),e(H,Y),e(H,G),e(H,se)},p(Q,T){T&4&&c!==(c=Q[12].result.feedback.detailed.interval+"")&&z(u,c),T&4&&D!==(D=Q[12].result.feedback.detailed.direction+"")&&z(A,D),T&4&&J!==(J=Q[12].result.feedback.detailed.consistency+"")&&z(B,J),T&4&&M!==(M=Q[12].result.feedback.detailed.speed+"")&&z(se,M)},d(Q){Q&&o(l)}}}function yt(r){let l,t,v,m=r[12].scenario+"",_,c,u,b=r[12].timestamp+"",h,x,I;function P(p,k){return p[12].error?Kt:Ut}let D=P(r),A=D(r);return{c(){l=n("div"),t=n("div"),v=n("h3"),_=S(m),c=f(),u=n("span"),h=S(b),x=f(),A.c(),I=f(),this.h()},l(p){l=s(p,"DIV",{class:!0});var k=i(l);t=s(k,"DIV",{class:!0});var C=i(t);v=s(C,"H3",{class:!0});var V=i(v);_=g(V,m),V.forEach(o),c=d(C),u=s(C,"SPAN",{class:!0});var w=i(u);h=g(w,b),w.forEach(o),C.forEach(o),x=d(k),A.l(k),I=d(k),k.forEach(o),this.h()},h(){a(v,"class","svelte-19llkxn"),a(u,"class","timestamp svelte-19llkxn"),a(t,"class","result-header svelte-19llkxn"),a(l,"class","result-card svelte-19llkxn")},m(p,k){Ie(p,l,k),e(l,t),e(t,v),e(v,_),e(t,c),e(t,u),e(u,h),e(l,x),A.m(l,null),e(l,I)},p(p,k){k&4&&m!==(m=p[12].scenario+"")&&z(_,m),k&4&&b!==(b=p[12].timestamp+"")&&z(h,b),D===(D=P(p))&&A?A.p(p,k):(A.d(1),A=D(p),A&&(A.c(),A.m(l,I)))},d(p){p&&o(l),A.d()}}}function Tt(r){let l,t,v="📊 エンジン統計",m,_,c,u,b="セッション情報",h,x,I,P="総試行回数:",D,A,p=r[5].session.totalAttempts+"",k,C,V,w,J="平均スコア:",B,L,H=r[5].session.overallScore.toFixed(1)+"",Y,le,G,M,se="現在レベル:",Q,T,q=r[5].session.currentLevel+"",y,F,N,E,U="パフォーマンス",W,X,$,ce="平均速度:",ee,he,pe=r[5].performance.averageSpeed.toFixed(1)+"",_e,qe,de,Ae,Ye="精度トレンド:",ke,ie,Oe=r[5].performance.accuracyTrend+"",Re,Pe,ve,me,Ze="セッション進捗:",ne,ae,Ge=r[5].performance.sessionProgress+"",je,De,Fe,Z,Ne,$e="分析器統計",xe,re,Ve,et="音程分析:",ze,Ce,K=r[5].analyzers.interval.totalAnalyses+"",R,j,Le,fe,ye,nt="方向性分析:",ue,be,we=r[5].analyzers.direction.totalAnalyses+"",He,We,Me,Ee,ge,tt="一貫性追跡:",Be,Te,Se=r[5].analyzers.consistency.totalAttempts+"",Xe,Ue;return{c(){l=n("section"),t=n("h2"),t.textContent=v,m=f(),_=n("div"),c=n("div"),u=n("h3"),u.textContent=b,h=f(),x=n("div"),I=n("span"),I.textContent=P,D=f(),A=n("span"),k=S(p),C=f(),V=n("div"),w=n("span"),w.textContent=J,B=f(),L=n("span"),Y=S(H),le=f(),G=n("div"),M=n("span"),M.textContent=se,Q=f(),T=n("span"),y=S(q),F=f(),N=n("div"),E=n("h3"),E.textContent=U,W=f(),X=n("div"),$=n("span"),$.textContent=ce,ee=f(),he=n("span"),_e=S(pe),qe=f(),de=n("div"),Ae=n("span"),Ae.textContent=Ye,ke=f(),ie=n("span"),Re=S(Oe),Pe=f(),ve=n("div"),me=n("span"),me.textContent=Ze,ne=f(),ae=n("span"),je=S(Ge),De=S("%"),Fe=f(),Z=n("div"),Ne=n("h3"),Ne.textContent=$e,xe=f(),re=n("div"),Ve=n("span"),Ve.textContent=et,ze=f(),Ce=n("span"),R=S(K),j=S("回"),Le=f(),fe=n("div"),ye=n("span"),ye.textContent=nt,ue=f(),be=n("span"),He=S(we),We=S("回"),Me=f(),Ee=n("div"),ge=n("span"),ge.textContent=tt,Be=f(),Te=n("span"),Xe=S(Se),Ue=S("回"),this.h()},l(oe){l=s(oe,"SECTION",{class:!0});var te=i(l);t=s(te,"H2",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-bgef1u"&&(t.textContent=v),m=d(te),_=s(te,"DIV",{class:!0});var lt=i(_);c=s(lt,"DIV",{class:!0});var Ke=i(c);u=s(Ke,"H3",{class:!0,"data-svelte-h":!0}),O(u)!=="svelte-17emse7"&&(u.textContent=b),h=d(Ke),x=s(Ke,"DIV",{class:!0});var at=i(x);I=s(at,"SPAN",{class:!0,"data-svelte-h":!0}),O(I)!=="svelte-yy8w1i"&&(I.textContent=P),D=d(at),A=s(at,"SPAN",{class:!0});var xt=i(A);k=g(xt,p),xt.forEach(o),at.forEach(o),C=d(Ke),V=s(Ke,"DIV",{class:!0});var rt=i(V);w=s(rt,"SPAN",{class:!0,"data-svelte-h":!0}),O(w)!=="svelte-1yupbzd"&&(w.textContent=J),B=d(rt),L=s(rt,"SPAN",{class:!0});var Ct=i(L);Y=g(Ct,H),Ct.forEach(o),rt.forEach(o),le=d(Ke),G=s(Ke,"DIV",{class:!0});var ot=i(G);M=s(ot,"SPAN",{class:!0,"data-svelte-h":!0}),O(M)!=="svelte-1lwfu5j"&&(M.textContent=se),Q=d(ot),T=s(ot,"SPAN",{class:!0});var bt=i(T);y=g(bt,q),bt.forEach(o),ot.forEach(o),Ke.forEach(o),F=d(lt),N=s(lt,"DIV",{class:!0});var Je=i(N);E=s(Je,"H3",{class:!0,"data-svelte-h":!0}),O(E)!=="svelte-1x0fmtr"&&(E.textContent=U),W=d(Je),X=s(Je,"DIV",{class:!0});var ct=i(X);$=s(ct,"SPAN",{class:!0,"data-svelte-h":!0}),O($)!=="svelte-16r563u"&&($.textContent=ce),ee=d(ct),he=s(ct,"SPAN",{class:!0});var Et=i(he);_e=g(Et,pe),Et.forEach(o),ct.forEach(o),qe=d(Je),de=s(Je,"DIV",{class:!0});var it=i(de);Ae=s(it,"SPAN",{class:!0,"data-svelte-h":!0}),O(Ae)!=="svelte-1hjadvd"&&(Ae.textContent=Ye),ke=d(it),ie=s(it,"SPAN",{class:!0});var gt=i(ie);Re=g(gt,Oe),gt.forEach(o),it.forEach(o),Pe=d(Je),ve=s(Je,"DIV",{class:!0});var vt=i(ve);me=s(vt,"SPAN",{class:!0,"data-svelte-h":!0}),O(me)!=="svelte-kq0n13"&&(me.textContent=Ze),ne=d(vt),ae=s(vt,"SPAN",{class:!0});var pt=i(ae);je=g(pt,Ge),De=g(pt,"%"),pt.forEach(o),vt.forEach(o),Je.forEach(o),Fe=d(lt),Z=s(lt,"DIV",{class:!0});var Qe=i(Z);Ne=s(Qe,"H3",{class:!0,"data-svelte-h":!0}),O(Ne)!=="svelte-bwiav"&&(Ne.textContent=$e),xe=d(Qe),re=s(Qe,"DIV",{class:!0});var ut=i(re);Ve=s(ut,"SPAN",{class:!0,"data-svelte-h":!0}),O(Ve)!=="svelte-1q5z8h"&&(Ve.textContent=et),ze=d(ut),Ce=s(ut,"SPAN",{class:!0});var _t=i(Ce);R=g(_t,K),j=g(_t,"回"),_t.forEach(o),ut.forEach(o),Le=d(Qe),fe=s(Qe,"DIV",{class:!0});var dt=i(fe);ye=s(dt,"SPAN",{class:!0,"data-svelte-h":!0}),O(ye)!=="svelte-xcx73y"&&(ye.textContent=nt),ue=d(dt),be=s(dt,"SPAN",{class:!0});var kt=i(be);He=g(kt,we),We=g(kt,"回"),kt.forEach(o),dt.forEach(o),Me=d(Qe),Ee=s(Qe,"DIV",{class:!0});var ft=i(Ee);ge=s(ft,"SPAN",{class:!0,"data-svelte-h":!0}),O(ge)!=="svelte-u6xg0h"&&(ge.textContent=tt),Be=d(ft),Te=s(ft,"SPAN",{class:!0});var mt=i(Te);Xe=g(mt,Se),Ue=g(mt,"回"),mt.forEach(o),ft.forEach(o),Qe.forEach(o),lt.forEach(o),te.forEach(o),this.h()},h(){a(t,"class","svelte-19llkxn"),a(u,"class","svelte-19llkxn"),a(I,"class","label svelte-19llkxn"),a(A,"class","value svelte-19llkxn"),a(x,"class","stat-item svelte-19llkxn"),a(w,"class","label svelte-19llkxn"),a(L,"class","value svelte-19llkxn"),a(V,"class","stat-item svelte-19llkxn"),a(M,"class","label svelte-19llkxn"),a(T,"class","value svelte-19llkxn"),a(G,"class","stat-item svelte-19llkxn"),a(c,"class","stat-card svelte-19llkxn"),a(E,"class","svelte-19llkxn"),a($,"class","label svelte-19llkxn"),a(he,"class","value svelte-19llkxn"),a(X,"class","stat-item svelte-19llkxn"),a(Ae,"class","label svelte-19llkxn"),a(ie,"class","value svelte-19llkxn"),a(de,"class","stat-item svelte-19llkxn"),a(me,"class","label svelte-19llkxn"),a(ae,"class","value svelte-19llkxn"),a(ve,"class","stat-item svelte-19llkxn"),a(N,"class","stat-card svelte-19llkxn"),a(Ne,"class","svelte-19llkxn"),a(Ve,"class","label svelte-19llkxn"),a(Ce,"class","value svelte-19llkxn"),a(re,"class","stat-item svelte-19llkxn"),a(ye,"class","label svelte-19llkxn"),a(be,"class","value svelte-19llkxn"),a(fe,"class","stat-item svelte-19llkxn"),a(ge,"class","label svelte-19llkxn"),a(Te,"class","value svelte-19llkxn"),a(Ee,"class","stat-item svelte-19llkxn"),a(Z,"class","stat-card svelte-19llkxn"),a(_,"class","stats-grid svelte-19llkxn"),a(l,"class","statistics svelte-19llkxn")},m(oe,te){Ie(oe,l,te),e(l,t),e(l,m),e(l,_),e(_,c),e(c,u),e(c,h),e(c,x),e(x,I),e(x,D),e(x,A),e(A,k),e(c,C),e(c,V),e(V,w),e(V,B),e(V,L),e(L,Y),e(c,le),e(c,G),e(G,M),e(G,Q),e(G,T),e(T,y),e(_,F),e(_,N),e(N,E),e(N,W),e(N,X),e(X,$),e(X,ee),e(X,he),e(he,_e),e(N,qe),e(N,de),e(de,Ae),e(de,ke),e(de,ie),e(ie,Re),e(N,Pe),e(N,ve),e(ve,me),e(ve,ne),e(ve,ae),e(ae,je),e(ae,De),e(_,Fe),e(_,Z),e(Z,Ne),e(Z,xe),e(Z,re),e(re,Ve),e(re,ze),e(re,Ce),e(Ce,R),e(Ce,j),e(Z,Le),e(Z,fe),e(fe,ye),e(fe,ue),e(fe,be),e(be,He),e(be,We),e(Z,Me),e(Z,Ee),e(Ee,ge),e(Ee,Be),e(Ee,Te),e(Te,Xe),e(Te,Ue)},p(oe,te){te&32&&p!==(p=oe[5].session.totalAttempts+"")&&z(k,p),te&32&&H!==(H=oe[5].session.overallScore.toFixed(1)+"")&&z(Y,H),te&32&&q!==(q=oe[5].session.currentLevel+"")&&z(y,q),te&32&&pe!==(pe=oe[5].performance.averageSpeed.toFixed(1)+"")&&z(_e,pe),te&32&&Oe!==(Oe=oe[5].performance.accuracyTrend+"")&&z(Re,Oe),te&32&&Ge!==(Ge=oe[5].performance.sessionProgress+"")&&z(je,Ge),te&32&&K!==(K=oe[5].analyzers.interval.totalAnalyses+"")&&z(R,K),te&32&&we!==(we=oe[5].analyzers.direction.totalAnalyses+"")&&z(He,we),te&32&&Se!==(Se=oe[5].analyzers.consistency.totalAttempts+"")&&z(Xe,Se)},d(oe){oe&&o(l)}}}function Jt(r){let l,t,v,m,_="🎯 Enhanced Scoring Engine",c,u,b="統合採点エンジンのテストページ",h,x,I,P,D,A=r[0]?"準備完了":"初期化中...",p,k,C,V,w,J,B,L,H,Y,le,G,M,se;function Q(E,U){return E[3]?Bt:Mt}let T=Q(r),q=T(r),y=r[3]&&r[1]&&Pt(r),F=r[2].length>0&&Dt(r),N=r[5]&&Tt(r);return{c(){l=f(),t=n("div"),v=n("header"),m=n("h1"),m.textContent=_,c=f(),u=n("p"),u.textContent=b,h=f(),x=n("div"),I=n("span"),P=f(),D=n("span"),p=S(A),k=f(),C=n("section"),V=n("button"),q.c(),J=f(),B=n("button"),L=S("🔄 リセット"),Y=f(),y&&y.c(),le=f(),F&&F.c(),G=f(),N&&N.c(),this.h()},l(E){Rt("svelte-pwq006",document.head).forEach(o),l=d(E),t=s(E,"DIV",{class:!0});var W=i(t);v=s(W,"HEADER",{class:!0});var X=i(v);m=s(X,"H1",{class:!0,"data-svelte-h":!0}),O(m)!=="svelte-f90z2e"&&(m.textContent=_),c=d(X),u=s(X,"P",{class:!0,"data-svelte-h":!0}),O(u)!=="svelte-10mru30"&&(u.textContent=b),h=d(X),x=s(X,"DIV",{class:!0});var $=i(x);I=s($,"SPAN",{class:!0}),i(I).forEach(o),P=d($),D=s($,"SPAN",{});var ce=i(D);p=g(ce,A),ce.forEach(o),$.forEach(o),X.forEach(o),k=d(W),C=s(W,"SECTION",{class:!0});var ee=i(C);V=s(ee,"BUTTON",{class:!0});var he=i(V);q.l(he),he.forEach(o),J=d(ee),B=s(ee,"BUTTON",{class:!0});var pe=i(B);L=g(pe,"🔄 リセット"),pe.forEach(o),ee.forEach(o),Y=d(W),y&&y.l(W),le=d(W),F&&F.l(W),G=d(W),N&&N.l(W),W.forEach(o),this.h()},h(){document.title="Enhanced Scoring Engine - Test Page",a(m,"class","svelte-19llkxn"),a(u,"class","svelte-19llkxn"),a(I,"class","status-indicator svelte-19llkxn"),ht(I,"ready",r[0]),ht(I,"error",!r[0]),a(x,"class","status svelte-19llkxn"),a(v,"class","header svelte-19llkxn"),a(V,"class","btn btn-primary svelte-19llkxn"),V.disabled=w=!r[0]||r[3],a(B,"class","btn btn-secondary svelte-19llkxn"),B.disabled=H=!r[0]||r[3],a(C,"class","controls svelte-19llkxn"),a(t,"class","container svelte-19llkxn")},m(E,U){Ie(E,l,U),Ie(E,t,U),e(t,v),e(v,m),e(v,c),e(v,u),e(v,h),e(v,x),e(x,I),e(x,P),e(x,D),e(D,p),e(t,k),e(t,C),e(C,V),q.m(V,null),e(C,J),e(C,B),e(B,L),e(t,Y),y&&y.m(t,null),e(t,le),F&&F.m(t,null),e(t,G),N&&N.m(t,null),M||(se=[At(V,"click",r[7]),At(B,"click",r[8])],M=!0)},p(E,[U]){U&1&&ht(I,"ready",E[0]),U&1&&ht(I,"error",!E[0]),U&1&&A!==(A=E[0]?"準備完了":"初期化中...")&&z(p,A),T!==(T=Q(E))&&(q.d(1),q=T(E),q&&(q.c(),q.m(V,null))),U&9&&w!==(w=!E[0]||E[3])&&(V.disabled=w),U&9&&H!==(H=!E[0]||E[3])&&(B.disabled=H),E[3]&&E[1]?y?y.p(E,U):(y=Pt(E),y.c(),y.m(t,le)):y&&(y.d(1),y=null),E[2].length>0?F?F.p(E,U):(F=Dt(E),F.c(),F.m(t,G)):F&&(F.d(1),F=null),E[5]?N?N.p(E,U):(N=Tt(E),N.c(),N.m(t,null)):N&&(N.d(1),N=null)},i:St,o:St,d(E){E&&(o(l),o(t)),q.d(),y&&y.d(),F&&F.d(),N&&N.d(),M=!1,Ot(se)}}}function qt(r){return r>=90?"#10b981":r>=80?"#3b82f6":r>=70?"#f59e0b":r>=60?"#f97316":"#ef4444"}function Ft(r){return["S","A+","A"].includes(r)?"#10b981":["B+","B"].includes(r)?"#3b82f6":["C+","C"].includes(r)?"#f59e0b":["D+","D"].includes(r)?"#f97316":"#ef4444"}function Qt(r,l,t){let v=null,m=!1,_=[{name:"完璧な長3度認識",baseFreq:440,targetFreq:554.37,detectedFreq:554.37,responseTime:800,volume:60,expected:"高得点"},{name:"やや不正確な完全5度",baseFreq:261.63,targetFreq:392,detectedFreq:385,responseTime:1500,volume:50,expected:"中程度の得点"},{name:"遅い反応での短2度",baseFreq:293.66,targetFreq:311.13,detectedFreq:315,responseTime:4e3,volume:45,expected:"速度減点あり"},{name:"方向性間違い",baseFreq:349.23,targetFreq:293.66,detectedFreq:415.3,responseTime:2200,volume:65,expected:"方向性エラー"}],c=null,u=[],b=!1,h=0,x=null;Gt(()=>{I()});function I(){try{v=new Lt({weights:{pitchAccuracy:.4,recognitionSpeed:.2,intervalMastery:.2,directionAccuracy:.1,consistency:.1},speedThresholds:{excellent:1e3,good:2e3,fair:3e3,poor:5e3}}),t(0,m=!0),console.log("✅ EnhancedScoringEngine初期化完了")}catch(p){console.error("❌ EnhancedScoringEngine初期化エラー:",p)}}async function P(p){if(!m)return console.error("採点エンジンが初期化されていません"),null;try{console.log(`🧪 テスト実行: ${p.name}`);const k=await v.analyzePerformance({baseFreq:p.baseFreq,targetFreq:p.targetFreq,detectedFreq:p.detectedFreq,responseTime:p.responseTime,volume:p.volume,harmonicCorrection:null});return{scenario:p.name,expected:p.expected,result:k,timestamp:new Date().toLocaleTimeString()}}catch(k){return console.error("❌ テスト実行エラー:",k),{scenario:p.name,expected:p.expected,error:k.message,timestamp:new Date().toLocaleTimeString()}}}async function D(){if(!m){alert("採点エンジンが初期化されていません");return}t(3,b=!0),t(2,u=[]),t(1,c=null),t(4,h=0);for(let p=0;p<_.length;p++){t(4,h=p),t(1,c=_[p]),await new Promise(C=>setTimeout(C,500));const k=await P(_[p]);k&&t(2,u=[...u,k])}t(3,b=!1),t(1,c=null),t(5,x=v.getStatistics()),console.log("✅ 全テスト完了")}function A(){v&&(v.reset(),t(2,u=[]),t(5,x=null),console.log("🔄 エンジンリセット完了"))}return[m,c,u,b,h,x,_,D,A]}class $t extends zt{constructor(l){super(),wt(this,l,Qt,Jt,Ht,{})}}export{$t as component};
