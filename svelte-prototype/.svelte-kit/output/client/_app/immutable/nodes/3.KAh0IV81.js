import{S as F,i as G,s as K,d as h,C as S,m as V,o as I,b as v,D as q,H as Z,h as z,E as A,k,F as N,l as J,L as j,c as T,y,K as Q,e as g,f as w,G as P,j as _,M as R,n as U,A as O,r as L}from"../chunks/CJUHymq1.js";import"../chunks/IHki7fMi.js";import{p as W}from"../chunks/mVW3KKZj.js";import{g as X,b as Y}from"../chunks/DxVs5PO_.js";import{P as ee,C as te}from"../chunks/DqnuPPYK.js";import{a as E,P as ne,b as se}from"../chunks/0TDGV0x0.js";const oe=!1,$e=Object.freeze(Object.defineProperty({__proto__:null,ssr:oe},Symbol.toStringTag,{value:"Module"}));function ie(d){let e,n="ãƒã‚¤ã‚¯ã®ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã—ã¾ã™",a,t,o="ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆé–‹å§‹ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãƒã‚¤ã‚¯ã®ä½¿ç”¨ã‚’è¨±å¯ã—ã¦ãã ã•ã„",s,r;function u(i,c){if(i[0]==="pending")return ce;if(i[0]==="denied")return le;if(i[0]==="initial")return re}let m=u(d),l=m&&m(d);return{c(){e=_("h3"),e.textContent=n,a=k(),t=_("p"),t.textContent=o,s=k(),l&&l.c(),r=L(),this.h()},l(i){e=g(i,"H3",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-gfi16f"&&(e.textContent=n),a=z(i),t=g(i,"P",{class:!0,"data-svelte-h":!0}),P(t)!=="svelte-1w19y1h"&&(t.textContent=o),s=z(i),l&&l.l(i),r=L(),this.h()},h(){y(e,"class","instructions-title svelte-1ny0zhn"),y(t,"class","instructions-description svelte-1ny0zhn")},m(i,c){v(i,e,c),v(i,a,c),v(i,t,c),v(i,s,c),l&&l.m(i,c),v(i,r,c)},p(i,c){m===(m=u(i))&&l?l.p(i,c):(l&&l.d(1),l=m&&m(i),l&&(l.c(),l.m(r.parentNode,r)))},d(i){i&&(h(e),h(a),h(t),h(s),h(r)),l&&l.d(i)}}}function ae(d){let e,n="ãƒã‚¤ã‚¯æº–å‚™å®Œäº†",a,t,o="ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’é–‹å§‹ã—ã¦ãã ã•ã„",s,r,u,m="ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–‹å§‹",l,i;return{c(){e=_("h3"),e.textContent=n,a=k(),t=_("p"),t.textContent=o,s=k(),r=_("div"),u=_("button"),u.textContent=m,this.h()},l(c){e=g(c,"H3",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-11dam81"&&(e.textContent=n),a=z(c),t=g(c,"P",{class:!0,"data-svelte-h":!0}),P(t)!=="svelte-fsj0o8"&&(t.textContent=o),s=z(c),r=g(c,"DIV",{class:!0});var M=w(r);u=g(M,"BUTTON",{class:!0,"data-svelte-h":!0}),P(u)!=="svelte-kae9rs"&&(u.textContent=m),M.forEach(h),this.h()},h(){y(e,"class","ready-title svelte-1ny0zhn"),y(t,"class","ready-description svelte-1ny0zhn"),y(u,"class","training-start-button enabled svelte-1ny0zhn"),y(r,"class","training-start-button-area svelte-1ny0zhn")},m(c,M){v(c,e,M),v(c,a,M),v(c,t,M),v(c,s,M),v(c,r,M),T(r,u),l||(i=O(u,"click",d[6]),l=!0)},p:U,d(c){c&&(h(e),h(a),h(t),h(s),h(r)),l=!1,i()}}}function re(d){let e,n,a="ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹",t,o;return{c(){e=_("div"),n=_("button"),n.textContent=a,this.h()},l(s){e=g(s,"DIV",{class:!0});var r=w(e);n=g(r,"BUTTON",{class:!0,"data-svelte-h":!0}),P(n)!=="svelte-caex95"&&(n.textContent=a),r.forEach(h),this.h()},h(){y(n,"class","mic-test-button start svelte-1ny0zhn"),y(e,"class","mic-test-button-area svelte-1ny0zhn")},m(s,r){v(s,e,r),T(e,n),t||(o=O(n,"click",d[5]),t=!0)},p:U,d(s){s&&h(e),t=!1,o()}}}function le(d){let e,n,a="ãƒã‚¤ã‚¯è¨±å¯ã‚’å†è©¦è¡Œ",t,o;return{c(){e=_("div"),n=_("button"),n.textContent=a,this.h()},l(s){e=g(s,"DIV",{class:!0});var r=w(e);n=g(r,"BUTTON",{class:!0,"data-svelte-h":!0}),P(n)!=="svelte-1p3n8nt"&&(n.textContent=a),r.forEach(h),this.h()},h(){y(n,"class","mic-test-button retry svelte-1ny0zhn"),y(e,"class","mic-test-button-area svelte-1ny0zhn")},m(s,r){v(s,e,r),T(e,n),t||(o=O(n,"click",d[5]),t=!0)},p:U,d(s){s&&h(e),t=!1,o()}}}function ce(d){let e,n="ãƒã‚¤ã‚¯æº–å‚™ä¸­...";return{c(){e=_("p"),e.textContent=n,this.h()},l(a){e=g(a,"P",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-1vb5g92"&&(e.textContent=n),this.h()},h(){y(e,"class","status-text svelte-1ny0zhn")},m(a,t){v(a,e,t)},p:U,d(a){a&&h(e)}}}function de(d){let e;function n(o,s){return o[0]==="granted"?ae:ie}let a=n(d),t=a(d);return{c(){e=_("div"),t.c(),this.h()},l(o){e=g(o,"DIV",{class:!0});var s=w(e);t.l(s),s.forEach(h),this.h()},h(){y(e,"class","training-mode-content svelte-1ny0zhn")},m(o,s){v(o,e,s),t.m(e,null)},p(o,s){a===(a=n(o))&&t?t.p(o,s):(t.d(1),t=a(o),t&&(t.c(),t.m(e,null)))},d(o){o&&h(e),t.d()}}}function ue(d){let e,n,a='<div class="mic-test-header svelte-1ny0zhn"><div class="mic-icon svelte-1ny0zhn"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" x2="12" y1="19" y2="22"></line><line x1="8" x2="16" y1="22" y2="22"></line></svg></div> <div><h1 class="mic-test-title svelte-1ny0zhn">ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆ</h1> <p class="mic-test-description svelte-1ny0zhn">éŸ³æ„Ÿãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’å§‹ã‚ã‚‹å‰ã«ã€ãƒã‚¤ã‚¯ã®å‹•ä½œã‚’ç¢ºèªã—ã¾ã™</p></div></div>',t,o,s,r,u,m,l,i,c;s=new te({props:{variant:"default",padding:"lg",$$slots:{default:[de]},$$scope:{ctx:d}}}),u=new ne({props:{frequency:d[2],note:d[3],volume:d[1],isMuted:d[0]!=="granted",muteMessage:"ãƒã‚¤ã‚¯è¨±å¯å¾Œã«é–‹å§‹"}});let M={isActive:d[0]==="granted",className:"pitch-detector-content",debugMode:!1};return i=new se({props:M}),d[9](i),i.$on("pitchUpdate",d[7]),i.$on("stateChange",fe),i.$on("error",d[8]),{c(){e=_("div"),n=_("div"),n.innerHTML=a,t=k(),o=_("div"),N(s.$$.fragment),r=k(),N(u.$$.fragment),m=k(),l=_("div"),N(i.$$.fragment),this.h()},l(f){e=g(f,"DIV",{class:!0});var p=w(e);n=g(p,"DIV",{class:!0,"data-svelte-h":!0}),P(n)!=="svelte-4qcd63"&&(n.innerHTML=a),t=z(p),o=g(p,"DIV",{class:!0});var D=w(o);A(s.$$.fragment,D),D.forEach(h),r=z(p),A(u.$$.fragment,p),m=z(p),l=g(p,"DIV",{style:!0});var C=w(l);A(i.$$.fragment,C),C.forEach(h),p.forEach(h),this.h()},h(){y(n,"class","header svelte-1ny0zhn"),y(o,"class","training-mode-info svelte-1ny0zhn"),Q(l,"display","none"),y(e,"class","microphone-test svelte-1ny0zhn")},m(f,p){v(f,e,p),T(e,n),T(e,t),T(e,o),q(s,o,null),T(e,r),q(u,e,null),T(e,m),T(e,l),q(i,l,null),c=!0},p(f,p){const D={};p&65537&&(D.$$scope={dirty:p,ctx:f}),s.$set(D);const C={};p&4&&(C.frequency=f[2]),p&8&&(C.note=f[3]),p&2&&(C.volume=f[1]),p&1&&(C.isMuted=f[0]!=="granted"),u.$set(C);const x={};p&1&&(x.isActive=f[0]==="granted"),i.$set(x)},i(f){c||(I(s.$$.fragment,f),I(u.$$.fragment,f),I(i.$$.fragment,f),c=!0)},o(f){V(s.$$.fragment,f),V(u.$$.fragment,f),V(i.$$.fragment,f),c=!1},d(f){f&&h(e),S(s),S(u),d[9](null),S(i)}}}function he(d){let e,n,a;return n=new ee({props:{showBackButton:!0,$$slots:{default:[ue]},$$scope:{ctx:d}}}),{c(){e=k(),N(n.$$.fragment),this.h()},l(t){Z("svelte-8st1fo",document.head).forEach(h),e=z(t),A(n.$$.fragment,t),this.h()},h(){document.title="ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆ - ç›¸å¯¾éŸ³æ„Ÿãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°"},m(t,o){v(t,e,o),q(n,t,o),a=!0},p(t,[o]){const s={};o&65567&&(s.$$scope={dirty:o,ctx:t}),n.$set(s)},i(t){a||(I(n.$$.fragment,t),a=!0)},o(t){V(n.$$.fragment,t),a=!1},d(t){t&&h(e),S(n,t)}}}function fe(d){}function pe(d,e,n){let a;J(d,W,b=>n(12,a=b));let t="random";j(()=>{a.url.searchParams.has("mode")&&(t=a.url.searchParams.get("mode")||"random")});let o="initial",s=0,r=0,u="ãƒ¼ãƒ¼",m=null,l=null;j(()=>{l=E.getPlatformSpecs()});const i={random:{name:"ãƒ©ãƒ³ãƒ€ãƒ åŸºéŸ³ãƒ¢ãƒ¼ãƒ‰",description:"10ç¨®é¡ã®åŸºéŸ³ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«é¸æŠã—ã¦ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°",color:"green",path:"/training/random"},continuous:{name:"é€£ç¶šãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ¢ãƒ¼ãƒ‰",description:"é¸æŠã—ãŸå›æ•°ã ã‘é€£ç¶šã§å®Ÿè¡Œã—ã€ç·åˆè©•ä¾¡ã‚’ç¢ºèª",color:"orange",path:"/training/continuous"},chromatic:{name:"12éŸ³éšãƒ¢ãƒ¼ãƒ‰",description:"ã‚¯ãƒ­ãƒãƒãƒƒã‚¯ã‚¹ã‚±ãƒ¼ãƒ«ã®ä¸Šè¡Œãƒ»ä¸‹è¡Œã§å®Œå…¨åˆ¶è¦‡",color:"purple",path:"/training/chromatic"}},c=i[t]||i.random;async function M(){var b;n(0,o="pending");try{if(console.log("ğŸ¤ [MicTest] ãƒã‚¤ã‚¯è¨±å¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆé–‹å§‹"),!((b=navigator.mediaDevices)!=null&&b.getUserMedia)){n(0,o="denied"),console.error("âŒ [MicTest] getUserMediaãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“");return}const $=await E.initialize();if(console.log("âœ… [MicTest] AudioManager ãƒªã‚½ãƒ¼ã‚¹å–å¾—å®Œäº†"),$.mediaStream&&$.audioContext)n(0,o="granted"),console.log("âœ… [MicTest] ãƒã‚¤ã‚¯è¨±å¯å®Œäº†"),await C(),setTimeout(async()=>{m&&(console.log("ğŸ™ï¸ [MicTest] PitchDetectoråˆæœŸåŒ–é–‹å§‹"),await m.initialize(),console.log("âœ… [MicTest] PitchDetectoråˆæœŸåŒ–å®Œäº†"),console.log("ğŸ¯ [MicTest] PitchDetector isActiveãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã§è‡ªå‹•æ¤œå‡ºé–‹å§‹"))},1e3);else throw new Error("ãƒªã‚½ãƒ¼ã‚¹å–å¾—å¤±æ•—")}catch($){console.error("âŒ [MicTest] ãƒã‚¤ã‚¯è¨±å¯ã‚¨ãƒ©ãƒ¼:",$),n(0,o=(($==null?void 0:$.name)==="NotAllowedError","denied"))}}function f(){console.log("ğŸš€ [MicTest] ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–‹å§‹ - ãƒ©ãƒ³ãƒ€ãƒ åŸºéŸ³ãƒ¢ãƒ¼ãƒ‰ã¸é·ç§»"),localStorage.setItem("mic-test-completed","true"),console.log("âœ… [MicTest] ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆå®Œäº†ãƒ•ãƒ©ã‚°ã‚’ä¿å­˜"),X(`${Y}${c.path}?from=microphone-test`)}function p(b){const{frequency:$,note:B,volume:H,rawVolume:me,clarity:ve}=b.detail;n(2,r=$),n(3,u=B),n(1,s=H)}function D(b){console.error("âŒ [MicTest] PitchDetectorã‚¨ãƒ©ãƒ¼:",b.detail);const{error:$,reason:B,recovery:H}=b.detail;B==="mediastream_ended"&&H==="restart_required"&&(console.log("ğŸ”„ [MicTest] MediaStreamçµ‚äº†æ¤œå‡º - è‡ªå‹•å¾©æ—§é–‹å§‹"),n(0,o="initial"),n(1,s=0),n(2,r=0),n(3,u="ãƒ¼ãƒ¼"),console.log("âš ï¸ [MicTest] ãƒã‚¤ã‚¯å†è¨±å¯ãŒå¿…è¦ã§ã™"))}async function C(){if(l&&l.deviceType==="iPad"){console.log("ğŸ”§ [MicTest] iPadæ¤œå‡º - ãƒã‚¤ã‚¯æ„Ÿåº¦7.0xè‡ªå‹•è¨­å®šé–‹å§‹"),E.setSensitivity(7),console.log("âœ… [MicTest] iPad ãƒã‚¤ã‚¯æ„Ÿåº¦7.0xè‡ªå‹•è¨­å®šå®Œäº†");try{await E.initialize(),console.log("ğŸ”„ [MicTest] iPadç”¨AudioManagerå†åˆæœŸåŒ–å®Œäº†")}catch(b){console.warn("âš ï¸ [MicTest] AudioManagerå†åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",b)}}}function x(b){R[b?"unshift":"push"](()=>{m=b,n(4,m)})}return[o,s,r,u,m,M,f,p,D,x]}class Te extends F{constructor(e){super(),G(this,e,pe,he,K,{})}}export{Te as component,$e as universal};
