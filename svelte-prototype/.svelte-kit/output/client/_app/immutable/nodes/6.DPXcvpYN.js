import{S as we,i as Me,s as Ne,d as h,C as ne,m as te,o as le,b as U,D as ae,H as Pe,h as w,E as re,k as M,F as oe,p as He,q as Se,c as s,y as g,e as _,f as E,G as Q,j as p,L as _e,a as X,g as I,t as V,J as me,A as Ae,z as de}from"../chunks/BaJCk71S.js";import{e as fe}from"../chunks/D6YF6ztN.js";import"../chunks/IHki7fMi.js";import{P as Te,C as ve}from"../chunks/GM6xVcAP.js";import{B as ge}from"../chunks/CetFP668.js";function $e(r,e,t){const o=r.slice();return o[33]=e[t],o[32]=t,o}function je(r,e,t){const o=r.slice();return o[35]=e[t],o[37]=t,o}function Ce(r,e,t){const o=r.slice();return o[30]=e[t],o[32]=t,o}function Ee(r,e,t){const o=r.slice();return o[27]=e[t],o}function Be(r){let e,t,o;return t=new ve({props:{variant:"default",padding:"lg",$$slots:{default:[We]},$$scope:{ctx:r}}}),{c(){e=p("div"),oe(t.$$.fragment),this.h()},l(n){e=_(n,"DIV",{class:!0});var l=E(e);re(t.$$.fragment,l),l.forEach(h),this.h()},h(){g(e,"class","results-screen")},m(n,l){U(n,e,l),ae(t,e,null),o=!0},p(n,l){const a={};l[0]&29197|l[1]&128&&(a.$$scope={dirty:l,ctx:n}),t.$set(a)},i(n){o||(le(t.$$.fragment,n),o=!0)},o(n){te(t.$$.fragment,n),o=!1},d(n){n&&h(e),ne(t)}}}function Le(r){let e,t,o,n,l,a,c,i,v,f,m;return t=new ve({props:{variant:"default",padding:"md",$$slots:{default:[Ge]},$$scope:{ctx:r}}}),n=new ve({props:{variant:"default",padding:"lg",$$slots:{default:[Oe]},$$scope:{ctx:r}}}),i=new ve({props:{variant:"default",padding:"md",$$slots:{default:[Je]},$$scope:{ctx:r}}}),f=new ve({props:{variant:"default",padding:"md",$$slots:{default:[Ue]},$$scope:{ctx:r}}}),{c(){e=p("div"),oe(t.$$.fragment),o=M(),oe(n.$$.fragment),l=M(),a=p("div"),c=p("div"),oe(i.$$.fragment),v=M(),oe(f.$$.fragment),this.h()},l(d){e=_(d,"DIV",{class:!0});var u=E(e);re(t.$$.fragment,u),o=w(u),re(n.$$.fragment,u),l=w(u),a=_(u,"DIV",{class:!0});var $=E(a);c=_($,"DIV",{class:!0});var j=E(c);re(i.$$.fragment,j),v=w(j),re(f.$$.fragment,j),j.forEach(h),$.forEach(h),u.forEach(h),this.h()},h(){g(c,"class","display-grid svelte-najnvf"),g(a,"class","realtime-display svelte-najnvf"),g(e,"class","detection-screen")},m(d,u){U(d,e,u),ae(t,e,null),s(e,o),ae(n,e,null),s(e,l),s(e,a),s(a,c),ae(i,c,null),s(c,v),ae(f,c,null),m=!0},p(d,u){const $={};u[0]&13|u[1]&128&&($.$$scope={dirty:u,ctx:d}),t.$set($);const j={};u[0]&384|u[1]&128&&(j.$$scope={dirty:u,ctx:d}),n.$set(j);const D={};u[0]&32770|u[1]&128&&(D.$$scope={dirty:u,ctx:d}),i.$set(D);const S={};u[0]&3072|u[1]&128&&(S.$$scope={dirty:u,ctx:d}),f.$set(S)},i(d){m||(le(t.$$.fragment,d),le(n.$$.fragment,d),le(i.$$.fragment,d),le(f.$$.fragment,d),m=!0)},o(d){te(t.$$.fragment,d),te(n.$$.fragment,d),te(i.$$.fragment,d),te(f.$$.fragment,d),m=!1},d(d){d&&h(e),ne(t),ne(n),ne(i),ne(f)}}}function ze(r){let e,t,o;return t=new ve({props:{variant:"warning",padding:"lg",$$slots:{default:[ye]},$$scope:{ctx:r}}}),{c(){e=p("div"),oe(t.$$.fragment),this.h()},l(n){e=_(n,"DIV",{class:!0});var l=E(e);re(t.$$.fragment,l),l.forEach(h),this.h()},h(){g(e,"class","playing-screen")},m(n,l){U(n,e,l),ae(t,e,null),o=!0},p(n,l){const a={};l[0]&76|l[1]&128&&(a.$$scope={dirty:l,ctx:n}),t.$set(a)},i(n){o||(le(t.$$.fragment,n),o=!0)},o(n){te(t.$$.fragment,n),o=!1},d(n){n&&h(e),ne(t)}}}function qe(r){let e,t,o;return t=new ve({props:{variant:"default",padding:"lg",$$slots:{default:[Qe]},$$scope:{ctx:r}}}),{c(){e=p("div"),oe(t.$$.fragment),this.h()},l(n){e=_(n,"DIV",{class:!0});var l=E(e);re(t.$$.fragment,l),l.forEach(h),this.h()},h(){g(e,"class","setup-screen")},m(n,l){U(n,e,l),ae(t,e,null),o=!0},p(n,l){const a={};l[0]&4|l[1]&128&&(a.$$scope={dirty:l,ctx:n}),t.$set(a)},i(n){o||(le(t.$$.fragment,n),o=!0)},o(n){te(t.$$.fragment,n),o=!1},d(n){n&&h(e),ne(t)}}}function be(r){let e,t=r[16][r[37]]+"",o,n,l;return{c(){e=p("span"),o=V(t),n=M(),this.h()},l(a){e=_(a,"SPAN",{class:!0});var c=E(e);o=I(c,t),n=w(c),c.forEach(h),this.h()},h(){g(e,"class",l="scale-result-mini "+(r[35]?"correct":"incorrect")+" svelte-najnvf")},m(a,c){U(a,e,c),s(e,o),s(e,n)},p(a,c){c[0]&1&&l!==(l="scale-result-mini "+(a[35]?"correct":"incorrect")+" svelte-najnvf")&&g(e,"class",l)},d(a){a&&h(e)}}}function De(r){let e,t,o,n,l=r[33].challenge+"",a,c,i,v=r[33].score+"",f,m,d,u,$,j=r[33].baseNote+"",D,S,A,W,q=fe(r[33].scaleResults),L=[];for(let N=0;N<q.length;N+=1)L[N]=be(je(r,q,N));return{c(){e=p("div"),t=p("div"),o=p("span"),n=V("#"),a=V(l),c=M(),i=p("span"),f=V(v),m=V("点"),d=M(),u=p("span"),$=V("基音: "),D=V(j),S=M(),A=p("div");for(let N=0;N<L.length;N+=1)L[N].c();W=M(),this.h()},l(N){e=_(N,"DIV",{class:!0});var P=E(e);t=_(P,"DIV",{class:!0});var b=E(t);o=_(b,"SPAN",{class:!0});var z=E(o);n=I(z,"#"),a=I(z,l),z.forEach(h),c=w(b),i=_(b,"SPAN",{class:!0});var B=E(i);f=I(B,v),m=I(B,"点"),B.forEach(h),d=w(b),u=_(b,"SPAN",{class:!0});var y=E(u);$=I(y,"基音: "),D=I(y,j),y.forEach(h),b.forEach(h),S=w(P),A=_(P,"DIV",{class:!0});var O=E(A);for(let Y=0;Y<L.length;Y+=1)L[Y].l(O);O.forEach(h),W=w(P),P.forEach(h),this.h()},h(){g(o,"class","challenge-number svelte-najnvf"),g(i,"class","challenge-score svelte-najnvf"),g(u,"class","challenge-base svelte-najnvf"),g(t,"class","challenge-header svelte-najnvf"),g(A,"class","challenge-scales svelte-najnvf"),g(e,"class","challenge-result svelte-najnvf")},m(N,P){U(N,e,P),s(e,t),s(t,o),s(o,n),s(o,a),s(t,c),s(t,i),s(i,f),s(i,m),s(t,d),s(t,u),s(u,$),s(u,D),s(e,S),s(e,A);for(let b=0;b<L.length;b+=1)L[b]&&L[b].m(A,null);s(e,W)},p(N,P){if(P[0]&1&&l!==(l=N[33].challenge+"")&&X(a,l),P[0]&1&&v!==(v=N[33].score+"")&&X(f,v),P[0]&1&&j!==(j=N[33].baseNote+"")&&X(D,j),P[0]&65537){q=fe(N[33].scaleResults);let b;for(b=0;b<q.length;b+=1){const z=je(N,q,b);L[b]?L[b].p(z,P):(L[b]=be(z),L[b].c(),L[b].m(A,null))}for(;b<L.length;b+=1)L[b].d(1);L.length=q.length}},d(N){N&&h(e),_e(L,N)}}}function Re(r){let e;return{c(){e=V("もう一度チャレンジ")},l(t){e=I(t,"もう一度チャレンジ")},m(t,o){U(t,e,o)},d(t){t&&h(e)}}}function Fe(r){let e;return{c(){e=V("結果を保存")},l(t){e=I(t,"結果を保存")},m(t,o){U(t,e,o)},d(t){t&&h(e)}}}function We(r){let e,t,o="連続チャレンジ結果",n,l,a,c,i,v,f,m="点",d,u,$,j,D,S,A,W,q,L,N,P,b,z,B="チャレンジ別結果",y,O,Y,T,J,x,K,Z,ee=fe(r[0]),H=[];for(let C=0;C<ee.length;C+=1)H[C]=De($e(r,ee,C));return J=new ge({props:{variant:"warning",size:"lg",fullWidth:!0,$$slots:{default:[Re]},$$scope:{ctx:r}}}),J.$on("click",r[20]),K=new ge({props:{variant:"secondary",size:"md",fullWidth:!0,$$slots:{default:[Fe]},$$scope:{ctx:r}}}),{c(){e=p("div"),t=p("h2"),t.textContent=o,n=M(),l=p("div"),a=p("div"),c=p("span"),i=V(r[14]),v=M(),f=p("span"),f.textContent=m,d=M(),u=p("p"),$=V("平均スコア ("),j=V(r[2]),D=V("回チャレンジ)"),S=M(),A=p("p"),W=V(r[12]),q=V("音階中 "),L=V(r[13]),N=V("音階 正解"),P=M(),b=p("div"),z=p("h3"),z.textContent=B,y=M(),O=p("div");for(let C=0;C<H.length;C+=1)H[C].c();Y=M(),T=p("div"),oe(J.$$.fragment),x=M(),oe(K.$$.fragment),this.h()},l(C){e=_(C,"DIV",{class:!0});var k=E(e);t=_(k,"H2",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-poqt2c"&&(t.textContent=o),n=w(k),l=_(k,"DIV",{class:!0});var R=E(l);a=_(R,"DIV",{class:!0});var G=E(a);c=_(G,"SPAN",{class:!0});var F=E(c);i=I(F,r[14]),F.forEach(h),v=w(G),f=_(G,"SPAN",{class:!0,"data-svelte-h":!0}),Q(f)!=="svelte-yaz7vv"&&(f.textContent=m),G.forEach(h),d=w(R),u=_(R,"P",{class:!0});var se=E(u);$=I(se,"平均スコア ("),j=I(se,r[2]),D=I(se,"回チャレンジ)"),se.forEach(h),S=w(R),A=_(R,"P",{class:!0});var ce=E(A);W=I(ce,r[12]),q=I(ce,"音階中 "),L=I(ce,r[13]),N=I(ce,"音階 正解"),ce.forEach(h),R.forEach(h),P=w(k),b=_(k,"DIV",{class:!0});var ie=E(b);z=_(ie,"H3",{class:!0,"data-svelte-h":!0}),Q(z)!=="svelte-7pqozo"&&(z.textContent=B),y=w(ie),O=_(ie,"DIV",{class:!0});var ue=E(O);for(let pe=0;pe<H.length;pe+=1)H[pe].l(ue);ue.forEach(h),ie.forEach(h),Y=w(k),T=_(k,"DIV",{class:!0});var he=E(T);re(J.$$.fragment,he),x=w(he),re(K.$$.fragment,he),he.forEach(h),k.forEach(h),this.h()},h(){g(t,"class","results-title svelte-najnvf"),g(c,"class","score-value svelte-najnvf"),g(f,"class","score-unit svelte-najnvf"),g(a,"class","score-circle svelte-najnvf"),g(u,"class","score-description svelte-najnvf"),g(A,"class","total-stats svelte-najnvf"),g(l,"class","total-score-display svelte-najnvf"),g(z,"class","details-title svelte-najnvf"),g(O,"class","challenge-results svelte-najnvf"),g(b,"class","detailed-results"),g(T,"class","action-buttons svelte-najnvf"),g(e,"class","results-content svelte-najnvf")},m(C,k){U(C,e,k),s(e,t),s(e,n),s(e,l),s(l,a),s(a,c),s(c,i),s(a,v),s(a,f),s(l,d),s(l,u),s(u,$),s(u,j),s(u,D),s(l,S),s(l,A),s(A,W),s(A,q),s(A,L),s(A,N),s(e,P),s(e,b),s(b,z),s(b,y),s(b,O);for(let R=0;R<H.length;R+=1)H[R]&&H[R].m(O,null);s(e,Y),s(e,T),ae(J,T,null),s(T,x),ae(K,T,null),Z=!0},p(C,k){if((!Z||k[0]&16384)&&X(i,C[14]),(!Z||k[0]&4)&&X(j,C[2]),(!Z||k[0]&4096)&&X(W,C[12]),(!Z||k[0]&8192)&&X(L,C[13]),k[0]&65537){ee=fe(C[0]);let F;for(F=0;F<ee.length;F+=1){const se=$e(C,ee,F);H[F]?H[F].p(se,k):(H[F]=De(se),H[F].c(),H[F].m(O,null))}for(;F<H.length;F+=1)H[F].d(1);H.length=ee.length}const R={};k[1]&128&&(R.$$scope={dirty:k,ctx:C}),J.$set(R);const G={};k[1]&128&&(G.$$scope={dirty:k,ctx:C}),K.$set(G)},i(C){Z||(le(J.$$.fragment,C),le(K.$$.fragment,C),Z=!0)},o(C){te(J.$$.fragment,C),te(K.$$.fragment,C),Z=!1},d(C){C&&h(e),_e(H,C),ne(J),ne(K)}}}function Ge(r){let e,t,o,n,l=r[3]+1+"",a,c,i,v,f,m,d=r[0].length+"",u;return{c(){e=p("div"),t=p("div"),o=p("span"),n=V("チャレンジ進行: "),a=V(l),c=V(" / "),i=V(r[2]),v=M(),f=p("span"),m=V("完了: "),u=V(d),this.h()},l($){e=_($,"DIV",{class:!0});var j=E(e);t=_(j,"DIV",{class:!0});var D=E(t);o=_(D,"SPAN",{});var S=E(o);n=I(S,"チャレンジ進行: "),a=I(S,l),c=I(S," / "),i=I(S,r[2]),S.forEach(h),v=w(D),f=_(D,"SPAN",{});var A=E(f);m=I(A,"完了: "),u=I(A,d),A.forEach(h),D.forEach(h),j.forEach(h),this.h()},h(){g(t,"class","status-row svelte-najnvf"),g(e,"class","challenge-status svelte-najnvf")},m($,j){U($,e,j),s(e,t),s(t,o),s(o,n),s(o,a),s(o,c),s(o,i),s(t,v),s(t,f),s(f,m),s(f,u)},p($,j){j[0]&8&&l!==(l=$[3]+1+"")&&X(a,l),j[0]&4&&X(i,$[2]),j[0]&1&&d!==(d=$[0].length+"")&&X(u,d)},d($){$&&h(e)}}}function Ie(r){let e,t=r[8][r[32]]?"✓":"×",o,n;return{c(){e=p("span"),o=V(t),this.h()},l(l){e=_(l,"SPAN",{class:!0});var a=E(e);o=I(a,t),a.forEach(h),this.h()},h(){g(e,"class",n="result-icon "+(r[8][r[32]]?"correct":"incorrect")+" svelte-najnvf")},m(l,a){U(l,e,a),s(e,o)},p(l,a){a[0]&256&&t!==(t=l[8][l[32]]?"✓":"×")&&X(o,t),a[0]&256&&n!==(n="result-icon "+(l[8][l[32]]?"correct":"incorrect")+" svelte-najnvf")&&g(e,"class",n)},d(l){l&&h(e)}}}function Ve(r){let e,t,o=r[30]+"",n,l,a,c=r[8][r[32]]!==void 0&&Ie(r);return{c(){e=p("div"),t=p("span"),n=V(o),l=M(),c&&c.c(),a=M(),this.h()},l(i){e=_(i,"DIV",{class:!0});var v=E(e);t=_(v,"SPAN",{class:!0});var f=E(t);n=I(f,o),f.forEach(h),l=w(v),c&&c.l(v),a=w(v),v.forEach(h),this.h()},h(){g(t,"class","note-text svelte-najnvf"),g(e,"class","scale-note svelte-najnvf"),de(e,"active",r[32]===r[7]),de(e,"completed",r[8][r[32]]!==void 0)},m(i,v){U(i,e,v),s(e,t),s(t,n),s(e,l),c&&c.m(e,null),s(e,a)},p(i,v){i[8][i[32]]!==void 0?c?c.p(i,v):(c=Ie(i),c.c(),c.m(e,a)):c&&(c.d(1),c=null),v[0]&128&&de(e,"active",i[32]===i[7]),v[0]&256&&de(e,"completed",i[8][i[32]]!==void 0)},d(i){i&&h(e),c&&c.d()}}}function Oe(r){let e,t,o="ドレミファソラシドを歌ってください",n,l,a=fe(r[16]),c=[];for(let i=0;i<a.length;i+=1)c[i]=Ve(Ce(r,a,i));return{c(){e=p("div"),t=p("h2"),t.textContent=o,n=M(),l=p("div");for(let i=0;i<c.length;i+=1)c[i].c();this.h()},l(i){e=_(i,"DIV",{class:!0});var v=E(e);t=_(v,"H2",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-9l8glf"&&(t.textContent=o),n=w(v),l=_(v,"DIV",{class:!0});var f=E(l);for(let m=0;m<c.length;m+=1)c[m].l(f);f.forEach(h),v.forEach(h),this.h()},h(){g(t,"class","guide-title svelte-najnvf"),g(l,"class","scale-guide svelte-najnvf"),g(e,"class","guide-content svelte-najnvf")},m(i,v){U(i,e,v),s(e,t),s(e,n),s(e,l);for(let f=0;f<c.length;f+=1)c[f]&&c[f].m(l,null)},p(i,v){if(v[0]&65920){a=fe(i[16]);let f;for(f=0;f<a.length;f+=1){const m=Ce(i,a,f);c[f]?c[f].p(m,v):(c[f]=Ve(m),c[f].c(),c[f].m(l,null))}for(;f<c.length;f+=1)c[f].d(1);c.length=a.length}},d(i){i&&h(e),_e(c,i)}}}function Je(r){let e,t,o="音量レベル",n,l,a,c,i,v,f=Math.round(r[1])+"",m,d;return{c(){e=p("div"),t=p("h3"),t.textContent=o,n=M(),l=p("div"),a=p("div"),c=p("div"),i=M(),v=p("span"),m=V(f),d=V("%"),this.h()},l(u){e=_(u,"DIV",{class:!0});var $=E(e);t=_($,"H3",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-1nc8gri"&&(t.textContent=o),n=w($),l=_($,"DIV",{class:!0});var j=E(l);a=_(j,"DIV",{class:!0});var D=E(a);c=_(D,"DIV",{class:!0,style:!0}),E(c).forEach(h),D.forEach(h),i=w(j),v=_(j,"SPAN",{class:!0});var S=E(v);m=I(S,f),d=I(S,"%"),S.forEach(h),j.forEach(h),$.forEach(h),this.h()},h(){g(t,"class","display-title svelte-najnvf"),g(c,"class","volume-fill svelte-najnvf"),me(c,"width",r[15]+"%"),g(a,"class","volume-bar svelte-najnvf"),g(v,"class","volume-text svelte-najnvf"),g(l,"class","volume-bar-container svelte-najnvf"),g(e,"class","volume-display")},m(u,$){U(u,e,$),s(e,t),s(e,n),s(e,l),s(l,a),s(a,c),s(l,i),s(l,v),s(v,m),s(v,d)},p(u,$){$[0]&32768&&me(c,"width",u[15]+"%"),$[0]&2&&f!==(f=Math.round(u[1])+"")&&X(m,f)},d(u){u&&h(e)}}}function Ue(r){let e,t,o="検出音程",n,l,a,c=r[10].toFixed(1)+"",i,v,f,m,d;return{c(){e=p("div"),t=p("h3"),t.textContent=o,n=M(),l=p("div"),a=p("div"),i=V(c),v=V(" Hz"),f=M(),m=p("div"),d=V(r[11]),this.h()},l(u){e=_(u,"DIV",{class:!0});var $=E(e);t=_($,"H3",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-tjj9b2"&&(t.textContent=o),n=w($),l=_($,"DIV",{class:!0});var j=E(l);a=_(j,"DIV",{class:!0});var D=E(a);i=I(D,c),v=I(D," Hz"),D.forEach(h),f=w(j),m=_(j,"DIV",{class:!0});var S=E(m);d=I(S,r[11]),S.forEach(h),j.forEach(h),$.forEach(h),this.h()},h(){g(t,"class","display-title svelte-najnvf"),g(a,"class","frequency-value svelte-najnvf"),g(m,"class","note-value svelte-najnvf"),g(l,"class","pitch-info svelte-najnvf"),g(e,"class","pitch-display")},m(u,$){U(u,e,$),s(e,t),s(e,n),s(e,l),s(l,a),s(a,i),s(a,v),s(l,f),s(l,m),s(m,d)},p(u,$){$[0]&1024&&c!==(c=u[10].toFixed(1)+"")&&X(i,c),$[0]&2048&&X(d,u[11])},d(u){u&&h(e)}}}function ye(r){let e,t,o,n,l=r[3]+1+"",a,c,i,v,f,m='<svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><polygon points="10,8 16,12 10,16"></polygon></svg>',d,u,$="基音再生中",j,D,S,A,W,q,L="この音を覚えて「ド」として認識してください",N,P,b='<div class="progress-bar svelte-najnvf"><div class="progress-fill svelte-najnvf"></div></div>';return{c(){e=p("div"),t=p("div"),o=p("span"),n=V("チャレンジ "),a=V(l),c=V(" / "),i=V(r[2]),v=M(),f=p("div"),f.innerHTML=m,d=M(),u=p("h2"),u.textContent=$,j=M(),D=p("p"),S=V("基音: "),A=V(r[6]),W=M(),q=p("p"),q.textContent=L,N=M(),P=p("div"),P.innerHTML=b,this.h()},l(z){e=_(z,"DIV",{class:!0});var B=E(e);t=_(B,"DIV",{class:!0});var y=E(t);o=_(y,"SPAN",{class:!0});var O=E(o);n=I(O,"チャレンジ "),a=I(O,l),c=I(O," / "),i=I(O,r[2]),O.forEach(h),y.forEach(h),v=w(B),f=_(B,"DIV",{class:!0,"data-svelte-h":!0}),Q(f)!=="svelte-11l4yoz"&&(f.innerHTML=m),d=w(B),u=_(B,"H2",{class:!0,"data-svelte-h":!0}),Q(u)!=="svelte-1maueo6"&&(u.textContent=$),j=w(B),D=_(B,"P",{class:!0});var Y=E(D);S=I(Y,"基音: "),A=I(Y,r[6]),Y.forEach(h),W=w(B),q=_(B,"P",{class:!0,"data-svelte-h":!0}),Q(q)!=="svelte-1hcrx2z"&&(q.textContent=L),N=w(B),P=_(B,"DIV",{class:!0,"data-svelte-h":!0}),Q(P)!=="svelte-4yu433"&&(P.innerHTML=b),B.forEach(h),this.h()},h(){g(o,"class","progress-text svelte-najnvf"),g(t,"class","challenge-progress svelte-najnvf"),g(f,"class","playing-icon svelte-najnvf"),g(u,"class","playing-title svelte-najnvf"),g(D,"class","playing-note svelte-najnvf"),g(q,"class","playing-instruction svelte-najnvf"),g(P,"class","playing-progress svelte-najnvf"),g(e,"class","playing-content svelte-najnvf")},m(z,B){U(z,e,B),s(e,t),s(t,o),s(o,n),s(o,a),s(o,c),s(o,i),s(e,v),s(e,f),s(e,d),s(e,u),s(e,j),s(e,D),s(D,S),s(D,A),s(e,W),s(e,q),s(e,N),s(e,P)},p(z,B){B[0]&8&&l!==(l=z[3]+1+"")&&X(a,l),B[0]&4&&X(i,z[2]),B[0]&64&&X(A,z[6])},d(z){z&&h(e)}}}function ke(r){let e,t=r[27]+"",o,n,l,a,c;function i(){return r[19](r[27])}return{c(){e=p("button"),o=V(t),n=V(`回
                  `),this.h()},l(v){e=_(v,"BUTTON",{class:!0});var f=E(e);o=I(f,t),n=I(f,`回
                  `),f.forEach(h),this.h()},h(){g(e,"class",l="challenge-option "+(r[2]===r[27]?"selected":"")+" svelte-najnvf")},m(v,f){U(v,e,f),s(e,o),s(e,n),a||(c=Ae(e,"click",i),a=!0)},p(v,f){r=v,f[0]&4&&l!==(l="challenge-option "+(r[2]===r[27]?"selected":"")+" svelte-najnvf")&&g(e,"class",l)},d(v){v&&h(e),a=!1,c()}}}function Ke(r){let e;return{c(){e=V("連続チャレンジ開始")},l(t){e=I(t,"連続チャレンジ開始")},m(t,o){U(t,e,o)},d(t){t&&h(e)}}}function Qe(r){let e,t,o="連続チャレンジ設定",n,l,a="連続でトレーニングを実行し、総合的な相対音感を評価します",c,i,v,f="チャレンジ回数",m,d,u,$,j,D,S="1",A,W,q,L="連続実行",N,P,b,z,B,y,O='<span class="step-number svelte-najnvf">2</span> <div><h3 class="svelte-najnvf">自動進行</h3> <p class="svelte-najnvf">各チャレンジ完了後、自動的に次のチャレンジが開始されます</p></div>',Y,T,J='<span class="step-number svelte-najnvf">3</span> <div><h3 class="svelte-najnvf">総合評価</h3> <p class="svelte-najnvf">全チャレンジ完了後、詳細な成績分析を表示します</p></div>',x,K,Z,ee=fe(r[17]),H=[];for(let C=0;C<ee.length;C+=1)H[C]=ke(Ee(r,ee,C));return K=new ge({props:{variant:"warning",size:"lg",fullWidth:!0,$$slots:{default:[Ke]},$$scope:{ctx:r}}}),K.$on("click",r[18]),{c(){e=p("div"),t=p("h2"),t.textContent=o,n=M(),l=p("p"),l.textContent=a,c=M(),i=p("div"),v=p("h3"),v.textContent=f,m=M(),d=p("div");for(let C=0;C<H.length;C+=1)H[C].c();u=M(),$=p("div"),j=p("div"),D=p("span"),D.textContent=S,A=M(),W=p("div"),q=p("h3"),q.textContent=L,N=M(),P=p("p"),b=V(r[2]),z=V("回のトレーニングを連続で実行します"),B=M(),y=p("div"),y.innerHTML=O,Y=M(),T=p("div"),T.innerHTML=J,x=M(),oe(K.$$.fragment),this.h()},l(C){e=_(C,"DIV",{class:!0});var k=E(e);t=_(k,"H2",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-dsj1se"&&(t.textContent=o),n=w(k),l=_(k,"P",{class:!0,"data-svelte-h":!0}),Q(l)!=="svelte-nfowvv"&&(l.textContent=a),c=w(k),i=_(k,"DIV",{class:!0});var R=E(i);v=_(R,"H3",{class:!0,"data-svelte-h":!0}),Q(v)!=="svelte-1lnuy10"&&(v.textContent=f),m=w(R),d=_(R,"DIV",{class:!0});var G=E(d);for(let ue=0;ue<H.length;ue+=1)H[ue].l(G);G.forEach(h),R.forEach(h),u=w(k),$=_(k,"DIV",{class:!0});var F=E($);j=_(F,"DIV",{class:!0});var se=E(j);D=_(se,"SPAN",{class:!0,"data-svelte-h":!0}),Q(D)!=="svelte-1gvrwis"&&(D.textContent=S),A=w(se),W=_(se,"DIV",{});var ce=E(W);q=_(ce,"H3",{class:!0,"data-svelte-h":!0}),Q(q)!=="svelte-15671mq"&&(q.textContent=L),N=w(ce),P=_(ce,"P",{class:!0});var ie=E(P);b=I(ie,r[2]),z=I(ie,"回のトレーニングを連続で実行します"),ie.forEach(h),ce.forEach(h),se.forEach(h),B=w(F),y=_(F,"DIV",{class:!0,"data-svelte-h":!0}),Q(y)!=="svelte-1tkaj9l"&&(y.innerHTML=O),Y=w(F),T=_(F,"DIV",{class:!0,"data-svelte-h":!0}),Q(T)!=="svelte-jeztwj"&&(T.innerHTML=J),F.forEach(h),x=w(k),re(K.$$.fragment,k),k.forEach(h),this.h()},h(){g(t,"class","setup-title svelte-najnvf"),g(l,"class","setup-description svelte-najnvf"),g(v,"class","selector-title svelte-najnvf"),g(d,"class","challenge-options svelte-najnvf"),g(i,"class","challenge-selector svelte-najnvf"),g(D,"class","step-number svelte-najnvf"),g(q,"class","svelte-najnvf"),g(P,"class","svelte-najnvf"),g(j,"class","instruction-item svelte-najnvf"),g(y,"class","instruction-item svelte-najnvf"),g(T,"class","instruction-item svelte-najnvf"),g($,"class","instructions svelte-najnvf"),g(e,"class","setup-content svelte-najnvf")},m(C,k){U(C,e,k),s(e,t),s(e,n),s(e,l),s(e,c),s(e,i),s(i,v),s(i,m),s(i,d);for(let R=0;R<H.length;R+=1)H[R]&&H[R].m(d,null);s(e,u),s(e,$),s($,j),s(j,D),s(j,A),s(j,W),s(W,q),s(W,N),s(W,P),s(P,b),s(P,z),s($,B),s($,y),s($,Y),s($,T),s(e,x),ae(K,e,null),Z=!0},p(C,k){if(k[0]&131076){ee=fe(C[17]);let G;for(G=0;G<ee.length;G+=1){const F=Ee(C,ee,G);H[G]?H[G].p(F,k):(H[G]=ke(F),H[G].c(),H[G].m(d,null))}for(;G<H.length;G+=1)H[G].d(1);H.length=ee.length}(!Z||k[0]&4)&&X(b,C[2]);const R={};k[1]&128&&(R.$$scope={dirty:k,ctx:C}),K.$set(R)},i(C){Z||(le(K.$$.fragment,C),Z=!0)},o(C){te(K.$$.fragment,C),Z=!1},d(C){C&&h(e),_e(H,C),ne(K)}}}function Xe(r){let e,t,o='<div class="mode-header svelte-najnvf"><div class="mode-icon svelte-najnvf"><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle></svg></div> <div><h1 class="mode-title svelte-najnvf">連続チャレンジモード</h1> <p class="mode-description svelte-najnvf">選択した回数だけ連続で実行し、総合評価を確認</p></div></div>',n,l,a,c;const i=[qe,ze,Le,Be],v=[];function f(m,d){return!m[4]&&!m[5]&&!m[9]&&m[3]===0?0:m[4]?1:m[5]?2:m[9]?3:-1}return~(l=f(r))&&(a=v[l]=i[l](r)),{c(){e=p("div"),t=p("div"),t.innerHTML=o,n=M(),a&&a.c(),this.h()},l(m){e=_(m,"DIV",{class:!0});var d=E(e);t=_(d,"DIV",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-1qc1h0k"&&(t.innerHTML=o),n=w(d),a&&a.l(d),d.forEach(h),this.h()},h(){g(t,"class","header svelte-najnvf"),g(e,"class","continuous-training svelte-najnvf")},m(m,d){U(m,e,d),s(e,t),s(e,n),~l&&v[l].m(e,null),c=!0},p(m,d){let u=l;l=f(m),l===u?~l&&v[l].p(m,d):(a&&(He(),te(v[u],1,1,()=>{v[u]=null}),Se()),~l?(a=v[l],a?a.p(m,d):(a=v[l]=i[l](m),a.c()),le(a,1),a.m(e,null)):a=null)},i(m){c||(le(a),c=!0)},o(m){te(a),c=!1},d(m){m&&h(e),~l&&v[l].d()}}}function Ye(r){let e,t,o;return t=new Te({props:{showBackButton:!0,$$slots:{default:[Xe]},$$scope:{ctx:r}}}),{c(){e=M(),oe(t.$$.fragment),this.h()},l(n){Pe("svelte-13kpo59",document.head).forEach(h),e=w(n),re(t.$$.fragment,n),this.h()},h(){document.title="連続チャレンジモード - 相対音感トレーニング"},m(n,l){U(n,e,l),ae(t,n,l),o=!0},p(n,l){const a={};l[0]&65535|l[1]&128&&(a.$$scope={dirty:l,ctx:n}),t.$set(a)},i(n){o||(le(t.$$.fragment,n),o=!0)},o(n){te(t.$$.fragment,n),o=!1},d(n){n&&h(e),ne(t,n)}}}function Ze(r,e,t){let o,n,l,a,c=5,i=0,v=!1,f=!1,m="",d=0,u=[],$=[],j=!1,D=0,S=0,A="";const W=["ド","レ","ミ","ファ","ソ","ラ","シ","ド"],q=["Bb3","B3","C4","Db4","D4","Eb4","E4","F4","Gb4","G4"],L=[3,5,10,15,20];function N(){const T=Math.floor(Math.random()*q.length);return t(6,m=q[T]),m}function P(){t(3,i=0),t(0,$=[]),t(9,j=!1),b()}function b(){t(7,d=0),t(8,u=[]);const T=N();z(T)}function z(T){t(4,v=!0),console.log(`基音再生: ${T}`),setTimeout(()=>{t(4,v=!1),B()},2500)}function B(){t(5,f=!0);const T=setInterval(()=>{if(!f){clearInterval(T);return}t(1,D=Math.random()*100);const J=[261.63,293.66,329.63,349.23,392,440,493.88,523.25];if(t(10,S=J[Math.floor(Math.random()*J.length)]),t(11,A=W[Math.floor(Math.random()*W.length)]),Math.random()>.7){const x=Math.random()>.3;t(8,u[d]=x,u),t(7,d++,d),d>=8&&y()}},500)}function y(){t(5,f=!1);const T=u.filter(x=>x).length,J=Math.round(T/8*100);$.push({challenge:i+1,baseNote:m,scaleResults:[...u],score:J}),t(3,i++,i),i>=c?t(9,j=!0):setTimeout(()=>{b()},1500)}const O=T=>t(2,c=T),Y=()=>{t(3,i=0),t(0,$=[]),t(9,j=!1)};return r.$$.update=()=>{r.$$.dirty[0]&2&&t(15,o=Math.max(0,Math.min(100,D))),r.$$.dirty[0]&1&&t(14,n=$.length>0?Math.round($.reduce((T,J)=>T+J.score,0)/$.length):0),r.$$.dirty[0]&1&&t(13,l=$.reduce((T,J)=>T+J.scaleResults.filter(x=>x).length,0)),r.$$.dirty[0]&1&&t(12,a=$.length*8)},[$,D,c,i,v,f,m,d,u,j,S,A,a,l,n,o,W,L,P,O,Y]}class nt extends we{constructor(e){super(),Me(this,e,Ze,Ye,Ne,{},null,[-1,-1])}}export{nt as component};
