import{S as ne,i as oe,d as M,s as ie,v as le,c as se,a as ce,D as ht,E as Et,b as v,q as lt,r as X,u as K,f as C,w as st,F as re,m as R,x as ct,p as F,y as rt,g as h,z as m,h as _,j as y,k as z,B as at,A as N,o as p,C as ut,G as At,H as Pt,l as Y,t as Q,n as nt,e as gt,I as vt,J as ft,K as dt}from"../chunks/EvMzC0aQ.js";import{g as ae}from"../chunks/D0QH3NT1.js";import"../chunks/DrEUfQCr.js";import{p as _t}from"../chunks/D_cW14Qz.js";import{P as Mt,B as zt,C as yt}from"../chunks/yXPAb40O.js";import{P as ue,V as Rt}from"../chunks/CmUJIz7r.js";const{console:fe}=ae,g="src/routes/microphone-test/+page.svelte";function Ft(c){let t,n="üé§ „Éû„Ç§„ÇØ„ÉÜ„Çπ„Éà„ÇíÈñãÂßã„Åó„Å¶„Åè„Å†„Åï„ÅÑ",s,e,i="„Éû„Ç§„ÇØË®±ÂèØ„ÇíÂèñÂæó",l,r;const u={c:function(){t=p("div"),t.textContent=n,s=F(),e=p("button"),e.textContent=i,this.h()},l:function(o){t=y(o,"DIV",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-1trsgl3"&&(t.textContent=n),s=R(o),e=y(o,"BUTTON",{class:!0,"data-svelte-h":!0}),N(e)!=="svelte-1m6icav"&&(e.textContent=i),this.h()},h:function(){m(t,"class","status-indicator pending svelte-ztuqv4"),_(t,g,450,14,13468),m(e,"class","retry-button svelte-ztuqv4"),_(e,g,451,14,13545)},m:function(o,a){C(o,t,a),C(o,s,a),C(o,e,a),l||(r=ft(e,"click",c[11],!1),l=!0)},p:nt,d:function(o){o&&(v(t),v(s),v(e)),l=!1,r()}};return M("SvelteRegisterBlock",{block:u,id:Ft.name,type:"else",source:"(450:12) {:else}",ctx:c}),u}function Nt(c){let t,n="‚ùå „Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„Çπ„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü",s,e,i="„Éû„Ç§„ÇØË®±ÂèØ„ÇíÂÜçË©¶Ë°å",l,r;const u={c:function(){t=p("div"),t.textContent=n,s=F(),e=p("button"),e.textContent=i,this.h()},l:function(o){t=y(o,"DIV",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-11p6bhs"&&(t.textContent=n),s=R(o),e=y(o,"BUTTON",{class:!0,"data-svelte-h":!0}),N(e)!=="svelte-1co4n23"&&(e.textContent=i),this.h()},h:function(){m(t,"class","status-indicator error svelte-ztuqv4"),_(t,g,445,14,13249),m(e,"class","retry-button svelte-ztuqv4"),_(e,g,446,14,13325)},m:function(o,a){C(o,t,a),C(o,s,a),C(o,e,a),l||(r=ft(e,"click",c[11],!1),l=!0)},p:nt,d:function(o){o&&(v(t),v(s),v(e)),l=!1,r()}};return M("SvelteRegisterBlock",{block:u,id:Nt.name,type:"if",source:"(445:48) ",ctx:c}),u}function Tt(c){let t,n="‚ùå „Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„Çπ„ÅåÊãíÂê¶„Åï„Çå„Åæ„Åó„Åü",s,e,i="„Éû„Ç§„ÇØË®±ÂèØ„ÇíÂÜçË©¶Ë°å",l,r;const u={c:function(){t=p("div"),t.textContent=n,s=F(),e=p("button"),e.textContent=i,this.h()},l:function(o){t=y(o,"DIV",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-4rewx4"&&(t.textContent=n),s=R(o),e=y(o,"BUTTON",{class:!0,"data-svelte-h":!0}),N(e)!=="svelte-1co4n23"&&(e.textContent=i),this.h()},h:function(){m(t,"class","status-indicator error svelte-ztuqv4"),_(t,g,440,14,13003),m(e,"class","retry-button svelte-ztuqv4"),_(e,g,441,14,13077)},m:function(o,a){C(o,t,a),C(o,s,a),C(o,e,a),l||(r=ft(e,"click",c[11],!1),l=!0)},p:nt,d:function(o){o&&(v(t),v(s),v(e)),l=!1,r()}};return M("SvelteRegisterBlock",{block:u,id:Tt.name,type:"if",source:"(440:49) ",ctx:c}),u}function Lt(c){let t,n="‚úÖ „Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„ÇπË®±ÂèØÊ∏à„Åø",s,e;function i(f,o){if(!f[6]&&!f[8])return Ut;if(!f[6]&&f[8])return Ot;if(f[6])return jt}let l=i(c),r=l&&l(c);const u={c:function(){t=p("div"),t.textContent=n,s=F(),r&&r.c(),e=vt(),this.h()},l:function(o){t=y(o,"DIV",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-96x1w2"&&(t.textContent=n),s=R(o),r&&r.l(o),e=vt(),this.h()},h:function(){m(t,"class","status-indicator granted svelte-ztuqv4"),_(t,g,425,14,12197)},m:function(o,a){C(o,t,a),C(o,s,a),r&&r.m(o,a),C(o,e,a)},p:function(o,a){l===(l=i(o))&&r?r.p(o,a):(r&&r.d(1),r=l&&l(o),r&&(r.c(),r.m(e.parentNode,e)))},d:function(o){o&&(v(t),v(s),v(e)),r&&r.d(o)}};return M("SvelteRegisterBlock",{block:u,id:Lt.name,type:"if",source:"(425:50) ",ctx:c}),u}function Ht(c){let t,n="‚è≥ „Éû„Ç§„ÇØË®±ÂèØ„ÇíÁ¢∫Ë™ç‰∏≠...";const s={c:function(){t=p("div"),t.textContent=n,this.h()},l:function(i){t=y(i,"DIV",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-qiomfc"&&(t.textContent=n),this.h()},h:function(){m(t,"class","status-indicator pending svelte-ztuqv4"),_(t,g,423,14,12073)},m:function(i,l){C(i,t,l)},p:nt,d:function(i){i&&v(t)}};return M("SvelteRegisterBlock",{block:s,id:Ht.name,type:"if",source:"(423:12) {#if micPermission === 'pending'}",ctx:c}),s}function jt(c){let t,n="üé§ „É™„Ç¢„É´„Çø„Ç§„É†Ëß£Êûê‰∏≠";const s={c:function(){t=p("div"),t.textContent=n,this.h()},l:function(i){t=y(i,"DIV",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-bm11qy"&&(t.textContent=n),this.h()},h:function(){m(t,"class","status-indicator success svelte-ztuqv4"),_(t,g,437,16,12862)},m:function(i,l){C(i,t,l)},p:nt,d:function(i){i&&v(t)}};return M("SvelteRegisterBlock",{block:s,id:jt.name,type:"if",source:"(437:36) ",ctx:c}),s}function Ot(c){let t,n="‚ö†Ô∏è Èü≥Â£∞„Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà„Åå„Éñ„É≠„ÉÉ„ÇØ„Åï„Çå„Å¶„ÅÑ„Åæ„Åô",s,e,i="Èü≥Â£∞Ê©üËÉΩ„ÇíÂÜçË©¶Ë°å",l,r;const u={c:function(){t=p("div"),t.textContent=n,s=F(),e=p("button"),e.textContent=i,this.h()},l:function(o){t=y(o,"DIV",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-rn7aam"&&(t.textContent=n),s=R(o),e=y(o,"BUTTON",{class:!0,"data-svelte-h":!0}),N(e)!=="svelte-hrmonq"&&(e.textContent=i),this.h()},h:function(){m(t,"class","status-indicator warning svelte-ztuqv4"),_(t,g,432,16,12606),m(e,"class","retry-button svelte-ztuqv4"),_(e,g,433,16,12689)},m:function(o,a){C(o,t,a),C(o,s,a),C(o,e,a),l||(r=ft(e,"click",c[12],!1),l=!0)},p:nt,d:function(o){o&&(v(t),v(s),v(e)),l=!1,r()}};return M("SvelteRegisterBlock",{block:u,id:Ot.name,type:"if",source:"(432:60) ",ctx:c}),u}function Ut(c){let t,n="üéµ Èü≥Â£∞Ê©üËÉΩ„ÇíÈñãÂßã„Åó„Å¶„Åè„Å†„Åï„ÅÑ",s,e,i="üé§ „Éû„Ç§„ÇØ„ÉÜ„Çπ„Éà„ÇíÈñãÂßã",l,r;const u={c:function(){t=p("div"),t.textContent=n,s=F(),e=p("button"),e.textContent=i,this.h()},l:function(o){t=y(o,"DIV",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-13wnluo"&&(t.textContent=n),s=R(o),e=y(o,"BUTTON",{class:!0,"data-svelte-h":!0}),N(e)!=="svelte-4juur8"&&(e.textContent=i),this.h()},h:function(){m(t,"class","status-indicator warning svelte-ztuqv4"),_(t,g,427,16,12328),m(e,"class","retry-button svelte-ztuqv4"),_(e,g,428,16,12405)},m:function(o,a){C(o,t,a),C(o,s,a),C(o,e,a),l||(r=ft(e,"click",c[12],!1),l=!0)},p:nt,d:function(o){o&&(v(t),v(s),v(e)),l=!1,r()}};return M("SvelteRegisterBlock",{block:u,id:Ut.name,type:"if",source:"(427:14) {#if !isListening && !audioContextBlocked}",ctx:c}),u}function pt(c){let t,n,s,e="Èü≥Èáè„É¨„Éô„É´",i,l,r,u,f,o,a,k="Èü≥Á®ãÊ§úÂá∫",S,b,x,W=c[4].toFixed(1)+"",V,D,w,L,B,U,T,H,G,I,A;l=new Rt({props:{volume:c[3],height:"16px",className:"volume-bar-wrapper"},$$inline:!0});let P=!c[1]&&kt(c),E=c[7]>0&&Ct(c);function et(J,q){return J[2]?J[7]<50?Wt:Gt:Jt}let d=et(c),j=d(c),O=c[1]&&!c[2]&&bt(c);const $={c:function(){t=p("div"),n=p("div"),s=p("h3"),s.textContent=e,i=F(),rt(l.$$.fragment),r=F(),u=p("div"),P&&P.c(),f=F(),o=p("div"),a=p("h3"),a.textContent=k,S=F(),b=p("div"),x=p("div"),V=Q(W),D=Q(" Hz"),w=F(),L=p("div"),B=Q(c[5]),U=F(),E&&E.c(),T=F(),H=p("div"),j.c(),G=F(),O&&O.c(),I=vt(),this.h()},l:function(q){t=y(q,"DIV",{class:!0});var Z=z(t);n=y(Z,"DIV",{class:!0});var tt=z(n);s=y(tt,"H3",{class:!0,"data-svelte-h":!0}),N(s)!=="svelte-1nc8gri"&&(s.textContent=e),i=R(tt),ct(l.$$.fragment,tt),r=R(tt),u=y(tt,"DIV",{class:!0});var Dt=z(u);P&&P.l(Dt),Dt.forEach(v),tt.forEach(v),f=R(Z),o=y(Z,"DIV",{class:!0});var ot=z(o);a=y(ot,"H3",{class:!0,"data-svelte-h":!0}),N(a)!=="svelte-1ofzoy2"&&(a.textContent=k),S=R(ot),b=y(ot,"DIV",{class:!0});var it=z(b);x=y(it,"DIV",{class:!0});var mt=z(x);V=Y(mt,W),D=Y(mt," Hz"),mt.forEach(v),w=R(it),L=y(it,"DIV",{class:!0});var Bt=z(L);B=Y(Bt,c[5]),Bt.forEach(v),U=R(it),E&&E.l(it),it.forEach(v),T=R(ot),H=y(ot,"DIV",{class:!0});var wt=z(H);j.l(wt),wt.forEach(v),ot.forEach(v),Z.forEach(v),G=R(q),O&&O.l(q),I=vt(),this.h()},h:function(){m(s,"class","display-title svelte-ztuqv4"),_(s,g,462,16,13907),m(u,"class","volume-status svelte-ztuqv4"),_(u,g,464,16,14058),m(n,"class","volume-section svelte-ztuqv4"),_(n,g,461,14,13862),m(a,"class","display-title svelte-ztuqv4"),_(a,g,473,16,14364),m(x,"class","frequency-value svelte-ztuqv4"),_(x,g,475,18,14466),m(L,"class","note-value svelte-ztuqv4"),_(L,g,476,18,14552),m(b,"class","frequency-display svelte-ztuqv4"),_(b,g,474,16,14416),m(H,"class","frequency-status svelte-ztuqv4"),_(H,g,489,16,15203),m(o,"class","frequency-section"),_(o,g,472,14,14316),m(t,"class","realtime-display svelte-ztuqv4"),_(t,g,459,12,13788)},m:function(q,Z){C(q,t,Z),h(t,n),h(n,s),h(n,i),st(l,n,null),h(n,r),h(n,u),P&&P.m(u,null),h(t,f),h(t,o),h(o,a),h(o,S),h(o,b),h(b,x),h(x,V),h(x,D),h(b,w),h(b,L),h(L,B),h(b,U),E&&E.m(b,null),h(o,T),h(o,H),j.m(H,null),C(q,G,Z),O&&O.m(q,Z),C(q,I,Z),A=!0},p:function(q,Z){const tt={};Z&8&&(tt.volume=q[3]),l.$set(tt),q[1]?P&&(P.d(1),P=null):P||(P=kt(q),P.c(),P.m(u,null)),(!A||Z&16)&&W!==(W=q[4].toFixed(1)+"")&&gt(V,W),(!A||Z&32)&&gt(B,q[5]),q[7]>0?E?E.p(q,Z):(E=Ct(q),E.c(),E.m(b,null)):E&&(E.d(1),E=null),d!==(d=et(q))&&(j.d(1),j=d(q),j&&(j.c(),j.m(H,null))),q[1]&&!q[2]?O||(O=bt(q),O.c(),O.m(I.parentNode,I)):O&&(O.d(1),O=null)},i:function(q){A||(K(l.$$.fragment,q),A=!0)},o:function(q){X(l.$$.fragment,q),A=!1},d:function(q){q&&(v(t),v(G),v(I)),lt(l),P&&P.d(),E&&E.d(),j.d(),O&&O.d(q)}};return M("SvelteRegisterBlock",{block:$,id:pt.name,type:"if",source:"(459:10) {#if micPermission === 'granted' && isListening}",ctx:c}),$}function kt(c){let t,n="‚è≥ Â£∞„ÇíÂá∫„Åó„Å¶Èü≥Èáè„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ";const s={c:function(){t=p("span"),t.textContent=n,this.h()},l:function(i){t=y(i,"SPAN",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-7eexnn"&&(t.textContent=n),this.h()},h:function(){m(t,"class","status-pending svelte-ztuqv4"),_(t,g,466,20,14146)},m:function(i,l){C(i,t,l)},d:function(i){i&&v(t)}};return M("SvelteRegisterBlock",{block:s,id:kt.name,type:"if",source:"(466:18) {#if !volumeDetected}",ctx:c}),s}function Ct(c){let t,n,s,e,i,l;const r={c:function(){t=p("div"),n=Q("‰ø°È†ºÂ∫¶: "),s=Q(c[7]),e=Q(`%
                      `),i=p("div"),l=p("div"),this.h()},l:function(f){t=y(f,"DIV",{class:!0});var o=z(t);n=Y(o,"‰ø°È†ºÂ∫¶: "),s=Y(o,c[7]),e=Y(o,`%
                      `),i=y(o,"DIV",{class:!0});var a=z(i);l=y(a,"DIV",{class:!0,style:!0}),z(l).forEach(v),a.forEach(v),o.forEach(v),this.h()},h:function(){m(l,"class","confidence-fill svelte-ztuqv4"),dt(l,"width",c[7]+"%"),dt(l,"background-color",c[7]>70?"#10b981":c[7]>40?"#f59e0b":"#ef4444"),_(l,g,481,24,14822),m(i,"class","confidence-bar svelte-ztuqv4"),_(i,g,480,22,14769),m(t,"class","confidence-display svelte-ztuqv4"),_(t,g,478,20,14664)},m:function(f,o){C(f,t,o),h(t,n),h(t,s),h(t,e),h(t,i),h(i,l)},p:function(f,o){o&128&&gt(s,f[7]),o&128&&dt(l,"width",f[7]+"%"),o&128&&dt(l,"background-color",f[7]>70?"#10b981":f[7]>40?"#f59e0b":"#ef4444")},d:function(f){f&&v(t)}};return M("SvelteRegisterBlock",{block:r,id:Ct.name,type:"if",source:"(478:18) {#if detectionConfidence > 0}",ctx:c}),r}function Gt(c){let t,n="‚úÖ Èü≥Á®ãÊ§úÂá∫‰∏≠";const s={c:function(){t=p("span"),t.textContent=n,this.h()},l:function(i){t=y(i,"SPAN",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-acahk5"&&(t.textContent=n),this.h()},h:function(){m(t,"class","status-success svelte-ztuqv4"),_(t,g,495,20,15528)},m:function(i,l){C(i,t,l)},d:function(i){i&&v(t)}};return M("SvelteRegisterBlock",{block:s,id:Gt.name,type:"else",source:"(495:18) {:else}",ctx:c}),s}function Wt(c){let t,n="‚ö†Ô∏è „Çà„ÇäÊòéÁ¢∫„Å´Áô∫Â£∞„Åó„Å¶„Åè„Å†„Åï„ÅÑ";const s={c:function(){t=p("span"),t.textContent=n,this.h()},l:function(i){t=y(i,"SPAN",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-lq2kpp"&&(t.textContent=n),this.h()},h:function(){m(t,"class","status-warning svelte-ztuqv4"),_(t,g,493,20,15429)},m:function(i,l){C(i,t,l)},d:function(i){i&&v(t)}};return M("SvelteRegisterBlock",{block:s,id:Wt.name,type:"if",source:"(493:53) ",ctx:c}),s}function Jt(c){let t,n="‚è≥ „Äå„Éâ„Äç„ÇíÁô∫Â£∞„Åó„Å¶Èü≥Á®ã„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ";const s={c:function(){t=p("span"),t.textContent=n,this.h()},l:function(i){t=y(i,"SPAN",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-lvftl7"&&(t.textContent=n),this.h()},h:function(){m(t,"class","status-pending svelte-ztuqv4"),_(t,g,491,20,15297)},m:function(i,l){C(i,t,l)},d:function(i){i&&v(t)}};return M("SvelteRegisterBlock",{block:s,id:Jt.name,type:"if",source:"(491:18) {#if !frequencyDetected}",ctx:c}),s}function bt(c){let t,n,s,e="„Äå„Éâ„Äç„ÇíÁô∫Â£∞„Åó„Å¶„Åè„Å†„Åï„ÅÑ",i,l,r="‰ªªÊÑè„ÅÆÈ´ò„Åï„Åß„Äå„Éâ„Éº„Äç„Å®Ê≠å„ÅÜ„Çà„ÅÜ„Å´Áô∫Â£∞„Åó„Å¶„Åè„Å†„Åï„ÅÑ";const u={c:function(){t=p("div"),n=p("div"),s=p("h3"),s.textContent=e,i=F(),l=p("p"),l.textContent=r,this.h()},l:function(o){t=y(o,"DIV",{class:!0});var a=z(t);n=y(a,"DIV",{class:!0});var k=z(n);s=y(k,"H3",{class:!0,"data-svelte-h":!0}),N(s)!=="svelte-xe90gt"&&(s.textContent=e),i=R(k),l=y(k,"P",{class:!0,"data-svelte-h":!0}),N(l)!=="svelte-1rtajtc"&&(l.textContent=r),k.forEach(v),a.forEach(v),this.h()},h:function(){m(s,"class","svelte-ztuqv4"),_(s,g,505,18,15844),m(l,"class","svelte-ztuqv4"),_(l,g,506,18,15884),m(n,"class","guidance-content svelte-ztuqv4"),_(n,g,504,16,15795),m(t,"class","guidance svelte-ztuqv4"),_(t,g,503,14,15756)},m:function(o,a){C(o,t,a),h(t,n),h(n,s),h(n,i),h(n,l)},d:function(o){o&&v(t)}};return M("SvelteRegisterBlock",{block:u,id:bt.name,type:"if",source:"(503:12) {#if volumeDetected && !frequencyDetected}",ctx:c}),u}function Zt(c){let t,n,s,e;function i(o,a){return o[0]==="pending"?Ht:o[0]==="granted"?Lt:o[0]==="denied"?Tt:o[0]==="error"?Nt:Ft}let l=i(c),r=l(c),u=c[0]==="granted"&&c[6]&&pt(c);const f={c:function(){t=p("div"),n=p("div"),r.c(),s=F(),u&&u.c(),this.h()},l:function(a){t=y(a,"DIV",{class:!0});var k=z(t);n=y(k,"DIV",{class:!0});var S=z(n);r.l(S),S.forEach(v),s=R(k),u&&u.l(k),k.forEach(v),this.h()},h:function(){m(n,"class","mic-status svelte-ztuqv4"),_(n,g,421,10,11988),m(t,"class","mic-test-content svelte-ztuqv4"),_(t,g,418,8,11909)},m:function(a,k){C(a,t,k),h(t,n),r.m(n,null),h(t,s),u&&u.m(t,null),e=!0},p:function(a,k){l===(l=i(a))&&r?r.p(a,k):(r.d(1),r=l(a),r&&(r.c(),r.m(n,null))),a[0]==="granted"&&a[6]?u?(u.p(a,k),k&65&&K(u,1)):(u=pt(a),u.c(),K(u,1),u.m(t,null)):u&&(At(),X(u,1,1,()=>{u=null}),Pt())},i:function(a){e||(K(u),e=!0)},o:function(a){X(u),e=!1},d:function(a){a&&v(t),r.d(),u&&u.d()}};return M("SvelteRegisterBlock",{block:f,id:Zt.name,type:"slot",source:'(418:6) <Card variant=\\"default\\" padding=\\"lg\\">',ctx:c}),f}function Kt(c){let t,n;t=new zt({props:{variant:"disabled",size:"lg",fullWidth:!0,disabled:!0,$$slots:{default:[Qt]},$$scope:{ctx:c}},$$inline:!0});const s={c:function(){rt(t.$$.fragment)},l:function(i){ct(t.$$.fragment,i)},m:function(i,l){st(t,i,l),n=!0},p:function(i,l){const r={};l&33554432&&(r.$$scope={dirty:l,ctx:i}),t.$set(r)},i:function(i){n||(K(t.$$.fragment,i),n=!0)},o:function(i){X(t.$$.fragment,i),n=!1},d:function(i){lt(t,i)}};return M("SvelteRegisterBlock",{block:s,id:Kt.name,type:"else",source:"(534:10) {:else}",ctx:c}),s}function Yt(c){let t,n;t=new zt({props:{href:c[10].path,variant:"primary",size:"lg",fullWidth:!0,$$slots:{default:[Xt]},$$scope:{ctx:c}},$$inline:!0});const s={c:function(){rt(t.$$.fragment)},l:function(i){ct(t.$$.fragment,i)},m:function(i,l){st(t,i,l),n=!0},p:function(i,l){const r={};l&33554432&&(r.$$scope={dirty:l,ctx:i}),t.$set(r)},i:function(i){n||(K(t.$$.fragment,i),n=!0)},o:function(i){X(t.$$.fragment,i),n=!1},d:function(i){lt(t,i)}};return M("SvelteRegisterBlock",{block:s,id:Yt.name,type:"if",source:"(525:10) {#if startButtonEnabled}",ctx:c}),s}function Qt(c){let t;const n={c:function(){t=Q("„Éû„Ç§„ÇØ„ÉÜ„Çπ„ÉàÂÆå‰∫ÜÂæå„Å´ÈñãÂßã")},l:function(e){t=Y(e,"„Éû„Ç§„ÇØ„ÉÜ„Çπ„ÉàÂÆå‰∫ÜÂæå„Å´ÈñãÂßã")},m:function(e,i){C(e,t,i)},d:function(e){e&&v(t)}};return M("SvelteRegisterBlock",{block:n,id:Qt.name,type:"slot",source:'(535:12) <Button                variant=\\"disabled\\"                size=\\"lg\\"                fullWidth                disabled             >',ctx:c}),n}function Xt(c){let t;const n={c:function(){t=Q("„Éà„É¨„Éº„Éã„É≥„Ç∞ÈñãÂßã")},l:function(e){t=Y(e,"„Éà„É¨„Éº„Éã„É≥„Ç∞ÈñãÂßã")},m:function(e,i){C(e,t,i)},d:function(e){e&&v(t)}};return M("SvelteRegisterBlock",{block:n,id:Xt.name,type:"slot",source:'(526:12) <Button                href={selectedMode.path}                variant=\\"primary\\"                size=\\"lg\\"                fullWidth             >',ctx:c}),n}function $t(c){let t,n,s=c[10].name+"",e,i,l,r=c[10].description+"",u,f,o,a,k;const S=[Yt,Kt],b=[];function x(V,D){return V[9]?0:1}o=x(c),a=b[o]=S[o](c);const W={c:function(){t=p("div"),n=p("h3"),e=Q(s),i=F(),l=p("p"),u=Q(r),f=F(),a.c(),this.h()},l:function(D){t=y(D,"DIV",{class:!0});var w=z(t);n=y(w,"H3",{class:!0});var L=z(n);e=Y(L,s),L.forEach(v),i=R(w),l=y(w,"P",{class:!0});var B=z(l);u=Y(B,r),B.forEach(v),f=R(w),a.l(w),w.forEach(v),this.h()},h:function(){m(n,"class","start-title svelte-ztuqv4"),_(n,g,519,10,16178),m(l,"class","start-description svelte-ztuqv4"),_(l,g,520,10,16237),m(t,"class","start-content svelte-ztuqv4"),_(t,g,518,8,16140)},m:function(D,w){C(D,t,w),h(t,n),h(n,e),h(t,i),h(t,l),h(l,u),h(t,f),b[o].m(t,null),k=!0},p:function(D,w){let L=o;o=x(D),o===L?b[o].p(D,w):(At(),X(b[L],1,1,()=>{b[L]=null}),Pt(),a=b[o],a?a.p(D,w):(a=b[o]=S[o](D),a.c()),K(a,1),a.m(t,null))},i:function(D){k||(K(a),k=!0)},o:function(D){X(a),k=!1},d:function(D){D&&v(t),b[o].d()}};return M("SvelteRegisterBlock",{block:W,id:$t.name,type:"slot",source:'(518:6) <Card variant=\\"default\\" padding=\\"lg\\">',ctx:c}),W}function te(c){let t,n,s,e,i,l,r,u,f,o,a,k,S="„Éû„Ç§„ÇØ„ÉÜ„Çπ„Éà",b,x,W="Èü≥ÊÑü„Éà„É¨„Éº„Éã„É≥„Ç∞„ÇíÂßã„ÇÅ„ÇãÂâç„Å´„ÄÅ„Éû„Ç§„ÇØ„ÅÆÂãï‰Ωú„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åô",V,D,w,L,B,U,T;w=new yt({props:{variant:"default",padding:"lg",$$slots:{default:[Zt]},$$scope:{ctx:c}},$$inline:!0}),U=new yt({props:{variant:"default",padding:"lg",$$slots:{default:[$t]},$$scope:{ctx:c}},$$inline:!0});const H={c:function(){t=p("div"),n=p("div"),s=p("div"),e=p("div"),i=ut("svg"),l=ut("path"),r=ut("path"),u=ut("line"),f=ut("line"),o=F(),a=p("div"),k=p("h1"),k.textContent=S,b=F(),x=p("p"),x.textContent=W,V=F(),D=p("div"),rt(w.$$.fragment),L=F(),B=p("div"),rt(U.$$.fragment),this.h()},l:function(I){t=y(I,"DIV",{class:!0});var A=z(t);n=y(A,"DIV",{class:!0});var P=z(n);s=y(P,"DIV",{class:!0});var E=z(s);e=y(E,"DIV",{class:!0});var et=z(e);i=at(et,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var d=z(i);l=at(d,"path",{d:!0}),z(l).forEach(v),r=at(d,"path",{d:!0}),z(r).forEach(v),u=at(d,"line",{x1:!0,x2:!0,y1:!0,y2:!0}),z(u).forEach(v),f=at(d,"line",{x1:!0,x2:!0,y1:!0,y2:!0}),z(f).forEach(v),d.forEach(v),et.forEach(v),o=R(E),a=y(E,"DIV",{});var j=z(a);k=y(j,"H1",{class:!0,"data-svelte-h":!0}),N(k)!=="svelte-z7m4lk"&&(k.textContent=S),b=R(j),x=y(j,"P",{class:!0,"data-svelte-h":!0}),N(x)!=="svelte-1vtv92f"&&(x.textContent=W),j.forEach(v),E.forEach(v),P.forEach(v),V=R(A),D=y(A,"DIV",{class:!0});var O=z(D);ct(w.$$.fragment,O),O.forEach(v),L=R(A),B=y(A,"DIV",{class:!0});var $=z(B);ct(U.$$.fragment,$),$.forEach(v),A.forEach(v),this.h()},h:function(){m(l,"d","M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"),_(l,g,402,12,11373),m(r,"d","M19 10v2a7 7 0 0 1-14 0v-2"),_(r,g,403,12,11450),m(u,"x1","12"),m(u,"x2","12"),m(u,"y1","19"),m(u,"y2","22"),_(u,g,404,12,11501),m(f,"x1","8"),m(f,"x2","16"),m(f,"y1","22"),m(f,"y2","22"),_(f,g,405,12,11553),m(i,"width","48"),m(i,"height","48"),m(i,"viewBox","0 0 24 24"),m(i,"fill","none"),m(i,"stroke","currentColor"),m(i,"stroke-width","2"),_(i,g,401,10,11261),m(e,"class","mic-icon svelte-ztuqv4"),_(e,g,400,8,11228),m(k,"class","mic-test-title svelte-ztuqv4"),_(k,g,409,10,11648),m(x,"class","mic-test-description svelte-ztuqv4"),_(x,g,410,10,11697),_(a,g,408,8,11632),m(s,"class","mic-test-header svelte-ztuqv4"),_(s,g,399,6,11190),m(n,"class","header svelte-ztuqv4"),_(n,g,398,4,11163),m(D,"class","test-section"),_(D,g,416,4,11830),m(B,"class","start-section"),_(B,g,516,4,16060),m(t,"class","microphone-test svelte-ztuqv4"),_(t,g,396,2,11111)},m:function(I,A){C(I,t,A),h(t,n),h(n,s),h(s,e),h(e,i),h(i,l),h(i,r),h(i,u),h(i,f),h(s,o),h(s,a),h(a,k),h(a,b),h(a,x),h(t,V),h(t,D),st(w,D,null),h(t,L),h(t,B),st(U,B,null),T=!0},p:function(I,A){const P={};A&33554943&&(P.$$scope={dirty:A,ctx:I}),w.$set(P);const E={};A&33554944&&(E.$$scope={dirty:A,ctx:I}),U.$set(E)},i:function(I){T||(K(w.$$.fragment,I),K(U.$$.fragment,I),T=!0)},o:function(I){X(w.$$.fragment,I),X(U.$$.fragment,I),T=!1},d:function(I){I&&v(t),lt(w),lt(U)}};return M("SvelteRegisterBlock",{block:H,id:te.name,type:"slot",source:"(396:0) <PageLayout showBackButton={true}>",ctx:c}),H}function qt(c){let t,n,s;n=new Mt({props:{showBackButton:!0,$$slots:{default:[te]},$$scope:{ctx:c}},$$inline:!0});const e={c:function(){t=F(),rt(n.$$.fragment),this.h()},l:function(l){re("svelte-8st1fo",document.head).forEach(v),t=R(l),ct(n.$$.fragment,l),this.h()},h:function(){document.title="„Éû„Ç§„ÇØ„ÉÜ„Çπ„Éà - Áõ∏ÂØæÈü≥ÊÑü„Éà„É¨„Éº„Éã„É≥„Ç∞"},m:function(l,r){C(l,t,r),st(n,l,r),s=!0},p:function(l,[r]){const u={};r&33555455&&(u.$$scope={dirty:r,ctx:l}),n.$set(u)},i:function(l){s||(K(n.$$.fragment,l),s=!0)},o:function(l){X(n.$$.fragment,l),s=!1},d:function(l){l&&v(t),lt(n,l)}};return M("SvelteRegisterBlock",{block:e,id:qt.name,type:"component",source:"",ctx:c}),e}const St=5;function xt(c){if(c<=0)return"C4Ôºà„Éâ4Ôºâ";const n=Math.round(12*Math.log2(c/440)),s=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],e=((n+9)%12+12)%12,i=Math.floor((n+9)/12)+4,l=s[e];return`${l}${i}Ôºà${{C:"„Éâ","C#":"„Éâ#",D:"„É¨","D#":"„É¨#",E:"„Éü",F:"„Éï„Ç°","F#":"„Éï„Ç°#",G:"„ÇΩ","G#":"„ÇΩ#",A:"„É©","A#":"„É©#",B:"„Ç∑"}[l]}${i}Ôºâ`}function Vt(c,t){let n=0;for(let o=0;o<c.length;o++)n+=c[o]*c[o];if(n=Math.sqrt(n/c.length),n<.01)return 0;const s=ee(c,t,70),e=Math.floor(t/800),i=Math.floor(t/70);let l=0,r=0,u=0;for(let o=e;o<=i;o++){let a=0,k=0;for(let S=0;S<s.length-o;S++)a+=s[S]*s[S+o],k+=s[S]*s[S];k>0&&(a=a/Math.sqrt(k),a>l?(u=l,l=a,r=o):a>u&&(u=a))}const f=l-u;if(l>.3&&f>.05&&r>0){const o=Math.min(1,l*f*2);return{frequency:t/r,confidence:o}}return{frequency:0,confidence:0}}function ee(c,t,n){const s=1/t,e=1/(n*2*Math.PI),i=e/(e+s),l=new Float32Array(c.length);l[0]=c[0];for(let r=1;r<c.length;r++)l[r]=i*(l[r-1]+c[r]-c[r-1]);return l}function It(c){if(c.length===0)return 0;if(c.length===1)return c[0];const t=[...c].sort((l,r)=>l-r),n=t[Math.floor(t.length/2)],s=c.filter(l=>Math.abs(l-n)/n<.1);if(s.length===0)return n;let e=0,i=0;for(let l=0;l<s.length;l++){const r=l+1;e+=s[l]*r,i+=r}return e/i}function de(c,t,n){let s,e;le(_t,"page"),se(c,_t,d=>n(20,e=d));let{$$slots:i={},$$scope:l}=t;ce("Page",i,[]);let r="random";ht(()=>{e.url.searchParams.has("mode")&&(r=e.url.searchParams.get("mode")||"random")});let u="pending",f=!1,o=!1,a=0,k=0,S="",b=!1,x=0,W=!1,V=[];const D={random:{name:"„É©„É≥„ÉÄ„É†Âü∫Èü≥„É¢„Éº„Éâ",description:"10Á®ÆÈ°û„ÅÆÂü∫Èü≥„Åã„Çâ„É©„É≥„ÉÄ„É†„Å´ÈÅ∏Êäû„Åó„Å¶„Éà„É¨„Éº„Éã„É≥„Ç∞",color:"green",path:"./training/random"},continuous:{name:"ÈÄ£Á∂ö„ÉÅ„É£„É¨„É≥„Ç∏„É¢„Éº„Éâ",description:"ÈÅ∏Êäû„Åó„ÅüÂõûÊï∞„Å†„ÅëÈÄ£Á∂ö„ÅßÂÆüË°å„Åó„ÄÅÁ∑èÂêàË©ï‰æ°„ÇíÁ¢∫Ë™ç",color:"orange",path:"./training/continuous"},chromatic:{name:"12Èü≥Èöé„É¢„Éº„Éâ",description:"„ÇØ„É≠„Éû„ÉÅ„ÉÉ„ÇØ„Çπ„Ç±„Éº„É´„ÅÆ‰∏äË°å„Éª‰∏ãË°å„ÅßÂÆåÂÖ®Âà∂Ë¶á",color:"purple",path:"./training/chromatic"}},w=D[r]||D.random;async function L(){console.log("„Éû„Ç§„ÇØË®±ÂèØ„É™„ÇØ„Ç®„Çπ„ÉàÈñãÂßã"),n(0,u="pending");try{const d=await navigator.mediaDevices.getUserMedia({audio:!0});console.log("„Éû„Ç§„ÇØË®±ÂèØÂèñÂæóÊàêÂäü"),n(0,u="granted"),d.getTracks().forEach(j=>j.stop()),console.log("„Éû„Ç§„ÇØË®±ÂèØÂÆå‰∫Ü - „É¶„Éº„Ç∂„Éº„ÇØ„É™„ÉÉ„ÇØ„ÅßAudioContextÈñãÂßã„ÇíÂæÖÊ©ü")}catch(d){console.error("„Éû„Ç§„ÇØË®±ÂèØ„Ç®„É©„Éº:",d),n(0,u="denied")}}let B=null,U=null,T=null,H=null,G=null;async function I(){if(console.log("startListening ÈñãÂßã, micPermission:",u),u!=="granted"){console.log("„Éû„Ç§„ÇØË®±ÂèØ„Åå„ÅÇ„Çä„Åæ„Åõ„Çì");return}if(!B){console.log("AudioContext„Åå‰ΩúÊàê„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì"),n(8,W=!0);return}try{console.log("AudioContext state:",B.state),console.log("„Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„ÇπÈñãÂßã..."),U=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}}),console.log("„Ç¢„Éä„É©„Ç§„Ç∂„ÉºË®≠ÂÆö‰∏≠..."),T=B.createAnalyser(),T.fftSize=2048,T.smoothingTimeConstant=.8,B.createMediaStreamSource(U).connect(T),console.log("„É°„Éá„Ç£„Ç¢„Çπ„Éà„É™„Éº„É†„ÇΩ„Éº„ÇπÊé•Á∂öÂÆå‰∫Ü");const j=T.frequencyBinCount;H=new Uint8Array(j),console.log("„Éá„Éº„ÇøÈÖçÂàóÊ∫ñÂÇôÂÆå‰∫Ü, bufferLength:",j),n(6,b=!0),console.log("„É™„Ç¢„É´„Çø„Ç§„É†Ëß£ÊûêÈñãÂßã"),A()}catch(d){console.error("„Éû„Ç§„ÇØ„Ç¢„ÇØ„Çª„Çπ„Ç®„É©„Éº:",d),n(0,u="error")}}function A(){if(!b||!T){console.log("Ëß£ÊûêÂÅúÊ≠¢: isListening=",b,"analyser=",!!T);return}window.firstAnalysisLogged||(console.log("ÂàùÂõûÈü≥Â£∞Ëß£ÊûêÂÆüË°å‰∏≠..."),window.firstAnalysisLogged=!0),T.getByteFrequencyData(H);let d=0;for(let J=0;J<H.length;J++)d+=H[J]*H[J];const j=Math.sqrt(d/H.length);n(3,a=Math.min(100,j/128*100)),a>20&&(f||console.log("Èü≥ÈáèÊ§úÂá∫ÊàêÂäü:",a),n(1,f=!0));const O=new Float32Array(T.fftSize);T.getFloatTimeDomainData(O);const $=Vt(O,B.sampleRate);if($.frequency>0){V.push($.frequency),V.length>St&&V.shift();const J=It(V);n(4,k=J),n(5,S=xt(k)),n(7,x=Math.round($.confidence*100)),k>80&&k<800&&(o||console.log("Âë®Ê≥¢Êï∞Ê§úÂá∫ÊàêÂäü:",k,"Hz",S),n(2,o=!0))}else V=[],n(4,k=0),n(5,S=""),n(7,x=0);G=requestAnimationFrame(A)}function P(){n(6,b=!1),G&&(cancelAnimationFrame(G),G=null),U&&(U.getTracks().forEach(d=>d.stop()),U=null),B&&B.state!=="closed"&&(B.close(),B=null),T=null,H=null}Et(()=>{P()});async function E(){if(console.log("„É¶„Éº„Ç∂„Éº„ÇØ„É™„ÉÉ„ÇØ„ÅßAudioContextÈñãÂßã..."),u!=="granted"){console.log("„Éû„Ç§„ÇØË®±ÂèØ„ÅåÂøÖË¶Å„Åß„Åô");return}try{B=new(window.AudioContext||window.webkitAudioContext),console.log("AudioContext‰ΩúÊàêÂÆå‰∫Ü, state:",B.state),n(8,W=!1),await I()}catch(d){console.error("AudioContextÈñãÂßãÂ§±Êïó:",d),n(8,W=!0)}}ht(()=>{console.log("„Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÂÆå‰∫Ü - „É¶„Éº„Ç∂„ÉºÊìç‰Ωú„ÇíÂæÖÊ©ü‰∏≠")});const et=[];return Object.keys(t).forEach(d=>{!~et.indexOf(d)&&d.slice(0,2)!=="$$"&&d!=="slot"&&fe.warn(`<Page> was created with unknown prop '${d}'`)}),c.$capture_state=()=>({onMount:ht,onDestroy:Et,page:_t,Card:yt,Button:zt,PageLayout:Mt,VolumeBar:Rt,PitchDisplay:ue,mode:r,micPermission:u,volumeDetected:f,frequencyDetected:o,currentVolume:a,currentFrequency:k,currentNote:S,isListening:b,detectionConfidence:x,audioContextBlocked:W,frequencyHistory:V,HISTORY_SIZE:St,trainingModes:D,selectedMode:w,frequencyToNote:xt,requestMicrophone:L,audioContext:B,mediaStream:U,analyser:T,dataArray:H,animationFrame:G,startListening:I,analyzeAudio:A,detectPitchWithAutocorrelation:Vt,applyHighPassFilter:ee,smoothFrequency:It,stopListening:P,startAudioContextManually:E,startButtonEnabled:s,$page:e}),c.$inject_state=d=>{"mode"in d&&(r=d.mode),"micPermission"in d&&n(0,u=d.micPermission),"volumeDetected"in d&&n(1,f=d.volumeDetected),"frequencyDetected"in d&&n(2,o=d.frequencyDetected),"currentVolume"in d&&n(3,a=d.currentVolume),"currentFrequency"in d&&n(4,k=d.currentFrequency),"currentNote"in d&&n(5,S=d.currentNote),"isListening"in d&&n(6,b=d.isListening),"detectionConfidence"in d&&n(7,x=d.detectionConfidence),"audioContextBlocked"in d&&n(8,W=d.audioContextBlocked),"frequencyHistory"in d&&(V=d.frequencyHistory),"audioContext"in d&&(B=d.audioContext),"mediaStream"in d&&(U=d.mediaStream),"analyser"in d&&(T=d.analyser),"dataArray"in d&&(H=d.dataArray),"animationFrame"in d&&(G=d.animationFrame),"startButtonEnabled"in d&&n(9,s=d.startButtonEnabled)},t&&"$$inject"in t&&c.$inject_state(t.$$inject),c.$$.update=()=>{c.$$.dirty&7&&n(9,s=u==="granted"&&f&&o)},[u,f,o,a,k,S,b,x,W,s,w,L,E]}class pe extends ne{constructor(t){super(t),oe(this,t,de,qt,ie,{}),M("SvelteRegisterComponent",{component:this,tagName:"Page",options:t,id:qt.name})}}export{pe as component};
