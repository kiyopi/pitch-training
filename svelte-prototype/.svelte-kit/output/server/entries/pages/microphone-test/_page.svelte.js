import { c as create_ssr_component, a as subscribe, v as validate_component } from "../../../chunks/ssr.js";
import { p as page } from "../../../chunks/stores.js";
import "@sveltejs/kit/internal";
import "../../../chunks/exports.js";
import { P as PageLayout, C as Card } from "../../../chunks/PageLayout.js";
import { P as PitchDetectionDisplay, a as PitchDetector_1 } from "../../../chunks/PitchDetectionDisplay.js";
const css = {
  code: ".microphone-test.svelte-1ctbylb{max-width:800px;margin:0 auto;display:flex;flex-direction:column;gap:var(--space-6)}.header.svelte-1ctbylb{text-align:center}.mic-test-header.svelte-1ctbylb{display:flex;align-items:center;justify-content:center;gap:var(--space-4);margin-bottom:var(--space-4)}.mic-icon.svelte-1ctbylb{width:64px;height:64px;border-radius:50%;background-color:#dbeafe;color:#2563eb;display:flex;align-items:center;justify-content:center;flex-shrink:0}.mic-test-title.svelte-1ctbylb{font-size:var(--text-2xl);font-weight:700;color:var(--color-gray-900);margin:0 0 var(--space-2) 0}.mic-test-description.svelte-1ctbylb{font-size:var(--text-base);color:var(--color-gray-600);margin:0}.training-mode-info.svelte-1ctbylb{margin-bottom:var(--space-6)}.training-mode-content.svelte-1ctbylb{text-align:center}.instructions-title.svelte-1ctbylb{font-size:var(--text-xl);font-weight:600;color:var(--color-gray-900);margin:var(--space-4) 0 var(--space-2) 0;text-align:center}.instructions-description.svelte-1ctbylb{font-size:var(--text-sm);color:var(--color-gray-600);margin:0;text-align:center}.status-text.svelte-1ctbylb{font-size:var(--text-lg);font-weight:600;color:var(--color-gray-900);margin:var(--space-6) 0;text-align:center}.ready-title.svelte-1ctbylb{font-size:var(--text-xl);font-weight:600;color:#2563eb;margin:var(--space-4) 0 var(--space-2) 0;text-align:center}.ready-description.svelte-1ctbylb{font-size:var(--text-sm);color:var(--color-gray-600);margin:0 0 var(--space-6) 0;text-align:center}.mic-test-button-area.svelte-1ctbylb,.training-start-button-area.svelte-1ctbylb{margin-top:var(--space-6);display:flex;justify-content:center}.mic-test-button.svelte-1ctbylb{max-width:300px;width:100%;padding:12px 16px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:background-color 0.2s ease-in-out;display:flex;align-items:center;justify-content:center;gap:8px}.mic-test-button.start.svelte-1ctbylb{background-color:#2563eb;color:white}.mic-test-button.start.svelte-1ctbylb:hover{background-color:#1d4ed8}.mic-test-button.retry.svelte-1ctbylb{background-color:#dc2626;color:white}.mic-test-button.retry.svelte-1ctbylb:hover{background-color:#b91c1c}.training-start-button.svelte-1ctbylb{max-width:300px;width:100%;padding:12px 16px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:background-color 0.2s ease-in-out;display:flex;align-items:center;justify-content:center;gap:8px;background-color:#059669;color:white}.training-start-button.enabled.svelte-1ctbylb:hover{background-color:#047857}.device-info.svelte-1ctbylb{text-align:center;margin-bottom:var(--space-4)}.device-label.svelte-1ctbylb{background-color:#dbeafe;color:#1e40af;padding:4px 12px;border-radius:16px;font-size:var(--text-sm);font-weight:500}.volume-controls.svelte-1ctbylb{background-color:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:var(--space-4);margin:var(--space-4) 0}.volume-control-section.svelte-1ctbylb{margin-bottom:var(--space-4)}.volume-control-section.svelte-1ctbylb:last-child{margin-bottom:0}.volume-label.svelte-1ctbylb{display:block;font-size:var(--text-sm);font-weight:600;color:#374151;margin-bottom:var(--space-2);text-align:center}.volume-slider-container.svelte-1ctbylb{display:flex;align-items:center;gap:var(--space-2);margin-bottom:var(--space-3)}.slider-min.svelte-1ctbylb,.slider-max.svelte-1ctbylb{font-size:var(--text-xs);color:#6b7280;min-width:32px;text-align:center}.volume-slider.svelte-1ctbylb{flex:1;-webkit-appearance:none;appearance:none;height:6px;background:#e5e7eb;border-radius:3px;outline:none}.volume-slider.svelte-1ctbylb::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:20px;height:20px;background:#3b82f6;border-radius:50%;cursor:pointer;box-shadow:0 2px 4px rgba(0,0,0,0.2)}.volume-slider.svelte-1ctbylb::-moz-range-thumb{width:20px;height:20px;background:#3b82f6;border-radius:50%;cursor:pointer;border:none;box-shadow:0 2px 4px rgba(0,0,0,0.2)}.base-tone-test-button.svelte-1ctbylb{width:100%;padding:var(--space-2) var(--space-4);background-color:#059669;color:white;border:none;border-radius:6px;font-size:var(--text-sm);font-weight:500;cursor:pointer;transition:background-color 0.2s}.base-tone-test-button.svelte-1ctbylb:hover:not(:disabled){background-color:#047857}.base-tone-test-button.svelte-1ctbylb:disabled{background-color:#9ca3af;cursor:not-allowed}.ready-title.svelte-1ctbylb{color:#059669;font-size:var(--text-lg);font-weight:600;text-align:center;margin-bottom:var(--space-2)}.ready-description.svelte-1ctbylb{color:#6b7280;text-align:center;margin-bottom:var(--space-4)}@media(min-width: 768px){.mic-test-header.svelte-1ctbylb{flex-direction:row;text-align:left}}.main-card{border:1px solid hsl(214.3 31.8% 91.4%) !important;background:hsl(0 0% 100%) !important;border-radius:8px !important;box-shadow:0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px 0 rgb(0 0 0 / 0.06) !important;margin-bottom:1.5rem}",
  map: `{"version":3,"file":"+page.svelte","sources":["+page.svelte"],"sourcesContent":["<script>\\n  import { onMount } from 'svelte';\\n  import { page } from '$app/stores';\\n  import { goto } from '$app/navigation';\\n  import { base } from '$app/paths';\\n  import Card from '$lib/components/Card.svelte';\\n  import Button from '$lib/components/Button.svelte';\\n  import PageLayout from '$lib/components/PageLayout.svelte';\\n  import PitchDetector from '$lib/components/PitchDetector.svelte';\\n  import PitchDetectionDisplay from '$lib/components/PitchDetectionDisplay.svelte';\\n  import VolumeBar from '$lib/components/VolumeBar.svelte';\\n  import { audioManager } from '$lib/audio/AudioManager.js';\\n  \\n  // URL „Éë„É©„É°„Éº„Çø„Åã„Çâ mode „ÇíÂèñÂæó\\n  let mode = 'random';\\n  \\n  onMount(() => {\\n    if ($page.url.searchParams.has('mode')) {\\n      mode = $page.url.searchParams.get('mode') || 'random';\\n    }\\n  });\\n\\n  // „Éû„Ç§„ÇØ„ÉÜ„Çπ„ÉàÁä∂ÊÖãÁÆ°ÁêÜÔºà„Ç∑„É≥„Éó„É´ÁâàÔºâ\\n  let micPermission = 'initial'; // 'initial' | 'pending' | 'granted' | 'denied'\\n\\n  // Èü≥Á®ãÊ§úÂá∫\\n  let currentVolume = 0;\\n  let currentFrequency = 0;\\n  let detectedNote = '„Éº„Éº';\\n  let pitchDetectorComponent = null;\\n\\n  // Èü≥ÈáèË™øÊï¥Ê©üËÉΩ\\n  let baseToneVolume = 0; // -20dB ÔΩû +10dB\\n  let micSensitivity = 1.0; // 0.1x ÔΩû 3.0x\\n  let sampler = null;\\n  let isBaseTonePlaying = false;\\n\\n  // „Éá„Éê„Ç§„ÇπÊ§úÂá∫ÔºàË™øÊüªÁî®Ôºâ\\n  let deviceInfo = '';\\n  onMount(() => {\\n    const isIPhone = /iPhone/.test(navigator.userAgent);\\n    const isIPad = /iPad/.test(navigator.userAgent);\\n    const isIOS = isIPhone || isIPad;\\n    \\n    if (isIPad) {\\n      deviceInfo = 'iPadÊ§úÂá∫';\\n      baseToneVolume = -6; // Ê®ôÊ∫ñ„Éá„Éï„Ç©„É´„Éà\\n    } else if (isIPhone) {\\n      deviceInfo = 'iPhoneÊ§úÂá∫';\\n      baseToneVolume = -6; // Ê®ôÊ∫ñ„Éá„Éï„Ç©„É´„Éà\\n    } else {\\n      deviceInfo = '„Åù„ÅÆ‰ªñ„Éá„Éê„Ç§„Çπ';\\n      baseToneVolume = -6; // Ê®ôÊ∫ñ„Éá„Éï„Ç©„É´„Éà\\n    }\\n    \\n    console.log(\`üîç [MicTest] „Éá„Éê„Ç§„ÇπÊÉÖÂ†±: \${deviceInfo}\`, navigator.userAgent);\\n  });\\n\\n  // „Éà„É¨„Éº„Éã„É≥„Ç∞„É¢„Éº„ÉâË®≠ÂÆö\\n  const trainingModes = {\\n    random: {\\n      name: '„É©„É≥„ÉÄ„É†Âü∫Èü≥„É¢„Éº„Éâ',\\n      description: '10Á®ÆÈ°û„ÅÆÂü∫Èü≥„Åã„Çâ„É©„É≥„ÉÄ„É†„Å´ÈÅ∏Êäû„Åó„Å¶„Éà„É¨„Éº„Éã„É≥„Ç∞',\\n      color: 'green',\\n      path: '/training/random'\\n    },\\n    continuous: {\\n      name: 'ÈÄ£Á∂ö„ÉÅ„É£„É¨„É≥„Ç∏„É¢„Éº„Éâ',\\n      description: 'ÈÅ∏Êäû„Åó„ÅüÂõûÊï∞„Å†„ÅëÈÄ£Á∂ö„ÅßÂÆüË°å„Åó„ÄÅÁ∑èÂêàË©ï‰æ°„ÇíÁ¢∫Ë™ç',\\n      color: 'orange',\\n      path: '/training/continuous'\\n    },\\n    chromatic: {\\n      name: '12Èü≥Èöé„É¢„Éº„Éâ',\\n      description: '„ÇØ„É≠„Éû„ÉÅ„ÉÉ„ÇØ„Çπ„Ç±„Éº„É´„ÅÆ‰∏äË°å„Éª‰∏ãË°å„ÅßÂÆåÂÖ®Âà∂Ë¶á',\\n      color: 'purple',\\n      path: '/training/chromatic'\\n    }\\n  };\\n\\n  const selectedMode = trainingModes[mode] || trainingModes.random;\\n  \\n  // „Éû„Ç§„ÇØË®±ÂèØÁ¢∫Ë™çÔºà„Ç∑„É≥„Éó„É´Áâà - „É©„É≥„ÉÄ„É†Âü∫Èü≥„Éö„Éº„Ç∏„Åã„ÇâÁßªÊ§çÔºâ\\n  async function requestMicrophone() {\\n    micPermission = 'pending';\\n    \\n    try {\\n      console.log('üé§ [MicTest] „Éû„Ç§„ÇØË®±ÂèØ„É™„ÇØ„Ç®„Çπ„ÉàÈñãÂßã');\\n      \\n      if (!navigator.mediaDevices?.getUserMedia) {\\n        micPermission = 'denied';\\n        console.error('‚ùå [MicTest] getUserMedia„Åå„Çµ„Éù„Éº„Éà„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì');\\n        return;\\n      }\\n      \\n      // AudioManager„Åã„ÇâÂÖ±Êúâ„É™„ÇΩ„Éº„Çπ„ÇíÂèñÂæóÔºàÂàùÂõû„ÅÆ„Åø„Éû„Ç§„ÇØË®±ÂèØ„ÉÄ„Ç§„Ç¢„É≠„Ç∞Ë°®Á§∫Ôºâ\\n      const resources = await audioManager.initialize();\\n      console.log('‚úÖ [MicTest] AudioManager „É™„ÇΩ„Éº„ÇπÂèñÂæóÂÆå‰∫Ü');\\n      \\n      // „Éû„Ç§„ÇØË®±ÂèØ„ÅåÂèñÂæó„Åß„Åç„Åü„Åì„Å®„ÇíÁ¢∫Ë™ç\\n      if (resources.mediaStream && resources.audioContext) {\\n        micPermission = 'granted';\\n        console.log('‚úÖ [MicTest] „Éû„Ç§„ÇØË®±ÂèØÂÆå‰∫Ü');\\n        \\n        // AudioContextÁä∂ÊÖãÁ¢∫Ë™ç„ÉªÂÜçÈñãÔºà„Éû„Ç§„ÇØ„ÉªÂü∫Èü≥‰∏°Êñπ„Å´ÂøÖË¶ÅÔºâ\\n        await ensureAudioContextRunning();\\n        \\n        // Âü∫Èü≥„ÉÜ„Çπ„ÉàÂàùÊúüÂåñ\\n        await onMicrophoneGranted();\\n        \\n        // PitchDetectorÂàùÊúüÂåñÔºà„Éû„Ç§„ÇØË®±ÂèØÂæåÔºâ\\n        // SafariÂØæÂøú: „Çà„ÇäÈï∑„ÅÑÂæÖÊ©üÊôÇÈñì„ÅßMediaStreamÂÆâÂÆöÂåñ\\n        setTimeout(async () => {\\n          if (pitchDetectorComponent) {\\n            console.log('üéôÔ∏è [MicTest] PitchDetectorÂàùÊúüÂåñÈñãÂßã');\\n            \\n            // PitchDetectorÂàùÊúüÂåñÂâç„Å´„ÇÇAudioContextÂÜçÈñãÁ¢∫Ë™ç\\n            await ensureAudioContextRunning();\\n            \\n            await pitchDetectorComponent.initialize();\\n            console.log('‚úÖ [MicTest] PitchDetectorÂàùÊúüÂåñÂÆå‰∫Ü');\\n            \\n            // „É™„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„Å™isActive„ÅßËá™ÂãïÊ§úÂá∫ÈñãÂßã„Åï„Çå„Çã„Åü„ÇÅÊâãÂãïÂëº„Å≥Âá∫„Åó‰∏çË¶Å\\n            console.log('üéØ [MicTest] PitchDetector isActive„É™„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„ÅßËá™ÂãïÊ§úÂá∫ÈñãÂßã');\\n          }\\n        }, 1000);\\n      } else {\\n        throw new Error('„É™„ÇΩ„Éº„ÇπÂèñÂæóÂ§±Êïó');\\n      }\\n      \\n    } catch (error) {\\n      console.error('‚ùå [MicTest] „Éû„Ç§„ÇØË®±ÂèØ„Ç®„É©„Éº:', error);\\n      micPermission = (error?.name === 'NotAllowedError') ? 'denied' : 'denied';\\n    }\\n  }\\n  \\n  // „Éà„É¨„Éº„Éã„É≥„Ç∞ÈñãÂßãÈñ¢Êï∞\\n  function startTraining() {\\n    console.log('üöÄ [MicTest] „Éà„É¨„Éº„Éã„É≥„Ç∞ÈñãÂßã - „É©„É≥„ÉÄ„É†Âü∫Èü≥„É¢„Éº„Éâ„Å∏ÈÅ∑Áßª');\\n    // „Éû„Ç§„ÇØ„ÉÜ„Çπ„ÉàÂÆå‰∫Ü„Éï„É©„Ç∞„Çí‰øùÂ≠ò\\n    localStorage.setItem('mic-test-completed', 'true');\\n    console.log('‚úÖ [MicTest] „Éû„Ç§„ÇØ„ÉÜ„Çπ„ÉàÂÆå‰∫Ü„Éï„É©„Ç∞„Çí‰øùÂ≠ò');\\n    goto(\`\${base}\${selectedMode.path}?from=microphone-test\`);\\n  }\\n\\n  // PitchDetector„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„Åã„Çâ„ÅÆ„Ç§„Éô„É≥„Éà„Éè„É≥„Éâ„É©„Éº\\n  function handlePitchUpdate(event) {\\n    const { frequency, note, volume, rawVolume, clarity } = event.detail;\\n    \\n    currentFrequency = frequency;\\n    detectedNote = note;\\n    currentVolume = volume;\\n  }\\n  \\n  function handlePitchDetectorStateChange(event) {\\n    // „É≠„Ç∞ÂâäÈô§Ôºà„Ç∑„É≥„Éó„É´ÁâàÔºâ\\n  }\\n  \\n  function handlePitchDetectorError(event) {\\n    console.error('‚ùå [MicTest] PitchDetector„Ç®„É©„Éº:', event.detail);\\n    \\n    const { error, reason, recovery } = event.detail;\\n    \\n    // MediaStreamÁµÇ‰∫Ü„Ç®„É©„Éº„ÅÆÂ†¥Âêà„ÅØËá™ÂãïÂæ©Êóß„ÇíË©¶Ë°å\\n    if (reason === 'mediastream_ended' && recovery === 'restart_required') {\\n      console.log('üîÑ [MicTest] MediaStreamÁµÇ‰∫ÜÊ§úÂá∫ - Ëá™ÂãïÂæ©ÊóßÈñãÂßã');\\n      \\n      // „Éû„Ç§„ÇØË®±ÂèØÁä∂ÊÖã„Çí„É™„Çª„ÉÉ„Éà\\n      micPermission = 'initial';\\n      \\n      // Ê§úÂá∫„Éá„Éº„Çø„Çí„É™„Çª„ÉÉ„Éà\\n      currentVolume = 0;\\n      currentFrequency = 0;\\n      detectedNote = '„Éº„Éº';\\n      \\n      // „É¶„Éº„Ç∂„Éº„Å´ÂÜçË®±ÂèØ„Çí‰øÉ„Åô„É°„ÉÉ„Çª„Éº„Ç∏ÔºàËá™ÂãïÁöÑ„Å´Ë°®Á§∫„Åï„Çå„ÇãÔºâ\\n      console.log('‚ö†Ô∏è [MicTest] „Éû„Ç§„ÇØÂÜçË®±ÂèØ„ÅåÂøÖË¶Å„Åß„Åô');\\n    }\\n  }\\n\\n  // Âü∫Èü≥„ÉÜ„Çπ„ÉàÊ©üËÉΩ\\n  async function initializeBaseToneTest() {\\n    try {\\n      console.log('üéπ [MicTest] Âü∫Èü≥„ÉÜ„Çπ„ÉàÂàùÊúüÂåñÈñãÂßã');\\n      \\n      // Tone.jsÂãïÁöÑË™≠„ÅøËæº„Åø\\n      if (typeof window !== 'undefined') {\\n        if (!window.Tone) {\\n          console.log('üì¶ [MicTest] Tone.jsÂãïÁöÑË™≠„ÅøËæº„ÅøÈñãÂßã');\\n          const script = document.createElement('script');\\n          script.src = 'https://unpkg.com/tone@latest/build/Tone.js';\\n          document.head.appendChild(script);\\n          \\n          // Tone.jsË™≠„ÅøËæº„ÅøÂÆå‰∫Ü„ÇíÂæÖÊ©ü\\n          await new Promise((resolve, reject) => {\\n            script.onload = resolve;\\n            script.onerror = reject;\\n          });\\n          console.log('‚úÖ [MicTest] Tone.jsË™≠„ÅøËæº„ÅøÂÆå‰∫Ü');\\n        }\\n        \\n        await window.Tone.start();\\n        \\n        // Salamander Grand Piano „Çµ„É≥„Éó„É©„Éº\\n        sampler = new window.Tone.Sampler({\\n          urls: { \\"C4\\": \\"C4.mp3\\" },\\n          baseUrl: \\"https://tonejs.github.io/audio/salamander/\\",\\n          release: 1.5,\\n          onload: () => {\\n            console.log('‚úÖ [MicTest] Âü∫Èü≥„Çµ„É≥„Éó„É©„ÉºË™≠„ÅøËæº„ÅøÂÆå‰∫Ü');\\n          },\\n          onerror: (error) => {\\n            console.error('‚ùå [MicTest] Âü∫Èü≥„Çµ„É≥„Éó„É©„ÉºË™≠„ÅøËæº„Åø„Ç®„É©„Éº:', error);\\n          }\\n        }).toDestination();\\n        \\n        // ÂàùÊúüÈü≥ÈáèË®≠ÂÆö\\n        updateBaseToneVolume();\\n        \\n      } else {\\n        console.warn('‚ö†Ô∏è [MicTest] windowÊú™ÂÆöÁæ© - Âü∫Èü≥„ÉÜ„Çπ„ÉàÁÑ°Âäπ');\\n      }\\n    } catch (error) {\\n      console.error('‚ùå [MicTest] Âü∫Èü≥„ÉÜ„Çπ„ÉàÂàùÊúüÂåñ„Ç®„É©„Éº:', error);\\n    }\\n  }\\n\\n  // Âü∫Èü≥Èü≥ÈáèÊõ¥Êñ∞\\n  function updateBaseToneVolume() {\\n    if (sampler) {\\n      sampler.volume.value = baseToneVolume;\\n      console.log(\`üîä [MicTest] Âü∫Èü≥Èü≥ÈáèË®≠ÂÆö: \${baseToneVolume}dB\`);\\n    }\\n  }\\n\\n  // AudioContextÁä∂ÊÖãÁ¢∫Ë™ç„ÉªÂÜçÈñãÂá¶ÁêÜ\\n  async function ensureAudioContextRunning() {\\n    if (typeof window !== 'undefined' && window.Tone) {\\n      const context = window.Tone.context || window.Tone.getContext();\\n      if (context && context.state === 'suspended') {\\n        console.log('üîÑ [MicTest] AudioContext suspendedÊ§úÂá∫ - ÂÜçÈñã‰∏≠...');\\n        await context.resume();\\n        console.log('‚úÖ [MicTest] AudioContextÂÜçÈñãÂÆå‰∫Ü');\\n        return true; // ÂÜçÈñãÂÆüË°å\\n      }\\n    }\\n    return false; // ÂÜçÈñã‰∏çË¶Å\\n  }\\n\\n  // Âü∫Èü≥ÂÜçÁîü„ÉÜ„Çπ„Éà\\n  async function playBaseTone() {\\n    if (!sampler || isBaseTonePlaying) return;\\n    \\n    try {\\n      isBaseTonePlaying = true;\\n      console.log('üéµ [MicTest] Âü∫Èü≥ÂÜçÁîüÈñãÂßã: C4');\\n      \\n      // AudioContextÁä∂ÊÖãÁ¢∫Ë™ç„ÉªÂÜçÈñã\\n      const wasResumed = await ensureAudioContextRunning();\\n      if (wasResumed) {\\n        console.log('üîä [MicTest] AudioContextÂÜçÈñãÂæå„Å´Âü∫Èü≥ÂÜçÁîüÂÆüË°å');\\n      }\\n      \\n      await sampler.triggerAttackRelease('C4', 2, window.Tone.now(), 0.7);\\n      \\n      // 2ÁßíÂæå„Å´ÂÜçÁîüÁä∂ÊÖã„Çí„É™„Çª„ÉÉ„Éà\\n      setTimeout(() => {\\n        isBaseTonePlaying = false;\\n        console.log('‚úÖ [MicTest] Âü∫Èü≥ÂÜçÁîüÂÆå‰∫Ü');\\n      }, 2000);\\n      \\n    } catch (error) {\\n      console.error('‚ùå [MicTest] Âü∫Èü≥ÂÜçÁîü„Ç®„É©„Éº:', error);\\n      isBaseTonePlaying = false;\\n    }\\n  }\\n\\n  // „Éû„Ç§„ÇØÊÑüÂ∫¶Ë™øÊï¥\\n  function updateMicSensitivity() {\\n    // AudioManager„ÅÆÊÑüÂ∫¶Ë™øÊï¥Ôºà‰ªäÂæåÂÆüË£ÖÔºâ\\n    console.log(\`üé§ [MicTest] „Éû„Ç§„ÇØÊÑüÂ∫¶Ë®≠ÂÆö: \${micSensitivity}x\`);\\n  }\\n\\n  // „Éû„Ç§„ÇØË®±ÂèØÂÆå‰∫ÜÊôÇ„ÅÆÂá¶ÁêÜ„ÇíÊã°Âºµ\\n  async function onMicrophoneGranted() {\\n    // Âü∫Èü≥„ÉÜ„Çπ„ÉàÂàùÊúüÂåñ\\n    await initializeBaseToneTest();\\n  }\\n<\/script>\\n\\n<svelte:head>\\n  <title>„Éû„Ç§„ÇØ„ÉÜ„Çπ„Éà - Áõ∏ÂØæÈü≥ÊÑü„Éà„É¨„Éº„Éã„É≥„Ç∞</title>\\n</svelte:head>\\n\\n<PageLayout showBackButton={true}>\\n  <div class=\\"microphone-test\\">\\n    <!-- „Éò„ÉÉ„ÉÄ„Éº -->\\n    <div class=\\"header\\">\\n      <div class=\\"mic-test-header\\">\\n        <div class=\\"mic-icon\\">\\n          <svg width=\\"48\\" height=\\"48\\" viewBox=\\"0 0 24 24\\" fill=\\"none\\" stroke=\\"currentColor\\" stroke-width=\\"2\\">\\n            <path d=\\"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z\\"/>\\n            <path d=\\"M19 10v2a7 7 0 0 1-14 0v-2\\"/>\\n            <line x1=\\"12\\" x2=\\"12\\" y1=\\"19\\" y2=\\"22\\"/>\\n            <line x1=\\"8\\" x2=\\"16\\" y1=\\"22\\" y2=\\"22\\"/>\\n          </svg>\\n        </div>\\n        <div>\\n          <h1 class=\\"mic-test-title\\">„Éû„Ç§„ÇØ„ÉÜ„Çπ„Éà</h1>\\n          <p class=\\"mic-test-description\\">Èü≥ÊÑü„Éà„É¨„Éº„Éã„É≥„Ç∞„ÇíÂßã„ÇÅ„ÇãÂâç„Å´„ÄÅ„Éû„Ç§„ÇØ„ÅÆÂãï‰Ωú„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åô</p>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!-- „Éà„É¨„Éº„Éã„É≥„Ç∞„É¢„Éº„ÉâÊÉÖÂ†± -->\\n    <div class=\\"training-mode-info\\">\\n      <Card variant=\\"default\\" padding=\\"lg\\">\\n        <div class=\\"training-mode-content\\">\\n          {#if micPermission === 'granted'}\\n            <!-- „Éû„Ç§„ÇØË®±ÂèØÂÆå‰∫Ü - Èü≥ÈáèË™øÊï¥„Ç®„É™„Ç¢ -->\\n            <h3 class=\\"ready-title\\">„Éû„Ç§„ÇØÊ∫ñÂÇôÂÆå‰∫Ü</h3>\\n            <p class=\\"ready-description\\">Èü≥Èáè„ÇíË™øÊï¥„Åó„Å¶„Åã„Çâ„Éà„É¨„Éº„Éã„É≥„Ç∞„ÇíÈñãÂßã„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p>\\n            \\n            <!-- „Éá„Éê„Ç§„ÇπÊÉÖÂ†±Ë°®Á§∫ÔºàË™øÊüªÁî®Ôºâ -->\\n            <div class=\\"device-info\\">\\n              <span class=\\"device-label\\">{deviceInfo}</span>\\n            </div>\\n            \\n            <!-- Èü≥ÈáèË™øÊï¥„Ç≥„É≥„Éà„É≠„Éº„É´ -->\\n            <div class=\\"volume-controls\\">\\n              <!-- Âü∫Èü≥Èü≥ÈáèË™øÊï¥ -->\\n              <div class=\\"volume-control-section\\">\\n                <label class=\\"volume-label\\">\\n                  Âü∫Èü≥Èü≥Èáè: {baseToneVolume}dB\\n                </label>\\n                <div class=\\"volume-slider-container\\">\\n                  <span class=\\"slider-min\\">-20dB</span>\\n                  <input \\n                    type=\\"range\\" \\n                    min=\\"-20\\" \\n                    max=\\"10\\" \\n                    step=\\"1\\"\\n                    bind:value={baseToneVolume}\\n                    on:input={updateBaseToneVolume}\\n                    class=\\"volume-slider\\"\\n                  />\\n                  <span class=\\"slider-max\\">+10dB</span>\\n                </div>\\n                <button \\n                  class=\\"base-tone-test-button\\"\\n                  on:click={playBaseTone}\\n                  disabled={isBaseTonePlaying}\\n                >\\n                  {isBaseTonePlaying ? 'ÂÜçÁîü‰∏≠...' : '„Éâ(C4)„ÇíÂÜçÁîü'}\\n                </button>\\n              </div>\\n              \\n              <!-- „Éû„Ç§„ÇØÊÑüÂ∫¶Ë™øÊï¥ -->\\n              <div class=\\"volume-control-section\\">\\n                <label class=\\"volume-label\\">\\n                  „Éû„Ç§„ÇØÊÑüÂ∫¶: {micSensitivity.toFixed(1)}x\\n                </label>\\n                <div class=\\"volume-slider-container\\">\\n                  <span class=\\"slider-min\\">0.1x</span>\\n                  <input \\n                    type=\\"range\\" \\n                    min=\\"0.1\\" \\n                    max=\\"3.0\\" \\n                    step=\\"0.1\\"\\n                    bind:value={micSensitivity}\\n                    on:input={updateMicSensitivity}\\n                    class=\\"volume-slider\\"\\n                  />\\n                  <span class=\\"slider-max\\">3.0x</span>\\n                </div>\\n              </div>\\n            </div>\\n            \\n            <div class=\\"training-start-button-area\\">\\n              <button class=\\"training-start-button enabled\\" on:click={startTraining}>\\n                „Éà„É¨„Éº„Éã„É≥„Ç∞ÈñãÂßã\\n              </button>\\n            </div>\\n          {:else}\\n            <!-- „Éû„Ç§„ÇØ„ÉÜ„Çπ„ÉàË™¨Êòé -->\\n            <h3 class=\\"instructions-title\\">„Éû„Ç§„ÇØ„ÅÆ„ÉÜ„Çπ„Éà„ÇíÈñãÂßã„Åó„Åæ„Åô</h3>\\n            <p class=\\"instructions-description\\">„Éû„Ç§„ÇØ„ÉÜ„Çπ„ÉàÈñãÂßã„Éú„Çø„É≥„ÇíÊäº„Åó„Å¶„Éû„Ç§„ÇØ„ÅÆ‰ΩøÁî®„ÇíË®±ÂèØ„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p>\\n            \\n            {#if micPermission === 'pending'}\\n              <p class=\\"status-text\\">„Éû„Ç§„ÇØÊ∫ñÂÇô‰∏≠...</p>\\n            {:else if micPermission === 'denied'}\\n              <div class=\\"mic-test-button-area\\">\\n                <button class=\\"mic-test-button retry\\" on:click={requestMicrophone}>\\n                  „Éû„Ç§„ÇØË®±ÂèØ„ÇíÂÜçË©¶Ë°å\\n                </button>\\n              </div>\\n            {:else if micPermission === 'initial'}\\n              <div class=\\"mic-test-button-area\\">\\n                <button class=\\"mic-test-button start\\" on:click={requestMicrophone}>\\n                  „Éû„Ç§„ÇØ„ÉÜ„Çπ„Éà„ÇíÈñãÂßã\\n                </button>\\n              </div>\\n            {/if}\\n          {/if}\\n        </div>\\n      </Card>\\n    </div>\\n\\n    <!-- „É™„Ç¢„É´„Çø„Ç§„É†Èü≥Á®ãÊ§úÂá∫„Ç®„É™„Ç¢ÔºàÂ∏∏ÊôÇË°®Á§∫Ôºâ -->\\n    <PitchDetectionDisplay\\n      frequency={currentFrequency}\\n      note={detectedNote}\\n      volume={currentVolume}\\n      isMuted={micPermission !== 'granted'}\\n      muteMessage=\\"„Éû„Ç§„ÇØË®±ÂèØÂæå„Å´ÈñãÂßã\\"\\n    />\\n    \\n    <!-- PitchDetector„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÔºàÈùûË°®Á§∫„ÉªÊ§úÂá∫Âá¶ÁêÜ„ÅÆ„ÅøÔºâ -->\\n    <div style=\\"display: none;\\">\\n      <PitchDetector\\n        bind:this={pitchDetectorComponent}\\n        isActive={micPermission === 'granted'}\\n        on:pitchUpdate={handlePitchUpdate}\\n        on:stateChange={handlePitchDetectorStateChange}\\n        on:error={handlePitchDetectorError}\\n        className=\\"pitch-detector-content\\"\\n        debugMode={false}\\n      />\\n    </div>\\n\\n  </div>\\n</PageLayout>\\n\\n<style>\\n  .microphone-test {\\n    max-width: 800px;\\n    margin: 0 auto;\\n    display: flex;\\n    flex-direction: column;\\n    gap: var(--space-6);\\n  }\\n\\n  .header {\\n    text-align: center;\\n  }\\n\\n  .mic-test-header {\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    gap: var(--space-4);\\n    margin-bottom: var(--space-4);\\n  }\\n\\n  .mic-icon {\\n    width: 64px;\\n    height: 64px;\\n    border-radius: 50%;\\n    background-color: #dbeafe;\\n    color: #2563eb;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    flex-shrink: 0;\\n  }\\n\\n  .mic-test-title {\\n    font-size: var(--text-2xl);\\n    font-weight: 700;\\n    color: var(--color-gray-900);\\n    margin: 0 0 var(--space-2) 0;\\n  }\\n\\n  .mic-test-description {\\n    font-size: var(--text-base);\\n    color: var(--color-gray-600);\\n    margin: 0;\\n  }\\n\\n  .training-mode-info {\\n    margin-bottom: var(--space-6);\\n  }\\n\\n  .training-mode-content {\\n    text-align: center;\\n  }\\n\\n  .training-mode-title {\\n    font-size: var(--text-xl);\\n    font-weight: 600;\\n    color: var(--color-gray-900);\\n    margin: 0 0 var(--space-2) 0;\\n  }\\n\\n  .training-mode-description {\\n    font-size: var(--text-base);\\n    color: var(--color-gray-600);\\n    margin: 0;\\n  }\\n\\n  .mic-test-instructions {\\n    text-align: center;\\n    margin-bottom: var(--space-6);\\n  }\\n\\n  .instructions-title {\\n    font-size: var(--text-xl);\\n    font-weight: 600;\\n    color: var(--color-gray-900);\\n    margin: var(--space-4) 0 var(--space-2) 0;\\n    text-align: center;\\n  }\\n\\n  .instructions-description {\\n    font-size: var(--text-sm);\\n    color: var(--color-gray-600);\\n    margin: 0;\\n    text-align: center;\\n  }\\n\\n  .status-text {\\n    font-size: var(--text-lg);\\n    font-weight: 600;\\n    color: var(--color-gray-900);\\n    margin: var(--space-6) 0;\\n    text-align: center;\\n  }\\n\\n  .status-text.voice-instruction {\\n    color: #2563eb;\\n    font-size: var(--text-xl);\\n    font-weight: 700;\\n  }\\n\\n  .ready-title {\\n    font-size: var(--text-xl);\\n    font-weight: 600;\\n    color: #2563eb;\\n    margin: var(--space-4) 0 var(--space-2) 0;\\n    text-align: center;\\n  }\\n\\n  .ready-description {\\n    font-size: var(--text-sm);\\n    color: var(--color-gray-600);\\n    margin: 0 0 var(--space-6) 0;\\n    text-align: center;\\n  }\\n\\n  .mic-test-button-area,\\n  .training-start-button-area {\\n    margin-top: var(--space-6);\\n    display: flex;\\n    justify-content: center;\\n  }\\n\\n  .mic-test-button {\\n    max-width: 300px;\\n    width: 100%;\\n    padding: 12px 16px;\\n    border: none;\\n    border-radius: 8px;\\n    font-size: 14px;\\n    font-weight: 500;\\n    cursor: pointer;\\n    transition: background-color 0.2s ease-in-out;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    gap: 8px;\\n  }\\n\\n  .mic-test-button.start {\\n    background-color: #2563eb;\\n    color: white;\\n  }\\n\\n  .mic-test-button.start:hover {\\n    background-color: #1d4ed8;\\n  }\\n\\n  .mic-test-button.preparing {\\n    background-color: #f59e0b;\\n    color: white;\\n    cursor: not-allowed;\\n  }\\n\\n  .mic-test-button.confirming {\\n    background-color: #8b5cf6;\\n    color: white;\\n    cursor: not-allowed;\\n  }\\n\\n  .mic-test-button.retry {\\n    background-color: #dc2626;\\n    color: white;\\n  }\\n\\n  .mic-test-button.retry:hover {\\n    background-color: #b91c1c;\\n  }\\n\\n  .training-start-button {\\n    max-width: 300px;\\n    width: 100%;\\n    padding: 12px 16px;\\n    border: none;\\n    border-radius: 8px;\\n    font-size: 14px;\\n    font-weight: 500;\\n    cursor: pointer;\\n    transition: background-color 0.2s ease-in-out;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    gap: 8px;\\n    background-color: #059669;\\n    color: white;\\n  }\\n\\n  .training-start-button.enabled:hover {\\n    background-color: #047857;\\n  }\\n\\n  .mic-status-granted {\\n    margin-bottom: var(--space-4);\\n    text-align: center;\\n  }\\n\\n  .status-indicator.success {\\n    background-color: #d1fae5;\\n    color: #065f46;\\n    border: 1px solid #34d399;\\n  }\\n\\n  .mic-test-content {\\n    text-align: center;\\n  }\\n\\n  .mic-status {\\n    margin-bottom: var(--space-6);\\n    display: flex;\\n    flex-direction: column;\\n    gap: var(--space-2);\\n  }\\n\\n  .status-indicator {\\n    padding: var(--space-3);\\n    border-radius: 8px;\\n    font-weight: 600;\\n    font-size: var(--text-sm);\\n  }\\n\\n  .status-indicator.pending {\\n    background-color: #fef3c7;\\n    color: #92400e;\\n    border: 1px solid #fcd34d;\\n  }\\n\\n\\n  .status-indicator.error {\\n    background-color: #fee2e2;\\n    color: #991b1b;\\n    border: 1px solid #fca5a5;\\n  }\\n\\n  .start-button,\\n  .retry-button {\\n    max-width: 300px;\\n    width: 100%;\\n    margin: 0 auto;\\n    padding: 12px 16px;\\n    background-color: #2563eb;\\n    color: white;\\n    border: none;\\n    border-radius: 8px;\\n    font-size: 14px;\\n    font-weight: 500;\\n    cursor: pointer;\\n    transition: background-color 0.2s ease-in-out;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    gap: 8px;\\n  }\\n\\n  .start-button:hover,\\n  .retry-button:hover {\\n    background-color: #1d4ed8;\\n  }\\n\\n  .training-button {\\n    max-width: 300px;\\n    width: 100%;\\n    margin: 0 auto;\\n    padding: 12px 16px;\\n    border: none;\\n    border-radius: 8px;\\n    font-size: 14px;\\n    font-weight: 500;\\n    cursor: pointer;\\n    transition: background-color 0.2s ease-in-out;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    gap: 8px;\\n  }\\n\\n  .training-button.enabled {\\n    background-color: #059669;\\n    color: white;\\n  }\\n\\n  .training-button.enabled:hover {\\n    background-color: #047857;\\n  }\\n\\n  .training-button.disabled {\\n    background-color: #f3f4f6;\\n    color: #9ca3af;\\n    cursor: not-allowed;\\n  }\\n\\n  .guidance-text {\\n    font-size: var(--text-sm);\\n    color: #2563eb;\\n    font-weight: 600;\\n    margin-bottom: var(--space-2);\\n    text-align: center;\\n  }\\n\\n  /* Èü≥ÈáèË™øÊï¥Ê©üËÉΩ„ÅÆ„Çπ„Çø„Ç§„É´ */\\n  .device-info {\\n    text-align: center;\\n    margin-bottom: var(--space-4);\\n  }\\n\\n  .device-label {\\n    background-color: #dbeafe;\\n    color: #1e40af;\\n    padding: 4px 12px;\\n    border-radius: 16px;\\n    font-size: var(--text-sm);\\n    font-weight: 500;\\n  }\\n\\n  .volume-controls {\\n    background-color: #f8fafc;\\n    border: 1px solid #e2e8f0;\\n    border-radius: 8px;\\n    padding: var(--space-4);\\n    margin: var(--space-4) 0;\\n  }\\n\\n  .volume-control-section {\\n    margin-bottom: var(--space-4);\\n  }\\n\\n  .volume-control-section:last-child {\\n    margin-bottom: 0;\\n  }\\n\\n  .volume-label {\\n    display: block;\\n    font-size: var(--text-sm);\\n    font-weight: 600;\\n    color: #374151;\\n    margin-bottom: var(--space-2);\\n    text-align: center;\\n  }\\n\\n  .volume-slider-container {\\n    display: flex;\\n    align-items: center;\\n    gap: var(--space-2);\\n    margin-bottom: var(--space-3);\\n  }\\n\\n  .slider-min,\\n  .slider-max {\\n    font-size: var(--text-xs);\\n    color: #6b7280;\\n    min-width: 32px;\\n    text-align: center;\\n  }\\n\\n  .volume-slider {\\n    flex: 1;\\n    -webkit-appearance: none;\\n    appearance: none;\\n    height: 6px;\\n    background: #e5e7eb;\\n    border-radius: 3px;\\n    outline: none;\\n  }\\n\\n  .volume-slider::-webkit-slider-thumb {\\n    -webkit-appearance: none;\\n    appearance: none;\\n    width: 20px;\\n    height: 20px;\\n    background: #3b82f6;\\n    border-radius: 50%;\\n    cursor: pointer;\\n    box-shadow: 0 2px 4px rgba(0,0,0,0.2);\\n  }\\n\\n  .volume-slider::-moz-range-thumb {\\n    width: 20px;\\n    height: 20px;\\n    background: #3b82f6;\\n    border-radius: 50%;\\n    cursor: pointer;\\n    border: none;\\n    box-shadow: 0 2px 4px rgba(0,0,0,0.2);\\n  }\\n\\n  .base-tone-test-button {\\n    width: 100%;\\n    padding: var(--space-2) var(--space-4);\\n    background-color: #059669;\\n    color: white;\\n    border: none;\\n    border-radius: 6px;\\n    font-size: var(--text-sm);\\n    font-weight: 500;\\n    cursor: pointer;\\n    transition: background-color 0.2s;\\n  }\\n\\n  .base-tone-test-button:hover:not(:disabled) {\\n    background-color: #047857;\\n  }\\n\\n  .base-tone-test-button:disabled {\\n    background-color: #9ca3af;\\n    cursor: not-allowed;\\n  }\\n\\n  .ready-title {\\n    color: #059669;\\n    font-size: var(--text-lg);\\n    font-weight: 600;\\n    text-align: center;\\n    margin-bottom: var(--space-2);\\n  }\\n\\n  .ready-description {\\n    color: #6b7280;\\n    text-align: center;\\n    margin-bottom: var(--space-4);\\n  }\\n\\n  @media (min-width: 768px) {\\n    .mic-test-header {\\n      flex-direction: row;\\n      text-align: left;\\n    }\\n  }\\n\\n  /* „Ç´„Éº„Éâ„Çπ„Çø„Ç§„É´Ôºàshadcn/uiÈ¢®Ôºâ */\\n  :global(.main-card) {\\n    border: 1px solid hsl(214.3 31.8% 91.4%) !important;\\n    background: hsl(0 0% 100%) !important;\\n    border-radius: 8px !important;\\n    box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px 0 rgb(0 0 0 / 0.06) !important;\\n    margin-bottom: 1.5rem;\\n  }\\n</style>"],"names":[],"mappings":"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"}`
};
const Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let $$unsubscribe_page;
  $$unsubscribe_page = subscribe(page, (value) => value);
  let micPermission = "initial";
  let currentVolume = 0;
  let currentFrequency = 0;
  let detectedNote = "„Éº„Éº";
  let pitchDetectorComponent = null;
  $$result.css.add(css);
  let $$settled;
  let $$rendered;
  let previous_head = $$result.head;
  do {
    $$settled = true;
    $$result.head = previous_head;
    $$rendered = `${$$result.head += `<!-- HEAD_svelte-8st1fo_START -->${$$result.title = `<title>„Éû„Ç§„ÇØ„ÉÜ„Çπ„Éà - Áõ∏ÂØæÈü≥ÊÑü„Éà„É¨„Éº„Éã„É≥„Ç∞</title>`, ""}<!-- HEAD_svelte-8st1fo_END -->`, ""} ${validate_component(PageLayout, "PageLayout").$$render($$result, { showBackButton: true }, {}, {
      default: () => {
        return `<div class="microphone-test svelte-1ctbylb"> <div class="header svelte-1ctbylb" data-svelte-h="svelte-4qcd63"><div class="mic-test-header svelte-1ctbylb"><div class="mic-icon svelte-1ctbylb"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" x2="12" y1="19" y2="22"></line><line x1="8" x2="16" y1="22" y2="22"></line></svg></div> <div><h1 class="mic-test-title svelte-1ctbylb">„Éû„Ç§„ÇØ„ÉÜ„Çπ„Éà</h1> <p class="mic-test-description svelte-1ctbylb">Èü≥ÊÑü„Éà„É¨„Éº„Éã„É≥„Ç∞„ÇíÂßã„ÇÅ„ÇãÂâç„Å´„ÄÅ„Éû„Ç§„ÇØ„ÅÆÂãï‰Ωú„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åô</p></div></div></div>  <div class="training-mode-info svelte-1ctbylb">${validate_component(Card, "Card").$$render($$result, { variant: "default", padding: "lg" }, {}, {
          default: () => {
            return `<div class="training-mode-content svelte-1ctbylb">${` <h3 class="instructions-title svelte-1ctbylb" data-svelte-h="svelte-gfi16f">„Éû„Ç§„ÇØ„ÅÆ„ÉÜ„Çπ„Éà„ÇíÈñãÂßã„Åó„Åæ„Åô</h3> <p class="instructions-description svelte-1ctbylb" data-svelte-h="svelte-1w19y1h">„Éû„Ç§„ÇØ„ÉÜ„Çπ„ÉàÈñãÂßã„Éú„Çø„É≥„ÇíÊäº„Åó„Å¶„Éû„Ç§„ÇØ„ÅÆ‰ΩøÁî®„ÇíË®±ÂèØ„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p> ${`${`${`<div class="mic-test-button-area svelte-1ctbylb"><button class="mic-test-button start svelte-1ctbylb" data-svelte-h="svelte-caex95">„Éû„Ç§„ÇØ„ÉÜ„Çπ„Éà„ÇíÈñãÂßã</button></div>`}`}`}`}</div>`;
          }
        })}</div>  ${validate_component(PitchDetectionDisplay, "PitchDetectionDisplay").$$render(
          $$result,
          {
            frequency: currentFrequency,
            note: detectedNote,
            volume: currentVolume,
            isMuted: micPermission !== "granted",
            muteMessage: "„Éû„Ç§„ÇØË®±ÂèØÂæå„Å´ÈñãÂßã"
          },
          {},
          {}
        )}  <div style="display: none;">${validate_component(PitchDetector_1, "PitchDetector").$$render(
          $$result,
          {
            isActive: micPermission === "granted",
            className: "pitch-detector-content",
            debugMode: false,
            this: pitchDetectorComponent
          },
          {
            this: ($$value) => {
              pitchDetectorComponent = $$value;
              $$settled = false;
            }
          },
          {}
        )}</div></div>`;
      }
    })}`;
  } while (!$$settled);
  $$unsubscribe_page();
  return $$rendered;
});
export {
  Page as default
};
