# 開発ルール・ガイドライン

## Git ブランチ管理ルール

### 🚫 禁止事項

1. **メインブランチの直接修正を絶対禁止**
   - `main` ブランチで直接コード修正・コミットしてはいけない
   - どんなに小さな修正でも必ず作業ブランチを使用する
   - 緊急修正でも例外なし

2. **無断マージの禁止**
   - ユーザーの明示的な許可なしにメインブランチにマージしない
   - マージ前に必ず確認を取る

### ✅ 必須手順

1. **作業開始時**
   ```bash
   git checkout -b [feature-name]
   ```
   - 任意の修正・機能追加前に必ず新しいブランチを作成
   - ブランチ名は作業内容を明確に表現する

2. **作業中**
   - 作業ブランチで開発・修正・テストを実行
   - 適切なコミットメッセージで変更履歴を記録

3. **完了時**
   - ユーザーに作業完了を報告
   - マージの許可を明示的に求める
   - 許可後にのみメインブランチにマージ

### 📋 ブランチ命名規則

- **機能追加**: `feature-[機能名]`
- **バグ修正**: `fix-[問題内容]`
- **UI改善**: `ui-[改善内容]`
- **パフォーマンス**: `perf-[最適化内容]`
- **リファクタリング**: `refactor-[対象範囲]`
- **テスト**: `test-[テスト内容]`

### 🔄 標準ワークフロー

1. **ブランチ作成**
   ```bash
   git checkout main
   git pull origin main
   git checkout -b feature-new-function
   ```

2. **開発・テスト**
   ```bash
   # 修正作業
   git add .
   git commit -m "適切なコミットメッセージ"
   ```

3. **マージ申請**
   - ユーザーに完了報告
   - マージ許可の確認

4. **マージ実行**（許可後のみ）
   ```bash
   git checkout main
   git merge feature-new-function
   git branch -d feature-new-function
   ```

## コミットメッセージ規則

### 📝 形式
```
[種類] 簡潔な変更内容

- 詳細な変更点1
- 詳細な変更点2

🤖 Generated with [Claude Code](https://claude.ai/code)

Co-Authored-By: Claude <noreply@anthropic.com>
```

### 🏷️ 種類の分類
- **feat**: 新機能追加
- **fix**: バグ修正
- **docs**: ドキュメント変更
- **style**: コードスタイル修正
- **refactor**: リファクタリング
- **test**: テスト追加・修正
- **chore**: その他の変更

## バージョン管理

### 📋 バージョニング規則
- **メジャー.マイナー.パッチ** (例: v1.0.1)
- **コードネーム** 付与 (例: Mobile-Fix)

### 📁 バージョン情報管理
- `VERSION.json` - 一元的なバージョン情報
- 全HTMLファイルに表示
- JavaScriptで初期化ログに出力

## 違反時の対処

### ⚠️ ルール違反が発生した場合

1. **即座に作業停止**
2. **状況確認と報告**
3. **適切なブランチへの移行**
4. **必要に応じてリセット実行**
5. **正しい手順で再実装**

### 🔧 緊急時リカバリ手順
```bash
# 誤ってメインで作業した場合
git checkout -b emergency-fix
git checkout main
git reset --hard HEAD~1  # 最新コミットを取り消し
git checkout emergency-fix
# 正しいブランチで再作業
```

## 品質保証

### ✅ マージ前チェックリスト
- [ ] 適切なブランチで開発完了
- [ ] 機能テスト完了
- [ ] エラーなしを確認
- [ ] ユーザーからのマージ許可取得
- [ ] コミットメッセージ適切
- [ ] バージョン情報更新（必要に応じて）

---

**最終更新**: 2025-07-11  
**適用開始**: 即日  
**対象**: 全開発作業