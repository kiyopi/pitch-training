# GitHub Pagesç”¨ã®é™çš„ã‚µã‚¤ãƒˆãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ï¼ˆæœ€é©åŒ–ç‰ˆï¼‰
name: Deploy to GitHub Pages

on:
  push:
    branches: 
      - main
      - "deployment-*"     # ãƒ‡ãƒ—ãƒ­ã‚¤å°‚ç”¨ãƒ–ãƒ©ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³
      - "feature-*"        # æ©Ÿèƒ½é–‹ç™ºãƒ–ãƒ©ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³
      - "random-training-*" # ãƒ©ãƒ³ãƒ€ãƒ ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–¢é€£ãƒ–ãƒ©ãƒ³ãƒ
  workflow_dispatch: # æ‰‹å‹•å®Ÿè¡Œå¯èƒ½

permissions:
  contents: read
  pages: write
  id-token: write

concurrency:
  group: "pages"
  cancel-in-progress: true  # é‡è¤‡å®Ÿè¡Œã‚’é˜²æ­¢

jobs:
  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        
      - name: ãƒ‡ãƒ—ãƒ­ã‚¤æƒ…å ±è¡¨ç¤º
        run: |
          echo "ğŸš€ GitHub Pages ãƒ‡ãƒ—ãƒ­ã‚¤é–‹å§‹"
          echo "ãƒ–ãƒ©ãƒ³ãƒ: ${{ github.ref_name }}"
          echo "ã‚³ãƒŸãƒƒãƒˆ: ${{ github.sha }}"
          echo "ğŸ“ HTMLãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§:"
          find . -name "*.html" -type f | head -10
        
      - name: Setup Pages
        uses: actions/configure-pages@v4
        
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: '.'
          
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
        
      - name: ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†é€šçŸ¥
        run: |
          echo "âœ… ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†"
          echo "ğŸ“± ç¢ºèªURL:"
          echo "- ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸: https://kiyopi.github.io/pitch-training/"
          echo "- å®Ÿè£…ç‰ˆ: https://kiyopi.github.io/pitch-training/random-training-implementation.html"
          echo "- ãƒ•ãƒ«ã‚¹ã‚±ãƒ¼ãƒ«ç‰ˆ: https://kiyopi.github.io/pitch-training/full-scale-training.html"